(window.webpackJsonp=window.webpackJsonp||[]).push([["245j"],{thEZ:function(t,e,i){"use strict";var o=i("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=p(i("q1tI")),r=p(i("i8i4")),n=i("mR6N"),h=i("JimW"),a=o(i("hKI/")),l=i("8SBg");function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(c=function(t){return t?i:e})(t)}function p(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var i=c(e);if(i&&i.has(t))return i.get(t);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var n=s?Object.getOwnPropertyDescriptor(t,r):null;n&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=t[r]}return o.default=t,i&&i.set(t,o),o}const u="normal",d="sticky",f="stuck",m="nativeSticky";class g extends s.Component{constructor(...t){super(...t),this.state={behavior:u,height:"auto"},this.measure=()=>{if(!this._mounted)return;const{scrollOffset:t}=this.props,e={behavior:this.state.behavior,bottomBound:(0,l.getOffsetBottom)(this._wrapper)-t,documentHeight:(0,l.getDocumentHeight)(),height:this.state.height,topBound:(0,l.getOffsetTop)(this._wrapper)-t};"auto"===this.state.height&&(e.contentHeight=this._affixable.getBoundingClientRect().height);const i=this._wrapper.getBoundingClientRect().height;0===this.state.height&&i>0&&(e.contentHeight=i),this.setState(e,(()=>this.onScroll()))},this.onScroll=()=>{if(!this._mounted)return;const{scrollOffset:t}=this.props,{bottomBound:e,contentHeight:i,topBound:o}=this.state;if(null==e||null==o||null==i)return;const s={},r=window.innerHeight,n=window.pageYOffset,h=e-(this.state.behavior===u?(0,l.getOffsetTop)(this._affixable):n),a=Math.min(Math.max(0,e-n),r-t)-Math.min(Math.max(0,o-n),r-t),c=Math.min(i,this.props.minHeight-t);n<o?(s.behavior=u,s.height=this.props.stretchToFill?a:Math.min(a,i)):h>c?(s.behavior=d,s.height=this.props.stretchToFill?a:Math.min(a,i)):(s.behavior=f,s.height=c),this._nativeStickyBehaviorEnabled&&(s.behavior=m),this.setState(s)},this.checkForDocumentHeightChange=()=>{const{documentHeight:t}=this.state;null!=t&&(0,l.getDocumentHeight)()!==t&&this.measure()}}componentDidMount(){this._mounted=!0;try{this._nativeStickyBehaviorEnabled=CSS.supports("position","sticky")||CSS.supports("position","-webkit-sticky")||CSS.supports("position","-moz-sticky")||CSS.supports("position","-ms-sticky")||CSS.supports("position","-o-sticky")}catch(t){this._nativeStickyBehaviorEnabled=!1}setTimeout((()=>this.measure()),0),this.throttledMeasure=(0,a.default)((()=>this.measure()),1e3),this.throttledScroll=(0,a.default)((()=>this.onScroll()),20),this.throttledHeightCheck=(0,a.default)((()=>this.checkForDocumentHeightChange()),1e3),window.addEventListener("resize",this.throttledMeasure),window.addEventListener("scroll",this.throttledScroll),window.addEventListener("scroll",this.throttledHeightCheck)}shouldComponentUpdate(t,e){return this.props.children!==t.children||this.props.header!==t.header||this.props.style!==t.style||this.props.scrollOffset!==t.scrollOffset||this.state.behavior!==e.behavior||this.state.height!==e.height}componentWillUnmount(){this._mounted=!1,window.removeEventListener("resize",this.throttledMeasure),window.removeEventListener("scroll",this.throttledScroll),window.removeEventListener("scroll",this.throttledHeightCheck)}render(){const{children:t,header:e,scrollOffset:i,style:o}=this.props,{behavior:n,height:a}=this.state,l={height:a};return n!==m&&n!==d||(l.top=i),s.createElement(h.View,{style:[w.wrapper,o],ref:t=>this._wrapper=r.findDOMNode(t)},s.createElement(h.View,{style:[w.affixable,n===u&&w.normal,n===d&&w.sticky,n===f&&w.stuck,n===m&&w.nativeSticky,l],ref:t=>this._affixable=r.findDOMNode(t)},s.createElement(h.View,{style:w.fixed},e),t))}}e.default=g,g.defaultProps={scrollOffset:0};const w=n.StyleSheet.create({wrapper:{position:"relative"},affixable:{display:"flex",flexDirection:"column",overflow:"hidden",willChange:"transform"},normal:{position:"absolute",top:0,width:"100%"},sticky:{position:"fixed"},stuck:{position:"absolute",bottom:0,width:"100%"},nativeSticky:{position:"-webkit-sticky !important; position: sticky",width:"100%"},fixed:{flex:"0 0 auto"}})}}]);
//# sourceMappingURL=../../sourcemaps/en/245j.352b3b588f2fd9a298f0.js.map