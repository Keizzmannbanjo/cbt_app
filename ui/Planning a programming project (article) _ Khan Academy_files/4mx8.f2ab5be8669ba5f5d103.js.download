(window.webpackJsonp=window.webpackJsonp||[]).push([["4mx8"],{"++J6":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("APgo")),a=r(n("Taw3")),i=r(n("Pwnf")),l=n("mR6N");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class c extends s.Component{render(){const{icon:e,onClick:t,title:n}=this.props;return s.createElement(a.default,{className:"section-control-button simple-button simple-button--small ",onClick:e=>{e.preventDefault(),t()},role:"button",hideDefaultFocusRing:!0,"aria-label":n,style:p.button},(({hovered:t,focused:n,pressed:r})=>s.createElement(o.default,e)))}}t.default=c;const p=l.StyleSheet.create({button:{backgroundColor:i.default.gold,margin:2,paddingRight:10,paddingLeft:10,paddingBottom:2}})},"+AYZ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),s=n("mR6N"),o=n("4PhQ"),a=n("ytpR"),i=n("WxXo");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}class u extends r.PureComponent{render(){const{onClick:e,onMouseEnter:t,onMouseLeave:n,side:l}=this.props.tooltipProps,{backgroundColor:u}=(0,i.getTooltipColors)(this.props.tooltipProps);let p,d,h;if("top"===l)p=["0,0",`${a.arrowWidth/2},${a.arrowHeight}`,`${a.arrowWidth},0`],d=a.arrowWidth,h=a.arrowHeight;else if("right"===l)p=[`${a.arrowHeight},0`,"0,"+a.arrowWidth/2,`${a.arrowHeight},${a.arrowWidth}`],d=a.arrowHeight,h=a.arrowWidth;else if("bottom"===l)p=[`0,${a.arrowHeight}`,a.arrowWidth/2+",0",`${a.arrowWidth},${a.arrowHeight}`],d=a.arrowWidth,h=a.arrowHeight;else{if("left"!==l)throw new o.KAError(`unexpected side ${l}`,o.Errors.Internal);p=["0,0",`${a.arrowHeight},${a.arrowWidth/2}`,`0,${a.arrowWidth}`],d=a.arrowHeight,h=a.arrowWidth}return r.createElement("svg",{width:d,height:h,className:(0,s.css)(c.tooltipArrow)},r.createElement("filter",{id:`tooltip-dropshadow-${l}`,height:"150%"},r.createElement("feOffset",{dx:a.dropShadowXOffset,dy:a.dropShadowYOffset,result:"offsetblur"}),r.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:a.dropShadowRadius/2}),r.createElement("feComponentTransfer",null,r.createElement("feFuncA",{type:"linear",slope:a.dropShadowOpacity})),r.createElement("feMerge",null,r.createElement("feMergeNode",null),r.createElement("feMergeNode",{in:"SourceGraphic"}))),r.createElement("polyline",{fill:u,stroke:u,points:p.join(" "),className:(0,s.css)(e&&c.tooltipArrowShapeWithOnClick),onClick:e,onMouseEnter:t,onMouseLeave:n}),r.createElement("polyline",{fill:u,points:p.join(" "),stroke:"rgba(0, 0, 0, 0.1)",filter:`url(#tooltip-dropshadow-${l})`}))}}t.default=u;const c=s.StyleSheet.create({tooltipArrow:{display:"block",userSelect:"none"},tooltipArrowShapeWithOnClick:{pointerEvents:"auto",cursor:"pointer"}})},"+Mvj":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"heading-level-1",severity:s.default.Severity.WARNING,selector:"heading",lint:function(e,t,n,r){if(1===n[0].level)return"Don't use level-1 headings:\nBegin headings with two or more # characters."}});t.default=o},"+jAD":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.propTypes=t.change=void 0;var s=r(n("17x9")),o=r(n("5pch")),a=n("4PhQ"),i=r(n("Wy19"));const l='Usage:\n  this.change({propName: 5}, callback);\n  this.change("propName", 5, callback);\n  this.change("propName")',u=function(e,t,n){const r=o.default.omit(e.props,i.default),s=o.default.extend(r,t);e.props.onChange(s,n)},c=function e(t,n,r,s){if(void 0===r)return o.default.partial(e,t,n);const a={};a[n]=r,u(t,a,s)};t.change=function(e,t,n){if(o.default.isObject(e)&&void 0===n)return u(this,e,n=t);if("string"==typeof e)return c(this,e,t,n);throw new a.KAError("Invalid types sent to this.change(): "+o.default.toArray(arguments).join()+"\n"+l,a.Errors.Internal)};const p={onChange:s.default.func.isRequired};t.propTypes=p},"+lle":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=p(n("q1tI")),a=r(n("17x9")),i=r(n("wk+a")),l=r(n("5pch")),u=p(n("HEOz"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const d="start-ref-",h="end-ref-",f={display:"inline-block",width:0,visibility:"hidden"},g={display:"inline",whiteSpace:"nowrap"},m={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},v={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"};class y extends o.Component{constructor(...e){super(...e),this.getRefContent=()=>this.props.refContent}render(){return o.createElement("span",{style:f},u.doNotTranslate("_"))}}y.propTypes={refContent:a.default.node.isRequired};class b extends o.Component{render(){return o.createElement("span",{style:f},u.doNotTranslate("_"))}}const w={newline:i.default.defaultRules.newline,paragraph:i.default.defaultRules.paragraph,escape:i.default.defaultRules.escape,passageFootnote:{order:i.default.defaultRules.escape.order+.1,match:i.default.inlineRegex(/^\^/),parse:(e,t,n)=>{const r=n.lastFootnote.id+1,s={id:r,text:1===r?"*":""+r};return"*"===n.lastFootnote.text&&(n.lastFootnote.text=""+n.lastFootnote.id),n.lastFootnote=s,s},react:(e,t,n)=>o.createElement("sup",{key:n.key},e.text)},refStart:{order:i.default.defaultRules.escape.order+.2,match:function(e,t){const n=/^\{\{/.exec(e);if(n){let t=2,r=0;for(;t<e.length;){const n=e.slice(t,t+2);if("{{"===n)r++,t++;else if("}}"===n){if(!(r>0))break;r--,t++}t++}const s=e.slice(2,t);return[n[0],s]}return null},parse:(e,t,n)=>{if(!n.useRefs)return{ref:null,refContent:null};const r=n.lastRef+1;n.lastRef=r,n.currentRef.push(r);return{ref:r,refContent:t("(“"+e[1]+"”)\n\n",l.default.defaults({useRefs:!1},x))}},react:(e,t,n)=>{if(null==e.ref)return null;const r=t(e.refContent,{});return o.createElement(y,{ref:d+e.ref,key:d+e.ref,refContent:r})}},refEnd:{order:i.default.defaultRules.escape.order+.3,match:i.default.inlineRegex(/^\}\}/),parse:(e,t,n)=>{if(!n.useRefs)return{ref:null};return{ref:n.currentRef.pop()||null}},react:(e,t,n)=>null!=e.ref?o.createElement(b,{ref:h+e.ref,key:h+e.ref}):null},squareLabel:{order:i.default.defaultRules.escape.order+.4,match:i.default.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(e,t,n)=>(n.firstQuestionRef||(n.firstQuestionRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,n)=>[o.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:g,"aria-hidden":"true"},o.createElement("span",{style:m},e.content)),o.createElement("span",{key:"alt-text",className:"perseus-sr-only"},u.$_("[Marker for question %(number)s]",{number:e.content})),e.space?" ":null]},circleLabel:{order:i.default.defaultRules.escape.order+.5,match:i.default.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(e,t,n)=>({content:e[1],space:e[2].length>0}),react:(e,t,n)=>[o.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:g,"aria-hidden":!0},o.createElement("span",{style:v},e.content)),o.createElement("span",{key:"alt-text",className:"perseus-sr-only"},u.$_("[Circle marker %(number)s]",{number:e.content})),e.space?" ":null]},squareBracketRef:{order:i.default.defaultRules.escape.order+.6,match:i.default.inlineRegex(/^\[(\d+)\]( *)/),parse:(e,t,n)=>(n.firstSentenceRef||(n.firstSentenceRef=e[1]),{content:e[1],space:e[2].length>0}),react:(e,t,n)=>[o.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",e.content,"]"),o.createElement("span",{key:"alt-text",className:"perseus-sr-only"},u.$_("[Sentence %(number)s]",{number:e.content})),e.space?" ":null]},highlight:{order:i.default.defaultRules.escape.order+.7,match:i.default.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>[o.createElement("span",{key:0,className:"perseus-highlight"},e.content)]},reviewHighlight:{order:i.default.defaultRules.escape.order+.7,match:i.default.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>[o.createElement("span",{key:0,className:"perseus-review-highlight"},e.content)]},strong:i.default.defaultRules.strong,u:i.default.defaultRules.u,em:i.default.defaultRules.em,del:i.default.defaultRules.del,text:(0,s.default)({},i.default.defaultRules.text,{react:(e,t,n)=>o.createElement("span",{key:n.key},e.content)})},x={currentRef:[],useRefs:!0,lastRef:0,lastFootnote:{id:0,text:""}},E=i.default.parserFor(w);var C={parse:(e,t)=>{t=t||{};return E(e+"\n\n",l.default.extend(t,x))},output:i.default.reactFor(i.default.ruleOutput(w,"react")),START_REF_PREFIX:d,END_REF_PREFIX:h,_rulesForTesting:w};t.default=C},"+vEw":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("eAf/"),o=r(n("5pch")),a=r(n("e1hl")),i=r(n("p8fL")),l=r(n("vNny")),u=r(n("yfnS")),c=r(n("NT9k"));const p=i.default.assert,d=i.default.normalizeOptions,h=o.default.keys(a.default),f={points:null,angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],closed:!0,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,labelStyle:null},g={added:!1,hasMoved:!1,visibleShape:null,mouseTarget:null},m=function(e,t,n){p(null!=e),p(null!=n),o.default.extend(this,{graphie:e,movable:t,state:{id:o.default.uniqueId("movablePolygon")}}),this.modify(o.default.extend({},g,n))};o.default.extend(m,a.default),i.default.createGettersFor(m,o.default.extend({},f,g)),i.default.addMovableHelperMethodsTo(m),o.default.extend(m.prototype,{cloneState:function(){return o.default.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return o.default.extend({id:this.state.id},d(h,l.default.pluck(a.default,"standard")),f)},modify:function(e){this.update(o.default.extend(this._createDefaultState(),e))},update:function(e){const t=this,n=t.graphie,r=o.default.extend(t.state,d(h,e)),a=r.static?u.default.DYNAMIC:u.default.INTERACTIVE;r.normalStyle=o.default.extend({},r.normalStyle,{"stroke-width":2,"fill-opacity":0,fill:a,stroke:a},e.normalStyle),r.highlightStyle=o.default.extend({},{stroke:u.default.INTERACTING,"stroke-width":2,fill:u.default.INTERACTING,"fill-opacity":.05},r.highlightStyle),r.labelStyle=o.default.extend({},{stroke:u.default.DYNAMIC,"stroke-width":1,color:u.default.DYNAMIC},r.labelStyle),r.static||r.mouseTarget||(r.mouseTarget=n.mouselayer.path(this.path()),r.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"})),t.movable.modify(o.default.extend({},r,{modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){const r=s.vector.subtract(e,n);t._totalDelta=s.vector.add(t._totalDelta,r);let o=s.vector.add(t._initialRefCoord,t._totalDelta);o=t._applyConstraints(o,t._prevRefCoord),!1!==o&&(t._fireEvent(t.state.onMove,o,t._prevRefCoord),t._prevRefCoord=o)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),o.default.invoke(r.points,"listen","onMove",r.id,t.draw.bind(t)),r.added||(t.prevState={},t._fireEvent(r.add,t.cloneState(),t.prevState),r.added=!0,t.prevState=t.cloneState()),t._fireEvent(r.modify,t.cloneState(),t.prevState)},path:function(e){const t=this.graphie;e=e||this.state;let n=o.default.map(e.points,(function(e){return t.scalePoint(e.coord())}));return e.closed?n.push(!0):n=n.concat(o.default.clone(n).reverse()),c.default.unscaledSvgPath(n)},coords:function(){return o.default.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.points&&o.default.invoke(this.state.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){if(null==this.points||0===this.points.length)return;const e=this.coord(0),t=this._applyConstraints(e,e);!1!==t&&this._fireEvent(this.state.onMove,t,e)},normalStyle:function(){return o.default.clone(this.state.normalStyle)},highlightStyle:function(){return o.default.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});var v=m;t.default=v},"/4Qb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconUndo=t.iconTryAgain=t.iconTrash=t.iconTablet=t.iconStar=t.iconRemove=t.iconPlus=t.iconOk=t.iconMobilePhone=t.iconMinus=t.iconGear=t.iconExclamationSign=t.iconDropdownArrow=t.iconDesktop=t.iconCircleThin=t.iconCircleArrowUp=t.iconCircleArrowDown=t.iconCircle=t.iconChevronRight=t.iconChevronDown=t.iconCheckMedium=t.iconCheck=void 0;const r={path:"M8.70710678,12.2928932 C8.31658249,11.9023689 7.68341751,11.9023689 7.29289322,12.2928932 C6.90236893,12.6834175 6.90236893,13.3165825 7.29289322,13.7071068 L9.82842712,16.2426407 C10.2207367,16.6349502 10.8574274,16.6328935 11.2471942,16.2380576 L16.7116603,10.7025237 C17.0996535,10.3094846 17.0955629,9.67633279 16.7025237,9.28833966 C16.3094846,8.90034653 15.6763328,8.90443714 15.2883397,9.29747629 L10.5309507,14.1167372 L8.70710678,12.2928932 Z",width:24,height:24};t.iconCheck=r;t.iconCheckMedium={path:"M6.072 10.4l6.175-7.058a1 1 0 1 1 1.506 1.317L6.769 12.64a1 1 0 0 1-1.55-.054L2.203 8.604a1 1 0 1 1 1.594-1.208L6.072 10.4z",width:16,height:16};t.iconChevronDown={path:"M99.669 13.048q0 3.36-2.352 5.712l-41.664 41.664q-2.408 2.408-5.88 2.408t-5.712-2.408l-41.664-41.664q-2.408-2.24-2.408-5.712t2.408-5.88l4.76-4.816q2.52-2.352 5.88-2.352t5.656 2.352l31.136 31.136 31.08-31.136q2.352-2.352 5.712-2.352t5.88 2.352l4.816 4.816q2.352 2.52 2.352 5.88z",width:100,height:63.034};t.iconChevronRight={path:"M62.808 49.728q0 3.36-2.352 5.88l-41.72 41.664q-2.352 2.408-5.768 2.408t-5.768-2.408l-4.872-4.76q-2.352-2.52-2.352-5.88t2.352-5.712l31.08-31.136-31.08-31.024q-2.352-2.52-2.352-5.88t2.352-5.712l4.872-4.76q2.296-2.408 5.768-2.408t5.768 2.408l41.72 41.664q2.352 2.296 2.352 5.656z",width:63.034,height:100};t.iconCircle={path:"M100.035 50.046q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100};t.iconCircleArrowDown={path:"M50.046 83.676q1.767 0 2.907-1.14l29.526-29.526q1.197-1.197 1.197-2.907t-1.197-2.964l-5.928-5.928q-1.197-1.14-2.964-1.14t-2.907 1.14l-12.312 12.312l0-32.661q0-1.71-1.254-2.964t-2.907-1.254l-8.322 0q-1.71 0-2.964 1.254t-1.254 2.964l0 32.661l-12.312-12.312q-1.197-1.254-2.907-1.254t-2.907 1.254l-5.928 5.928q-1.197 1.197-1.197 2.964t1.197 2.907l29.469 29.526q1.197 1.14 2.964 1.14zm49.989-33.63q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100};t.iconCircleArrowUp={path:"M54.207 83.391q1.653 0 2.907-1.254t1.254-2.907l0-32.718l12.312 12.312q1.254 1.254 2.964 1.254t2.907-1.254l5.928-5.928q1.197-1.197 1.14-2.964 0-1.767-1.14-2.907l-29.526-29.526q-1.197-1.14-2.907-1.14t-2.964 1.14l-29.469 29.526q-1.197 1.254-1.197 2.964t1.197 2.907l5.928 5.928q1.197 1.197 2.907 1.197t2.907-1.197l12.312-12.312l0 32.718q0 1.653 1.254 2.907t2.964 1.254l8.322 0zm45.828-33.345q.057 13.623-6.669 25.137t-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.669 25.137z",width:100,height:100};t.iconCircleThin={path:"M50.046 8.322q-8.493 0-16.188 3.306-15.561 6.669-22.173 22.23-3.363 7.695-3.363 16.188t3.306 16.188 8.949 13.281q5.586 5.586 13.281 8.892t16.188 3.306 16.188-3.306 13.281-8.892 8.892-13.281 3.306-16.188-3.306-16.188-8.892-13.281-13.281-8.949q-7.695-3.306-16.188-3.306zm0 91.713q-13.623 0-25.137-6.726t-18.183-18.183q-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.126q-11.514 6.726-25.08 6.726z",width:100,height:99.944};t.iconDesktop={path:"M94.208 52.119l0-43.746q0-.69-.506-1.15t-1.196-.506l-84.088 0q-.69 0-1.196.506t-.506 1.15l0 43.746q0 .69.506 1.196t1.196.506l84.088 0q.69 0 1.196-.506t.506-1.196zm6.716-43.746l0 57.224q0 3.45-2.484 5.934t-5.934 2.484l-28.566 0q0 3.128 2.53 7.774.828 1.61.828 2.622t-1.012 2.07q-1.012 1.012-2.346.966l-26.91 0q-1.38 0-2.392-1.012t-1.012-2.024q0-1.058 1.656-4.14t1.748-6.256l-28.612 0q-3.45 0-5.934-2.484t-2.484-5.934l0-57.224q0-3.45 2.484-5.934t5.934-2.438l84.088 0q3.45 0 5.98 2.438 2.438 2.484 2.438 5.934z",width:100,height:86.648};t.iconDropdownArrow={path:"M9 9.8c0 .5.7 1.7 1.5 2.8 1.5 1.9 1.5 1.9 3 0C15.7 9.7 15.4 9 12 9c-1.6 0-3 .4-3 .8z",width:24,height:24};t.iconExclamationSign={path:"M58.368 81.225l0-12.369q0-.912-.57-1.539t-1.425-.627l-12.54 0q-.855-.057-1.482.627t-.684 1.539l0 12.369q-.057.855.627 1.482t1.539.684l12.54 0q.855 0 1.425-.627t.57-1.539zm1.026-62.871q0-1.596-2.223-1.71l-14.307 0q-2.109 0-2.223 1.71l1.14 40.47q0 .627.627 1.14t1.539.456l12.084 0q.912-.057 1.539-.513t.684-1.083zm-9.348-18.354q13.566 0 25.08 6.726 11.514 6.669 18.24 18.183t6.726 25.137-6.726 25.137-18.24 18.183-25.08 6.669-25.137-6.726q-11.514-6.726-18.183-18.183-6.726-11.571-6.726-25.137t6.726-25.08 18.24-18.24 25.08-6.669z",width:100,height:99.944};t.iconGear={path:"M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z",width:1792,height:1792};t.iconMobilePhone={path:"M36.04 89.557q0-2.584-1.836-4.42t-4.42-1.836-4.352 1.836q-1.836 1.836-1.836 4.42t1.836 4.352 4.42 1.836q2.652-.068 4.42-1.836t1.768-4.352zm16.184-12.444l0-54.74q0-1.088-.748-1.768t-1.768-.68l-39.78 0q-1.088 0-1.768.748t-.68 1.7l0 54.74q0 1.02.748 1.768t1.7.68l39.78 0q1.02-.068 1.768-.748t.748-1.7zm-14.892-65.892q0-1.224-1.292-1.292l-12.444 0q-1.224.068-1.224 1.292t1.224 1.224l12.444 0q1.292 0 1.292-1.224zm22.372-1.292l0 79.628q0 3.944-2.992 6.936t-7.004 2.992l-39.78 0q-4.012 0-7.004-2.924-2.924-2.924-2.924-7.004l0-79.628q0-4.012 2.924-6.936t7.004-2.992l39.78 0q4.012-.068 7.004 2.924t2.992 7.004z",width:60.013,height:100};t.iconOk={path:"M37.964 76.048q-2.576 0-4.368-1.792l-31.864-31.864q-1.792-1.792-1.792-4.368t1.792-4.368l8.736-8.68q1.792-1.792 4.368-1.792t4.312 1.792l18.816 18.872 42-42.056q1.792-1.792 4.368-1.792t4.312 1.792l8.736 8.736q1.792 1.792 1.792 4.368t-1.792 4.312l-55.048 55.048q-1.792 1.792-4.368 1.792z",width:100,height:76.637};t.iconPlus={path:"M99.758 43.09l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-29.45 0l0 29.45q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-29.45l-29.45 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l29.45 0l0-29.45q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836l0 29.45l29.45 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:100};t.iconRemove={path:"M100.464 80.808q0 3.404-2.368 5.772l-11.47 11.544q-2.368 2.368-5.772 2.368t-5.698-2.368l-24.864-24.864-24.864 24.864q-2.368 2.368-5.772 2.368t-5.772-2.368l-11.47-11.544q-2.368-2.368-2.368-5.772t2.368-5.698l24.864-24.864-24.864-24.864q-2.368-2.368-2.368-5.772t2.368-5.772l11.47-11.47q2.368-2.368 5.772-2.368t5.772 2.368l24.864 24.864 24.864-24.864q2.294-2.368 5.698-2.368t5.772 2.368l11.47 11.47q2.368 2.368 2.368 5.772t-2.368 5.772l-24.864 24.864 24.864 24.864q2.368 2.294 2.368 5.698z",width:100,height:100};t.iconStar={path:"M15.1052249,9.55978547 L22.0028147,9.55978545 C23.6568673,9.55978545 23.9349557,10.3753626 22.6181351,11.3858845 L16.9943688,15.7015366 L19.2518801,22.8294455 C19.7526645,24.4106317 19.0984455,24.8825885 17.769353,23.8673293 L12.0490577,19.4977438 L6.5116497,23.8422153 C5.20921411,24.8640642 4.53299569,24.4067544 5.00266927,22.8160582 L7.10332364,15.7015366 L1.42794544,11.3634306 C0.110226041,10.3562014 0.383967283,9.54239221 2.0409646,9.54574013 L8.9924676,9.55978547 L11.1485117,2.72669438 C11.6458693,1.15043244 12.4548928,1.15900049 12.9494787,2.72669438 L15.1052249,9.55978547 Z",width:24,height:24};t.iconTryAgain={path:"M3.74890556,17.9799506 C2.19251241,16.1970909 1.10103636,13.4971457 1.13090903,11.1491783 C1.17160478,7.95052637 4.01704076,0.865059407 11.7028044,0.865059407 C19.388568,0.865059407 22.3026521,7.35203035 22.3026521,11.5879453 C22.3026521,15.8238603 19.386629,20.5574509 13.6832464,21.7131548 L13.6757539,17.3722171 C17.0812986,16.2190517 18.331158,14.1944123 18.3311578,11.5879451 C18.3311574,8.16554692 15.6664205,5.03476549 11.7028048,5.20494205 C7.73918903,5.37511861 5.59244567,8.66930079 5.59244567,11.1491783 C5.59244567,12.9090077 6.11128139,14.1753512 6.93640437,15.3053215 L8.14052356,14.2949456 C8.98559348,13.5858477 9.6994861,13.9070448 9.73489556,15.0076413 L9.91284941,20.5388014 C9.94832683,21.6415103 9.09967118,22.3514475 8.02194403,22.1254594 L2.60571602,20.9897332 C1.5259204,20.7633114 1.34338662,19.9984207 2.18070755,19.295825 L3.74890556,17.9799506 Z",width:23,height:23};t.iconTablet={path:"M45.322 90.706q0-1.86-1.302-3.224-1.364-1.364-3.224-1.364t-3.224 1.364-1.302 3.224q0 1.86 1.364 3.224 1.302 1.364 3.162 1.302 1.86.062 3.224-1.302t1.302-3.224zm27.218-11.346l0-68.014q0-.93-.682-1.612t-1.55-.682l-58.962 0q-.93 0-1.612.682t-.682 1.612l0 68.014q0 .93.682 1.612t1.612.62l58.962 0q.992-.062 1.612-.682t.62-1.55zm9.114-68.014l0 77.066q0 4.65-3.348 7.998t-7.998 3.348l-58.962 0q-4.65 0-7.998-3.348t-3.348-7.998l0-77.066q0-4.65 3.348-7.998t7.998-3.348l58.962 0q4.65 0 7.998 3.348t3.348 7.998z",width:81.852,height:100};t.iconTrash={path:"M31.293 37.506q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.218 0q-.912-.057-1.482-.627t-.57-1.482l0-37.506q0-2.109 2.052-2.109l4.218 0zm18.753 2.109l0 37.506q0 .912-.57 1.482t-1.539.627l-4.161 0q-1.995 0-2.109-2.109l0-37.506q.057-.912.627-1.482t1.482-.627l4.161 0q.969.057 1.539.627t.57 1.482zm14.592-2.109q2.052 0 2.052 2.109l0 37.506q0 1.995-2.052 2.109l-4.161 0q-.969-.057-1.539-.627t-.57-1.482l0-37.506q0-2.109 2.109-2.109l4.161 0zm10.431 49.248l0-61.731l-58.368 0l0 61.731q.057 2.679.969 3.819t1.083 1.14l54.207 0q.171 0 1.14-1.083t.969-3.876zm-43.776-70.11l29.184 0l-3.135-7.581q-.456-.57-1.14-.741l-20.634 0q-.627.114-1.083.741zm-31.293 2.109q0-1.995 2.109-2.109l20.121 0l4.56-10.83q.969-2.394 3.477-4.104 2.565-1.71 5.187-1.71l20.805 0q2.622 0 5.187 1.71t3.477 4.104l4.56 10.83l20.178 0q.912.057 1.482.627t.57 1.482l0 4.161q0 1.995-2.052 2.109l-6.27 0l0 61.731q0 5.415-3.078 9.348t-7.353 3.933l-54.207 0q-4.275 0-7.353-3.819t-3.078-9.177l0-62.016l-6.213 0q-.969 0-1.539-.57t-.57-1.539l0-4.161z",width:91.681,height:100};t.iconUndo={path:"M10,6.6C10,7.2,9.8,8,9.3,9.1c0,0,0,0.1-0.1,0.1S9.2,9.3,9.2,9.4c0,0,0,0.1-0.1,0.1C9,9.6,9,9.6,8.9,9.6 c-0.1,0-0.1,0-0.1-0.1c0,0,0-0.1,0-0.1c0,0,0-0.1,0-0.1s0-0.1,0-0.1c0-0.3,0-0.5,0-0.7c0-0.4,0-0.7-0.1-1C8.6,7.1,8.5,6.9,8.4,6.7S8.2,6.3,8,6.1C7.8,5.9,7.6,5.8,7.4,5.7S6.9,5.5,6.7,5.5S6.1,5.4,5.8,5.4c-0.3,0-0.6,0-1,0H3.6v1.4c0,0.1,0,0.2-0.1,0.3C3.4,7.1,3.3,7.1,3.2,7.1C3.1,7.1,3,7.1,3,7L0.1,4.1C0,4.1,0,4,0,3.9s0-0.2,0.1-0.3L3,0.8C3,0.7,3.1,0.7,3.2,0.7c0.1,0,0.2,0,0.3,0.1C3.5,0.9,3.6,0.9,3.6,1v1.4h1.2c2.6,0,4.3,0.7,4.9,2.2C9.9,5.2,10,5.8,10,6.6z",width:10,height:10};const s={path:"M8,13 L16,13 C16.5522847,13 17,12.5522847 17,12 C17,11.4477153 16.5522847,11 16,11 L8,11 C7.44771525,11 7,11.4477153 7,12 C7,12.5522847 7.44771525,13 8,13 Z",width:24,height:24};t.iconMinus=s},"/PAl":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=C(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=C(n("+jAD")),u=r(n("cxY9")),c=r(n("Lgby")),p=r(n("jufq")),d=r(n("L3IC")),h=r(n("6LVe")),f=r(n("1QGo")),g=r(n("LeSj")),m=r(n("16F6")),v=r(n("M++g")),y=n("QESs"),b=r(n("G6Ta")),w=r(n("yfnS")),x=r(n("uBl0"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{unescapeMathMode:k}=x.default;class O extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},"Coordinate: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{value:this.props.color,onChange:this.change("color")})))}}O.propTypes=(0,s.default)({},l.propTypes,{coordX:a.default.string,coordY:a.default.string,color:a.default.string}),O.defaultProps={coordX:"0",coordY:"0",color:w.default.BLACK};class M extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},"Start: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},"End: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.endX,onChange:this.change("endX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.endY,onChange:this.change("endY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{value:this.props.color,onChange:this.change("color")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement(h.default,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",o.createElement(c.default,{value:this.props.arrows,onChange:this.change("arrows")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},"Width:"," ",o.createElement(v.default,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}M.propTypes=(0,s.default)({},l.propTypes,{startX:a.default.string,startY:a.default.string,endX:a.default.string,endY:a.default.string,color:a.default.string,strokeDasharray:a.default.string,arrows:a.default.string,strokeWidth:a.default.number}),M.defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",color:w.default.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2};class P extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},"Start: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},"Update ",o.createElement(e,null,"(x_n, y_n)")," for ",o.createElement(e,null,"n =")," ",o.createElement(v.default,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})),o.createElement(d.default,this.props))}}P.propTypes=(0,s.default)({},l.propTypes,{startX:a.default.string,startY:a.default.string,constraint:a.default.string,snap:a.default.number,constraintFn:a.default.string}),P.defaultProps={startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};class _ extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},"Initial position:",o.createElement("div",{className:"perseus-widget-row"},"Start: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.startX,onChange:this.change("startX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.startY,onChange:this.change("startY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},"End: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.endX,onChange:this.change("endX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.endY,onChange:this.change("endY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},"Start updates ",o.createElement(e,null,"(x_n, y_n)")," for ",o.createElement(e,null,"n ="),o.createElement(v.default,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})),o.createElement("div",{className:"perseus-widget-row"},"End updates ",o.createElement(e,null,"(x_m, y_m)")," for ",o.createElement(e,null,"m ="),o.createElement(v.default,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})),o.createElement("div",{className:"perseus-widget-row"},"All constraints are applied to the start point."),o.createElement(d.default,this.props))}}_.propTypes=(0,s.default)({},l.propTypes,{startX:a.default.string,startY:a.default.string,endX:a.default.string,endY:a.default.string,constraint:a.default.string,snap:a.default.number,constraintFn:a.default.string}),_.defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};class S extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},o.createElement(e,null,this.props.funcName+"(x)=")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.value,onChange:this.change("value")})),o.createElement("div",{className:"perseus-widget-row"},"Range: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMin,onChange:this.change("rangeMin")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMax,onChange:this.change("rangeMax")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{value:this.props.color,onChange:this.change("color")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement(h.default,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},"Width:"," ",o.createElement(v.default,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}S.propTypes=(0,s.default)({},l.propTypes,{value:a.default.string,rangeMin:a.default.string,rangeMax:a.default.string,color:a.default.string,strokeDashArray:a.default.string,strokeWidth:a.default.number}),S.defaultProps={value:"x",rangeMin:"-10",rangeMax:"10",color:w.default.BLUE,strokeDasharray:"",strokeWidth:2};class T extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},o.createElement(e,null,"X(t) =")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.x,onChange:this.change("x")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement(e,null,"Y(t) =")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.y,onChange:this.change("y")})),o.createElement("div",{className:"perseus-widget-row"},"Range: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMin,onChange:this.change("rangeMin")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.rangeMax,onChange:this.change("rangeMax")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{value:this.props.color,onChange:this.change("color")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement(h.default,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},"Width:"," ",o.createElement(v.default,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}T.propTypes=(0,s.default)({},l.propTypes,{x:a.default.string,y:a.default.string,rangeMin:a.default.string,rangeMax:a.default.string,color:a.default.string,strokeDashArray:a.default.string,strokeWidth:a.default.number}),T.defaultProps={x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:w.default.BLUE,strokeDasharray:"",strokeWidth:2};class I extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},o.createElement(b.default,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})),o.createElement("div",{className:"perseus-widget-row"},"Location: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{value:this.props.color,onChange:this.change("color")})))}}I.propTypes=(0,s.default)({},l.propTypes,{color:a.default.string,coordX:a.default.string,coordY:a.default.string,label:a.default.string}),I.defaultProps={coordX:"0",coordY:"0",color:w.default.BLACK,label:"\\phi"};class N extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},"Bottom left: ",o.createElement(e,null,"\\Large("),o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.coordX,onChange:this.change("coordX")}),o.createElement(e,null,",")," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.coordY,onChange:this.change("coordY")}),o.createElement(e,null,"\\Large)")),o.createElement("div",{className:"perseus-widget-row"},"Width:"," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.width,onChange:this.change("width")})),o.createElement("div",{className:"perseus-widget-row"},"Height:"," ",o.createElement(m.default,{buttonSets:[],buttonsVisible:"never",value:this.props.height,onChange:this.change("height")})),o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{value:this.props.color,lightColors:!0,onChange:this.change("color")})),o.createElement("div",{className:"perseus-widget-row"},"You want a border? Sorry, draw your own."))}}N.propTypes=(0,s.default)({},l.propTypes,{color:a.default.string,coordX:a.default.string,coordY:a.default.string,height:a.default.string,width:a.default.string}),N.defaultProps={coordX:"-5",coordY:"5",width:"2",height:"3",color:w.default.LIGHT_BLUE};class R extends o.Component{constructor(...e){super(...e),this.state={usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)},this._updateGraphProps=e=>{this.change({graph:i.default.extend(i.default.omit(e,"step"),{tickStep:e.step})})},this._addNewElement=e=>{const t=e.target.value;if(""===t)return;e.target.value="";const n={type:t,key:t+"-"+(16777215*Math.random()<<0).toString(16),options:"point"===t?i.default.clone(O.defaultProps):"line"===t?i.default.clone(M.defaultProps):"movable-point"===t?i.default.clone(P.defaultProps):"movable-line"===t?i.default.clone(_.defaultProps):"function"===t?i.default.clone(S.defaultProps):"parametric"===t?i.default.clone(T.defaultProps):"label"===t?i.default.clone(I.defaultProps):"rectangle"===t?i.default.clone(N.defaultProps):{}};let r;if("movable-point"===t)r=i.default.max([i.default.max(this.state.usedVarSubscripts),-1])+1,n.options.varSubscript=r;else if("movable-line"===t)r=i.default.max([i.default.max(this.state.usedVarSubscripts),-1])+1,n.options.startSubscript=r,n.options.endSubscript=r+1;else if("function"===t){const e=String.fromCharCode(i.default.max([i.default.max(i.default.map(this.state.usedFunctionNames,(function(e){return e.charCodeAt(0)}))),"e".charCodeAt(0)])+1);n.options.funcName=e}this.change({elements:this.props.elements.concat(n)})},this._deleteElement=e=>{const t=this.props.elements[e];this.change({elements:i.default.without(this.props.elements,t)})},this._moveElementUp=e=>{const t=this.props.elements[e],n=i.default.without(this.props.elements,t);n.splice(e-1,0,t),this.change({elements:n})},this._moveElementDown=e=>{const t=this.props.elements[e],n=i.default.without(this.props.elements,t);n.splice(e+1,0,t),this.change({elements:n})},this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}UNSAFE_componentWillReceiveProps(e){this.setState({usedVarSubscripts:this._getAllVarSubscripts(e.elements),usedFunctionNames:this._getAllFunctionNames(e.elements)})}_getAllVarSubscripts(e){return i.default.map(i.default.where(e,{type:"movable-point"}),(e=>e.options.varSubscript)).concat(i.default.map(i.default.where(e,{type:"movable-line"}),(e=>e.options.startSubscript))).concat(i.default.map(i.default.where(e,{type:"movable-line"}),(e=>e.options.endSubscript)))}_getAllFunctionNames(e){return i.default.map(i.default.where(e,{type:"function"}),(e=>e.options.funcName))}render(){const{TeX:e}=(0,y.getDependencies)();return o.createElement("div",{className:"perseus-widget-interaction-editor"},o.createElement(f.default,{title:"Grid settings"},o.createElement(g.default,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),!0!==this.props.graph.valid&&o.createElement("div",null,this.props.graph.valid)),i.default.map(this.props.elements,(function(t,n){return"movable-point"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Movable point"," ",o.createElement(e,null,"(x_{"+t.options.varSubscript+"}, y_{"+t.options.varSubscript+"})")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:t.key},o.createElement(P,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"movable-line"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Movable line"," ",o.createElement(e,null,"(x_{"+t.options.startSubscript+"}, y_{"+t.options.startSubscript+"})")," ","to"," ",o.createElement(e,null,"(x_{"+t.options.endSubscript+"}, y_{"+t.options.endSubscript+"})")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:t.key},o.createElement(_,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"point"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Point"," ",o.createElement(e,null,"("+t.options.coordX+", "+t.options.coordY+")")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:t.key},o.createElement(O,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"line"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Line"," ",o.createElement(e,null,"("+t.options.startX+", "+t.options.startY+")")," ","to"," ",o.createElement(e,null,"("+t.options.endX+", "+t.options.endY+")")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:t.key},o.createElement(M,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"function"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Function"," ",o.createElement(e,null,t.options.funcName+"(x) = "+t.options.value)),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:t.key},o.createElement(S,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"parametric"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Parametric"),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:t.key},o.createElement(T,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"label"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Label"," ",o.createElement(e,null,k(t.options.label))," "),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:t.key},o.createElement(I,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):"rectangle"===t.type?o.createElement(f.default,{title:o.createElement("span",null,"Rectangle"," ",o.createElement(e,null,"("+t.options.coordX+", "+t.options.coordY+")")," — ",o.createElement(e,null,t.options.width+" \\times "+t.options.height)),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:t.key},o.createElement(N,(0,s.default)({},t.options,{onChange:e=>{const t=JSON.parse(JSON.stringify(this.props.elements));i.default.extend(t[n].options,e),this.change({elements:t})}}))):void 0}),this),o.createElement("div",{className:"perseus-widget-interaction-editor-select-element"},o.createElement("select",{onChange:this._addNewElement},o.createElement("option",{value:""},"Add an element","…"),o.createElement("option",{disabled:!0},"--"),o.createElement("option",{value:"point"},"Point"),o.createElement("option",{value:"line"},"Line segment"),o.createElement("option",{value:"function"},"Function plot"),o.createElement("option",{value:"parametric"},"Parametric plot"),o.createElement("option",{value:"label"},"Label"),o.createElement("option",{value:"rectangle"},"Rectangle"),o.createElement("option",{value:"movable-point"},"★ Movable point"),o.createElement("option",{value:"movable-line"},"★ Movable line segment"))))}}R.propTypes=(0,s.default)({},l.propTypes,{elements:a.default.arrayOf(a.default.object),graph:a.default.objectOf(a.default.any)}),R.widgetName="interaction",R.defaultProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]};var A=R;t.default=A},"/Qgg":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("TSYQ")),a=h(n("q1tI")),i=r(n("5pch")),l=n("j8wP"),u=h(n("+jAD")),c=r(n("Atlv")),p=n("zahm");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends a.Component{constructor(...e){super(...e),this.change=(...e)=>u.change.apply(this,e),this.getUserInput=()=>this.refs.renderer.getUserInput(),this.getSerializedState=()=>this.refs.renderer.getSerializedState(),this.restoreSerializedState=(e,t)=>(this.refs.renderer.restoreSerializedState(e,t),null),this.simpleValidate=e=>this.refs.renderer.score(),this.getInputPaths=()=>this.refs.renderer.getInputPaths(),this.setInputValue=(e,t,n)=>this.refs.renderer.setInputValue(e,t,n),this.focus=()=>this.refs.renderer.focus(),this.focusInputPath=e=>{this.refs.renderer.focusPath(e)},this.blurInputPath=e=>{this.refs.renderer.blurPath(e)},this.showRationalesForCurrentlySelectedChoices=()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices()}}componentDidMount(){this.forceUpdate()}render(){const e=i.default.extend({},l.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}}),t=i.default.indexOf(this.props.findWidgets("group"),this),n=this.props.apiOptions.groupAnnotator(t,this.props.widgetId),r=this.refs.renderer&&this.refs.renderer.score(),u=r&&"invalid"!==r.type,p=r&&"invalid"===r.type;return a.createElement("div",{className:(0,o.default)({"perseus-group":!0,"perseus-group-valid-answer":u,"perseus-group-invalid-answer":p})},n,a.createElement(c.default,(0,s.default)({},this.props,{ref:"renderer",apiOptions:e,findExternalWidgets:this.props.findWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:e=>{this.refs.renderer&&this.change("widgets",this.refs.renderer.props.widgets)},linterContext:this.props.linterContext})),this.props.icon&&a.createElement("div",{className:"group-icon"},this.props.icon))}}f.defaultProps={content:"",widgets:{},images:{},linterContext:p.linterContextDefault};var g={name:"group",displayName:"Group (SAT only)",widget:f,traverseChildWidgets:function(e,t){return i.default.extend({},e,t(e))},hidden:!1,isLintable:!0};t.default=g},"/VnI":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=y(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=y(n("HEOz")),u=n("j8wP"),c=r(n("DUcE")),p=y(n("+jAD")),d=r(n("lQTD")),h=n("/4Qb"),f=r(n("APgo")),g=r(n("ONox")),m=y(n("whzC"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class b extends o.Component{render(){const e=this.props.choice.correct?"correct":"incorrect";let t="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(t=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");const n=o.createElement(d.default,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder:t,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),r=o.createElement(d.default,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:l._("Why is this choice %(correctOrIncorrect)s?",{correctOrIncorrect:e}),onChange:this.props.onClueChange}),s=o.createElement("a",{className:"simple-button orange delete-choice",href:"#",onClick:this.props.onDelete,title:"Remove this choice"},o.createElement(f.default,h.iconTrash));return o.createElement("div",{className:"choice-clue-editors"},o.createElement("div",{className:`choice-editor ${e}`},n),o.createElement("div",{className:"clue-editor"},r),this.props.showDelete&&s)}}b.propTypes={apiOptions:u.ApiOptions.propTypes,choice:a.default.object,showDelete:a.default.bool,onClueChange:a.default.func,onContentChange:a.default.func,onDelete:a.default.func};class w extends o.Component{constructor(...e){super(...e),this.change=(...e)=>p.change.apply(this,e),this.onMultipleSelectChange=e=>{e=e.multipleSelect;const t=i.default.reduce(this.props.choices,(function(e,t){return t.correct?e+1:e}),0);if(!e&&t>1){const t=i.default.map(this.props.choices,(function(e){return i.default.defaults({correct:!1},e)}));this.props.onChange({multipleSelect:e,choices:t})}else this.props.onChange({multipleSelect:e})},this.onCountChoicesChange=e=>{e=e.countChoices,this.props.onChange({countChoices:e})},this.onChange=({checked:e})=>{const t=i.default.map(this.props.choices,((t,n)=>i.default.extend({},t,{correct:e[n],content:t.isNoneOfTheAbove&&!e[n]?"":t.content})));this.props.onChange({choices:t})},this.onContentChange=(e,t)=>{const n=this.props.choices.slice();n[e]=i.default.extend({},n[e],{content:t}),this.props.onChange({choices:n})},this.onClueChange=(e,t)=>{const n=this.props.choices.slice();n[e]=i.default.extend({},n[e],{clue:t}),""===t&&delete n[e].clue,this.props.onChange({choices:n})},this.onDelete=(e,t)=>{t.preventDefault();const n=this.props.choices.slice(),r=n[e];n.splice(e,1),this.props.onChange({choices:n,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!r.isNoneOfTheAbove})},this.addChoice=(e,t)=>{t.preventDefault();const n=this.props.choices.slice(),r={isNoneOfTheAbove:e},s=n.length-(this.props.hasNoneOfTheAbove?1:0);n.splice(s,0,r),this.props.onChange({choices:n,hasNoneOfTheAbove:e||this.props.hasNoneOfTheAbove},(()=>{this.refs[`choice-editor${s}`].refs["content-editor"].focus()}))},this.setDisplayCount=e=>{this.props.onChange({displayCount:e})},this.focus=()=>(this.refs["choice-editor0"].refs["content-editor"].focus(),!0),this.getSaveWarnings=()=>i.default.some(i.default.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."],this.serialize=()=>i.default.pick(this.props,"choices","randomize","multipleSelect","countChoices","displayCount","hasNoneOfTheAbove","deselectEnabled")}render(){const e=i.default.reduce(this.props.choices,(function(e,t){return t.correct?e+1:e}),0);return o.createElement("div",null,o.createElement("div",{className:"perseus-widget-row"},o.createElement("a",{href:m.safeLinkTo("https://docs.google.com/document/d/1frZf7yrWVWb1n4tVjqlzqVUiv1pn4cZXbxgP62-JDBY/edit#heading=h.8ng1isya19nu"),target:"_blank"},"Multiple choice style guide"),o.createElement("br",null),o.createElement("div",{className:"perseus-widget-left-col"},o.createElement(g.default,{label:"Multiple selections",labelAlignment:"right",multipleSelect:this.props.multipleSelect,onChange:this.onMultipleSelectChange})),o.createElement("div",{className:"perseus-widget-right-col"},o.createElement(g.default,{label:"Randomize order",labelAlignment:"right",randomize:this.props.randomize,onChange:this.props.onChange})),this.props.multipleSelect&&o.createElement("div",{className:"perseus-widget-left-col"},o.createElement(g.default,{label:"Specify number correct",labelAlignment:"right",countChoices:this.props.countChoices,onChange:this.onCountChoicesChange}))),o.createElement(c.default,{ref:"baseRadio",multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:e,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map((function(e,t){return{content:o.createElement(b,{ref:`choice-editor${t}`,apiOptions:this.props.apiOptions,choice:e,onContentChange:e=>{"content"in e&&this.onContentChange(t,e.content)},onClueChange:e=>{"content"in e&&this.onClueChange(t,e.content)},onDelete:this.onDelete.bind(this,t),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:e.isNoneOfTheAbove,checked:e.correct}}),this),onChange:this.onChange}),o.createElement("div",{className:"add-choice-container"},o.createElement("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1)},o.createElement(f.default,h.iconPlus)," Add a choice"," "),!this.props.hasNoneOfTheAbove&&o.createElement("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0)},o.createElement(f.default,h.iconPlus)," None of the above"," ")))}}w.propTypes=(0,s.default)({},p.propTypes,{apiOptions:u.ApiOptions.propTypes,choices:a.default.arrayOf(a.default.shape({content:a.default.string,clue:a.default.string,correct:a.default.bool})),displayCount:a.default.number,randomize:a.default.bool,hasNoneOfTheAbove:a.default.bool,multipleSelect:a.default.bool,countChoices:a.default.bool,deselectEnabled:a.default.bool,static:a.default.bool}),w.widgetName="radio",w.defaultProps={choices:[{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,countChoices:!1,deselectEnabled:!1};var x=w;t.default=x},"/p7U":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=d(n("q1tI")),a=r(n("17x9")),i=r(n("cxY9")),l=d(n("+jAD")),u=r(n("M++g")),c=r(n("G6Ta"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class h extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.updateMolecule=e=>{this.change({smiles:e})},this.updateRotation=e=>{this.change({rotationAngle:e})},this.serialize=()=>i.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("div",null,o.createElement("label",null,"SMILES: ",o.createElement(c.default,{onChange:this.updateMolecule,value:this.props.smiles}))),o.createElement("div",null,o.createElement("label",null,"Rotation (deg): ",o.createElement(u.default,{onChange:this.updateRotation,value:this.props.rotationAngle}))))}}h.propTypes=(0,s.default)({},l.propTypes,{rotationAngle:a.default.number,smiles:a.default.string}),h.widgetName="molecule-renderer";var f=h;t.default=f},"05Nk":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=n("ma4Y"),a=s.default.makeRule({name:"absolute-url",severity:s.default.Severity.GUIDELINE,selector:"link, image",lint:function(e,t,n,r){const s=n[0].target,a=(0,o.getHostname)(s);if("khanacademy.org"===a||a.endsWith(".khanacademy.org"))return"Don't use absolute URLs:\nWhen linking to KA content or images, omit the\nhttps://www.khanacademy.org URL prefix.\nUse a relative URL beginning with / instead."}});t.default=a},"08lt":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ServerItemRenderer=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("5pch")),i=n("mR6N"),l=n("j8wP"),u=r(n("YH1v")),c=r(n("Atlv")),p=r(n("uBl0")),d=r(n("vNny")),h=r(n("9cGa")),f=r(n("KGvg"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const{mapObject:m}=d.default;class v extends o.Component{constructor(e){super(e),this._handleFocusChange=(e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},this.handleInteractWithWidget=e=>{const t=a.default.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},this.setAssetStatus=(e,t)=>{const n=(0,s.default)({},this.state.assetStatuses,{[e]:t});this.setState({assetStatuses:n})},this.state={questionCompleted:!1,questionHighlightedWidgets:[],assetStatuses:{}},this._fullyRendered=!1}componentDidMount(){this._currentFocus=null,this._fullyRendered=!1}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(e,t){if(this.props.apiOptions.answerableCallback){const e=0===this.questionRenderer.emptyWidgets().length,{answerableCallback:t}=this.props.apiOptions;t&&t(e)}if(!this._fullyRendered){Object.values(this.state.assetStatuses).every(Boolean)&&(this._fullyRendered=!0,this.props.onRendered(!0))}}componentWillUnmount(){null!=this.blurTimeoutID&&(clearTimeout(this.blurTimeoutID),this.blurTimeoutID=null)}_setCurrentFocus(e){const{apiOptions:{isMobile:t,onFocusChange:n},keypadElement:r}=this.props,s=this._currentFocus;this._currentFocus=e;const o=this.getInputPaths(),a=this._currentFocus&&o.some((e=>p.default.inputPathsEqual(e,this._currentFocus)));null!=n&&n(this._currentFocus,s,a&&r&&r.getDOMNode(),a&&this.questionRenderer.getDOMNodeForPath(e)),r&&t&&(a?r.activate():r.dismiss())}_onRendererBlur(e){const t=this._currentFocus;a.default.isEqual(e,t)&&(this.blurTimeoutID=setTimeout((()=>{a.default.isEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}),0))}_setWidgetProps(e,t,n){this.questionRenderer._setWidgetProps(e,t,n)}setInputValue(e,t,n){return this.questionRenderer.setInputValue(e,t,n)}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getGrammarTypeForPath(e){return this.questionRenderer.getGrammarTypeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}getNumHints(){return this.props.item.hints.length}scoreInput(){const e=this.questionRenderer.guessAndScore(),t=e[0],n=e[1],r=[t,[]],s=p.default.keScoreFromPerseusScore(n,r,this.questionRenderer.getSerializedState()),o=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:s.correct,questionHighlightedWidgets:o}),s}getWidgetIds(){return this.questionRenderer.getWidgetIds()}scoreWidgets(){const e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets(),n=this.questionRenderer.getSerializedState();return m(e,((e,r)=>p.default.keScoreFromPerseusScore(e,t[r],n)))}getSerializedState(){return{question:this.questionRenderer.getSerializedState(),hints:this.hintsRenderer.getSerializedState()}}restoreSerializedState(e,t){let n=2;const r=()=>{--n,t&&0===n&&t()};this.questionRenderer.restoreSerializedState(e.question,r),this.hintsRenderer.restoreSerializedState(e.hints,r)}showRationalesForCurrentlySelectedChoices(){this.questionRenderer.showRationalesForCurrentlySelectedChoices()}deselectIncorrectSelectedChoices(){this.questionRenderer.deselectIncorrectSelectedChoices()}render(){const e=(0,s.default)({},l.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange}),t={assetStatuses:this.state.assetStatuses,setAssetStatus:this.setAssetStatus},n=o.createElement(h.default.Provider,{value:t},o.createElement(c.default,{keypadElement:this.props.keypadElement,problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,ref:e=>{null!=e&&(this.questionRenderer=e)},content:this.props.item.question.content,widgets:this.props.item.question.widgets,images:this.props.item.question.images})),r=o.createElement(u.default,{hints:this.props.item.hints,hintsVisible:this.props.hintsVisible,apiOptions:e,ref:e=>this.hintsRenderer=e});return o.createElement("div",null,o.createElement("div",null,n),o.createElement("div",{className:e.isMobile?void 0:(0,i.css)(y.hintsContainer)},r))}}t.ServerItemRenderer=v,v.defaultProps={apiOptions:{},onRendered:e=>{}};const y=i.StyleSheet.create({hintsContainer:{marginLeft:50}});var b=o.forwardRef(((e,t)=>o.createElement(f.default.Consumer,null,(({onRendered:n})=>o.createElement(v,(0,s.default)({},e,{onRendered:n,ref:t}))))));t.default=b},"0PLK":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=p(n("q1tI")),a=r(n("17x9")),i=(r(n("5pch")),n("j8wP")),l=p(n("+jAD")),u=r(n("HdDY"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class d extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.getSaveWarnings=()=>{var e;return(e=[]).concat.apply(e,this._editors.map((e=>e?e.getSaveWarnings():[])))},this.serialize=()=>({gradedGroups:this.props.gradedGroups}),this.renderGroups=()=>this.props.gradedGroups?this.props.gradedGroups.map(((e,t)=>o.createElement(u.default,(0,s.default)({key:t,ref:e=>this._editors[t]=e},e,{apiOptions:this.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:e=>this.change("gradedGroups",h(this.props.gradedGroups,t,(0,s.default)({},this.props.gradedGroups[t],e)))})))):null,this.addGroup=()=>{const e=this.props.gradedGroups||[];this.change("gradedGroups",e.concat([u.default.defaultProps]))}}UNSAFE_componentWillMount(){this._editors=[]}render(){return o.createElement("div",{className:"perseus-group-editor"},this.renderGroups(),o.createElement("button",{onClick:this.addGroup},"Add group"))}}d.propTypes=(0,s.default)({},l.propTypes,{apiOptions:i.ApiOptions.propTypes,gradedGroups:a.default.array,onChange:a.default.func.isRequired}),d.widgetName="graded-group-set",d.defaultProps={gradedGroups:[]};const h=(e,t,n)=>[].concat(e.slice(0,t),[n],e.slice(t+1));var f=d;t.default=f},"0UwG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("11Vm");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var s=n("kzgE");(0,r.setDependencies)(s.webappDependencies)},"11Vm":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ApiOptions",{enumerable:!0,get:function(){return i.ApiOptions}}),Object.defineProperty(t,"ArticleRenderer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"Categorizer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"HintRenderer",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"HintsRenderer",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"InputNumber",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"ItemRenderer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"JiptParagraphs",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"KeypadContext",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"KhanMath",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"LoadingContext",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"MultiItems",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"NumericInput",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"PerseusMarkdown",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"Radio",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"Renderer",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"ServerItemRenderer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return P.default}}),t.constants=t.apiVersion=t.Widgets=void 0,Object.defineProperty(t,"init",{enumerable:!0,get:function(){return s.default}}),t.itemDataVersion=void 0,Object.defineProperty(t,"mediaQueries",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"registerAllWidgetsAndEditorsForTesting",{enumerable:!0,get:function(){return _.registerAllWidgetsAndEditorsForTesting}}),Object.defineProperty(t,"setDependencies",{enumerable:!0,get:function(){return a.setDependencies}});var s=r(n("Pnbu")),o=r(n("Ogi5")),a=n("QESs"),i=n("j8wP"),l=r(n("ZM/w")),u=r(n("YqAk")),c=r(n("08lt")),p=r(n("YH1v")),d=r(n("hzUw")),h=r(n("Atlv")),f=T(n("4Zwh"));t.Widgets=f;var g=r(n("hxS7")),m=r(n("e04/")),v=r(n("b5JB")),y=r(n("h1Z3")),b=T(n("YPQm"));t.constants=b;var w=r(n("S3VJ")),x=r(n("WvRD")),E=r(n("XwLL")),C=r(n("KGvg")),k=r(n("TBZ3")),O=r(n("fiwv")),M=r(n("2OMh")),P=r(n("uBl0")),_=n("j2dX");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function T(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const I=o.default.apiVersion;t.apiVersion=I;const N=o.default.itemDataVersion;t.itemDataVersion=N},"16F6":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("TSYQ")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("i8i4")),l=r(n("5pch")),u=r(n("96rG")),c=r(n("BWOr")),p=r(n("jskG"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const h=a.default;class f extends o.Component{constructor(...e){super(...e),this.state={focused:!1},this.handleFocus=()=>{this.setState({focused:!0})},this.handleMouseDown=e=>{const t=i.default.findDOMNode(this).contains(e.target);this.mouseDown=t,t||this.setState({focused:!1})},this.handleMouseUp=()=>{this.mouseDown&&this.focus(),this.mouseDown=!1},this.handleBlur=e=>{this.mouseDown||i.default.findDOMNode(this).contains(e.relatedTarget)||this.setState({focused:!1})},this._shouldShowButtons=()=>"always"===this.props.buttonsVisible||"never"!==this.props.buttonsVisible&&this.state.focused,this.insert=e=>{const t=this.mathField();(0,l.default)(e).isFunction()?e(t):"\\"===e[0]?t.cmd(e).focus():t.write(e).focus(),t.focus()},this.mathField=e=>c.default.getInterface(2).MathField(i.default.findDOMNode(this.refs.mathinput),e),this.focus=()=>{this.mathField().focus(),this.setState({focused:!0})},this.blur=()=>{this.mathField().blur(),this.setState({focused:!1})}}render(){let e=(0,s.default)({"perseus-math-input":!0,"mq-editable-field":!0,"mq-math-mode":!0});this.props.className&&(e=e+" "+this.props.className);let t=null;return this._shouldShowButtons()&&(t=o.createElement(p.default,{sets:this.props.buttonSets,className:"math-input-buttons absolute",convertDotToTimes:this.props.convertDotToTimes,onInsert:this.insert})),o.createElement("div",{style:{display:"inline-block"}},o.createElement("div",{style:{display:"inline-block"}},o.createElement("span",{className:e,ref:"mathinput","aria-label":this.props.labelText,onFocus:this.handleFocus,onBlur:this.handleBlur})),o.createElement("div",{style:{position:"relative"},onBlur:this.handleBlur},t))}componentWillUnmount(){window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)}componentDidMount(){window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp);let e=!1;this.mathField({autoCommands:"pi theta phi sqrt nthroot",charsThatBreakOutOfSupSub:"+-*/=<>≠≤≥",supSubsRequireOperand:!0,spaceBehavesLikeTab:!0,handlers:{edited:t=>{let n=t.latex();if(n=n.replace(/<>/g,"\\ne"),this.props.convertDotToTimes){n=n.replace(/\\cdot/g,"\\times");const e=t.__controller.cursor[c.default.L];e&&"\\cdot "===e.ctrlSeq&&(t.__controller.backspace(),t.cmd("\\times"))}else n=n.replace(/\\times/g,"\\cdot");e&&this.props.value!==n&&this.props.onChange(n)},enter:()=>{(0,u.default)(i.default.findDOMNode(this.refs.mathinput)).submit()},upOutOf:e=>{e.typedText("^")}}}),this.mathField().latex(this.props.value),e=!0}}f.propTypes={value:h.string,onChange:h.func.isRequired,convertDotToTimes:h.bool,buttonsVisible:h.oneOf(["always","never","focused"]),buttonSets:p.default.buttonSetsType.isRequired,labelText:a.default.string,onFocus:h.func,onBlur:h.func},f.defaultProps={value:"",convertDotToTimes:!1,buttonsVisible:"focused"};var g=f;t.default=g},"1I17":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Molecule=void 0;var s=p(n("q1tI")),o=r(n("17x9")),a=r(n("JtQr")),i=r(n("KSWw")),l=r(n("HQqP")),u=p(n("HEOz"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{layout:d}=i.default,h=l.default.parse,f=l.default.ParseError;class g extends s.Component{constructor(...e){super(...e),this.state={parsedSmiles:null,error:null},this.stateFromSmiles=e=>{try{this.setState({parsedSmiles:h(e),error:null})}catch(e){if(!(e instanceof f))throw e;this.setState({error:e.message})}},this.setCanvasBounds=(e,t)=>{const n=Math.max.apply(Math,t.map((e=>e.pos?e.pos[0]:-1/0))),r=Math.max.apply(Math,t.map((e=>e.pos?e.pos[1]:-1/0))),s=Math.min.apply(Math,t.map((e=>e.pos?e.pos[0]:1/0))),o=Math.min.apply(Math,t.map((e=>e.pos?e.pos[1]:1/0))),a=n-s+60,i=r-o+60;return e.width=a,e.height=i,[30-s,30-o]},this.canvasRender=()=>{if(this.state.error||!this.state.parsedSmiles)return;const e=d(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),r=t.getContext("2d");r.clearRect(0,0,t.width,t.height),r.save(),r.translate(n[0],n[1]),(0,a.default)(r,e),r.restore()}}UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}render(){let e=s.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},u.$_("A molecular structure drawing. SMILES notation: %(content)s",{content:this.props.smiles}));return this.state.error&&(e=s.createElement("div",{className:"error"},this.state.error)),s.createElement("div",{className:"molecule-canvas"},e)}}t.Molecule=g,g.propTypes={id:o.default.string.isRequired,rotationAngle:o.default.number,smiles:o.default.string};class m extends s.Component{constructor(...e){super(...e),this.simpleValidate=()=>({type:"points",earned:0,total:0,message:null}),this.getUserInput=()=>[],this.validate=(e,t)=>({type:"points",earned:0,total:0,message:null})}render(){return s.createElement(g,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}m.propTypes={rotationAngle:o.default.number,smiles:o.default.string,widgetId:o.default.string},m.defaultProps={rotationAngle:0};var v={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:m};t.default=v},"1Ovf":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("5pch")),i=n("eAf/"),l=n("j8wP"),u=n("4PhQ"),c=r(n("jH0K")),p=r(n("LeSj")),d=r(n("qoj5")),h=r(n("ONox")),f=r(n("FGwj")),g=r(n("uBl0")),m=r(n("yfnS"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const y=f.default.widget,{deepEq:b,getGridStep:w}=g.default;const x={url:null};function E(e,t){return e=a.default.clone(e).sort(i.point.compare),t=a.default.clone(t).sort(i.point.compare),a.default.all(a.default.map(e,(function(e,n){const r=t[n];return i.point.equal(e,r)})))}const C={apiOptions:l.ApiOptions.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};class k extends o.Component{constructor(...e){super(...e),this.changeConstraints=e=>{const t=a.default.extend({},this.props.constraints,e);this.props.onChange({constraints:t})}}render(){return o.createElement("div",null,this.props.name,":"," ",o.createElement(h.default,{label:"enabled:",enabled:this.props.settings.enabled,onChange:this.props.onChange})," ",this.props.settings.enabled&&o.createElement(h.default,{label:"required:",required:this.props.settings.required,onChange:this.props.onChange}),this.props.settings.enabled&&o.createElement(d.default,null,"'Required' will only grade the answer as correct if the student has used at least one such transformation.")," ",this.props.allowFixed&&this.props.settings.enabled&&o.createElement(h.default,{label:"fixed:",fixed:this.props.settings.constraints.fixed,onChange:this.changeConstraints}),this.props.allowFixed&&this.props.settings.enabled&&o.createElement(d.default,null,"Enable 'fixed' to prevent the student from repositioning the tool. The tool will appear in the position at which it is placed in the editor below."))}}k.defaultProps={allowFixed:!0};class O extends o.Component{constructor(...e){super(...e),this.getMode=()=>this.props.graphMode+","+this.props.listMode,this.changeMode=e=>{const t=e.target.value.split(",");this.props.onChange({graphMode:t[0],listMode:t[1]})},this.changeHandlerFor=e=>t=>{const n=a.default.clone(this.props.tools);n[e]=a.default.extend({},this.props.tools[e],t),this.props.onChange({tools:n})}}render(){return o.createElement("div",{className:"transformer-settings"},o.createElement("div",null," ","Mode:"," ",o.createElement("select",{value:this.getMode(),onChange:this.changeMode},o.createElement("option",{value:"interactive,dynamic"}," ","Exploration with text"," "),o.createElement("option",{value:"interactive,static"}," ","Exploration without text"," "),o.createElement("option",{value:"dynamic,interactive"}," ","Formal with movement"," "),o.createElement("option",{value:"static,interactive"}," ","Formal without movement"," ")),o.createElement(d.default,null,o.createElement("ul",null,o.createElement("li",null,o.createElement("b",null,"Exploration:")," Students create transformations with tools on the graph."," "),o.createElement("li",null,o.createElement("b",null,"Formal with movement:")," Students specify transformations mathematically in the transformation list. Graph shows the results of these transformations."," "),o.createElement("li",null,o.createElement("b",null,"Formal without movement:")," Students specify transformations mathematically in the transformation list. Graph does not update."," ")))),o.createElement(k,{name:"Translations",settings:this.props.tools.translation,allowFixed:!1,onChange:this.changeHandlerFor("translation")}),o.createElement(k,{name:"Rotations",settings:this.props.tools.rotation,onChange:this.changeHandlerFor("rotation")}),o.createElement(k,{name:"Reflections",settings:this.props.tools.reflection,onChange:this.changeHandlerFor("reflection")}),o.createElement(k,{name:"Dilations",settings:this.props.tools.dilation,onChange:this.changeHandlerFor("dilation")}),o.createElement(h.default,{label:"Draw Solution:",drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}))}}const M={getPointCountForType:function(e){const t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new u.KAError("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t),u.Errors.Internal);const n=a.default.map(t.shape.coords,(function(s){let o=!1,l=s;const u=e.addMovablePoint({coord:s,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:function(e,s){o||(l=u.coord,o=!0);let c=i.vector.subtract([e,s],u.coord);t.onMove&&(c=t.onMove(c[0],c[1])),t.translatable&&a.default.each(n,(function(e){e!==u&&e.setCoord(i.vector.add(e.coord,c))}));const p=u.coord,d=i.vector.add(u.coord,c);return u.coord=d,r.update(),u.coord=p,d},onMoveEnd:function(){if(t.onMoveEnd&&o){o=!1;const e=i.vector.subtract(u.coord,l);t.onMoveEnd(e[0],e[1])}r.update()}});return u.bounded=!0,u})),r=M.addShape(e,t,n),s=r.remove;return r.remove=function(){s.apply(r),a.default.invoke(n,"remove")},r},addShape:function(e,t,n){n=n||t.shape.coords;const r=M._typesOf(t.shape),s=t.shape.options||M.defaultOptions(r),o=M._mapTypes(r,n,(function(n,r,o){const i=a.default.extend({},t,s[o]);return M._addType(e,n,r,i)})),i=a.default.filter(a.default.pluck(o,"update"),a.default.identity),l=a.default.filter(a.default.pluck(o,"remove"),a.default.identity),u=function(){return a.default.map(o,(function(e){return e.getOptions?e.getOptions():{}}))};return{type:r,points:n,update:function(){a.default.invoke(i,"call")},remove:function(){a.default.invoke(l,"call")},toJSON:function(){const e=a.default.map(n,(function(e){return a.default.isArray(e)?e:e.coord}));return{type:r,coords:e,options:u()}},getOptions:u}},equal:function(e,t){const n=M._typesOf(e),r=M._typesOf(t);if(n.length!==r.length)return!1;const s=M._mapTypes(n,e.coords,M._combine),o=M._mapTypes(r,t.coords,M._combine);return a.default.all(a.default.map(s,(function(e,t){const n=o[t];return e.type===n.type&&M._forType(e.type).equal(e.coords,n.coords)})))},_typesOf:function(e){let t=e.type;return a.default.isArray(t)||(t=[t]),a.default.map(t,(function(e){return"polygon"===e?"polygon-3":e}))},defaultOptions:function(e){return a.default.map(e,(function(e){const t=M._forType(e).defaultOptions;return a.default.extend({},t)}))},_forType:function(e){const t=e.split("-")[0];return M[t]},_mapTypes:function(e,t,n,r){return a.default.map(e,(function(e,s){const o=M.getPointCountForType(e),i=a.default.first(t,o);return t=a.default.rest(t,o),n.call(r,e,i,s)}))},_addType:function(e,t,n,r){const s=a.default.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if("polygon"===(t=t.split("-")[0])){const t=e.addMovablePolygon(a.default.extend({},r,{fixed:!r.editable,snapX:r.snap&&r.snap[0]||0,snapY:r.snap&&r.snap[1]||0,points:n,constrainToGraph:!1}));return{update:t.transform.bind(t),remove:t.remove.bind(t)}}if("line"===t||"lineSegment"===t){const n=e.addMovableLineSegment(a.default.extend({},r,s,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:n.transform.bind(n,!0),remove:n.remove.bind(n)}}if("angle"===t){const t=!!r.editable&&null,s=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:r.normalStyle,reflex:r.reflex});return a.default.isArray(n[0])||r.editable||(n[0].remove(),n[2].remove()),{update:s.update.bind(s,t),remove:s.remove.bind(s),getOptions:function(){return{reflex:s.isReflex()}}}}if("circle"===t){let t={remove:a.default.identity};const s=function(){const s=n[0].coord||n[0],o=n[1].coord||n[1],l=i.point.distanceToPoint(s,o);t.remove(),t=e.circle(s,l,a.default.extend({stroke:m.default.DYNAMIC,"stroke-width":2},r.normalStyle))};return s(),n[1].remove&&!r.editable&&n[1].remove(),{update:s,remove:function(){t.remove()}}}if("point"===t)return{update:null,remove:null};throw new u.KAError("Invalid shape type "+t,u.Errors.Internal)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:E},line:{equal:i.line.equal},lineSegment:{equal:E},angle:{equal:function(e,t){if(!i.point.equal(e[1],t[1]))return!1;const n=[e[1],e[0]],r=[e[1],e[2]],s=[t[1],t[0]],o=[t[1],t[2]],a=i.ray.equal(n,s)&&i.ray.equal(r,o),l=i.ray.equal(n,o)&&i.ray.equal(r,s);return a||l},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){const n=i.point.distanceToPoint(e[0],e[1]),r=i.point.distanceToPoint(t[0],t[1]);return i.point.equal(e[0],t[0])&&i.number.equal(n,r)}},point:{equal:i.point.equal}};class P extends o.Component{constructor(...e){super(...e),this.getTypeString=e=>a.default.isArray(e)?a.default.map(e,this.getTypeString).join(","):"polygon"===e?"polygon-"+this.props.shape.coords.length:e,this.changeType=e=>{const t=String(e.target.value).split(","),n=(r=a.default.map(t,M.getPointCountForType),a.default.reduce(r,(function(e,t){return e+t}),0));var r;const s=function(e,t){const n=t[0][1]-t[0][0],r=t[1][1]-t[1][0];return e*Math.max(n,r)/20}(4,this.refs.graph.props.range),o=180*(.5-1/n),l=a.default.times(n,(function(e){return i.point.rotateDeg([s,0],360*e/n+o)}));this.props.onChange({shape:{type:t,coords:l,options:M.defaultOptions(t)}})},this.updateCoords=()=>{this.props.onChange({shape:this.shape.toJSON()})},this.setupGraphie=e=>{this.shape=M.addMovableShape(e,{editable:!0,snap:e.snap,shape:this.props.shape,onMoveEnd:this.updateCoords})}}render(){return o.createElement("div",null,o.createElement(c.default,{ref:"graph",box:this.props.graph.box,range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,backgroundImage:this.props.graph.backgroundImage,onGraphieUpdated:this.setupGraphie}),o.createElement("select",{key:"type-select",value:this.getTypeString(this.props.shape.type),onChange:this.changeType},o.createElement("option",{value:"polygon-3"},"Triangle"),o.createElement("option",{value:"polygon-4"},"Quadrilateral"),o.createElement("option",{value:"polygon-5"},"Pentagon"),o.createElement("option",{value:"polygon-6"},"Hexagon"),o.createElement("option",{value:"line"},"Line"),o.createElement("option",{value:"line,line"},"2 lines"),o.createElement("option",{value:"lineSegment"},"Line segment"),o.createElement("option",{value:"lineSegment,lineSegment"}," ","2 line segments"," "),o.createElement("option",{value:"angle"},"Angle"),o.createElement("option",{value:"circle"},"Circle")))}componentDidMount(){this.setupGraphie(this.refs.graph.graphie())}componentDidUpdate(e){b(e.shape,this.props.shape)||this.refs.graph.reset()}}class _ extends o.Component{constructor(...e){super(...e),this.changeGraph=(e,t)=>{const n=a.default.extend({},this.props.graph,e);this.props.onChange({graph:n},t)},this.changeStarting=e=>{const t=a.default.extend({},this.props.starting,e);this.props.onChange({starting:t})},this.changeTransformer=(e,t)=>{e.transformations&&(e.correct=(0,s.default)({},this.props.correct,{transformations:e.transformations}),delete e.transformations),this.props.onChange(e,t)},this.serialize=()=>{const e=this.refs.explorer.getEditorJSON();return e.correct=e.answer,delete e.answer,e}}render(){const e=a.default.extend(function(e,t){const n=(e=e||{}).labels||["x","y"],r=e.range||[[-10,10],[-10,10]],s=e.step||[1,1];return{box:[t,t],labels:n,range:r,step:s,gridStep:e.gridStep||w(r,s,t),valid:!0,backgroundImage:x,markings:"grid",showProtractor:!1}}(this.props.graph,340),this.props.graph);return o.createElement("div",null,o.createElement("div",null,o.createElement(h.default,{label:"Grade empty answers as wrong:",gradeEmpty:this.props.gradeEmpty,onChange:this.props.onChange}),o.createElement(d.default,null,o.createElement("p",null,"We generally do not grade empty answers. This usually works well, but sometimes can result in giving away part of an answer in a multi-part question."),o.createElement("p",null,"If this is a multi-part question (there is another widget), you probably want to enable this option. Otherwise, you should leave it disabled."),o.createElement("p",null,"Confused? Talk to Elizabeth."))),o.createElement("div",null,"Graph settings:"),o.createElement(p.default,{box:e.box,labels:e.labels,range:e.range,step:e.step,gridStep:e.gridStep,valid:e.valid,backgroundImage:e.backgroundImage,markings:e.markings,showProtractor:e.showProtractor,onChange:this.changeGraph}),o.createElement("div",null,"Transformation settings:"),o.createElement(O,{ref:"transformationSettings",graphMode:this.props.graphMode,listMode:this.props.listMode,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}),o.createElement("div",null,"Starting location:"),o.createElement(P,{ref:"shapeEditor",graph:e,shape:this.props.starting.shape,onChange:this.changeStarting,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),o.createElement("div",null,"Solution transformations:"),o.createElement(y,{ref:"explorer",graph:e,graphMode:this.props.graphMode,listMode:this.props.listMode,gradeEmpty:this.props.gradeEmpty,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,starting:this.props.starting,correct:this.props.starting,transformations:this.props.correct.transformations,onChange:this.changeTransformer,trackInteraction:()=>{}}))}}_.defaultProps=C,_.widgetName="transformer";var S=_;t.default=S},"1QGo":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=n("/4Qb"),a=r(n("APgo"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class l extends s.Component{constructor(e){super(e),this.toggle=e=>{e.preventDefault(),this.setState({show:!this.state.show})},this.state={show:e.initiallyVisible}}render(){return s.createElement("div",{className:"perseus-interaction-element"},s.createElement("a",{href:"#",className:"perseus-interaction-element-title "+(this.state.show?"open":"closed"),onClick:this.toggle},this.state.show?s.createElement(a.default,o.iconChevronDown):s.createElement(a.default,o.iconChevronRight),this.props.title),s.createElement("div",{className:"perseus-interaction-element-content "+(this.state.show?"enter":"leave")},this.props.children,(null!=this.props.onUp||null!=this.props.onDown||null!=this.props.onDelete)&&s.createElement("div",{className:"edit-controls"},null!=this.props.onUp&&s.createElement("button",{onClick:this.props.onUp},s.createElement(a.default,o.iconCircleArrowUp)),null!=this.props.onDown&&s.createElement("button",{onClick:this.props.onDown},s.createElement(a.default,o.iconCircleArrowDown)),null!=this.props.onDelete&&s.createElement("button",{onClick:this.props.onDelete},s.createElement(a.default,o.iconTrash)))))}}l.defaultProps={initiallyVisible:!1,title:"More"};var u=l;t.default=u},"1SF4":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("M++g"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=()=>!0;class c extends o.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{const n=this.props.value;0===e?this.props.onChange([t,n[1]]):this.props.onChange([n[0],t])}}render(){const e=this.props.value,t=this.props.checkValidity||u;return o.createElement("div",{className:"range-input"},o.createElement(i.default,(0,s.default)({},this.props,{value:e[0],checkValidity:n=>t([n,e[1]]),onChange:this.onChange.bind(this,0),placeholder:this.props.placeholder[0]})),o.createElement(i.default,(0,s.default)({},this.props,{value:e[1],checkValidity:n=>t([e[0],n]),onChange:this.onChange.bind(this,1),placeholder:this.props.placeholder[1]})))}}c.propTypes={value:a.default.array.isRequired,onChange:a.default.func.isRequired,placeholder:a.default.array,checkValidity:a.default.func},c.defaultProps={placeholder:[null,null]};var p=c;t.default=p},"23vA":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=d(n("q1tI")),i=n("6OHE"),l=d(n("sEs3")),u=r(n("i3no")),c=r(n("LEdJ"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class h extends a.Component{constructor(e){super(e),this.handleClick=e=>{const{showDropdown:t}=this.state;this._marker===e.target?this.setState({showDropdown:!t}):t&&this._marker&&!this._marker.contains(e.target)&&(e.stopPropagation(),this.setState({showDropdown:!1}))},this.handleLabelChange=e=>{this.updateMarker({label:e.target.value})},this.handleSelectAnswer=e=>{let{answers:t}=this.props;t=t.includes(e)?t.filter((t=>t!==e)):[].concat(t,[e]),this.updateMarker({answers:t})},this.state={showDropdown:!1}}componentDidMount(){document.addEventListener("click",this.handleClick,!0)}UNSAFE_componentWillReceiveProps(e){const{answers:t}=this.props,n=t.filter((t=>e.choices.includes(t)));JSON.stringify(t)!==JSON.stringify(n)&&setTimeout((()=>this.updateMarker({answers:n})))}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!0)}openDropdown(){this.setState({showDropdown:!0})}updateMarker(e){const{answers:t,label:n,onChange:r,x:o,y:a}=this.props;r((0,s.default)({answers:t,label:n,x:o,y:a},e))}render(){const{answers:e,choices:t,label:n,onRemove:r,x:s,y:i}=this.props,{showDropdown:p}=this.state;return a.createElement("div",{className:(0,o.css)(f.marker,e.length>0&&f.markerWithAnswers,p&&f.markerSelected),ref:e=>this._marker=e,style:{left:`${s}%`,top:`${i}%`},title:"Click to select marker answers or to delete marker. Repositioning marker is not implemented."},p&&a.createElement("div",null,a.createElement("div",{className:(0,o.css)(u.default.dropdownBody,f.dropdownPositionWithArrow)},a.createElement(l.default,{value:"",onClick:()=>r()},"Delete marker"),a.createElement("hr",{className:(0,o.css)(f.dividerHorizontal)}),a.createElement(l.OptionGroup,{onSelected:this.handleSelectAnswer,selectedValues:e},t.map((e=>a.createElement(l.default,{key:e,value:e},e)))),a.createElement("div",{className:(0,o.css)(f.labelContainer)},a.createElement(c.default,{placeholder:"ARIA label (for screen readers)",onChange:this.handleLabelChange,value:n,width:"100%"})))))}}t.default=h;const f=o.StyleSheet.create({marker:{position:"absolute",boxSizing:"content-box",width:16,height:16,marginLeft:-8,marginTop:-8,cursor:"pointer",background:"linear-gradient(to bottom, rgba(33, 36, 44, 0.2), rgba(33, 36, 44, 0.5))",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 10px 0 rgba(33, 36, 44, 0.1)"},markerSelected:{width:28,height:28,marginLeft:-12,marginTop:-12,border:"none",borderRadius:28,"::before":{content:"''",display:"block",width:20,height:20,marginLeft:2,marginTop:2,border:"solid 2px #ffffff",borderRadius:20}},markerWithAnswers:{background:"#1865f2"},dropdownPositionWithArrow:{left:46,bottom:-12,"::before":{content:"''",display:"block",position:"absolute",width:0,height:0,left:-16,bottom:8,borderRight:`solid 16px ${i.colors.gray98}`,borderTop:"solid 16px transparent",borderBottom:"solid 16px transparent"}},labelContainer:{padding:4},dividerHorizontal:{height:0,margin:0,border:`solid ${i.colors.gray85}`,borderWidth:"0 0 1px",boxShadow:"none"}})},"27QP":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=r(n("cxY9")),l=r(n("ydm1")),u=r(n("qoj5")),c=r(n("M++g")),p=r(n("ONox")),d=r(n("1SF4")),h=n("eAf/");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}class g extends s.Component{constructor(...e){super(...e),this.onRangeChange=e=>{this.props.onChange({range:e})},this.onLabelRangeChange=(e,t)=>{let n=this.props.labelRange.slice();const r=n[1-e];null==t||null==r?n[e]=t:n=[Math.min(t,r),Math.max(t,r)],this.props.onChange({labelRange:n})},this.onDivisionRangeChange=e=>{let t=this.props.numDivisions;var n,r,s;n=t,r=e[0],s=e[1],t=Math.min(Math.max(n,r),s),this.props.onChange({divisionRange:e,numDivisions:t})},this.onNumChange=(e,t)=>{const n={};n[e]=t,this.props.onChange(n)},this.onNumDivisionsChange=e=>{const t=this.props.divisionRange.slice();(e=(e=a.default.isFinite(e)?Math.round(e):0)<0?-1*e:e)&&(e=Math.min(t[1],Math.max(t[0],e)),this.props.onChange({tickStep:null,divisionRange:t,numDivisions:e}))},this.onTickStepChange=e=>{this.props.onChange({numDivisions:null,tickStep:e})},this.onChangeRelation=e=>{const t=e.target.value;this.props.onChange({correctRel:t,isInequality:"eq"!==t})},this.onLabelStyleChange=e=>{this.props.onChange({labelStyle:e})},this.serialize=()=>i.default.serialize.call(this)}render(){const e=this.props.range,t=this.props.labelRange,n=this.props.divisionRange;e[0]=+e[0],e[1]=+e[1];const r=e[1]-e[0],o=this.props.numDivisions,a=this.props.snapDivisions,i=this.props.tickStep,f=this.props.isTickCtrl;let g;g=f?null:i?i/a:r/o/a;return s.createElement("div",{className:"perseus-widget-number-line-editor"},s.createElement("div",{className:"perseus-widget-row"},"Correct x"," ",s.createElement("select",{value:this.props.correctRel,onChange:this.onChangeRelation},s.createElement("option",{value:"eq"}," = "),s.createElement("option",{value:"lt"}," < "),s.createElement("option",{value:"gt"}," > "),s.createElement("option",{value:"le"}," ≤ "),s.createElement("option",{value:"ge"}," ≥ "))," ",s.createElement(c.default,{value:this.props.correctX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"correctX"),checkValidity:t=>t>=e[0]&&t<=e[1]&&(!g||h.number.isInteger((t-e[0])/g)),placeholder:"answer",size:"normal",useArrowKeys:!0}),s.createElement(u.default,null,s.createElement("p",null,"This is the correct answer. The answer is validated (as right or wrong) by using only the end position of the point and the relation (=, <, >, ≤, ≥)."))),s.createElement("div",{className:"perseus-widget-row"},this.props.static?s.createElement("label",null,"Range:"):s.createElement("label",null,"Position:"," ",s.createElement(c.default,{value:this.props.initialX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"initialX"),placeholder:e[0],checkValidity:t=>t>=e[0]&&t<=e[1],useArrowKeys:!0})," ∈ "),s.createElement(d.default,{value:e,onChange:this.onRangeChange,format:this.props.labelStyle,useArrowKeys:!0}),s.createElement(u.default,null,s.createElement("p",null,"This controls the initial position of the point along the number line and the",s.createElement("strong",null,"range"),", the position of the endpoints of the number line. Setting the range constrains the position of the answer and the labels."),s.createElement("p",null,"In static mode, the initial position of the point is determined by Correct x instead of position."))),s.createElement("div",{className:"perseus-widget-row"},s.createElement("div",{className:"perseus-widget-left-col"},"Labels:"," ",s.createElement(c.default,{value:t[0],placeholder:e[0],format:this.props.labelStyle,checkValidity:t=>t>=e[0]&&t<=e[1],onChange:this.onLabelRangeChange.bind(this,0),useArrowKeys:!0}),s.createElement("span",null," & "),s.createElement(c.default,{value:t[1],placeholder:e[1],format:this.props.labelStyle,checkValidity:t=>t>=e[0]&&t<=e[1],onChange:this.onLabelRangeChange.bind(this,1),useArrowKeys:!0}),s.createElement(u.default,null,s.createElement("p",null,"This controls the position of the left / right labels. By default, the labels are set by the range ",s.createElement("br",null),s.createElement("strong",null,"Note:")," Ensure that the labels line up with the tick marks, or it may be confusing for users.")))),s.createElement("div",{className:"perseus-widget-row"},"Style:"," ",s.createElement(l.default,{allowEmpty:!1,value:this.props.labelStyle,buttons:[{value:"decimal",content:"0.75",title:"Decimals"},{value:"improper",content:"⁷⁄₄",title:"Improper fractions"},{value:"mixed",content:"1¾",title:"Mixed numbers"},{value:"non-reduced",content:"⁸⁄₄",title:"Non-reduced"}],onChange:this.onLabelStyleChange}),s.createElement(u.default,null,s.createElement("p",null,"This controls the styling of the labels for the two main labels as well as all the tick mark labels, if applicable. Your choices are decimal, improper fractions, mixed fractions, and non-reduced fractions."))),s.createElement("div",{className:"perseus-widget-row"},!this.props.static&&s.createElement("div",{className:"perseus-widget-left-col"},s.createElement(p.default,{label:"Show tick controller",isTickCtrl:this.props.isTickCtrl,onChange:this.props.onChange})),s.createElement("div",{className:"perseus-widget-right-col"},s.createElement(p.default,{label:"Show label ticks",labelTicks:this.props.labelTicks,onChange:this.props.onChange}))),s.createElement("div",{className:"perseus-widget-row"},!this.props.static&&s.createElement(p.default,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.props.onChange})),s.createElement("div",{className:"perseus-widget-row"},f&&s.createElement("span",null,s.createElement("label",null,"Start num divisions at"," ",s.createElement(c.default,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:e=>e>=n[0]&&e<=n[1],placeholder:r/this.props.tickStep,useArrowKeys:!0})),s.createElement(u.default,null,s.createElement("p",null,"This controls the number (and position) of the tick marks. The number of divisions is constrained to"," "+n[0]+"–"+n[1],".",s.createElement("br",null),s.createElement("strong",null,"Note:")," The user will be able to specify the number of divisions in a number input."))),!f&&s.createElement("span",null,s.createElement("label",null,"Num divisions:"," ",s.createElement(c.default,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:e=>e>=n[0]&&e<=n[1],placeholder:r/this.props.tickStep,useArrowKeys:!0}))," ",s.createElement("label",null,"or tick step:"," ",s.createElement(c.default,{value:this.props.tickStep||null,format:this.props.labelStyle,onChange:this.onTickStepChange,checkValidity:e=>e>0&&e<=r,placeholder:r/this.props.numDivisions,useArrowKeys:!0})),s.createElement(u.default,null,s.createElement("p",null,"This controls the number (and position) of the tick marks; you can either set the number of divisions (2 divisions would split the entire range in two halves), or the tick step (the distance between ticks) and the other value will be updated accordingly."," ",s.createElement("br",null),s.createElement("strong",null,"Note:")," There is no check to see if labels coordinate with the tick marks, which may be confusing for users if the blue labels and black ticks are off-step.")))),s.createElement("div",{className:"perseus-widget-row"},s.createElement("label",null,"Snap increments per tick:"," ",s.createElement(c.default,{value:a,checkValidity:e=>e>0,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"snapDivisions"),useArrowKeys:!0})),s.createElement(u.default,null,s.createElement("p",null,"This determines the number of different places the point will snap between two adjacent tick marks."," ",s.createElement("br",null),s.createElement("strong",null,"Note:"),"Ensure the required number of snap increments is provided to answer the question."))))}}g.propTypes={range:o.default.arrayOf(o.default.number).isRequired,labelRange:o.default.arrayOf(o.default.number).isRequired,labelStyle:o.default.string.isRequired,labelTicks:o.default.bool,divisionRange:o.default.arrayOf(o.default.number).isRequired,numDivisions:o.default.number.isRequired,snapDivisions:o.default.number,tickStep:o.default.number,correctRel:o.default.oneOf(["lt","gt","le","ge","eq"]),correctX:o.default.number,initialX:o.default.number,isTickCtrl:o.default.bool,onChange:o.default.func.isRequired,static:o.default.bool,showTooltips:o.default.bool},g.widgetName="number-line",g.defaultProps={range:[0,10],labelRange:[null,null],labelStyle:"decimal",labelTicks:!0,divisionRange:[1,12],numDivisions:5,snapDivisions:2,tickStep:null,correctRel:"eq",correctX:null,initialX:null,showTooltips:!1};var m=g;t.default=m},"2BsJ":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("eAf/"),a=r(n("5pch")),i=r(n("96rG")),l=r(n("qJK0")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("4PhQ")),c=r(n("XwLL")),p=r(n("KmI1")),d=r(n("yfnS"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const{processMath:f}=p.default;function g(e,t){return"number"==typeof e&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}const m={unscaledSvgPath:function(e){return!0===e[0]?"":i.default.map(e,(function(e,t){return!0===e?"z":(0===t?"M":"L")+e[0]+" "+e[1]})).join("")},getDistance:function(e,t){return o.point.distanceToPoint(e,t)},coordDiff:function(e,t){return a.default.map(t,(function(n,r){return t[r]-e[r]}))},snapCoord:function(e,t){return a.default.map(e,(function(e,n){return c.default.roundToNearest(t[n],e)}))},findAngle:function(e,t,n){if(void 0===n){const n=e[0]-t[0],r=e[1]-t[1];return n||r?(180+180*Math.atan2(-r,-n)/Math.PI+360)%360:0}return m.findAngle(e,n)-m.findAngle(t,n)},graphs:{}},v=m.Graphie=function(){};a.default.extend(v.prototype,{cartToPolar:function(e,t){const n=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2));let r=Math.atan2(e[1],e[0]);return r<0&&(r+=2*Math.PI),t||(r=180*r/Math.PI),[n,r]},polar:g});const y={center:[-.5,-.5],above:[-.5,-1],"above right":[0,-1],right:[0,-.5],"below right":[0,0],below:[-.5,0],"below left":[-1,0],left:[-1,-.5],"above left":[-1,-1]},b={"stroke-width":null};m.createGraphie=function(e){let t,n,r=40,p=40;(0,i.default)(e).css("position","relative");const h=(0,l.default)(e);(0,i.default)(e).children("div").css("position","absolute");let w={"stroke-width":2,fill:"none"};const x=function e(t){if("number"==typeof t)return e([t,t]);const n=t[0],s=t[1];return[n*r,s*p]},E=function e(s){if("number"==typeof s)return e([s,s]);const o=s[0],a=s[1];return[(o-t[0])*r,(n[1]-a)*p]},C=function(e,t){const n=(0,i.default)(e),r=n.data("labelDirection");let[s,o]=t;if(0===s&&0===o&&([s,o]=[1,1],u.default.log("Label size was 0x0 in graphie.js; using 1x1 instead")),n.css("visibility",""),"number"==typeof r){const e=Math.cos(r),t=Math.sin(r),a=Math.min(s/2/Math.abs(e),o/2/Math.abs(t));n.css({marginLeft:-s/2+e*a,marginTop:-o/2-t*a})}else{const e=y[r||"center"];n.css({marginLeft:Math.round(s*e[0]),marginTop:Math.round(o*e[1])})}},k=function(e,t){return i.default.map(e,(function(e,n){if(!0===e)return"z";const r=t?e:E(e);return(0===n?"M":"L")+c.default.bound(r[0])+" "+c.default.bound(r[1])})).join("")},O=function(e,n,r){const s=function(t){return(e*t+n)*t+r};if(0===e){const e=a.default.map(t,(function(e){return[e,s(e)]}));return k(e)}const o=-n/(2*e),i=o+Math.max(Math.abs(o-t[0]),Math.abs(o-t[1])),l=[o,s(o)],u=[i,s(i)],p=[l[0],l[1]-(u[1]-l[1])],d=Math.abs(l[0]-u[0]),h=[l[0]-d,u[1]],f=[l[0]+d,u[1]],g=a.default.map([h,p,f],E),m=a.default.map(a.default.flatten(g),c.default.bound);return"M"+m[0]+","+m[1]+" Q"+m[2]+","+m[3]+" "+m[4]+","+m[5]},M=function(e,n,r,s){const o=Math.abs(Math.PI/(2*n)),i=function(t){return e*Math.sin(n*t-r)+s},l=function(t){return e*n*Math.cos(r-n*t)},u=function(e,t){const n=e+o*t,r=n+o,s=[n,2*n/3+1*r/3,1*n/3+2*r/3,r],u=[i(n),i(n)+l(n)*(r-n)/3,i(r)-l(r)*(r-n)/3,i(r)];return a.default.map(a.default.zip(s,u),E)},c=t[1]-t[0],p=Math.ceil(c/o)+1;let d=r/n;const h=d-t[0];d-=o*Math.ceil(h/o);let f=u(d,0),g="M"+f[0][0]+","+f[0][1]+" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1];for(let e=1;e<p;e++)f=u(d,e),g+=" C"+f[1][0]+","+f[1][1]+" "+f[2][0]+","+f[2][1]+" "+f[3][0]+","+f[3][1];return g};m.svgPath=k;const P=function(e){const s={scale:function(e){"number"==typeof e&&(e=[e,e]),r=e[0],p=e[1],h.setSize((t[1]-t[0])*r,(n[1]-n[0])*p)},clipRect:function(e){const t=e[0],n=e[1];return t[1]+=n[1],{"clip-rect":E(t).concat(x(n)).join(" ")}},strokeWidth:function(e){return{"stroke-width":parseFloat(e)}},rx:function(e){return{rx:x([e,0])[0]}},ry:function(e){return{ry:x([0,e])[1]}},r:function(e){const t=x([e,e]);return{rx:t[0],ry:t[1]}}},o={};return i.default.each(e||{},(function(e,t){const n=s[e];if("function"==typeof n)i.default.extend(o,n(t));else{const n=e.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();o[n]=t}})),o},_=function e(t){const n=t.constructor.prototype;if(n===l.default.el){if("path"===t.type&&void 0===t.arrowheadsDrawn){const e=.6+.4*t.attr("stroke-width"),n=t.getTotalLength(),r=h.set(),s=h.path(T.isMobile?"M-4,4 C-4,4 -0.25,0 -0.25,0 C-0.25,0 -4,-4 -4,-4":"M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),o=t.getPointAtLength(n-.4),a=t.getPointAtLength(n-.75*e),i=180*Math.atan2(o.y-a.y,o.x-a.x)/Math.PI,l=t.attr();delete l.path;let u=t.getSubpath(0,n-.75*e);return u=h.path(u).attr(l),u.arrowheadsDrawn=!0,t.remove(),s.rotate(i,T.isMobile?1e-5:.75,0).scale(e,e,.75,0).translate(a.x,a.y).attr(l).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),s.arrowheadsDrawn=!0,r.push(u),r.push(s),r}}else if(n===l.default.st)for(let n=0,r=t.items.length;n<r;n++)e(t.items[n]);return t},S={circle:function(e,t){return h.ellipse.apply(h,E(e).concat(x([t,t])))},rect:function(e,t,n,r){const s=E([e,t+r]),o=x([n,r]),a=h.rect.apply(h,s.concat(o));return T.isMobile&&(a.node.style.shapeRendering="crispEdges"),a},ellipse:function(e,t){return h.ellipse.apply(h,E(e).concat(x(t)))},fixedEllipse:function(e,t,n,r){const s=E(e),o=x(t),a=2*o[0]*n+r,u=2*o[1]*n+r,c=s[0]-a/2,p=s[1]-u/2,d=document.createElement("div");(0,i.default)(d).css({position:"absolute",width:a+"px",height:u+"px",left:c+"px",top:p+"px"});return{wrapper:d,visibleShape:(0,l.default)(d,a,u).ellipse(a/2,u/2,o[0],o[1])}},arc:function(e,t,n,r,s){n=(n%360+360)%360,r=(r%360+360)%360;const o=E(e),a=x(t),i=g(t,n),l=g(t,r),u=E([e[0]+i[0],e[1]+i[1]]),c=E([e[0]+l[0],e[1]+l[1]]),p=((r-n)%360+360)%360>180;return h.path("M"+u.join(" ")+"A"+a.join(" ")+" 0 "+(p?1:0)+" 0 "+c.join(" ")+(s?"L"+o.join(" ")+"z":""))},path:function(e){const t=h.path(k(e));return t.graphiePath=e,t},fixedPath:function(e,t,n){e=a.default.map(e,E),t=t?E(t):null,n=n||k;const r=a.default.min(a.default.pluck(e,0)),s=a.default.max(a.default.pluck(e,0)),u=a.default.min(a.default.pluck(e,1)),c=a.default.max(a.default.pluck(e,1)),p=[4,4],d=[r,u];e=a.default.map(e,(function(e){return o.vector.add(o.vector.subtract(e,d),o.vector.scale(p,.5))}));const h=s-r+p[0],f=c-u+p[1],g=d[0]-p[0]/2,m=d[1]-p[1]/2,v=document.createElement("div");(0,i.default)(v).css({position:"absolute",width:h+"px",height:f+"px",left:g+"px",top:m+"px",transformOrigin:t?h/2+t[0]+"px "+(f/2+t[1])+"px":null});return{wrapper:v,visibleShape:(0,l.default)(v,h,f).path(n(e))}},scaledPath:function(e){const t=h.path(k(e,!0));return t.graphiePath=e,t},line:function(e,t){const n=this.path([e,t]);return T.isMobile&&(n.node.style.shapeRendering="crispEdges"),n},parabola:function(e,t,n){return h.path(O(e,t,n))},fixedLine:function(e,t,n){const r=[n,n];e=E(e),t=E(t);const s=[Math.min(e[0],t[0]),Math.min(e[1],t[1])];e=o.vector.add(o.vector.subtract(e,s),o.vector.scale(r,.5)),t=o.vector.add(o.vector.subtract(t,s),o.vector.scale(r,.5));const a=s[0]-r[0]/2,u=s[1]-r[1]/2,c=Math.abs(e[0]-t[0])+r[0],p=Math.abs(e[1]-t[1])+r[1],d=document.createElement("div");(0,i.default)(d).css({position:"absolute",width:c+"px",height:p+"px",left:a+"px",top:u+"px",transformOrigin:e[0]+"px "+e[1]+"px"});const h=(0,l.default)(d,c,p),f="M"+e[0]+" "+e[1]+" L"+t[0]+" "+t[1],g=h.path(f);return g.graphiePath=[e,t],{wrapper:d,visibleShape:g}},sinusoid:function(e,t,n,r){return h.path(M(e,t,n,r))},grid:function(e,t){const n=w.step||[1,1],r=h.set();let s=n[0]*Math.ceil(e[0]/n[0]);for(;s<=e[1];s+=n[0])r.push(this.line([s,t[0]],[s,t[1]]));let o=n[1]*Math.ceil(t[0]/n[1]);for(;o<=t[1];o+=n[1])r.push(this.line([e[0],o],[e[1],o]));return r},label:function(t,n,r,s){s=void 0===s||s;const o=(0,i.default)("<span>").addClass("graphie-label"),a=w["label-distance"];o.css(i.default.extend({},{position:"absolute",padding:(null!=a?a:7)+"px",color:"black"})).data("labelDirection",r).appendTo(e),o.setPosition=function(e){const t=E(e);o.css({left:t[0],top:t[1]})},o.setPosition(t);const l=o[0];return o.processMath=function(e,t){f(l,e,t,(function(){const e=l.scrollWidth,t=l.scrollHeight;C(l,[e,t])}))},o.processText=function(e){o.html(e);const t=l.scrollWidth,n=l.scrollHeight;C(l,[t,n])},s?o.processMath(n,!1):o.processText(n),o},plotParametric:function(e,t,n,r){r=r||function(e){return[e,0]};const s=e=>Math.abs(e[1])>5e5?[e[0],Math.min(Math.max(e[1],-5e5),5e5)]:e,o=t=>s(e(t)),a=e=>s(r(e));w.strokeLinejoin||(w.strokeLinejoin="round"),w.strokeLinecap||(w.strokeLinecap="round");const i=t[0],l=t[1];let u=(l-i)/(w["plot-points"]||800);0===u&&(u=1);const c=h.set();let d=[],f=m.coordDiff(o(i),a(i)),g=i;for(let e=i;e<=l;e+=u){const t=o(e),r=a(e),s=m.coordDiff(t,r);if(s[1]<0!=f[1]<0&&Math.abs(s[1]-f[1])>2*p||isNaN(s[1])){if(n){d.push(t);for(let t=e-u;t>=g;t-=u)d.push(a(t));g=e}c.push(this.path(d)),d=[],n&&d.push(t)}else d.push(t);f=s}if(n)for(let e=l-u;e>=g;e-=u)d.push(a(e));return c.push(this.path(d)),c},plotPolar:function(e,t){const n=t[0],s=t[1];return w["plot-points"]||(w["plot-points"]=2*(s-n)*r),this.plotParametric((function(t){return g(e(t),180*t/Math.PI)}),t)},plot:function(e,t,n,s,o){const a=t[0],i=t[1];if(w["plot-points"]||(w["plot-points"]=2*(i-a)*r),n){if(o)throw new u.KAError("Can't shade area between functions with swapped axes.",u.Errors.Internal);return this.plotParametric((function(t){return[e(t),t]}),t,s)}if(o){if(s)return this.plotParametric((function(t){return[t,e(t)]}),t,s,(function(e){return[e,o(e)]}));throw new u.KAError("fn2 should only be set when 'shade' is True.",u.Errors.Internal)}return this.plotParametric((function(t){return[t,e(t)]}),t,s)},plotPiecewise:function(e,t){const n=h.set(),r=this;return a.default.times(e.length,(function(s){const o=e[s],i=t[s],l=r.plotParametric((function(e){return[e,o(e)]}),i);a.default.each(l,(function(e){n.push(e)}))})),n},plotEndpointCircles:function(e){const t=h.set(),n=this;return a.default.each(e,(function(e,r){t.push(n.circle(e,.15))})),t},plotAsymptotes:function(e,t){const n=t[0],r=t[1],s=(r-n)/(w["plot-points"]||800),o=h.set();let a=e(n);for(let t=n;t<=r;t+=s){const n=e(t);n<0!=a<0&&Math.abs(n-a)>2*p&&o.push(this.line([t,p],[t,-p])),a=n}return o}},T=new v;return a.default.extend(T,{raphael:h,init:function(s){let o=s.scale||[40,40];if(o="number"==typeof o?[o,o]:o,r=o[0],p=o[1],null==s.range)throw new u.KAError("range should be specified in graph init",u.Errors.Internal);t=s.range[0],n=s.range[1];const a=(t[1]-t[0])*r,l=(n[1]-n[0])*p;return h.setSize(a,l),(0,i.default)(e).css({width:a,height:l}),this.range=s.range,this.scale=o,this.dimensions=[a,l],this.xpixels=a,this.ypixels=l,this.isMobile=s.isMobile,this},style:function(e,t){const n=P(e);if("function"==typeof t){const e=w;w=i.default.extend({},w,n);const r=t.call(T);return w=e,r}i.default.extend(w,n)},scalePoint:E,scaleVector:x,unscalePoint:function e(s){if("number"==typeof s)return e([s,s]);const o=s[0],a=s[1];return[o/r+t[0],n[1]-a/p]},unscaleVector:function e(t){return"number"==typeof t?e([t,t]):[t[0]/r,t[1]/p]},svgPath:k,svgParabolaPath:O,svgSinusoidPath:M}),i.default.each(S,(function(e){T[e]=function(){const t=arguments[arguments.length-1],n=w;let r;if("object"!=typeof t||a.default.isArray(t))w=i.default.extend({},w),r=S[e].apply(S,arguments);else{w=(0,s.default)({},w,P(t));const n=[].slice.call(arguments,0,arguments.length-1);r=S[e].apply(S,n)}const o=r.constructor.prototype;return o===l.default.el||o===l.default.st?(r.attr(w),w.arrows&&(r=_(r))):r instanceof i.default&&r.css((0,s.default)({},w,b)),w=n,r}})),T.graphInit=function(e){e=e||{},i.default.each(e,(function(t,n){t.match(/.*Opacity$/)||"range"===t||"number"!=typeof n||(e[t]=[n,n]),"range"!==t&&"gridRange"!==t||(n.constructor===Array?n[0].constructor!==Array&&(e[t]=[[-n[0],n[0]],[-n[1],n[1]]]):"number"==typeof n&&(e[t]=[[-n,n],[-n,n]]))}));const t=e.range||[[-10,10],[-10,10]],n=e.gridRange||e.range,r=e.scale||[20,20],s=null==e.grid||e.grid,o=e.gridOpacity||.1,l=e.gridStep||[1,1],u=null==e.axes||e.axes,c=e.axisArrows||"",p=e.axisOpacity||1,h=e.axisCenter||[Math.min(Math.max(t[0][0],0),t[0][1]),Math.min(Math.max(t[1][0],0),t[1][1])],f=null!=e.axisLabels&&e.axisLabels,g=null==e.ticks||e.ticks,m=e.tickStep||[2,2],v=e.tickLen||[5,5],y=e.tickOpacity||1,b=e.labels||e.labelStep||!1,w=e.labelStep||[1,1],x=e.labelOpacity||1;let E=e.unityLabels||!1;const C=e.labelFormat||function(e){return e};let k=e.xLabelFormat||C,O=e.yLabelFormat||C;const M=null==e.smartLabelPositioning||e.smartLabelPositioning,P=[[t[0][0]-(t[0][0]>0?1:0),t[0][1]+(t[0][1]<0?1:0)],[t[1][0]-(t[1][0]>0?1:0),t[1][1]+(t[1][1]<0?1:0)]];if(a.default.isArray(E)||(E=[E,E]),M){const e=function(e){return function(t){return(e(t)+"").replace(/-(\d)/g,"\\llap{-}$1")}};k=e(k),O=e(O)}if(this.init({range:P,scale:r,isMobile:e.isMobile}),s&&this.grid(n[0],n[1],{stroke:e.isMobile?d.default.GRAY_C:"#000000",opacity:e.isMobile?1:o,step:l,strokeWidth:e.isMobile?1:2}),u&&("<->"===c||!0===c?this.style({stroke:e.isMobile?d.default.GRAY_G:"#000000",opacity:e.isMobile?1:p,strokeWidth:e.isMobile?1:2,arrows:"->"},(function(){t[1][0]<0&&t[1][1]>0&&(this.path([h,[n[0][0],h[1]]]),this.path([h,[n[0][1],h[1]]])),t[0][0]<0&&t[0][1]>0&&(this.path([h,[h[0],n[1][0]]]),this.path([h,[h[0],n[1][1]]]))})):"->"!==c&&""!==c||this.style({stroke:"#000000",opacity:p,strokeWidth:2,arrows:c},(function(){this.path([[n[0][0],h[1]],[n[0][1],h[1]]]),this.path([[h[0],n[1][0]],[h[0],n[1][1]]])})),f&&2===f.length&&(this.label([n[0][1],h[1]],f[0],"right"),this.label([h[0],n[1][1]],f[1],"above"))),g){const s=e.isMobile;this.style({stroke:e.isMobile?d.default.GRAY_G:"#000000",opacity:e.isMobile?1:y,strokeWidth:1},(function(){let e=l[0]*m[0],o=v[0]/r[1],a=n[0][0],i=n[0][1];if(t[1][0]<0&&t[1][1]>0){for(let t=e+h[0];t<=i;t+=e)(t<i||!c)&&this.line([t,-o+h[1]],[t,s?0:o+h[1]]);for(let t=-e+h[0];t>=a;t-=e)(t>a||!c)&&this.line([t,-o+h[1]],[t,s?0:o+h[1]])}if(e=l[1]*m[1],o=v[1]/r[0],a=n[1][0],i=n[1][1],t[0][0]<0&&t[0][1]>0){for(let t=e+h[1];t<=i;t+=e)(t<i||!c)&&this.line([-o+h[0],t],[s?0:o+h[0],t]);for(let t=-e+h[1];t>=a;t-=e)(t>a||!c)&&this.line([-o+h[0],t],[s?0:o+h[0],t])}}))}b&&this.style({stroke:e.isMobile?d.default.GRAY_G:"#000000",opacity:e.isMobile?1:x},(function(){let e=l[0]*m[0]*w[0],t=n[0][0],r=n[0][1];const s=h[0]<0?"above":"below",o=h[0]<0?"right":"left",a=0===h[0]&&0!==h[1],i=0!==h[0]&&0===h[1],u=0!==h[0]||0!==h[1],p=E[0]||u,d=E[1]||u;for(let t=(a?0:e)+h[0];t<=r;t+=e)(t<r||!c)&&this.label([t,h[1]],k(t),s);for(let n=-e*(p?1:2)+h[0];n>=t;n-=e)(n>t||!c)&&this.label([n,h[1]],k(n),s);e=l[1]*m[1]*w[1],t=n[1][0],r=n[1][1];for(let t=(i?0:e)+h[1];t<=r;t+=e)(t<r||!c)&&this.label([h[0],t],O(t),o);for(let n=-e*(d?1:2)+h[1];n>=t;n-=e)(n>t||!c)&&this.label([h[0],n],O(n),o)}))},T};var w=m;t.default=w},"2OMh":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("5pch")),i=r(n("wk+a")),l=h(n("HEOz")),u=n("QESs"),c=r(n("uBl0")),p=r(n("LU9M"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const f=(e,t,n)=>{const r=e.length;let s=0;if(n){if(t.inline)return null;for(;s<r&&" "===e[s];)s++}if(!(s<r&&"$"===e[s]))return null;s++;const o=s;let a=0;for(;s<r;){const t=e[s];if("\\"===t)s++;else{if(a<=0&&"$"===t){let t=s+1;if(n){const n=/^(?: *\n){2,}/.exec(e.slice(t));t=n?t+n[0].length:null}return t?[e.substring(0,t),e.substring(o,s)]:null}if("{"===t)a++;else if("}"===t)a--;else if("\n"===t&&"\n"===e[s-1])return null}s++}return null},g=new RegExp("^\\|\\| +(.*) +\\|\\| *\\n("+i.default.defaultRules.nptable.match.regex.source.substring(1)+")"),m=i.default.blockRegex(/^(crwdns.*)\n\s*\n/),v=a.default.extend({},i.default.defaultRules,{columns:{order:-2,match:i.default.blockRegex(/^([\s\S]*\n\n)={5,}\n\n([\s\S]*)/),parse:(e,t,n)=>({col1:t(e[1],n),col2:t(e[2],n)}),react:(e,t,n)=>o.createElement("div",{className:"perseus-two-columns",key:n.key},o.createElement("div",{className:"perseus-column"},o.createElement("div",{className:"perseus-column-content"},t(e.col1,n))),o.createElement("div",{className:"perseus-column"},o.createElement("div",{className:"sat-header-grafting-area"}),o.createElement("div",{className:"perseus-column-content"},o.createElement("div",{className:"sat-skill-subscore-grafting-area"}),t(e.col2,n),o.createElement("div",{className:"sat-grafting-area"}))))},crowdinId:{order:-1,match:(e,t,n)=>t.isJipt?m(e,t,n):null,parse:(e,t,n)=>({id:e[1]}),react:(e,t,n)=>e.id},table:(0,s.default)({},i.default.defaultRules.table,{react:function(e,t,n){const r=i.default.defaultRules.table.react(e,t,n);return n.isMobile?o.cloneElement(r,{tabIndex:0}):r}}),titledTable:{order:i.default.defaultRules.nptable.order-.5,match:i.default.blockRegex(g),parse:(e,t,n)=>{const r=i.default.parseInline(t,e[1],n),s=a.default.rest(e,2);return{title:r,table:i.default.defaultRules.nptable.parse(s,t,n)}},react:(e,t,n)=>{let r;if(e.table)if("lint"===e.table.type){var a;r="table"===(null==(a=e.table.content)?void 0:a.type)?v.lint.react((0,s.default)({},e.table,{content:(0,s.default)({},e,{table:e.table.content})}),t,(0,s.default)({},n,{unwrapTitledTableContents:!0})):v.lint.react(e.table,t,n)}else{const s=i.default.defaultRules.table.react(e.table,t,n),a=o.createElement("caption",{key:"caption",className:"perseus-table-title"},t(e.title,n));r=o.cloneElement(s,null,[a].concat(s.props.children))}else r="//invalid table//";return n.unwrapTitledTableContents?r:o.createElement("div",{className:"perseus-titled-table",key:n.key},r)}},widget:{order:i.default.defaultRules.link.order-.75,match:i.default.inlineRegex(c.default.rWidgetRule),parse:(e,t,n)=>({id:e[1],widgetType:e[2]}),react:(e,t,n)=>o.createElement("em",{key:n.key},l.doNotTranslate("[Widget: ",e.id,"]"))},blockMath:{order:i.default.defaultRules.codeBlock.order+.5,match:(e,t)=>f(e,t,!0),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>{const{TeX:r}=(0,u.getDependencies)();return o.createElement(r,{key:n.key},e.content)}},math:{order:i.default.defaultRules.link.order-.25,match:(e,t)=>f(e,t,!1),parse:(e,t,n)=>({content:e[1]}),react:(e,t,n)=>{const{TeX:r}=(0,u.getDependencies)();return o.createElement(r,{key:n.key},e.content)}},unescapedDollar:{order:i.default.defaultRules.link.order-.24,match:i.default.inlineRegex(/^(?!\\)\$/),parse:(e,t,n)=>({}),react:(e,t,n)=>"$"},fence:a.default.extend({},i.default.defaultRules.fence,{parse:(e,t,n)=>{const r=i.default.defaultRules.fence.parse(e,t,n);return"alt"===r.lang?{type:"codeBlock",lang:"alt",content:t(r.content+"\n\n",n)}:r}}),blockQuote:(0,s.default)({},i.default.defaultRules.blockQuote,{match:i.default.blockRegex(/^ *>[^\n]+(\n( *>)?[^\n]+)*\n{2,}/)}),link:a.default.extend({},i.default.defaultRules.link,{react:function(e,t,n){const r=i.default.defaultRules.link.react(e,t,n),a=r.props.href;let l=null;!!a&&a.match(/https?:\/\/[^\/]*khanacademy.org|^\//)||(l="noopener noreferrer");const u=(0,s.default)({},r.props,{target:"_blank",href:a,rel:l});return n.baseElements&&n.baseElements.Link?n.baseElements.Link(u):o.cloneElement(r,u)}}),codeBlock:a.default.extend({},i.default.defaultRules.codeBlock,{react:(e,t,n)=>"alt"===e.lang?o.createElement("div",{key:n.key,className:"perseus-markdown-alt perseus-sr-only"},t(e.content,n)):i.default.defaultRules.codeBlock.react(e,t,n)}),list:a.default.extend({},i.default.defaultRules.list,{match:(e,t,n)=>t.isJipt?null:i.default.defaultRules.list.match(e,t,n)}),lint:{order:1e3,match:e=>null,parse:(e,t,n)=>({}),react:(e,t,n)=>o.createElement(p.default,{message:e.message,ruleName:e.ruleName,inline:y(e.content),blockHighlight:e.blockHighlight,insideTable:e.insideTable,severity:e.severity},t(e.content,n))}});function y(e){return!!(e&&e.type&&b.hasOwnProperty(e.type))}const b={text:!0,math:!0,unescapedDollar:!0,link:!0,img:!0,strong:!0,u:!0,em:!0,del:!0,code:!0},w=i.default.parserFor(v),x=(e,t)=>w(e+"\n\n",a.default.extend({inline:!1},t)),E=(e,t)=>{a.default.isArray(e)?a.default.each(e,(e=>E(e,t))):a.default.isObject(e)&&(t(e),"table"===e.type?(E(e.header,t),E(e.cells,t)):"list"===e.type?E(e.items,t):"titledTable"===e.type?E(e.table,t):"columns"===e.type?(E(e.col1,t),E(e.col2,t)):a.default.isArray(e.content)&&E(e.content,t))},C=e=>{if(a.default.isArray(e))return a.default.flatten(a.default.map(e,C));if(e.content&&a.default.isString(e.content))return-1!==e.type.toLowerCase().indexOf("code")?["",e.content,""]:[e.content.replace(/\s+/g," ")];const t=a.default.chain(e).values().flatten().filter((e=>null!=e&&a.default.has(e,"type"))).value();if(!t.length)return[];const n=C(t);if("paragraph"===e.type&&n.length){n[0]=n[0].replace(/^\s+/,"");const e=n.length-1;n[e]=n[e].replace(/\s+$/,"")}return n};var k={characterCount:e=>{const t=x(e);return C(t).join("").length},traverseContent:E,parse:x,parseInline:(e,t)=>w(e,a.default.extend({inline:!0},t)),reactFor:i.default.reactFor,ruleOutput:i.default.ruleOutput(v,"react"),basicOutput:i.default.reactFor(i.default.ruleOutput(v,"react")),sanitizeUrl:i.default.sanitizeUrl};t.default=k},"2faI":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=r(n("qoj5")),l=r(n("DUX9"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const c="normal",p="auto",d="horizontal",h="vertical";class f extends s.Component{constructor(...e){super(...e),this.onOptionsChange=(e,t,n)=>{const r={};r[e]=a.default.map(t,(function(e){return{content:e}})),this.props.onChange(r,n)},this.onLayoutChange=e=>{this.props.onChange({layout:e.target.value})},this.onHeightChange=e=>{this.props.onChange({height:e.target.value})},this.serialize=()=>({options:a.default.chain(a.default.pluck(this.props.correctOptions,"content")).union(a.default.pluck(this.props.otherOptions,"content")).uniq().reject((function(e){return""===e})).sort().sortBy((function(e){return/\d/.test(e)?0:/^\$?[a-zA-Z]+\$?$/.test(e)?2:1})).map((function(e){return{content:e}})).value(),correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout})}render(){return s.createElement("div",{className:"perseus-widget-orderer"},s.createElement("div",null," ","Correct answer:"," ",s.createElement(i.default,null,s.createElement("p",null,"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."))),s.createElement(l.default,{options:a.default.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),s.createElement("div",null," ","Other cards:"," ",s.createElement(i.default,null,s.createElement("p",null,"Create cards that are not part of the answer."))),s.createElement(l.default,{options:a.default.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),s.createElement("div",null,s.createElement("label",null," ","Layout:"," ",s.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},s.createElement("option",{value:d},"Horizontal"),s.createElement("option",{value:h},"Vertical"))),s.createElement(i.default,null,s.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."))),s.createElement("div",null,s.createElement("label",null," ","Height:"," ",s.createElement("select",{value:this.props.height,onChange:this.onHeightChange},s.createElement("option",{value:c},"Normal"),s.createElement("option",{value:p},"Automatic"))),s.createElement(i.default,null,s.createElement("p",null,'Use "Normal" for text, "Automatic" for images.'))))}}f.propTypes={correctOptions:o.default.array,otherOptions:o.default.array,height:o.default.oneOf([c,p]),layout:o.default.oneOf([d,h]),onChange:o.default.func.isRequired},f.widgetName="orderer",f.defaultProps={correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:c,layout:d};var g=f;t.default=g},"2qRe":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=n("eAf/"),a=r(n("d773"));const i={constrain:function(){this.constrain()}};i.standard=[i.constrain];const l={draw:function(){this.draw()}};l.standard=[l.draw];const u={basic:function(e,t){const n=this.graphie;if(!this.state.visibleShape){const t=[this.pointSize()/n.scale[0],this.pointSize()/n.scale[1]],r={maxScale:Math.max(this.highlightStyle().scale,this.normalStyle().scale),padding:10,shadow:e.shadow};this.state.visibleShape=new a.default(n,this.coord(),t,r),this.state.visibleShape.attr(s.default.omit(this.normalStyle(),"scale")),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}e.normalStyle===t.normalStyle||s.default.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.moveTo(this.coord()),this.mouseTarget()&&this.mouseTarget().moveTo(this.coord())},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};u.standard=[u.basic,u.highlight];const c={basic:function(){this.state.visibleShape&&(this.state.visibleShape.remove(),this.state.visibleShape=null)}};c.standard=c.basic;const p={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,o.point.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(r,s,a){const i=this.graphie;e=e||i.range,void 0===t&&(t=i.snap);let l=i.unscalePoint([n,i.ypixels-n]),u=i.unscalePoint([i.xpixels-n,n]);if(t&&(l=o.point.ceilTo(l,t),u=o.point.floorTo(u,t)),a&&a.onOutOfBounds)return(r[0]>u[0]||r[0]<l[0]||r[1]>u[1]||r[1]<l[1])&&(a.onSkipRemaining(),a.onOutOfBounds()),r;return[Math.max(l[0],Math.min(u[0],r[0])),Math.max(l[1],Math.min(u[1],r[1]))]}},standard:null};var d={add:i,modify:l,draw:u,remove:c,onMoveStart:{standard:null},constraints:p,onMove:{standard:null},onMoveEnd:{standard:null},onClick:{standard:null}};t.default=d},"2vff":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("i8i4")),l=r(n("5pch")),u=r(n("wINb")),c=r(n("dRoQ")),p=r(n("qoj5")),d=r(n("M++g")),h=r(n("1SF4")),f=r(n("uBl0")),g=r(n("DUX9")),m=r(n("ipxt")),v=n("eAf/");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}const b=m.default.widget,w="bar",x="line",E="pic",C="histogram",k="dotplot";function O(e,t,n){const r=l.default.clone(e);r.length=t;for(let s=e.length;s<t;s++)r[s]=n;return r}const M={scaleY:1,maxY:10,snapsPerLine:2},P={type:a.default.oneOf([w,x,E,C,k]),labels:a.default.arrayOf(a.default.string),categories:a.default.arrayOf(a.default.oneOfType([a.default.number,a.default.string])),scaleY:a.default.number,maxY:a.default.number,snapsPerLine:a.default.number,picSize:a.default.number,pixBoxHeight:a.default.number,picUrl:a.default.string,plotDimensions:a.default.arrayOf(a.default.number),labelInterval:a.default.number,starting:a.default.arrayOf(a.default.number),correct:a.default.arrayOf(a.default.number),static:a.default.bool,onChange:a.default.func},_=e=>"$"+v.number.round(e,2)+"$";class S extends o.Component{constructor(...e){super(...e),this.state={editing:this.props.static?"starting":"correct",pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null},this.fetchPic=e=>{if(this.state.loadedUrl!==e){const t=new Image;t.src=e,t.onload=()=>{this.setState({pic:t,loadedUrl:e})}}},this.handleChangeTickStep=e=>{this.setState({tickStep:e})},this.handleChangeRange=e=>{this.setState({minX:e[0],maxX:e[1]})},this.changeLabelInterval=e=>{this.props.onChange({labelInterval:e})},this.handlePlotterChange=e=>{const t={};t[this.state.editing]=e.values,this.props.onChange(t)},this.changeType=e=>{let t;if(e===C?(t=[_(0)].concat(this.props.categories),this.props.onChange({type:e,categories:t})):this.props.type===C?(t=this.props.categories.slice(1),this.props.onChange({type:e,categories:t})):this.props.onChange({type:e}),t){i.default.findDOMNode(this.refs.categories).value=t.join(", ")}},this.changeLabel=(e,t)=>{const n=l.default.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},this.changePicUrl=e=>{const t=f.default.getRealImageUrl(e);this.props.onChange({picUrl:t})},this.changeCategories=e=>{let t=e.length;this.props.type===C&&t--;const n=this.props.scaleY;this.props.onChange({categories:e,correct:O(this.props.correct,t,n),starting:O(this.props.starting,t,n)})},this.changeScale=e=>{const t=this.props.scaleY,n=+e.target.value||M.scaleY,r=function(e){return e*n/t},s=r(this.props.maxY);this.props.onChange({scaleY:n,maxY:s,correct:l.default.map(this.props.correct,r),starting:l.default.map(this.props.starting,r)}),i.default.findDOMNode(this.refs.maxY).value=s},this.changeMax=e=>{this.props.onChange({maxY:+e.target.value||M.maxY})},this.changeSnaps=e=>{this.props.onChange({snapsPerLine:+e.target.value||M.snapsPerLine})},this.changeEditing=e=>{this.setState({editing:e})},this.setCategoriesFromScale=()=>{const e=this.state.tickStep||1,t=this.state.minX||0,n=this.state.maxX||0,r=Math.floor((n-t)/e)*e;let s;s=this.props.type===C||this.props.type===k?l.default.range(0,r+e,e):l.default.range(e,r+e,e),s=l.default.map(s,(e=>e+t)),s=l.default.map(s,_),this.changeCategories(s);i.default.findDOMNode(this.refs.categories).value=s.join(", ")},this.serialize=()=>{const e=l.default.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return this.props.type===E&&(e.picUrl=this.props.picUrl),e}}UNSAFE_componentWillMount(){this.fetchPic(this.props.picUrl)}UNSAFE_componentWillReceiveProps(e){this.fetchPic(e.picUrl),e.static&&this.setState({editing:"starting"})}render(){const e=l.default.contains([x,C,k],this.props.type),t=!l.default.contains([E,k],this.props.type),n=(0,s.default)({trackInteraction:()=>{}},this.props);return o.createElement("div",{className:"perseus-widget-plotter-editor"},o.createElement("div",null,"Chart type:"," ",l.default.map([w,x,E,C,k],(function(e){return o.createElement("label",{key:e},o.createElement("input",{type:"radio",name:"chart-type",checked:this.props.type===e,onChange:l.default.partial(this.changeType,e)}),e)}),this)),o.createElement("div",null,"Labels:"," ",l.default.map(["x","y"],(function(e,t){return o.createElement("label",{key:e},e+":",o.createElement("input",{type:"text",onChange:l.default.partial(this.changeLabel,t),defaultValue:this.props.labels[t]}))}),this)),e&&o.createElement("div",{className:"set-from-scale-box"},o.createElement("span",{className:"categories-title"},"Set Categories From Scale"),o.createElement("div",null,o.createElement("label",null,"Tick Step:"," ",o.createElement(d.default,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})),o.createElement(p.default,null,o.createElement("p",null,"The difference between adjacent ticks."))),o.createElement("div",null,o.createElement("label",null,"Range:"," ",o.createElement(h.default,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange}))),o.createElement("div",null,o.createElement("button",{onClick:this.setCategoriesFromScale},"Set Categories"," "))),o.createElement("div",null,o.createElement("label",null,"Label Interval:"," ",o.createElement(d.default,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})),o.createElement(p.default,null,o.createElement("p",null,'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'))),this.props.type===E&&o.createElement("div",null,o.createElement("label",null,"Picture:"," ",o.createElement(c.default,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),o.createElement(p.default,null,o.createElement("p",null,'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'))),this.state.pic&&this.state.pic.width!==this.state.pic.height&&o.createElement("p",{className:"warning"},o.createElement("b",null,"Warning"),": You are using a picture which is not square. This means the image will get distorted. You should probably crop it to be square.")),o.createElement("div",null,o.createElement("label",null,"Categories:"," ",o.createElement(g.default,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories}))),o.createElement("div",null,o.createElement("label",null,"Scale (y):"," ",o.createElement("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY}))),o.createElement("div",null,o.createElement("label",null,"Max y:"," ",o.createElement("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY}))),t&&o.createElement("div",null,o.createElement("label",null,"Snaps per line:"," ",o.createElement("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})),o.createElement(p.default,null,o.createElement("p",null,"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."))),o.createElement("div",null,"Editing values:"," ",["correct","starting"].map((e=>o.createElement("label",{key:e},o.createElement("input",{type:"radio",disabled:"correct"===e&&this.props.static,checked:this.props.static?"starting"===e:this.state.editing===e,onChange:t=>this.changeEditing(e)}),e))),o.createElement(p.default,null,o.createElement("p",null,"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."),o.createElement("p",null,"In static mode, the starting values are rendered out to the displayed widget."))),o.createElement(b,(0,s.default)({},n,{starting:this.props[this.state.editing],onChange:this.handlePlotterChange})))}}S.propTypes=P,S.widgetName="plotter",S.defaultProps=l.default.extend({},M,{correct:[1],starting:[1],type:w,labels:["",""],categories:[""],picSize:30,picBoxHeight:36,picUrl:(0,u.default)("/images/badges/earth-small.png"),plotDimensions:[275,200],labelInterval:1});var T=S;t.default=T},"35EU":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=y(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=r(n("mbWs")),u=r(n("gmVs")),c=y(n("+jAD")),p=r(n("qoj5")),d=r(n("ONox")),h=r(n("YyJt")),f=n("QESs"),g=r(n("jskG")),m=n("IYtG");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const b=["correct","wrong","ungraded"],w=a.default.shape({considered:a.default.oneOf(b).isRequired,value:a.default.string.isRequired,form:a.default.bool.isRequired,simplify:a.default.bool.isRequired}),x=e=>{const t=[];e.forEach((e=>{t[e.key]=!0}));for(let e=0;e<t.length;e++)if(!t[e])return e;return t.length};class E extends o.Component{constructor(e){let t;super(e),this.change=(...e)=>c.change.apply(this,e),this.serialize=()=>{const e=["value","form","simplify","considered","key"],t=["answerForms","buttonSets","functions","times"],n=this.props.answerForms.map((t=>(0,i.default)(t).pick(e)));return(0,u.default)(this.props).set(["answerForms"],n).mod([],(e=>(0,i.default)(e).pick(t))).freeze()},this.getSaveWarnings=()=>{const e=[];if(0===this.props.answerForms.length)e.push("No answers specified");else{!!(0,i.default)(this.props.answerForms).find((e=>"correct"===e.considered))||e.push("No correct answer specified"),(0,i.default)(this.props.answerForms).each(((t,n)=>{if(""===this.props.value)e.push(`Answer ${n+1} is empty`);else{const n=l.default.parse(t.value,{functions:this.props.functions});n.parsed?t.simplify&&!n.expr.isSimplified()&&e.push(`${t.value} isn't simplified, but is required" +\n                            " to be`):e.push(`Couldn't parse ${t.value}`)}}))}return e},this._newEmptyAnswerForm=()=>({considered:"correct",form:!1,key:x(this.props.answerForms),simplify:!1,value:""}),this.newAnswer=()=>{const e=this.props.answerForms.slice();e.push(this._newEmptyAnswerForm()),this.change({answerForms:e})},this.handleRemoveForm=e=>{const t=this.props.answerForms.slice();t.splice(e,1),this.change({answerForms:t})},this.updateForm=(e,t)=>{const n=(0,u.default)(this.props.answerForms).merge([e],t).freeze();this.change({answerForms:n})},this.handleReorder=e=>{const t=(0,i.default)(e).map((e=>{const t=(0,i.default)(e.props).pick("considered","form","simplify","value");return t.key=e.key,t}));this.change({answerForms:t})},this.handleButtonSet=e=>{const t=(0,i.default)(g.default.buttonSets).keys(),n=(0,i.default)(t).filter((t=>(0,i.default)(this.props.buttonSets).contains(t)!==(t===e)));this.props.onChange({buttonSets:n})},this.handleToggleDiv=()=>{let e,t;(0,i.default)(this.props.buttonSets).contains("basic+div")?(e="basic",t="basic+div"):(e="basic+div",t="basic");const n=(0,i.default)(this.props.buttonSets).reject((e=>e===t)).concat(e);this.change("buttonSets",n)},this.handleTexInsert=e=>{this.refs.expression.insert(e)},this.handleFunctions=e=>{const t={};t.functions=i.default.compact(e.target.value.split(/[ ,]+/)),this.props.onChange(t)},t=0===e.answerForms.length||(0,i.default)(e.answerForms).any((e=>{const{value:t}=e;return-1!==i.default.indexOf(t,"\\")||-1!==i.default.indexOf(t,"{")})),this.state={isTex:t}}render(){const e=this.props.answerForms.map(((e,t)=>{const n={times:this.props.times,functions:this.props.functions,buttonSets:this.props.buttonSets,buttonsVisible:"focused",form:e.form,simplify:e.simplify,value:e.value,onChange:e=>this.updateForm(t,e),trackInteraction:()=>{},widgetId:this.props.widgetId+"-"+t};return(0,u.default)(e).merge([],{draggable:!0,onChange:e=>this.updateForm(t,e),onDelete:()=>this.handleRemoveForm(t),expressionProps:n}).freeze()})).map(((e,t)=>o.createElement(C,(0,s.default)({key:t},e)))),t=o.createElement(h.default,{components:e,onReorder:this.handleReorder,className:"answer-options-list"}),n=(0,i.default)(g.default.buttonSets).map(((e,t)=>{const n="basic"===t,r=i.default.contains(this.props.buttonSets,t)||n,s=n?"button-set-label-float":"button-set-label";return o.createElement("label",{className:s,key:t},o.createElement("input",{type:"checkbox",checked:r,disabled:n,onChange:()=>this.handleButtonSet(t)}),t)})),{TeX:r}=(0,f.getDependencies)();return n.splice(1,1,o.createElement("label",{key:"show-div"},o.createElement("input",{type:"checkbox",onChange:this.handleToggleDiv}),o.createElement("span",{className:"show-div-button"},"show ",o.createElement(r,null,"\\div")," button"))),o.createElement("div",{className:"perseus-widget-expression-editor"},o.createElement("h3",{className:"expression-editor-h3"},"Global Options"),o.createElement("div",null,o.createElement(d.default,{times:this.props.times,onChange:this.props.onChange,labelAlignment:"right",label:"Use × for rendering multiplication instead of a center dot."}),o.createElement(p.default,null,o.createElement("p",null,"For pre-algebra problems this option displays multiplication as \\times instead of \\cdot in both the rendered output and the acceptable formats examples."))),o.createElement("div",null,o.createElement("label",null,"Function variables: ",o.createElement("input",{type:"text",defaultValue:this.props.functions.join(" "),onChange:this.handleFunctions})),o.createElement(p.default,null,o.createElement("p",null,'Single-letter variables listed here will be interpreted as functions. This let us know that f(x) means "f of x" and not "f times x".'))),o.createElement("div",null,o.createElement("div",null,"Button sets:"),n),this.state.isTex&&o.createElement(g.default,{className:"math-input-buttons",sets:this.props.buttonSets,convertDotToTimes:this.props.times,onInsert:this.handleTexInsert}),o.createElement("h3",{className:"expression-editor-h3"},"Answers"),o.createElement("p",{style:{margin:"4px 0"}},"student responses area matched against these from top to bottom"),t,o.createElement("div",null,o.createElement("button",{className:"simple-button orange",style:{fontSize:13},onClick:this.newAnswer,type:"button"},"Add new answer")))}}E.propTypes=(0,s.default)({},c.propTypes,{answerForms:a.default.arrayOf(w),times:a.default.bool,buttonSets:g.default.buttonSetsType,functions:a.default.arrayOf(a.default.string)}),E.widgetName="expression",E.defaultProps={answerForms:[],times:!1,buttonSets:["basic"],functions:["f","g","h"]};class C extends o.Component{constructor(...e){super(...e),this.state={deleteFocused:!1},this.handleDeleteBlur=()=>{this.setState({deleteFocused:!1})},this.change=(...e)=>c.change.apply(this,e),this.handleImSure=()=>{this.props.onDelete()},this.handleDelete=()=>{this.setState({deleteFocused:!0})},this.toggleConsidered=()=>{const e=function(e,t){let n=(0,i.default)(e).indexOf(t);return n=(n+1)%e.length,e[n]}(b,this.props.considered);this.change({considered:e})}}render(){let e=null;return e=this.state.deleteFocused?o.createElement("button",{type:"button",className:"simple-button orange",onClick:this.handleImSure,onBlur:this.handleDeleteBlur},"I'm sure!"):o.createElement("button",{type:"button",className:"simple-button orange",onClick:this.handleDelete},"Delete"),o.createElement("div",{className:"expression-answer-option"},o.createElement("div",{className:"answer-handle"}),o.createElement("div",{className:"answer-body"},o.createElement("div",{className:"answer-considered"},o.createElement("div",{onClick:this.toggleConsidered,className:"answer-status "+this.props.considered},this.props.considered),o.createElement("div",{className:"answer-expression"},o.createElement(m.Expression,this.props.expressionProps))),o.createElement("div",{className:"answer-option"},o.createElement(d.default,{form:this.props.form,onChange:this.props.onChange,labelAlignment:"right",label:"Answer expression must have the same form."}),o.createElement(p.default,null,o.createElement("p",null,"The student's answer must be in the same form. Commutativity and excess negative signs are ignored."))),o.createElement("div",{className:"answer-option"},o.createElement(d.default,{simplify:this.props.simplify,onChange:this.props.onChange,labelAlignment:"right",label:"Answer expression must be fully expanded and simplified."}),o.createElement(p.default,null,o.createElement("p",null,'The student\'s answer must be fully expanded and simplified. Answering this equation (x^2+2x+1) with this factored equation (x+1)^2 will render this response "Your answer is not fully expanded and simplified."'))),o.createElement("div",{className:"remove-container"},e)))}}C.propTypes=(0,s.default)({},c.propTypes,{considered:a.default.oneOf(b).isRequired,expressionProps:a.default.object.isRequired,form:a.default.bool.isRequired,simplify:a.default.bool.isRequired,onChange:a.default.func.isRequired,onDelete:a.default.func.isRequired});var k=E;t.default=k},"473Y":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=p(n("q1tI")),o=p(n("HEOz")),a=r(n("UDUP")),i=r(n("fQFx")),l=n("OgJR"),u=r(n("czma"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class d extends s.PureComponent{_handleAddHighlight(e){this.props.onAddHighlight(e);const t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;const{contentNode:t}=this.props,n=new Range;n.selectNodeContents(t);const r=new Range;r.setStart(e.focusNode,e.focusOffset),r.collapse(!0);return(0,l.rangesOverlap)(n,r)}render(){return s.createElement(u.default,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable},((e,t)=>s.createElement("div",null,s.createElement(a.default,{editable:this.props.editable&&!this._selectionIsValid(e),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(e)&&!t&&s.createElement(i.default,{label:o._("Add highlight"),onClick:()=>this._handleAddHighlight(e.proposedHighlight),focusNode:e.focusNode,focusOffset:e.focusOffset,offsetParent:this.props.offsetParent}))))}}var h=d;t.default=h},"4CVt":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")).default.makeRule({name:"profanity",pattern:/\b(shit|piss|fuck|cunt|cocksucker|motherfucker|tits)\b/i,message:"Avoid profanity"});t.default=s},"4Zwh":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.validateAlignments=t.upgradeWidgetInfoToLatestVersion=t.traverseChildWidgets=t.supportsStaticMode=t.registerWidgets=t.registerWidget=t.registerEditors=t.isLintable=t.isAccessible=t.getWidget=t.getVersionVector=t.getVersion=t.getTransform=t.getTracking=t.getSupportedAlignments=t.getStaticTransform=t.getRendererPropsForWidgetInfo=t.getPublicWidgets=t.getEditor=t.getDefaultAlignment=t.getAllWidgetTypes=void 0;i(n("q1tI"));var s=r(n("5pch")),o=i(n("4PhQ"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const l="block",u=["default"],c={},p={},d=(e,t)=>{c[e]=t};t.registerWidget=d;t.registerWidgets=e=>{e.forEach((e=>{d(e.name,e)})),m()};t.registerEditors=e=>{e.forEach((e=>{if(!e.widgetName)throw new o.KAError(`Editor ${e.displayName} doesn't have a widgetName property`,o.Errors.Internal);p[e.widgetName]=e}))};t.getWidget=e=>s.default.has(c,e)?c[e].getWidget?c[e].getWidget():c[e].widget:null;t.getEditor=e=>s.default.has(p,e)?p[e]:null;t.getTransform=e=>s.default.has(c,e)?c[e].transform||s.default.identity:null;const h=e=>c[e]?c[e].version||{major:0,minor:0}:null;t.getVersion=h;t.getVersionVector=()=>{const e={};return s.default.each(s.default.keys(c),(function(t){e[t]=h(t)})),e};t.getPublicWidgets=()=>s.default.pick(c,s.default.reject(s.default.keys(c),(function(e){return c[e].hidden})));t.isAccessible=e=>{const t=c[e.type].accessible;return"function"==typeof t?t(e.options):!!t};t.getAllWidgetTypes=()=>s.default.keys(c);t.upgradeWidgetInfoToLatestVersion=e=>{const t=e.type;if(!s.default.isString(t))throw new o.KAError("widget type must be a string, but was: "+t,o.Errors.Internal);const n=c[t];if(null==n)return e;const r=e.version||{major:0,minor:0},a=n.version||{major:0,minor:0};if(r.major>a.major||r.major===a.major&&r.minor>a.minor)return e;let i=s.default.clone(e.options)||{};const l=n.propUpgrades||{};if(0!==s.default.keys(i).length)for(let e=r.major+1;e<=a.major;e++)l[String(e)]?i=l[String(e)](i):o.default.error("No upgrade found for widget `"+t+"` from major version `"+(e-1)+"` to major version `"+e+"` found. This is necessary to render this `"+t+"` correctly.",o.Errors.Internal);const u=t in p?p[t].defaultProps:{};i=s.default.extend({},u,i);let d=e.alignment;null!=d&&"default"!==d||(d=f(t)[0]);let h=e.static;return null==h&&(h=false),s.default.extend({},e,{version:a,graded:null==e.graded||e.graded,alignment:d,static:h,options:i})};t.getRendererPropsForWidgetInfo=(e,t)=>{const n=e.type,r=c[n];if(null==r)return e.options;let o;return o=e.static?v(n)||s.default.identity:r.transform||s.default.identity,o(e.options,t)};t.traverseChildWidgets=(e,t)=>{if(!t)throw new o.KAError("traverseRenderer must be provided, but was not",o.Errors.Internal);if(!e||!e.type||!c[e.type])return e;const n=c[e.type],r=e.options;if(n.traverseChildWidgets&&r){const o=n.traverseChildWidgets(r,t);return s.default.extend({},e,{options:o})}return e};const f=e=>{const t=c[e];return t&&t.supportedAlignments||u};t.getSupportedAlignments=f;t.getDefaultAlignment=e=>{const t=c[e];let n;return t?(n=t.getDefaultAlignment?t.getDefaultAlignment():t.defaultAlignment,n||l):l};const g=["block","inline-block","inline","float-left","float-right","full-width"],m=()=>{s.default.each(c,(function(e){if(e.defaultAlignment&&!s.default.contains(g,e.defaultAlignment))throw new o.KAError("Widget '"+e.displayName+"' has an invalid defaultAlignment value: "+e.defaultAlignment,o.Errors.Internal);if(e.supportedAlignments){const t=s.default.difference(e.supportedAlignments,g);if(t.length)throw new o.KAError("Widget '"+e.displayName+"' has an invalid value for supportedAlignments: "+t.join(" "),o.Errors.Internal)}}))};t.validateAlignments=m;t.supportsStaticMode=e=>{const t=c[e];return t&&null!=t.staticTransform};const v=e=>{const t=c[e];return t&&t.staticTransform};t.getStaticTransform=v;t.getTracking=e=>{const t=c[e];return t&&t.tracking||""};t.isLintable=e=>{const t=c[e];return t&&t.isLintable||false}},"4s5V":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=r(n("5pch")),l=n("6OHE"),u=r(n("6wxr")),c=r(n("MG0i")),p=n("/4Qb"),d=r(n("Atlv"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}class f extends a.Component{constructor(...e){super(...e),this.state={isInputFocused:!1}}focusInput(){this._input&&this._input.focus()}handleClick(e){const{checked:t,onChange:n}=this.props;e.preventDefault(),this.focusInput(),n(!t)}handleKeyDown(e){const{onFocusPrevAnswer:t,onFocusNextAnswer:n}=this.props;switch(e.key){case"ArrowUp":e.preventDefault(),t();break;case"ArrowDown":e.preventDefault(),n()}}handleInputChange(e){e.preventDefault()}handleInputFocus(){this.setState({isInputFocused:!0})}handleInputBlur(){this.setState({isInputFocused:!1})}renderCheckmark(){const{checked:e}=this.props;return a.createElement("span",{className:(0,o.css)(m.checkmarkContainer)},e&&a.createElement(u.default,{icon:p.iconCheckMedium,size:16,color:l.colors.gray17}))}render(){const{content:e,checked:t,groupName:n,index:r,inputType:s}=this.props,{isInputFocused:i}=this.state,l=`${n}-${r}`;return a.createElement("div",{className:(0,o.css)(m.answerChoice,i&&m.answerFocused),onClick:e=>this.handleClick(e),onKeyDown:e=>this.handleKeyDown(e)},a.createElement("span",{className:(0,o.css)(m.answerInputWrapper)},a.createElement("input",{className:(0,o.css)(c.default.perseusSrOnly),checked:t,name:n,id:l,type:s,onChange:e=>this.handleInputChange(e),onFocus:()=>this.handleInputFocus(),onBlur:()=>this.handleInputBlur(),ref:e=>this._input=e}),this.renderCheckmark()),a.createElement("label",{htmlFor:l},a.createElement(d.default,{content:e})))}}class g extends a.Component{constructor(e){super(e),this._choices=[],this.state={groupName:i.default.uniqueId("answer_choices_")}}focusAnswer(e=0){const t=this.props.choices.length;e<0?e+=t:e>=t&&(e-=t);const n=this._choices[e];n&&n.focusInput()}onAnswerChange(e,t){const{choices:n,multipleSelect:r,onChange:s}=this.props,o=[];for(let s=0;s<n.length;s++)o.push(r?s===e?t:n[s].checked:s===e&&t);s(o)}onFocusAnswer(e){this.focusAnswer(e)}render(){const{choices:e,multipleSelect:t}=this.props,{groupName:n}=this.state;return a.createElement("fieldset",null,e.map(((e,r)=>a.createElement(f,(0,s.default)({},e,{key:e.content,groupName:n,index:r,inputType:t?"checkbox":"radio",onChange:e=>this.onAnswerChange(r,e),onFocusPrevAnswer:()=>this.onFocusAnswer(r-1),onFocusNextAnswer:()=>this.onFocusAnswer(r+1),ref:e=>this._choices[r]=e})))))}}t.default=g;const m=o.StyleSheet.create({answerChoice:{display:"flex",alignItems:"center",userSelect:"none",padding:"10px 16px 10px 0px",fontWeight:"bold",border:"solid 2px transparent",borderRadius:2,":active":{backgroundColor:"rgba(33, 36, 44, 0.08)"}},answerFocused:{borderColor:"#1865f2",":active":{borderColor:"transparent"}},answerInputWrapper:{marginRight:8},checkmarkContainer:{display:"flex",position:"relative",width:16,height:16,marginLeft:8}})},"4vmB":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("96rG")),a=r(n("qJK0"));n("KSpR");var i=n("4PhQ"),l=r(n("2BsJ")),u=n("eAf/"),c=r(n("d773")),p=r(n("T2HF")),d=r(n("f3EM")),h=r(n("XwLL")),f=r(n("yfnS")),g=r(n("p8fL"));const{getCanUse3dTransform:m}=g.default;function v(e){return s.default.reduce(e,(function(e,t){return e+t}),0)}function y(...e){const t=s.default.zip.apply(s.default,e);return s.default.map(t,v)}function b(e){return s.default.map(e,(function(e){return-1*e}))}function w(e){const t=11.374597405497571;return 58.919514629750836*Math.exp(-.037587715462826674*e)+t}function x(e,t){return[e*Math.cos(t),e*Math.sin(t)*-1]}function E(e,t){return x(e,t*Math.PI/180)}let C=!1;const k={bogusShape:{animate:function(){},attr:function(){},remove:function(){}}};function O(e,t){this.set=e.raphael.set(),this.cx=t[0],this.cy=t[1];const n=this,r=e.unscaleVector(180.5)[0],s=e.scalePoint([this.cx-r,this.cy+r-e.unscaleVector(10.5)[1]]),a=e.mouselayer.image("https://ka-perseus-graphie.s3.amazonaws.com/e9d032f2ab8b95979f674fbfa67056442ba1ff6a.png",s[0],s[1],360,180);this.set.push(a),a.node.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1});const i=function(n,s){const o=e.scaleVector(r);o[0]-=16,o[1]-=16;const a=e.scalePoint(t);return Math.sin((n+90)*Math.PI/180)*(o[0]+s)+a[0]+","+(Math.cos((n+90)*Math.PI/180)*(o[1]+s)+a[1])},u=e.raphael.path(" M"+i(180,6)+" L"+i(180,2)+" L"+i(183,10)+" L"+i(180,18)+" L"+i(180,14)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,1,"+i(170,14)+" L"+i(170,18)+" L"+i(167,10)+" L"+i(170,2)+" L"+i(170,6)+" A"+(e.scaleVector(r)[0]+10)+","+(e.scaleVector(r)[1]+10)+",0,0,0,"+i(180,6)+" Z").attr({stroke:null,fill:f.default.INTERACTIVE});this.set.push(u),this.centerPoint=e.addMovablePoint({coord:t,visible:!1}),this.rotateHandle=e.addMovablePoint({bounded:!1,coord:[Math.sin(275*Math.PI/180)*r+this.cx,Math.cos(275*Math.PI/180)*r+this.cy],onMove:function(e,t){const r=180*Math.atan2(n.centerPoint.coord[1]-t,n.centerPoint.coord[0]-e)/Math.PI;n.rotate(-r-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=r,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2});let c=!1,p=!1;const d=function(){return p||c},h=(0,o.default)(this.rotateHandle.mouseTarget.getMouseTarget());h.bind("vmousedown",(function(e){c=!0,h.css("cursor","-webkit-grabbing"),h.css("cursor","grabbing"),u.animate({scale:1.5,fill:f.default.INTERACTING},50),(0,o.default)(document).bind("vmouseup.rotateHandle",(function(e){c=!1,h.css("cursor","-webkit-grab"),h.css("cursor","grab"),d()||u.animate({scale:1,fill:f.default.INTERACTIVE},50),(0,o.default)(document).unbind("vmouseup.rotateHandle")}))})),h.bind("vmouseover",(function(e){p=!0,u.animate({scale:1.5,fill:f.default.INTERACTING},50)})),h.bind("vmouseout",(function(e){p=!1,d()||u.animate({scale:1,fill:f.default.INTERACTIVE},50)}));const g=o.default.map(this.set,(function(e){return e.node}));return this.makeTranslatable=function(){(0,o.default)(g).css("cursor","move"),h.css("cursor","-webkit-grab"),h.css("cursor","grab"),(0,o.default)(g).bind("vmousedown",(function(t){t.preventDefault();let r=t.pageX-(0,o.default)(e.raphael.canvas.parentNode).offset().left,s=t.pageY-(0,o.default)(e.raphael.canvas.parentNode).offset().top;(0,o.default)(document).bind("vmousemove.protractor",(function(t){let a=t.pageX-(0,o.default)(e.raphael.canvas.parentNode).offset().left,i=t.pageY-(0,o.default)(e.raphael.canvas.parentNode).offset().top;a=Math.max(10,Math.min(e.xpixels-10,a)),i=Math.max(10,Math.min(e.ypixels-10,i));const l=a-r,u=i-s;o.default.each(n.set.items,(function(){this.translate(l,u)})),n.centerPoint.setCoord([n.centerPoint.coord[0]+l/e.scale[0],n.centerPoint.coord[1]-u/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+l/e.scale[0],n.rotateHandle.coord[1]-u/e.scale[1]]),r=a,s=i})),(0,o.default)(document).one("vmouseup",(function(e){(0,o.default)(document).unbind("vmousemove.protractor")}))}))},this.rotation=0,this.rotate=function(t,n){const r=e.scalePoint(this.centerPoint.coord);return n&&(this.rotation=0),this.set.rotate(this.rotation+t,r[0],r[1]),this.rotation=this.rotation+t,this},this.moveTo=function(t,r){const s=e.scalePoint(n.centerPoint.coord),a=e.scalePoint([t,r]),i=2*l.default.getDistance(s,a);(0,o.default)({x:s[0],y:s[1]}).animate({x:a[0],y:a[1]},{duration:i,step:function(t,r){let s=0,a=0;"x"===r.prop?s=t-e.scalePoint(n.centerPoint.coord)[0]:"y"===r.prop&&(a=t-e.scalePoint(n.centerPoint.coord)[1]),o.default.each(n.set.items,(function(){this.translate(s,a)})),n.centerPoint.setCoord([n.centerPoint.coord[0]+s/e.scale[0],n.centerPoint.coord[1]-a/e.scale[1]]),n.rotateHandle.setCoord([n.rotateHandle.coord[0]+s/e.scale[0],n.rotateHandle.coord[1]-a/e.scale[1]])}})},this.rotateTo=function(e){Math.abs(this.rotation-e)>180&&(this.rotation+=360);const t=5*Math.abs(this.rotation-e);(0,o.default)({0:this.rotation}).animate({0:e},{duration:t,step:function(e,t){n.rotate(e,!0),n.rotateHandle.setCoord([Math.sin((e+275)*Math.PI/180)*r+n.centerPoint.coord[0],Math.cos((e+275)*Math.PI/180)*r+n.centerPoint.coord[1]])}})},this.remove=function(){this.set.remove()},this.makeTranslatable(),this}function M(e,t){s.default.defaults(t,{center:[0,0],pixelsPerUnit:40,ticksPerUnit:10,units:10,label:"",style:{fill:null,stroke:f.default.GRAY}});const n=s.default.extend({},t.style,{strokeWidth:1}),r=s.default.extend({},t.style,{strokeWidth:2}),a=t.units*t.pixelsPerUnit,i=e.unscalePoint(u.vector.subtract(e.scalePoint(t.center),u.vector.scale([a,-50],.5))),c=t.pixelsPerUnit/e.scale[0],p=50/e.scale[0],d=u.vector.add(i,[t.units*c,p]);let h;if(10===t.ticksPerUnit)h={10:1,5:.55,1:.35};else{const e=[1,.6,.45,.3];h={};for(let n=t.ticksPerUnit;n>=1;n/=2)h[n]=1*(e.shift()||.2)}const g=s.default.keys(h).sort((function(e,t){return t-e}));const m=i[0],v=i[1],y=d[0],b=d[1],w=t.units*t.ticksPerUnit+1,x=e.raphael.set(),E=1/e.scale[0];x.push(e.line([m-E,v],[y+E,v],r)),x.push(e.line([m-E,b],[y+E,b],r)),s.default.times(w,(function(s){const o=s/t.ticksPerUnit,a=m+o*c,i=function(e){for(let t=0;t<g.length;t++){const n=g[t];if(e%n==0)return h[n]}return 0}(s)*p,l=0===s||s===w-1?r:n;if(x.push(e.line([a,v],[a,v+i],l)),o%1==0){const n=e.scalePoint([a,b]);let r,s;0===o?(r=t.label,s={mm:13,cm:11,m:8,km:11,in:8,ft:8,yd:10,mi:10}[r]||3*r.toString().length):(r=o,s=-3*(o.toString().length+1));const i=e.raphael.text(n[0]+s,n[1]+10,r);i.attr({"font-family":"KaTeX_Main","font-size":"12px",color:"#444"}),x.push(i)}}));const C=e.mouselayer.path(l.default.svgPath([i,[m,b],d,[y,v],!0]));C.attr({fill:"#000",opacity:0,stroke:"#000","stroke-width":2}),x.push(C),C.node.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1});const k=o.default.map(x,(function(e){return e.node}));(0,o.default)(k).css("cursor","move"),(0,o.default)(k).bind("vmousedown",(function(t){t.preventDefault();let n=t.pageX-(0,o.default)(e.raphael.canvas.parentNode).offset().left,r=t.pageY-(0,o.default)(e.raphael.canvas.parentNode).offset().top;(0,o.default)(document).bind("vmousemove.ruler",(function(t){let s=t.pageX-(0,o.default)(e.raphael.canvas.parentNode).offset().left,a=t.pageY-(0,o.default)(e.raphael.canvas.parentNode).offset().top;s=Math.max(10,Math.min(e.xpixels-10,s)),a=Math.max(10,Math.min(e.ypixels-10,a));const i=s-n,l=a-r;x.translate(i,l),O.setCoord([O.coord[0]+i/e.scale[0],O.coord[1]-l/e.scale[1]]),M.setCoord([M.coord[0]+i/e.scale[0],M.coord[1]-l/e.scale[1]]),n=s,r=a})),(0,o.default)(document).one("vmouseup",(function(e){(0,o.default)(document).unbind("vmousemove.ruler")}))}));const O=e.addMovablePoint({coord:i,normalStyle:{fill:f.default.INTERACTIVE,"fill-opacity":0,stroke:f.default.INTERACTIVE},highlightStyle:{fill:f.default.INTERACTING,"fill-opacity":.1,stroke:f.default.INTERACTING},pointSize:6,onMove:function(t,n){const r=M.coord[1]-n,s=M.coord[0]-t,o=180*Math.atan2(r,s)/Math.PI,a=u.vector.scale(u.vector.add([t,n],M.coord),.5),i=e.scalePoint(a),l=u.vector.scale(u.vector.add(O.coord,M.coord),.5),c=e.scalePoint(l),p=u.vector.subtract(i,c);x.rotate(-o,c[0],c[1]),x.translate(p[0],p[1])}}),M=e.addMovablePoint({coord:[y,v],normalStyle:{fill:f.default.INTERACTIVE,"fill-opacity":0,stroke:f.default.INTERACTIVE},highlightStyle:{fill:f.default.INTERACTING,"fill-opacity":.1,stroke:f.default.INTERACTING},pointSize:6,onMove:function(t,n){const r=n-O.coord[1],s=t-O.coord[0],o=180*Math.atan2(r,s)/Math.PI,a=u.vector.scale(u.vector.add([t,n],O.coord),.5),i=e.scalePoint(a),l=u.vector.scale(u.vector.add(O.coord,M.coord),.5),c=e.scalePoint(l),p=u.vector.subtract(i,c);x.rotate(-o,c[0],c[1]),x.translate(p[0],p[1])}});return O.constraints.fixedDistance.dist=a/e.scale[0],O.constraints.fixedDistance.point=M,M.constraints.fixedDistance.dist=a/e.scale[0],M.constraints.fixedDistance.point=O,this.remove=function(){x.remove(),O.remove(),M.remove()},this}function P(e,t){if(this.graphie=e,s.default.extend(this,t),s.default.defaults(this,{normalStyle:{stroke:f.default.INTERACTIVE,"stroke-width":2,fill:f.default.INTERACTIVE},highlightStyle:{stroke:f.default.INTERACTING,"stroke-width":2,fill:f.default.INTERACTING},labelStyle:{stroke:f.default.DYNAMIC,"stroke-width":1,color:f.default.DYNAMIC},angleStyle:{stroke:f.default.DYNAMIC,"stroke-width":1,color:f.default.DYNAMIC},allowReflex:!0}),!this.points||3!==this.points.length)throw new i.KAError("MovableAngle requires 3 points",i.Errors.Internal);this.points=s.default.map(t.points,(function(t){return s.default.isArray(t)?e.addMovablePoint({coord:t,visible:!1,constraints:{fixed:!0},normalStyle:this.normalStyle}):t}),this),this.coords=s.default.pluck(this.points,"coord"),null==this.reflex&&(this.allowReflex?this.reflex=this._getClockwiseAngle(this.coords)>180:this.reflex=!1),this.rays=s.default.map([0,2],(function(t){return e.addMovableLineSegment({pointA:this.points[1],pointZ:this.points[t],fixed:!0,extendRay:!0})}),this),this.temp=[],this.labeledAngle=e.label([0,0],"","center",this.labelStyle),this.fixed||(this.addMoveHandlers(),this.addHighlightHandlers()),this.update()}s.default.extend(l.default.Graphie.prototype,{addMouseLayer:function(e){const t=this;e=s.default.extend({allowScratchpad:!1,setDrawingAreaAvailable:function(){}},e);if(t.mouselayer=(0,a.default)(t.raphael.canvas.parentNode,t.xpixels,t.ypixels),(0,o.default)(t.mouselayer.canvas).css("z-index",2),e.onClick||e.onMouseDown||e.onMouseMove||e.onMouseOver||e.onMouseOut){const n=t.mouselayer.rect(0,0,t.xpixels,t.ypixels).attr({fill:"#000",opacity:0});let r=!1;(0,o.default)(t.mouselayer.canvas).on("vmousedown",(function(s){s.target===n[0]&&(e.onMouseDown&&e.onMouseDown(t.getMouseCoord(s)),r=!0,e.onMouseMove&&(0,o.default)(document).bind("vmousemove.mouseLayer",(function(n){r&&(n.preventDefault(),e.onMouseMove(t.getMouseCoord(n)))})),(0,o.default)(document).bind("vmouseup.mouseLayer",(function(n){(0,o.default)(document).unbind(".mouseLayer"),r&&e.onClick&&e.onClick(t.getMouseCoord(n)),r=!1})))})),e.onMouseOver&&(0,o.default)(t.mouselayer.canvas).on("vmouseover",(function(n){e.onMouseOver(t.getMouseCoord(n))})),e.onMouseOut&&(0,o.default)(t.mouselayer.canvas).on("vmouseout",(function(n){e.onMouseOut(t.getMouseCoord(n))}))}e.allowScratchpad||e.setDrawingAreaAvailable(!1),t._mouselayerWrapper=document.createElement("div"),(0,o.default)(t._mouselayerWrapper).css({position:"absolute",left:0,top:0,zIndex:2}),t._visiblelayerWrapper=document.createElement("div"),(0,o.default)(t._visiblelayerWrapper).css({position:"absolute",left:0,top:0});const n=t.raphael.canvas.parentNode;n.appendChild(t._visiblelayerWrapper),n.appendChild(t._mouselayerWrapper),t.addToMouseLayerWrapper=function(e){this._mouselayerWrapper.appendChild(e)},t.addToVisibleLayerWrapper=function(e){this._visiblelayerWrapper.appendChild(e)}},getMousePx:function(e){return[e.pageX-(0,o.default)(this.raphael.canvas.parentNode).offset().left,e.pageY-(0,o.default)(this.raphael.canvas.parentNode).offset().top]},getMouseCoord:function(e){return this.unscalePoint(this.getMousePx(e))},labelAngle:function(e){const t=this;s.default.defaults(e,{point1:[0,0],vertex:[0,0],point3:[0,0],label:null,numArcs:1,showRightAngleMarker:!0,pushOut:0,clockwise:!1,style:{}});let n=void 0===e.text?"":e.text;const r=e.vertex,o=t.scalePoint(r);let a,i;e.clockwise?(a=e.point1,i=e.point3):(a=e.point3,i=e.point1);const u=l.default.findAngle(a,r),c=l.default.findAngle(i,r),p=(c+360-u)%360,d=(u+p/2)%360;let f=5*e.pushOut+w(p);const g=[];if(Math.abs(p-90)<1e-9&&e.showRightAngleMarker){const n=y(o,E(f,u)),r=y(o,E(f,c));f*=Math.SQRT2;const a=y(o,E(f,d));s.default.each([n,r],(function(n){g.push(t.scaledPath([n,a],e.style))}))}else s.default.times(e.numArcs,(function(n){g.push(t.arc(r,t.unscaleVector(f),u,c,e.style)),f+=3}));if(n){const r=n.match(/\$deg(\d)?/);if(r){const e=r[1]||1;n=n.replace(r[0],h.default.toFixedApprox(p,e)+"^{\\circ}")}const s=y(o,E(f+15,d)),a=t.unscalePoint(s);e.label?(e.label.setPosition(a),e.label.processMath(n,!0)):t.label(a,n,"center",e.style)}return g},labelSide:function(e){const t=this;let n,r;s.default.defaults(e,{point1:[0,0],point2:[0,0],label:null,text:"",numTicks:0,numArrows:0,clockwise:!1,style:{}}),e.clockwise?(n=e.point1,r=e.point2):(n=e.point2,r=e.point1);const o=[(n[0]+r[0])/2,(n[1]+r[1])/2],a=t.scalePoint(o),i=Math.atan2(r[1]-n[1],r[0]-n[0]),u=i+Math.PI/2,c=[];let p=0;if(e.numTicks){const n=e.numTicks,r=5,o=5,l=s.default.extend({},e.style,{strokeWidth:2});s.default.times(n,(function(e){const s=x(r*(e-(n-1)/2),i),p=x(o,u),d=[y(a,s,p),y(a,s,b(p))];c.push(t.scaledPath(d,l))})),p+=r*(n-1)+15}if(e.numArrows){const o=e.numArrows,l=[n,r].sort((function(e,t){return e[1]===t[1]?e[0]-t[0]:e[1]-t[1]}))[0],u=t.scalePoint(l),d=s.default.extend({},e.style,{arrows:"->",strokeWidth:2}),h=5;s.default.times(o,(function(e){let r=x(p+h*e,i);l!==n&&(r=b(r));const s=y(a,r);c.push(t.scaledPath([u,s],d))}))}let d=e.text;if(d){const s=d.match(/\$len(\d)?/);if(s){const e=l.default.getDistance(n,r),t=s[1]||1;d=d.replace(s[0],h.default.toFixedApprox(e,t))}const o=x(20,u),i=y(a,o),c=t.unscalePoint(i);e.label?(e.label.setPosition(c),e.label.processMath(d,!0)):t.label(c,d,"center",e.style)}return c},labelVertex:function(e){const t=this;if(s.default.defaults(e,{point1:null,vertex:[0,0],point3:null,label:null,text:"",clockwise:!1,style:{}}),!e.text)return;const n=e.vertex,r=t.scalePoint(n);let o,a;e.clockwise?(o=e.point1,a=e.point3):(o=e.point3,a=e.point1);let i,u=135;if(o&&a){const e=l.default.findAngle(o,n);u=(l.default.findAngle(a,n)+360-e)%360,i=(e+u/2+180)%360}else if(o){i=l.default.findAngle(n,o)+90}else if(a){i=l.default.findAngle(a,n)+90}else i=135;const c=y(r,E(10+w(360-u),i)),p=t.unscalePoint(c);e.label?(e.label.setPosition(p),e.label.processMath(e.text,!0)):t.label(p,e.text,"center",e.style)},addMovablePoint:function(e){const t=o.default.extend(!0,{graph:this,coord:[0,0],snapX:0,snapY:0,pointSize:4,highlight:!1,dragging:!1,visible:!0,bounded:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],polygonVertices:[],normalStyle:{},highlightStyle:{fill:f.default.INTERACTING,stroke:f.default.INTERACTING},labelStyle:{color:f.default.INTERACTIVE},vertexLabel:"",mouseTarget:null},e),n=t.constraints.fixed?f.default.DYNAMIC:f.default.INTERACTIVE;t.normalStyle=s.default.extend({},{fill:n,stroke:n},e.normalStyle),void 0!==e.coordX&&(t.coord[0]=e.coordX),void 0!==e.coordY&&(t.coord[1]=e.coordY);const r=t.graph,a=function(e){t.visible&&t.bounded&&!t.constraints.fixed&&(e=r.constrainToBounds(e,10));let n=e[0],s=e[1];if(0!==t.snapX&&(n=Math.round(n/t.snapX)*t.snapX),0!==t.snapY&&(s=Math.round(s/t.snapY)*t.snapY),t.constraints.fixedDistance.snapPoints){const o=r.scalePoint(e);let a=o[0],i=o[1];const l=2*Math.PI/t.constraints.fixedDistance.snapPoints,u=t.constraints.fixedDistance.dist,c=t.constraints.fixedDistance.point,p=(c[0]-r.range[0][0])*r.scale[0],d=(-c[1]+r.range[1][1])*r.scale[1];let f=a-p,g=-i+d,m=Math.atan(g/f);f<0&&(m+=Math.PI),m=Math.round(m/l)*l,f=u*Math.cos(m),g=u*Math.sin(m),a=f+p,i=-g+d,n=h.default.roundTo(5,a/r.scale[0]+r.range[0][0]),s=h.default.roundTo(5,r.range[1][1]-i/r.scale[1])}return t.applyConstraint([n,s])};t.applyConstraint=function(e,n,r){let s=e.slice();const a={};if(r?o.default.extend(a,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},n):o.default.extend(a,this.constraints,n),a.constrainX)s=[this.coord[0],e[1]];else if(a.constrainY)s=[e[0],this.coord[1]];else if("number"==typeof a.fixedAngle.angle&&"number"==typeof a.fixedDistance.dist){const e=a.fixedAngle.vertex.coord||a.fixedAngle.vertex,t=a.fixedAngle.ref.coord||a.fixedAngle.ref,n=a.fixedDistance.point.coord||a.fixedDistance.point,r=(a.fixedAngle.angle+l.default.findAngle(t,e))*Math.PI/180,o=a.fixedDistance.dist;s[0]=o*Math.cos(r)+n[0],s[1]=o*Math.sin(r)+n[1]}else if("number"==typeof a.fixedAngle.angle){const t=a.fixedAngle.vertex.coord||a.fixedAngle.vertex,n=a.fixedAngle.ref.coord||a.fixedAngle.ref,r=(a.fixedAngle.angle+l.default.findAngle(n,t))*Math.PI/180,o=l.default.findAngle(e,t)*Math.PI/180;let i=l.default.getDistance(e,t)*Math.cos(r-o);i=i<1?1:i,s[0]=i*Math.cos(r)+t[0],s[1]=i*Math.sin(r)+t[1]}else if("number"==typeof a.fixedDistance.dist){const t=a.fixedDistance.point.coord||a.fixedDistance.point;let n=l.default.findAngle(e,t);const r=a.fixedDistance.dist;n=n*Math.PI/180,s[0]=r*Math.cos(n)+t[0],s[1]=r*Math.sin(n)+t[1]}else a.fixed&&(s=t.coord);return s},t.coord=a(t.coord);if(t.visible&&r.style(t.normalStyle,(function(){const e=[t.pointSize/r.scale[0],t.pointSize/r.scale[1]],n={maxScale:2,padding:2};t.visibleShape=new c.default(r,t.coord,e,n),t.visibleShape.attr(s.default.omit(t.normalStyle,"scale")),t.visibleShape.toFront()})),t.normalStyle.scale=1,t.highlightStyle.scale=2,t.vertexLabel&&(t.labeledVertex=this.label([0,0],"","center",t.labelStyle)),t.drawLabel=function(){t.vertexLabel&&t.graph.labelVertex({vertex:t.coord,label:t.labeledVertex,text:t.vertexLabel,style:t.labelStyle})},t.drawLabel(),t.grab=function(e){e=e||[0,0],(0,o.default)(document).bind("vmousemove.point vmouseup.point",(function(n){n.preventDefault(),t.dragging=!0,C=!0;let i=u.vector.add(r.getMouseCoord(n),e);i=a(i);let l,c,p=i[0],d=i[1];if("vmousemove"===n.type){let e=!0;if(s.default.isFunction(t.onMove)){const n=t.onMove(p,d);!1===n&&(e=!1),s.default.isArray(n)&&(p=n[0],d=n[1])}if(l=(p-r.range[0][0])*r.scale[0],c=(-d+r.range[1][1])*r.scale[1],e){const e=r.unscalePoint([l,c]);t.visibleShape.moveTo(e),t.mouseTarget.moveTo(e),t.coord=[p,d],t.updateLineEnds(),(0,o.default)(t).trigger("move")}t.drawLabel()}else if("vmouseup"===n.type){if((0,o.default)(document).unbind(".point"),t.dragging=!1,C=!1,s.default.isFunction(t.onMoveEnd)){const e=t.onMoveEnd(p,d);if(s.default.isArray(e)){p=e[0],d=e[1],l=(p-r.range[0][0])*r.scale[0],c=(-d+r.range[1][1])*r.scale[1];const n=r.unscalePoint([l,c]);t.visibleShape.moveTo(n),t.mouseTarget.moveTo(n),t.coord=[p,d]}}t.highlight||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight())}}))},t.visible&&!t.constraints.fixed){if(!t.mouseTarget){const e=r.unscaleVector(16),n={mouselayer:!0,padding:0,disableMouseEventsOnWrapper:!0,interactiveKindForTesting:"movable-point"};t.mouseTarget=new c.default(r,t.coord,e,n),t.mouseTarget.attr({fill:"#000",opacity:0})}const e=(0,o.default)(t.mouseTarget.getMouseTarget());e.css("cursor","move"),e.bind("vmousedown vmouseover vmouseout",(function(e){if("vmouseover"===e.type)t.highlight=!0,C||(t.visibleShape.animate(t.highlightStyle,50),t.onHighlight&&t.onHighlight());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||C||(t.visibleShape.animate(t.normalStyle,50),t.onUnhighlight&&t.onUnhighlight());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();const n=t.coord,s=r.getMouseCoord(e),o=!("ontouchstart"in window)?[0,0]:u.vector.subtract(n,s);t.grab(o)}}))}return t.moveTo=function(e,n,r){const o=5*l.default.getDistance(this.graph.scalePoint([e,n]),this.graph.scalePoint(this.coord)),a=r&&function(e){t.coord=e,t.updateLineEnds()};this.visibleShape.animateTo([e,n],o,a),this.mouseTarget.animateTo([e,n],o,a),this.coord=[e,n],s.default.isFunction(this.onMove)&&this.onMove(e,n)},t.updateLineEnds=function(){(0,o.default)(this.lineStarts).each((function(){this.coordA=t.coord,this.transform()})),(0,o.default)(this.lineEnds).each((function(){this.coordZ=t.coord,this.transform()})),(0,o.default)(this.polygonVertices).each((function(){this.transform()}))},t.setCoord=function(e){this.visible&&(this.visibleShape.moveTo(e),null!=this.mouseTarget&&this.mouseTarget.moveTo(e)),this.coord=e.slice()},t.setCoordConstrained=function(e){this.setCoord(a(e))},t.toBack=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toBack(),this.visibleShape.toBack())},t.toFront=function(){this.visible&&(null!=this.mouseTarget&&this.mouseTarget.toFront(),this.visibleShape.toFront())},t.remove=function(){this.visibleShape&&this.visibleShape.remove(),this.mouseTarget&&this.mouseTarget.remove(),this.labeledVertex&&this.labeledVertex.remove()},t},addMovableLineSegment:function(e){const t=o.default.extend({graph:this,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{},highlightStyle:{stroke:f.default.INTERACTING,"stroke-width":6},labelStyle:{stroke:f.default.INTERACTIVE,color:f.default.INTERACTIVE},highlight:!1,dragging:!1,tick:[],extendLine:!1,extendRay:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1},sideLabel:"",vertexLabels:[],numArrows:0,numTicks:0,movePointsWithLine:!1},e),n=t.fixed?f.default.DYNAMIC:f.default.INTERACTIVE;t.normalStyle=s.default.extend({},{"stroke-width":2,stroke:n},e.normalStyle),t.arrowStyle=s.default.extend({},t.normalStyle,{color:t.normalStyle.stroke}),void 0!==e.pointA?(t.coordA=e.pointA.coord,t.pointA.lineStarts.push(t)):void 0!==e.coordA&&(t.coordA=e.coordA.slice()),void 0!==e.pointZ?(t.coordZ=e.pointZ.coord,t.pointZ.lineEnds.push(t)):void 0!==e.coordA&&(t.coordA=t.coordA.slice());const r=t.graph;r.style(t.normalStyle);for(let e=0;e<t.ticks;++e)t.tick[e]=k.bogusShape;let a=l.default.unscaledSvgPath([[0,0],[1,0]]);for(let e=0;e<t.ticks;++e){const n=.5-(t.ticks-1+2*e)/r.scale[0];a+=l.default.unscaledSvgPath([[n,-7],[n,7]])}if(e={thickness:Math.max(t.normalStyle["stroke-width"],t.highlightStyle["stroke-width"])},t.visibleLine=new p.default(r,[0,0],[1,0],e),t.visibleLine.attr(t.normalStyle),!t.fixed){const e={thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"};t.mouseTarget=new p.default(r,[0,0],[1,0],e),t.mouseTarget.attr({fill:"#000",opacity:0})}if(t.transform=function(e){e&&("object"==typeof this.pointA&&(this.coordA=this.pointA.coord),"object"==typeof this.pointZ&&(this.coordZ=this.pointZ.coord));const n=function(e,n,r){const s=(e=t.graph).range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),o=e.unscaleVector(u.vector.cartFromPolarDeg([1,r])),a=u.vector.scale(u.vector.normalize(o),s),i=u.vector.add(n,a),l=u.vector.polarDegFromCart(o)[1];return e.constrainToBoundsOnAngle(i,4,l*Math.PI/180)},o=function(e){const t=e.graph.scalePoint(e.coordA),n=e.graph.scalePoint(e.coordZ);return u.vector.polarDegFromCart(u.vector.subtract(n,t))[1]}(this);let a=this.coordA,i=this.coordZ;this.extendLine?(a=n(r,a,360-o),i=n(r,i,(540-o)%360)):this.extendRay&&(i=n(r,a,360-o));const l=[this.visibleLine];this.fixed||l.push(this.mouseTarget),s.default.each(l,(function(e){e.moveTo(a,i)}));const c=function(e,t){const r=[.75,0];let o=[[-3,4],[-2.75,2.5],[0,.25],r,[0,-.25],[-2.75,-2.5],[-3,-4]];o=s.default.map(o,(function(e){const t=u.vector.subtract(e,r),n=u.vector.scale(t,1.4);return u.vector.add(r,n)}));const a=s.default.map(o,e.unscalePoint),i={center:e.unscalePoint(r),createPath:function(e){let t="M"+e[0][0]+" "+e[0][1];for(let n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t}},l=new d.default(e,a,i);return l.attr(s.default.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),l.toCoordAtAngle=function(t,s){const o=e.scalePoint(n(e,t,s)),a=m();l.transform("translateX("+(o[0]+1.4*r[0])+"px) translateY("+(o[1]+1.4*r[1])+"px) "+(a?"translateZ(0) ":"")+"rotate("+(360-h.default.bound(s))+"deg)")},l};null==this._arrows&&(this._arrows=[],this.extendLine?(this._arrows.push(c(r,this.normalStyle)),this._arrows.push(c(r,this.normalStyle))):this.extendRay&&this._arrows.push(c(r,this.normalStyle)));const p=[this.coordA,this.coordZ],f=[360-o,(540-o)%360];s.default.each(this._arrows,(function(e,t){e.toCoordAtAngle(p[t],f[t])})),s.default.invoke(this.temp,"remove"),this.temp=[];const g=this.coordA[0]<this.coordZ[0]||this.coordA[0]===this.coordZ[0]&&this.coordA[1]>this.coordZ[1];this.sideLabel&&this.temp.push(this.graph.labelSide({point1:this.coordA,point2:this.coordZ,label:this.labeledSide,text:this.sideLabel,numArrows:this.numArrows,numTicks:this.numTicks,clockwise:g,style:this.labelStyle})),this.vertexLabels.length&&(this.graph.labelVertex({vertex:this.coordA,point3:this.coordZ,label:this.labeledVertices[0],text:this.vertexLabels[0],clockwise:g,style:this.labelStyle}),this.graph.labelVertex({point1:this.coordA,vertex:this.coordZ,label:this.labeledVertices[1],text:this.vertexLabels[1],clockwise:g,style:this.labelStyle})),this.temp=s.default.flatten(this.temp)},t.toBack=function(){t.fixed||t.mouseTarget.toBack(),t.visibleLine.toBack()},t.toFront=function(){t.fixed||t.mouseTarget.toFront(),t.visibleLine.toFront()},t.remove=function(){t.fixed||t.mouseTarget.remove(),t.visibleLine.remove(),t.labeledSide&&t.labeledSide.remove(),t.labeledVertices&&s.default.invoke(t.labeledVertices,"remove"),t._arrows&&s.default.invoke(t._arrows,"remove"),t.temp.length&&s.default.invoke(t.temp,"remove")},t.hide=function(){t.visibleLine.hide(),t.temp.length&&s.default.invoke(t.temp,"hide"),t._arrows&&s.default.invoke(t._arrows,"hide")},t.show=function(){t.visibleLine.show(),t.temp.length&&s.default.invoke(t.temp,"show"),t._arrows&&s.default.invoke(t._arrows,"show")},t.sideLabel&&(t.labeledSide=this.label([0,0],"","center",t.labelStyle)),t.vertexLabels.length&&(t.labeledVertices=s.default.map(t.vertexLabels,(function(e){return this.label([0,0],"","center",t.labelStyle)}),this)),!t.fixed&&!t.constraints.fixed){const e=(0,o.default)(t.mouseTarget.getMouseTarget());e.css("cursor","move"),e.bind("vmousedown vmouseover vmouseout",(function(e){if("vmouseover"===e.type)C||(t.highlight=!0,t.visibleLine.animate(t.highlightStyle,50),t.arrowStyle=s.default.extend({},t.arrowStyle,{color:t.highlightStyle.stroke,stroke:t.highlightStyle.stroke}),t.transform());else if("vmouseout"===e.type)t.highlight=!1,t.dragging||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=s.default.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform());else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault();let n=(e.pageX-(0,o.default)(r.raphael.canvas.parentNode).offset().left)/r.scale[0]+r.range[0][0],a=r.range[1][1]-(e.pageY-(0,o.default)(r.raphael.canvas.parentNode).offset().top)/r.scale[1];t.snapX>0&&(n=Math.round(n/t.snapX)*t.snapX),t.snapY>0&&(a=Math.round(a/t.snapY)*t.snapY);const i=[t.coordA[0]-n,t.coordA[1]-a],l=[t.coordZ[0]-n,t.coordZ[1]-a],u=-Math.min(r.scaleVector(i)[0],r.scaleVector(l)[0]),c=Math.max(r.scaleVector(i)[0],r.scaleVector(l)[0]),p=Math.max(r.scaleVector(i)[1],r.scaleVector(l)[1]),d=-Math.min(r.scaleVector(i)[1],r.scaleVector(l)[1]);(0,o.default)(document).bind("vmousemove.lineSegment vmouseup.lineSegment",(function(e){e.preventDefault(),t.dragging=!0,C=!0;let n=e.pageX-(0,o.default)(r.raphael.canvas.parentNode).offset().left,a=e.pageY-(0,o.default)(r.raphael.canvas.parentNode).offset().top;n=Math.max(u+10,Math.min(r.xpixels-10-c,n)),a=Math.max(p+10,Math.min(r.ypixels-10-d,a));let h=n/r.scale[0]+r.range[0][0],f=r.range[1][1]-a/r.scale[1];if(t.snapX>0&&(h=Math.round(h/t.snapX)*t.snapX),t.snapY>0&&(f=Math.round(f/t.snapY)*t.snapY),"vmousemove"===e.type){t.constraints.constrainX&&(h=t.coordA[0]-i[0]),t.constraints.constrainY&&(f=t.coordA[1]-i[1]);const e=h+i[0]-t.coordA[0],n=f+i[1]-t.coordA[1];t.coordA=[h+i[0],f+i[1]],t.coordZ=[h+l[0],f+l[1]],t.transform(),t.movePointsWithLine&&("object"==typeof t.pointA&&t.pointA.setCoord([t.pointA.coord[0]+e,t.pointA.coord[1]+n]),"object"==typeof t.pointZ&&t.pointZ.setCoord([t.pointZ.coord[0]+e,t.pointZ.coord[1]+n])),s.default.isFunction(t.onMove)&&t.onMove(e,n)}else"vmouseup"===e.type&&((0,o.default)(document).unbind(".lineSegment"),t.dragging=!1,C=!1,t.highlight||(t.visibleLine.animate(t.normalStyle,50),t.arrowStyle=s.default.extend({},t.arrowStyle,{color:t.normalStyle.stroke,stroke:t.normalStyle.stroke}),t.transform()),s.default.isFunction(t.onMoveEnd)&&t.onMoveEnd());(0,o.default)(t).trigger("move")}))}}))}return void 0!==t.pointA&&t.pointA.toFront(),void 0!==t.pointZ&&t.pointZ.toFront(),t.transform(),t},addMovablePolygon:function(e){const t=this,n=o.default.extend({snapX:0,snapY:0,fixed:!1,constrainToGraph:!0,normalStyle:{},highlightStyle:{stroke:f.default.INTERACTING,"stroke-width":2,fill:f.default.INTERACTING,"fill-opacity":.05},pointHighlightStyle:{fill:f.default.INTERACTING,stroke:f.default.INTERACTING},labelStyle:{stroke:f.default.DYNAMIC,"stroke-width":1,color:f.default.DYNAMIC},angleLabels:[],showRightAngleMarkers:[],sideLabels:[],vertexLabels:[],numArcs:[],numArrows:[],numTicks:[],updateOnPointMove:!0,closed:!0},s.default.omit(e,"points")),r=n.fixed?f.default.DYNAMIC:f.default.INTERACTIVE;n.normalStyle=s.default.extend({"stroke-width":2,"fill-opacity":0,fill:r,stroke:r},e.normalStyle),n.points=e.points;const a=function(e){return!s.default.isArray(e)};if(n.update=function(){const e=n.points.length;n.coords=s.default.map(n.points,(function(e,t){return a(e)?e.coord:e})),n.left=s.default.min(s.default.pluck(n.coords,0)),n.right=s.default.max(s.default.pluck(n.coords,0)),n.top=s.default.max(s.default.pluck(n.coords,1)),n.bottom=s.default.min(s.default.pluck(n.coords,1));let r=s.default.map(n.coords,(function(e){return t.scalePoint(e)}));n.closed?r.push(!0):r=r.concat(s.default.clone(r).reverse()),n.path=l.default.unscaledSvgPath(r),s.default.invoke(n.temp,"remove"),n.temp=[];const o=function(e){const t=s.default.zip(e,e.slice(1).concat(e.slice(0,1)));return v(s.default.map(t,(function(e){const t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])})))>0}(n.coords);(n.angleLabels.length||n.showRightAngleMarkers.length)&&s.default.each(n.labeledAngles,(function(r,s){n.temp.push(t.labelAngle({point1:n.coords[(s-1+e)%e],vertex:n.coords[s],point3:n.coords[(s+1)%e],label:r,text:n.angleLabels[s],showRightAngleMarker:n.showRightAngleMarkers[s],numArcs:n.numArcs[s],clockwise:o,style:n.labelStyle}))})),n.sideLabels.length&&s.default.each(n.labeledSides,(function(r,s){n.temp.push(t.labelSide({point1:n.coords[s],point2:n.coords[(s+1)%e],label:r,text:n.sideLabels[s],numArrows:n.numArrows[s],numTicks:n.numTicks[s],clockwise:o,style:n.labelStyle}))})),n.vertexLabels.length&&s.default.each(n.labeledVertices,(function(r,s){t.labelVertex({point1:n.coords[(s-1+e)%e],vertex:n.coords[s],point3:n.coords[(s+1)%e],label:r,text:n.vertexLabels[s],clockwise:o,style:n.labelStyle})})),n.temp=s.default.flatten(n.temp)},n.transform=function(){n.update(),n.visibleShape.attr({path:n.path}),n.fixed||n.mouseTarget.attr({path:n.path})},n.remove=function(){n.visibleShape.remove(),n.fixed||n.mouseTarget.remove(),n.labeledAngles&&s.default.invoke(n.labeledAngles,"remove"),n.labeledSides&&s.default.invoke(n.labeledSides,"remove"),n.labeledVertices&&s.default.invoke(n.labeledVertices,"remove"),n.temp.length&&s.default.invoke(n.temp,"remove")},n.toBack=function(){n.fixed||n.mouseTarget.toBack(),n.visibleShape.toBack()},n.toFront=function(){n.fixed||n.mouseTarget.toFront(),n.visibleShape.toFront()},n.updateOnPointMove&&s.default.each(s.default.filter(n.points,a),(function(e){e.polygonVertices.push(n)})),n.coords=new Array(n.points.length),n.angleLabels.length){const e=Math.max(n.angleLabels.length,n.showRightAngleMarkers.length);n.labeledAngles=s.default.times(e,(function(){return this.label([0,0],"","center",n.labelStyle)}),this)}return n.sideLabels.length&&(n.labeledSides=s.default.map(n.sideLabels,(function(e){return this.label([0,0],"","center",n.labelStyle)}),this)),n.vertexLabels.length&&(n.labeledVertices=s.default.map(n.vertexLabels,(function(e){return this.label([0,0],"","center",n.labelStyle)}),this)),n.update(),n.visibleShape=t.raphael.path(n.path),n.visibleShape.attr(n.normalStyle),n.fixed||(n.mouseTarget=t.mouselayer.path(n.path),n.mouseTarget.attr({fill:"#000",opacity:0,cursor:"move"}),(0,o.default)(n.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",(function(e){if("vmouseover"===e.type)C&&!n.dragging||(n.highlight=!0,n.visibleShape.animate(n.highlightStyle,50),s.default.each(s.default.filter(n.points,a),(function(e){e.visibleShape.animate(n.pointHighlightStyle,50)})));else if("vmouseout"===e.type){if(n.highlight=!1,!n.dragging){n.visibleShape.animate(n.normalStyle,50);const e=s.default.filter(n.points,a);s.default.any(s.default.pluck(e,"dragging"))||s.default.each(e,(function(e){e.visibleShape.animate(e.normalStyle,50)}))}}else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),s.default.each(s.default.filter(n.points,a),(function(e){e.dragging=!0}));let r=(e.pageX-(0,o.default)(t.raphael.canvas.parentNode).offset().left)/t.scale[0]+t.range[0][0],i=t.range[1][1]-(e.pageY-(0,o.default)(t.raphael.canvas.parentNode).offset().top)/t.scale[1];n.snapX>0&&(r=Math.round(r/n.snapX)*n.snapX),n.snapY>0&&(i=Math.round(i/n.snapY)*n.snapY);let l=r,u=i;const c=n.coords.slice(),p=(r-n.left)*t.scale[0],d=(n.right-r)*t.scale[0],h=(n.top-i)*t.scale[1],f=(i-n.bottom)*t.scale[1];(0,o.default)(document).bind("vmousemove.polygon vmouseup.polygon",(function(e){e.preventDefault(),n.dragging=!0,C=!0;let g=e.pageX-(0,o.default)(t.raphael.canvas.parentNode).offset().left,m=e.pageY-(0,o.default)(t.raphael.canvas.parentNode).offset().top;n.constrainToGraph&&(g=Math.max(p+10,Math.min(t.xpixels-10-d,g)),m=Math.max(h+10,Math.min(t.ypixels-10-f,m)));let v=g/t.scale[0]+t.range[0][0],y=t.range[1][1]-m/t.scale[1];if(n.snapX>0&&(v=Math.round(v/n.snapX)*n.snapX),n.snapY>0&&(y=Math.round(y/n.snapY)*n.snapY),"vmousemove"===e.type){let e=v-r,t=y-i,p=!0;if(s.default.isFunction(n.onMove)){const o=n.onMove(e,t);!1===o?p=!1:s.default.isArray(o)&&(e=o[0],t=o[1],v=r+e,y=i+t)}const d=function(n){return[c[n][0]+e,c[n][1]+t]};p&&(s.default.each(n.points,(function(e,t){a(e)?e.setCoord(d(t)):n.points[t]=d(t)})),n.transform(),(0,o.default)(n).trigger("move"),l=v,u=y)}else if("vmouseup"===e.type){(0,o.default)(document).unbind(".polygon");const e=s.default.filter(n.points,a);s.default.each(e,(function(e){e.dragging=!1})),n.dragging=!1,C=!1,n.highlight||(n.visibleShape.animate(n.normalStyle,50),s.default.each(e,(function(e){e.visibleShape.animate(e.normalStyle,50)}))),s.default.isFunction(n.onMoveEnd)&&n.onMoveEnd(l-r,u-i)}}))}}))),s.default.invoke(s.default.filter(n.points,a),"toFront"),n},constrainToBounds:function(e,t){const n=this.unscalePoint([t,this.ypixels-t]),r=this.unscalePoint([this.xpixels-t,t]);return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]},constrainToBoundsOnAngle:function(e,t,n){const r=this.unscalePoint([t,this.ypixels-t]),s=this.unscalePoint([this.xpixels-t,t]);let o=e.slice();return o[0]<r[0]?o=[r[0],o[1]+(r[0]-o[0])*Math.tan(n)]:o[0]>s[0]&&(o=[s[0],o[1]-(o[0]-s[0])*Math.tan(n)]),o[1]<r[1]?o=[o[0]+(r[1]-o[1])/Math.tan(n),r[1]]:o[1]>s[1]&&(o=[o[0]-(o[1]-s[1])/Math.tan(n),s[1]]),o},addMovableAngle:function(e){return new P(this,e)},addCircleGraph:function(e){const t=this,n=o.default.extend({center:[0,0],radius:2,snapX:.5,snapY:.5,snapRadius:.5,minRadius:1,centerConstraints:{},centerNormalStyle:{},centerHighlightStyle:{stroke:f.default.INTERACTING,fill:f.default.INTERACTING},circleNormalStyle:{stroke:f.default.INTERACTIVE,"fill-opacity":0},circleHighlightStyle:{stroke:f.default.INTERACTING,fill:f.default.INTERACTING,"fill-opacity":.05}},e),r=n.centerConstraints.fixed?f.default.DYNAMIC:f.default.INTERACTIVE,a=e?e.centerNormalStyle:null;n.centerNormalStyle=s.default.extend({},{fill:r,stroke:r},a),n.centerPoint=t.addMovablePoint({graph:t,coord:n.center,normalStyle:n.centerNormalStyle,snapX:n.snapX,snapY:n.snapY,constraints:n.centerConstraints}),n.circ=t.circle(n.center,n.radius,n.circleNormalStyle),n.perim=t.mouselayer.circle(t.scalePoint(n.center)[0],t.scalePoint(n.center)[1],t.scaleVector(n.radius)[0]).attr({"stroke-width":20,opacity:.002}),n.centerConstraints.fixed||(0,o.default)(n.centerPoint.mouseTarget.getMouseTarget()).on("vmouseover vmouseout",(function(e){n.centerPoint.highlight||n.centerPoint.dragging?n.circ.animate(n.circleHighlightStyle,50):n.circ.animate(n.circleNormalStyle,50)})),n.toFront=function(){n.circ.toFront(),n.perim.toFront(),n.centerPoint.visibleShape.toFront(),n.centerConstraints.fixed||n.centerPoint.mouseTarget.toFront()},n.centerPoint.onMove=function(e,r){n.toFront(),n.circ.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.perim.attr({cx:t.scalePoint(e)[0],cy:t.scalePoint(r)[1]}),n.onMove&&n.onMove(e,r)},(0,o.default)(n.centerPoint).on("move",(function(){n.center=this.coord,(0,o.default)(n).trigger("move")})),n.setCenter=function(e,t){n.centerPoint.setCoord([e,t]),n.centerPoint.onMove(e,t),n.center=[e,t]},n.setRadius=function(e){n.radius=e,n.perim.attr({r:t.scaleVector(e)[0]}),n.circ.attr({rx:t.scaleVector(e)[0],ry:t.scaleVector(e)[1]})},n.remove=function(){n.centerPoint.remove(),n.circ.remove(),n.perim.remove()};const i=[[-1*Math.PI,-.875*Math.PI,"ew-resize"],[-.875*Math.PI,-.625*Math.PI,"nesw-resize"],[-.625*Math.PI,-.375*Math.PI,"ns-resize"],[-.375*Math.PI,-.125*Math.PI,"nwse-resize"],[-.125*Math.PI,.125*Math.PI,"ew-resize"],[.125*Math.PI,.375*Math.PI,"nesw-resize"],[.375*Math.PI,.625*Math.PI,"ns-resize"],[.625*Math.PI,.875*Math.PI,"nwse-resize"],[.875*Math.PI,1*Math.PI,"ew-resize"]];return(0,o.default)(n.perim.node).on("vmousemove",(e=>{let[t,r]=this.getMouseCoord(e);t-=n.center[0],r-=n.center[1];const s=Math.atan2(r,t);i.forEach((function(e){const[t,r,a]=e;s>=t&&s<r&&(0,o.default)(n.perim.node).css("cursor",a)}))})),(0,o.default)(n.perim.node).css("cursor","nesw-resize"),n.perim.node.addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1}),(0,o.default)(n.perim.node).on("vmouseover vmouseout vmousedown",(function(e){if("vmouseover"===e.type)n.highlight=!0,C||(n.circ.animate(n.circleHighlightStyle,50),n.centerPoint.visibleShape.animate(n.centerHighlightStyle,50));else if("vmouseout"===e.type)n.highlight=!1,n.dragging||n.centerPoint.dragging||(n.circ.animate(n.circleNormalStyle,50),n.centerPoint.visibleShape.animate(n.centerNormalStyle,50));else if("vmousedown"===e.type&&(1===e.which||0===e.which)){e.preventDefault(),n.toFront();const r=n.radius;(0,o.default)(document).on("vmousemove vmouseup",(function(e){if(e.preventDefault(),n.dragging=!0,C=!0,"vmousemove"===e.type){const r=t.constrainToBounds(t.getMouseCoord(e),10);let a=l.default.getDistance(n.centerPoint.coord,r);a=Math.max(n.minRadius,Math.round(a/n.snapRadius)*n.snapRadius);const i=n.radius;let u=!0;if(n.onResize){const e=n.onResize(a,i);s.default.isNumber(e)?a=e:!1===e&&(u=!1)}u&&(n.setRadius(a),(0,o.default)(n).trigger("move"))}else"vmouseup"===e.type&&((0,o.default)(document).off("vmousemove vmouseup"),n.dragging=!1,C=!1,n.onResizeEnd&&n.onResizeEnd(n.radius,r))}))}})),n},addRotateHandle:function(e){const t=this;let n=e.center;const r=e.radius,a=e.lengthAngle||30,i=e.hideArrow||!1,l=e.mouseTarget,c=s.default.uniqueId("rotateHandle");s.default.isArray(n)&&(n={coord:n});const p=t.addMovablePoint({coord:u.point.addVector(n.coord,u.vector.cartFromPolarDeg(r,e.angleDeg||0)),constraints:{fixedDistance:{dist:r,point:n}},mouseTarget:l});n.toFront();let d,h=n.coord,g=p.coord,m=g,v=!1,y=!1;const b=function(r){if(i)return;const s=u.vector.subtract(r,n.coord),o=u.vector.polarDegFromCart(s)[1];d&&d.remove(),d=function(e,t,n,r,s,o,a){const i=function(r,s){const a=n+s,i=u.vector.cartFromPolarDeg([a,o+r]),l=u.vector.add(t,i),c=e.scalePoint(l);return c[0]+","+c[1]},l=e.scaleVector(n-r),c=e.scaleVector(n+r);return e.raphael.path(" M"+i(s,-r)+" L"+i(s,-3*r)+" L"+i(2*s,0)+" L"+i(s,3*r)+" L"+i(s,r)+" A"+c[0]+","+c[1]+",0,0,1,"+i(-s,r)+" L"+i(-s,3*r)+" L"+i(-2*s,0)+" L"+i(-s,-3*r)+" L"+i(-s,-r)+" A"+l[0]+","+l[1]+",0,0,0,"+i(s,-r)+" Z").attr({stroke:null,fill:a?f.default.INTERACTING:f.default.INTERACTIVE})}(t,n.coord,e.radius,v||y?e.hoverWidth/2:e.width/2,a,o,v||y)};(0,o.default)(n).on("move."+c,(function(){const e=u.vector.subtract(n.coord,h);p.setCoord(u.vector.add(p.coord,e)),b(p.coord),h=n.coord,p.constraints.fixedDistance.point=n,g=p.coord})),p.onMove=function(t,r){v||(m=g,v=!0);let s=[t,r];if(e.onMove){const t=u.vector.polarDegFromCart(u.vector.subtract(g,n.coord)),r=u.vector.polarDegFromCart(u.vector.subtract(s,n.coord)),o=t[1],a=r[1];let i=e.onMove(a,o);null!=i&&!0!==i&&(!1===i&&(i=o),s=u.vector.add(n.coord,u.vector.cartFromPolarDeg([t[0],i])))}return b(s),g=s,s},p.onMoveEnd=function(){if(v=!1,b(p.coord),e.onMoveEnd){const t=u.vector.polarDegFromCart(u.vector.subtract(m,n.coord)),r=u.vector.polarDegFromCart(u.vector.subtract(p.coord,n.coord));e.onMoveEnd(r[1],t[1])}},p.visibleShape.remove(),l||p.mouseTarget.attr({scale:2});const w=(0,o.default)(p.mouseTarget.getMouseTarget());w.bind("vmouseover",(function(e){y=!0,b(p.coord)})),w.bind("vmouseout",(function(e){y=!1,b(p.coord)})),b(p.coord);const x=p.remove;return p.remove=function(){x.call(p),d&&d.remove(),(0,o.default)(n).off("move."+c)},p.update=function(){b(p.coord)},p},addReflectButton:function(e){const t=this,n=e.line,r=t.addMovablePoint({constraints:e.constraints,coord:u.line.midpoint([n.pointA.coord,n.pointZ.coord]),snapX:t.snap[0],snapY:t.snap[1],onMove:function(e,t){return!1},onMoveEnd:function(t,n){e.onMoveEnd&&e.onMoveEnd.call(this,t,n)}});let a,i=!1,l=!1;const c=function(){return i},p=s.default.map([0,1],(function(t){const n=t?e.highlightStyle:e.normalStyle;return s.default.map([0,1],(function(e){return s.default.defaults({"fill-opacity":e},n)}))})),d=function(e){return l&&(e=!e),p[+c()][+e]},h=function(n,r){a&&a.remove(),a=function(e,t,n,r,s,o,a){u.point.equal(n[0],n[1])&&(n=[n[0],u.point.addVector(n[0],[1,1])]);const i=u.vector.normalize(u.vector.subtract(n[1],n[0])),l=u.vector.scale(i,r/2),c=u.vector.scale(i,s),p=u.vector.rotateDeg(c,90),d=u.vector.rotateDeg(c,-90),h=u.vector.negate(l),f=u.vector.rotateDeg(l,90),g=u.vector.rotateDeg(l,-90),m=u.point.addVectors(t,p),v=u.point.addVectors(t,d),y=u.point.addVectors(t,p,l,f),b=u.point.addVectors(t,p,h,f),w=u.point.addVectors(t,d,l,g),x=u.point.addVectors(t,d,h,g),E=e.path([m,y,b,!0],o),C=e.path([v,w,x,!0],a);return{remove:function(){E.remove(),C.remove()}}}(t,n,r,c()?1.5*e.size:e.size,c()?.125*e.size:.25,d(0),d(1))},f=function(e,t){e=e||n.pointA.coord,t=t||n.pointZ.coord;const s=u.line.midpoint([e,t]);r.setCoord(s),h(s,[e,t])};(0,o.default)(n).on("move",s.default.bind(f,r,null,null));const g=(0,o.default)(r.mouseTarget.getMouseTarget());g.on("vclick",(function(){!1!==e.onClick()&&(l=!l,h(r.coord,[n.pointA.coord,n.pointZ.coord]))})),n.pointA.toFront(),n.pointZ.toFront(),r.visibleShape.remove();const m=t.scaleVector(e.size)[0]/20;r.mouseTarget.attr({scale:1.5*m}),g.css("cursor","pointer"),g.bind("vmouseover",(function(e){i=!0,h(r.coord,[n.pointA.coord,n.pointZ.coord])})),g.bind("vmouseout",(function(e){i=!1,h(r.coord,[n.pointA.coord,n.pointZ.coord])}));const v=r.remove;return r.remove=function(){a.remove(),v.call(r)},r.update=f,r.isFlipped=function(){return l},f(),r},protractor:function(e){return new O(this,e)},ruler:function(e){return new M(this,e||{})},addPoints:y}),s.default.extend(P.prototype,{points:[],snapDegrees:0,snapOffsetDeg:0,angleLabel:"",numArcs:1,pushOut:0,fixed:!1,addMoveHandlers:function(){const e=this.graphie;function t(t,n){return l.default.getDistance(e.scalePoint(t),e.scalePoint(n))<30}const n=this.points;n[1].onMove=function(r,o){const a=n[1].coord,i=[r,o],u=y(i,b(a));let c=!0;const p={};return s.default.each([0,2],(function(r){let s=y(n[r].coord,u),o=l.default.findAngle(i,s);o*=Math.PI/180,s=e.constrainToBoundsOnAngle(s,10,o),p[r]=s,t(i,s)&&(c=!1)})),c&&s.default.each(p,(function(e,t){n[t].setCoord(e)})),c};const r=this.snapDegrees,a=this.snapOffsetDeg;s.default.each([0,2],(function(s){n[s].onMove=function(s,o){const i=[s,o],u=n[1].coord;if(t(u,i))return!1;if(r){let t=l.default.findAngle(i,u);t=Math.round((t-a)/r)*r+a;const n=l.default.getDistance(i,u);return y(u,e.polar(n,t))}return!0}})),(0,o.default)(n).on("move",function(){this.update(),(0,o.default)(this).trigger("move")}.bind(this))},addHighlightHandlers:function(){const e=this.points[1];e.onHighlight=function(){s.default.each(this.points,(function(e){e.visibleShape.animate(this.highlightStyle,50)}),this),s.default.each(this.rays,(function(e){e.visibleLine.animate(this.highlightStyle,50),e.arrowStyle=s.default.extend({},e.arrowStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke})}),this),this.angleStyle=s.default.extend({},this.angleStyle,{color:this.highlightStyle.stroke,stroke:this.highlightStyle.stroke}),this.update()}.bind(this),e.onUnhighlight=function(){s.default.each(this.points,(function(e){e.visibleShape.animate(this.normalStyle,50)}),this),s.default.each(this.rays,(function(e){e.visibleLine.animate(e.normalStyle,50),e.arrowStyle=s.default.extend({},e.arrowStyle,{color:e.normalStyle.stroke,stroke:e.normalStyle.stroke})}),this),this.angleStyle=s.default.extend({},this.angleStyle,{color:f.default.DYNAMIC,stroke:f.default.DYNAMIC}),this.update()}.bind(this)},_getClockwiseAngle:function(e){return l.default.findAngle(e[2],e[0],e[1])+0},isReflex:function(){return this.reflex},isClockwise:function(){return this._getClockwiseAngle(this.coords)>180===this.reflex},getClockwiseCoords:function(){return this.isClockwise()?s.default.clone(this.coords):s.default.clone(this.coords).reverse()},update:function(e){const t=this.coords;this.coords=s.default.pluck(this.points,"coord"),s.default.invoke(this.points,"updateLineEnds");const n=this._getClockwiseAngle(t),r=this._getClockwiseAngle(this.coords),o=n>180,a=r>180;this.allowReflex&&(null==e&&(e=o!==a&&Math.abs(r-n)<180),e&&(this.reflex=!this.reflex)),s.default.invoke(this.temp,"remove"),this.temp=this.graphie.labelAngle({point1:this.coords[0],vertex:this.coords[1],point3:this.coords[2],label:this.labeledAngle,text:this.angleLabel,numArcs:this.numArcs,pushOut:this.pushOut,clockwise:this.reflex===a,style:this.angleStyle})},remove:function(){s.default.invoke(this.rays,"remove"),s.default.invoke(this.temp,"remove"),this.labeledAngle.remove()}});var _=k;t.default=_},"4z3f":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("uBl0")),u=r(n("dRoQ")),c=r(n("qoj5"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const d={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}};class h extends s.Component{constructor(...e){super(...e),this.handleAnswerChange=e=>{const t=l.default.firstNumericalParse(e)||0;this.props.onChange({value:t})},this.focus=()=>(a.default.findDOMNode(this.refs.input).focus(),!0),this.serialize=()=>i.default.pick(this.props,"value","simplify","size","inexact","maxError","answerType","rightAlign")}render(){const e=i.default.map(d,(function(e,t){return s.createElement("option",{value:t,key:t},e.name)}),this);return s.createElement("div",null,s.createElement("div",null,s.createElement("label",null,"Correct answer:"," ",s.createElement(u.default,{value:""+this.props.value,onChange:this.handleAnswerChange,ref:"input"}))),s.createElement("div",null,s.createElement("label",null,"Unsimplified answers"," ",s.createElement("select",{value:this.props.simplify,onChange:e=>{this.props.onChange({simplify:e.target.value})}},s.createElement("option",{value:"required"},"will not be graded"),s.createElement("option",{value:"optional"},"will be accepted"),s.createElement("option",{value:"enforced"},"will be marked wrong"))),s.createElement(c.default,null,s.createElement("p",null,'Normally select "will not be graded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and anything after)'),s.createElement("p",null,'Select "will be accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),s.createElement("p",null,'Select "will be marked wrong" only if we are specifically assessing the ability to simplify.'))),s.createElement("div",null,s.createElement("label",null,s.createElement("input",{type:"checkbox",checked:this.props.inexact,onChange:e=>{this.props.onChange({inexact:e.target.checked})}})," ","Allow inexact answers"),s.createElement("label",null,s.createElement("input",{type:"checkbox",style:{visibility:"hidden"}}),"Max error:"," ",s.createElement("input",{type:"text",disabled:!this.props.inexact,defaultValue:this.props.maxError,onBlur:e=>{const t=""+(l.default.firstNumericalParse(e.target.value)||0);e.target.value=t,this.props.onChange({maxError:t})}}))),s.createElement("div",null,"Answer type:"," ",s.createElement("select",{value:this.props.answerType,onChange:e=>{this.props.onChange({answerType:e.target.value})}},e),s.createElement(c.default,null,s.createElement("p",null,'Use the default "Numbers" unless the answer must be in a specific form (e.g., question is about converting decimals to fractions).'))),s.createElement("div",null,s.createElement("label",null,"Width"," ",s.createElement("select",{value:this.props.size,onChange:e=>{this.props.onChange({size:e.target.value})}},s.createElement("option",{value:"normal"},"Normal (80px)"),s.createElement("option",{value:"small"},"Small (40px)"))),s.createElement(c.default,null,s.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))),s.createElement("div",null,s.createElement("label",null,s.createElement("input",{type:"checkbox",checked:this.props.rightAlign,onChange:e=>{this.props.onChange({rightAlign:e.target.checked})}})," ","Right alignment")))}}h.propTypes={value:o.default.number,simplify:o.default.oneOf(["required","optional","enforced"]),size:o.default.oneOf(["normal","small"]),inexact:o.default.bool,maxError:o.default.number,answerType:o.default.string,rightAlign:o.default.bool},h.widgetName="input-number",h.defaultProps={value:0,simplify:"required",size:"normal",inexact:!1,maxError:.1,answerType:"number",rightAlign:!1};var f=h;t.default=f},"6LVe":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("ydm1")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}class i extends o.Component{render(){return o.createElement(s.default,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:o.createElement("span",null,"—")},{value:"-",content:o.createElement("span",null,"–––")},{value:"- ",content:o.createElement("span",null,"–  –")},{value:".",content:o.createElement("span",null,"····")},{value:". ",content:o.createElement("span",null,"· · ·")}],onChange:this.props.onChange})}}i.defaultProps={value:""};var l=i;t.default=l},"6mNK":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ZoomService=void 0;var s=r(n("96rG"));function o(e,t){const n=window.scrollX,r=window.scrollY,o=document.querySelector("meta[name=viewport]");o?o.setAttribute("content",e):(0,s.default)("head").append(`<meta name="viewport" content="${e}">`),document.body.style.opacity=.9999,setTimeout((()=>{document.body.style.opacity=1,window.scrollTo(n,r),t&&setTimeout(t,0)}),0)}function a(){}function i(e,t){this._fullHeight=this._fullWidth=this._overlay=null,this._targetImage=e,this._enableMobilePinch=t,this._$body=(0,s.default)(document.body)}s.default.fn.emulateTransitionEnd=function(e){let t=!1;const n=this;(0,s.default)(this).one("bsTransitionEnd",(function(){t=!0}));return setTimeout((function(){t||(0,s.default)(n).trigger(s.default.support.transition.end)}),e),this},(0,s.default)((function(){s.default.support.transition=function(){const e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(const n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),s.default.support.transition&&(s.default.event.special.bsTransitionEnd={bindType:s.default.support.transition.end,delegateType:s.default.support.transition.end,handle:function(e){if((0,s.default)(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})),a.prototype._initialize=function(e){this._$document||(this._activeZoom=this._initialScrollPosition=this._initialTouchPosition=this._touchMoveListener=null,this._$document=(0,s.default)(document),this._$window=(0,s.default)(window),this._$body=(0,s.default)(document.body),this._boundClick=s.default.proxy(this._clickHandler,this),this._enableMobilePinch=e)},a.prototype.handleZoomClick=function(e,t){this._initialize(t);const n=e.target;if(n&&"IMG"===n.tagName&&!this._$body.hasClass("zoom-overlay-open"))return e.metaKey||e.ctrlKey?window.open(e.target.src,"_blank"):void(!t&&n.width>=window.innerWidth-i.getOffset()||(this._activeZoomClose(!0),t?o("width=device-width, initial-scale=1, minimum-scale=1",(()=>this._zoom(n))):this._zoom(n),t||(this._$window.on("scroll.zoom",s.default.proxy(this._scrollHandler,this)),this._$document.on("keyup.zoom",s.default.proxy(this._keyHandler,this)),this._$document.on("touchstart.zoom",s.default.proxy(this._touchStart,this))),document.addEventListener("click",this._boundClick,!0),e.stopPropagation()))},a.prototype._zoom=function(e){this._activeZoom=new i(e,this._enableMobilePinch),this._activeZoom.zoomImage()},a.prototype._activeZoomClose=function(e){this._activeZoom&&(e?(this._activeZoom.dispose(),this._disposeActiveZoom()):o("width=device-width, initial-scale=1, minimum-scale=1,\n            maximum-scale=1",(()=>{this._activeZoom&&(this._activeZoom.close(),this._disposeActiveZoom())})))},a.prototype._disposeActiveZoom=function(){this._$window.off(".zoom"),this._$document.off(".zoom"),document.removeEventListener("click",this._boundClick,!0),this._activeZoom=null},a.prototype._scrollHandler=function(e){null===this._initialScrollPosition&&(this._initialScrollPosition=window.scrollY);const t=this._initialScrollPosition-window.scrollY;Math.abs(t)>=40&&this._activeZoomClose()},a.prototype._keyHandler=function(e){27===e.keyCode&&this._activeZoomClose()},a.prototype._clickHandler=function(e){e.stopPropagation(),e.preventDefault(),this._activeZoomClose()},a.prototype._touchStart=function(e){this._initialTouchPosition=e.originalEvent.touches[0].pageY,(0,s.default)(e.target).on("touchmove.zoom",s.default.proxy(this._touchMove,this))},a.prototype._touchMove=function(e){Math.abs(e.originalEvent.touches[0].pageY-this._initialTouchPosition)>10&&(this._activeZoomClose(),(0,s.default)(e.target).off("touchmove.zoom"))},i._OFFSET=80,i._MAX_WIDTH=2560,i._MAX_HEIGHT=4096,i.getOffset=function(e){return e?0:i._OFFSET},i.prototype.getOffset=function(){return i.getOffset(this._enableMobilePinch)},i.prototype.zoomImage=function(){const e=document.createElement("img"),t=(0,s.default)(e);e.onload=function(){this._fullHeight=Number(e.height),this._fullWidth=Number(e.width);const n=this._imageOffset=(0,s.default)(this._targetImage).offset(),r=this._left=n.left-(0,s.default)(window).scrollLeft(),o=this._top=n.top-(0,s.default)(window).scrollTop();t.css({left:r,top:o,width:this._targetImage.width,height:this._targetImage.height}),this._zoomOriginal()}.bind(this),e.src=this._targetImage.src,this.$zoomedImage=t},i.prototype._zoomOriginal=function(){var e,t,n;this.$zoomedImage.addClass("zoom-img").attr("data-action","zoom-out"),(0,s.default)(this._targetImage).css("visibility","hidden"),this._backdrop=document.createElement("div"),this._backdrop.className="zoom-backdrop",null==(e=document.body)||e.appendChild(this._backdrop),this._overlay=document.createElement("div"),this._overlay.className="zoom-overlay",null==(t=document.body)||t.appendChild(this._overlay),null==(n=this._overlay)||n.appendChild(this.$zoomedImage[0]),this._calculateZoom(),this._triggerAnimation()},i.prototype._calculateZoom=function(){const e=this._fullWidth,t=this._fullHeight,n=window.innerHeight-this.getOffset(),r=window.innerWidth-this.getOffset(),s=e/this._targetImage.width,o=e/t,a=r/n;this._imgScaleFactor=e<r&&t<n?s:o<a?n/t*s:r/(null!=e?e:0)*s},i.prototype._triggerAnimation=function(){const e=(0,s.default)(window).scrollTop()+window.innerHeight/2,t=(0,s.default)(window).scrollLeft()+window.innerWidth/2,n=this._imgScaleFactor,r=this._imageOffset.top+this._targetImage.height/2,o=this._imageOffset.left+this._targetImage.width/2;this._translateY=(e-r)/n,this._translateX=(t-o)/n,this._zoomedInTransformString=`\n        scale(${n})\n        translate3d(${this._translateX}px, ${this._translateY}px, 0)\n    `,this.$zoomedImage.css({transform:this._zoomedInTransformString}).addClass("zoom-transition").one(s.default.support.transition.end,s.default.proxy(this._onZoomInFinish,this)).emulateTransitionEnd(300),this._$body.addClass("zoom-overlay-open")},i.prototype._onZoomInFinish=function(){const e=this._targetImage.height*this._imgScaleFactor,t=this._targetImage.width*this._imgScaleFactor;let n=0,r=0,o=0,a=0,i=0,l=0;t<window.innerWidth?(n="50%",o=-t/2):i=(t-window.innerWidth)/2,e<window.innerHeight?(r="50%",a=-e/2):l=(e-window.innerHeight)/2,this.$zoomedImage.css({height:e,left:n,marginLeft:o,marginTop:a,top:r,transform:"",width:t}).removeClass("zoom-transition"),(0,s.default)(this._overlay).scrollLeft(i).scrollTop(l)},i.prototype.close=function(){this._$body.removeClass("zoom-overlay-open").addClass("zoom-overlay-transitioning"),this.$zoomedImage.css({height:this._targetImage.height,left:this._left,marginLeft:0,marginTop:0,top:this._top,transform:this._zoomedInTransformString,width:this._targetImage.width}).removeClass("zoom-transition"),(0,s.default)(this._overlay).scrollLeft(0).scrollTop(0),setTimeout((()=>{this.$zoomedImage.css({transform:"scale(1)"}).addClass("zoom-transition").one(s.default.support.transition.end,s.default.proxy(this.dispose,this)).emulateTransitionEnd(300)}),10)},i.prototype.dispose=function(){this.$zoomedImage&&this.$zoomedImage[0].parentNode&&(this.$zoomedImage.remove(),this.$zoomedImage=null,this._overlay.parentNode.removeChild(this._overlay),this._backdrop.parentNode.removeChild(this._backdrop),this._$body.removeClass("zoom-overlay-transitioning")),(0,s.default)(this._targetImage).css("visibility","visible"),this._targetImage.focus()};const l=new a;t.ZoomService=l},"7BBF":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.errors=t.default=void 0;var s=r(n("96rG")),o=r(n("mbWs")),a=r(n("5pch")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("HEOz")),l=n("4PhQ"),u=r(n("XwLL"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const p=Math.pow(2,-42),d={APPROXIMATED_PI_ERROR:i._("Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>"),EXTRA_SYMBOLS_ERROR:i._("We could not understand your answer. Please check your answer for extra text or symbols."),NEEDS_TO_BE_SIMPLFIED_ERROR:i._("Your answer is almost correct, but it needs to be simplified."),MISSING_PERCENT_ERROR:i._("Your answer is almost correct, but it is missing a <code>\\%</code> at the end."),MULTIPLICATION_SIGN_ERROR:i._("I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign."),WRONG_CASE_ERROR:i._("Your answer includes use of a variable with the wrong case."),WRONG_LETTER_ERROR:i._("Your answer includes a wrong variable letter.")};t.errors=d;const h={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,t){let n;t=a.default.extend({simplify:"required",ratio:!1,forms:h.predicate.defaultForms},t),n=a.default.isArray(t.forms)?t.forms:t.forms.split(/\s*,\s*/),void 0===t.inexact&&(t.maxError=0),t.maxError=+t.maxError+p,a.default.contains(n,"percent")&&(n=a.default.without(n,"percent"),n.push("percent"));const r=function(e){const n=(e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"")).match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),r=e.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),s=parseInt(e,10);if(n||r){let e,s,o=!0;return n?(e=parseFloat(n[1]),s=parseFloat(n[2])):(e=parseFloat(r[2]),"-"===r[1]&&(e<0&&(o=!1),e=-e),s=parseFloat(r[3])),o=o&&s>0&&(t.ratio||1!==s)&&1===u.default.getGCD(e,s),[{value:e/s,exact:o}]}return isNaN(s)||""+s!==e?[]:[{value:s,exact:!0}]},o={integer:function(e){const t=o.decimal(e),n=o.decimal(e,1);return null!=t[0].value&&t[0].value===n[0].value||null!=t[1].value&&t[1].value===n[1].value?t:[]},proper:function(e){return s.default.map(r(e),(function(e){return Math.abs(e.value)<1?[e]:[]}))},improper:function(e){return s.default.map(r(e),(function(e){return Math.abs(e.value)>=1?[e]:[]}))},pi:function(e){let t,n=[];if(t=(e=e.replace(/\u2212/,"-")).match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))n=[{value:parseFloat(t[1]+"1"),exact:!0}];else if(t=e.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))n=r(t[1]);else if(t=e.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){const e=parseFloat(t[1]+"1"),r=parseFloat(t[2]),s=parseFloat(t[3]),o=parseFloat(t[4]);n=[{value:e*(r+s/o),exact:s<o&&1===u.default.getGCD(s,o)}]}else if(t=e.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))n=r(t[1]+"/"+t[3]);else if(t=e.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))n=r(t[1]+"1/"+t[3]);else if("0"===e)n=[{value:0,exact:!0}];else{if(!(t=e.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))){n=a.default.reduce(h.predicate.defaultForms.split(/\s*,\s*/),(function(t,n){return t.concat(o[n](e))}),[]);let t=!1;const r=parseFloat(e);if(isNaN(r)||r===parseInt(e))e.match(/\/\s*7/)&&(t=!0);else{const e=Math.PI/12,n=e*Math.round(r/e);Math.abs(r-n)<.01&&(t=!0)}return t&&a.default.each(n,(function(e){e.piApprox=!0})),n}n=o.decimal(t[1])}let i=Math.PI;return e.match(/\\?tau|t|\u03c4/)&&(i=2*Math.PI),e.match(/pau/)&&(i=1.5*Math.PI),s.default.each(n,(function(e,t){t.value*=i})),n},coefficient:function(e){let t=[];return""===(e=e.replace(/\u2212/,"-"))?t=[{value:1,exact:!0}]:"-"===e&&(t=[{value:-1,exact:!0}]),t},log:function(e){let t,n=[];return(t=(e=(e=e.replace(/\u2212/,"-")).replace(/[ \(\)]/g,"")).match(/^log\s*(\S+)\s*$/i))?n=o.decimal(t[1]):"0"===e&&(n=[{value:0,exact:!0}]),n},percent:function(e){e=s.default.trim(e);let t=!1;e.indexOf("%")===e.length-1&&(e=s.default.trim(e.substring(0,e.length-1)),t=!0);const n=o.decimal(e);return s.default.each(n,(function(e,n){n.exact=t,n.value=n.value/100})),n},mixed:function(e){const t=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(t){const e=parseFloat(t[1]+"1"),n=parseFloat(t[2]),r=parseFloat(t[3]),s=parseFloat(t[4]);return[{value:e*(n+r/s),exact:r<s&&1===u.default.getGCD(r,s)}]}return[]},decimal:function(e,n=1e10){const r=function(e){const r=(e=s.default.trim(e)).replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),o=e.match(/^0[0,]*,/);if(r&&!o){let e=parseFloat(r[1].replace(/[, ]/g,""));return void 0===t.inexact&&(e=Math.round(e*n)/n),e}};return[{value:r(e),exact:!0},{value:function(e){return e=e.replace(/([\.,])/g,(function(e,t){return"."===t?",":"."})),r(e)}(e),exact:!0}]}};return function(r){const i=null!=t.fallback?""+t.fallback:"",l={empty:""===(r=s.default.trim(r)||i),correct:!1,message:null,guess:r};if(s.default.each(n,(function(n,s){const a=o[s](r);for(let n=0,r=a.length;n<r;n++){const r=a[n].value,o=a[n].exact,i=a[n].piApprox;if(e(r,t.maxError))return o||"optional"===t.simplify?(l.correct=!0,l.message=t.message||null,l.empty=!1):"percent"===s?(l.empty=!0,l.message=d.MISSING_PERCENT_ERROR):("enforced"!==t.simplify&&(l.empty=!0),l.message=d.NEEDS_TO_BE_SIMPLFIED_ERROR),!1;i&&e(r,Math.abs(.001*r))&&(l.empty=!0,l.message=d.APPROXIMATED_PI_ERROR)}})),!1===l.correct){let e=!1;if(a.default.each(o,(function(t){a.default.any(t(r),(function(e){return null!=e.value&&!a.default.isNaN(e.value)}))&&(e=!0)})),!e)return l.empty=!0,l.message=d.EXTRA_SYMBOLS_ERROR,l}return l}}},number:{convertToPredicate:function(e,t){const n=parseFloat(s.default.trim(e));return[function(e,t){return Math.abs(e-n)<t},s.default.extend({},t,{type:"predicate"})]},createValidatorFunctional:function(e,t){var n;return(n=h.predicate).createValidatorFunctional.apply(n,h.number.convertToPredicate(e,t))}},expression:{parseSolution:function(e,t){let n=o.default.parse(e,t);if(!n.parsed)throw new l.KAError("The provided solution ("+e+") didn't parse.",l.Errors.Internal);if(t.simplified&&!n.expr.isSimplified())throw new l.KAError("The provided solution ("+e+") isn't fully expanded and simplified.",l.Errors.Internal);return n=n.expr,n},createValidatorFunctional:function(e,t){return function(n){const r={empty:!1,correct:!1,message:null,guess:n,ungraded:!1};if(!n)return r.empty=!0,r;const s=o.default.parse(n,t);if(!s.parsed)return r.empty=!0,r;"string"==typeof e&&(e=h.expression.parseSolution(e,t));const a=o.default.compare(s.expr,e,t);if(a.equal)r.correct=!0;else if(a.wrongVariableNames||a.wrongVariableCase)r.ungraded=!0,r.message=a.wrongVariableCase?d.WRONG_CASE_ERROR:d.WRONG_LETTER_ERROR,r.suppressAlmostThere=!0;else if(a.message)r.message=a.message;else{const s=o.default.parse(n.replace(/[xX]/g,"*"),t);if(s.parsed){const n=o.default.compare(s.expr,e,t);n.equal?(r.ungraded=!0,r.message=d.MULTIPLICATION_SIGN_ERROR):n.message&&(r.message=n.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return r}}}};var f=h;t.default=f},"7O7Y":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=E(n("q1tI")),a=r(n("17x9")),i=r(n("i8i4")),l=r(n("5pch")),u=n("eAf/"),c=E(n("+jAD")),p=n("j8wP"),d=r(n("p8fL")),h=r(n("Giaf")),f=r(n("M++g")),g=r(n("7xiW")),m=r(n("uBl0")),v=r(n("yfnS")),y=r(n("XwLL")),b=r(n("qoj5")),w=E(n("HEOz"));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(x=function(e){return e?n:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{assert:C}=d.default,{seededRNG:k}=m.default,{Path:O,Arc:M,Circle:P,Label:_,Line:S,MovablePoint:T,MovableLine:I}=h.default;class N extends o.Component{constructor(...e){super(...e),this._renderThresholdLine=()=>{const e=[0,this._range()[1][1]],t=l.default.map(e,(e=>[this.state.threshold,e]));return o.createElement(I,{onMove:this.handleMouseInteraction},l.default.map(t,((e,t)=>o.createElement(T,{key:t,static:!0,coord:e,normalStyle:{stroke:"none",fill:"none"}}))))},this._renderCircle=()=>{const e=this.props.data,t=l.default.reduce(e,((e,t)=>e+t),0),n=l.default.reduce(e,((e,t,n)=>null!=this.state.threshold&&n<=this.state.threshold?e+t:e),0),r=n/t,s=1e-5,a=[this.props.box[0]-30,30],i=this._range()[0],u=Math.min(Math.max(this.state.threshold,i[0]),i[1]).toFixed(2);return[r>0&&(()=>{const e={key:"below",center:a,radius:20,startAngle:0,endAngle:r<1?360*r:359.99999,sector:1!==r,unscaled:!0,style:{fill:v.default.LIGHT_RED,stroke:v.default.RED}};return o.createElement(M,e)})(),r<1&&(()=>{const e={key:"above",center:a,radius:20,startAngle:r>0?360*r:s,endAngle:360,sector:0!==r,unscaled:!0,style:{fill:v.default.LIGHT_BLUE,stroke:v.default.BLUE}};return o.createElement(M,e)})(),(()=>{const e={key:"label",coord:[a[0],a[1]+30],text:n+" of "+t+" results below "+u+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return o.createElement(_,e)})()]},this._renderData=()=>{const e=this.props.data;this._range();return l.default.map(e,((e,t)=>{if(!e)return;const n=null!=this.state.threshold&&t<=this.state.threshold,r={fill:n?v.default.LIGHT_RED:v.default.LIGHT_BLUE,stroke:n?v.default.RED:v.default.BLUE},s=[[t,0],[t,e],[t+1,e],[t+1,0]];return o.createElement(O,{key:t,coords:s,style:r})}))},this._setupGraphie=(e,t)=>{const n=t.data,r=t.range,s=t.scale,o=r[0][1]-r[0][0],a=r[1][1]-0,i=Math.ceil(a/20);if(l.default.each(l.default.range(0,r[1][1],i),(t=>{n&&e.label([r[0][0],t],y.default.roundToApprox(t,2),"left",!0),e.line([r[0][0],t],[r[0][1],t],{stroke:"#000",strokeWidth:1,opacity:.3})})),n){const t=15,n=Math.ceil(o/t);l.default.each(l.default.range(r[0][0],r[0][1],n),(t=>{e.label([t,0],u.number.round(t,2),"below",!0);e.line([t,0],[t,-8/s[1]],{stroke:"#000",strokeWidth:1})}))}const c=[r[0][0],0],p=[r[0][0],r[1][1]];e.line(c,p,{stroke:"#000",strokeWidth:2,opacity:1});const d=r[0][0]+o/2,h=n?25:0;e.label([d,-h/s[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");const f=0+a/2,g=n?55:28;e.label([r[0][0]-g/s[0],f],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")},this.handleMouseInteraction=e=>{this.setState({threshold:e[0]})},this._range=e=>(e=e||this.props).data?this._getRangeForData(e.data):[[0,100],[-1,10]],this._getRangeForData=e=>{const t=l.default.indexOf(e,l.default.find(e,(e=>e>0))),n=Math.max(0,t-10),r=l.default.lastIndexOf(e,l.default.last(l.default.filter(e,(e=>e>0))));return[[n,Math.min(101,r+1+10)],[-1,l.default.max(e)]]},this._getInitialThreshold=e=>{const t=e[0];return t[0]+(t[1]-t[0])/3},this.state={threshold:this._getInitialThreshold(this._range())}}UNSAFE_componentWillReceiveProps(e){const t=this._range(),n=this._range(e);m.default.deepEq(t,n)||this.setState({threshold:this._getInitialThreshold(n)})}render(){const e=this.props.data,t=this._range(),n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[m.default.scaleFromExtent(t[0],this.props.box[0]),m.default.scaleFromExtent(t[1],this.props.box[1])]},r=[t[0][0],0],s=[t[0][1],0];return o.createElement(h.default,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},o.createElement(S,{start:r,end:s,style:{stroke:"#000",strokeWidth:1,opacity:1}}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine())}}N.propTypes={data:a.default.arrayOf(a.default.number),xAxisLabel:a.default.string,yAxisLabel:a.default.string,box:a.default.arrayOf(a.default.number)},N.defaultProps={data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[400,400]};class R extends o.Component{constructor(...e){super(...e),this.state={invalidInput:!1},this.calculateDisplayProportion=()=>{const e=this.props.userProportion;return"percentage"===this.props.proportionOrPercentage?Math.round(100*e):e},this.change=(...e)=>c.change.apply(this,e),this.checkProportionValidity=e=>e>=0&&"proportion"===this.props.proportionOrPercentage&&e<=1||"percentage"===this.props.proportionOrPercentage&&e<=100,this.handleUserProportionChange=(e,t)=>{let n;n="percentage"===this.props.proportionOrPercentage?e/100:e,null!=n&&(n=Math.min(1,Math.max(0,n))),this.props.onChange({userProportion:n},t)},this.handleSampleSizeChange=(e,t)=>{null!=e&&(e=Math.min(1e3,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)},this.handleRunSimulation=()=>{null!=this.props.numTrials&&null!=this.props.userProportion&&null!=this.props.sampleSize?(this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),this.props.trackInteraction()):this.setState({invalidInput:!0})},this.generateData=e=>((e,t,n)=>{const r=()=>this.generateNumber()<n,s=l.default.times(101,(()=>0));return l.default.times(t,(()=>{const t=l.default.times(e,r),n=l.default.filter(t,l.default.identity).length,o=Math.floor(100*n/e);s[o]++})),s})((e=e||this.props).sampleSize,e.numTrials,e.userProportion),this.getInputPaths=()=>[["userProportion"],["sampleSize"]],this.focus=()=>{const e=l.default.head(this.getInputPaths());return this.focusInputPath(e),!0},this.focusInputPath=e=>{C(e.length>0);const t=l.default.head(e);this.refs[t].focus()},this.blurInputPath=e=>{C(e.length>0);const t=l.default.head(e);this.refs[t].blur()},this.getDOMNodeForPath=e=>{C(e.length>0);const t=l.default.head(e);return i.default.findDOMNode(this.refs[t])},this.getGrammarTypeForPath=e=>(C(e.length>0),"number"),this.setInputValue=(e,t,n)=>{C(e.length>0);const r=l.default.head(e);this["handle"+(r.charAt(0).toUpperCase()+r.slice(1))+"Change"](t,n)},this.getUserInput=()=>null,this.simpleValidate=e=>R.validate(this.getUserInput(),e)}UNSAFE_componentWillMount(){null!=this.props.randomSeed&&(this.generateNumber=m.default.seededRNG(this.props.randomSeed))}UNSAFE_componentWillReceiveProps(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=m.default.seededRNG(e.randomSeed))}render(){const e={marginLeft:"5px"},t="0px 0px 0px 2px rgba(255, 165, 0, 1)",n=l.default.extend({},e,{WebkitBoxShadow:t,MozBoxShadow:t,boxShadow:t,transition:"all 0.15s"}),r=l.default.extend({},e,{transition:"all 0.15s"}),s=this.state.invalidInput?n:r,a=this.props.apiOptions.staticRender?g.default:f.default,i=o.createElement("div",null,o.createElement(a,{ref:"userProportion",style:s,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:()=>this.props.onFocus(["userProportion"]),onBlur:()=>this.props.onBlur(["userProportion"])}),o.createElement(b.default,null,o.createElement("p",null,w._("This controls the proportion or percentage that will be used in your simulation.")))),u=o.createElement("div",null,o.createElement(a,{ref:"sampleSize",style:s,value:this.props.sampleSize,checkValidity:e=>e>=0,disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:()=>this.props.onFocus(["sampleSize"]),onBlur:()=>this.props.onBlur(["sampleSize"])}),o.createElement(b.default,null,o.createElement("p",null,w._("This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated.")))),c=o.createElement("div",{style:{textAlign:"right"}},o.createElement("b",null,this.props.numTrials),o.createElement(b.default,null,o.createElement("p",null,w._("This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times.")))),p=[{title:this.props.proportionLabel+":",value:i},{title:w._("Sample size:"),value:u},{title:w._("Number of trials:"),value:c}],d=o.createElement("button",{className:"simple-button",style:{margin:"20px 0"},disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},w._("Run simulation")),h={paddingBottom:this.props.data?40:0},m=o.createElement("div",{style:h},o.createElement(N,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return o.createElement("div",null,(e=>{const t=o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,w._("Parameter")),o.createElement("th",null,w._("Value")))),n=o.createElement("tbody",null,l.default.map(e,((e,t)=>o.createElement("tr",{key:t},o.createElement("td",null,e.title),o.createElement("td",null,e.value)))));return o.createElement("table",null,t,n)})(p),d,m)}}R.propTypes=(0,s.default)({},c.propTypes,{apiOptions:p.ApiOptions.propTypes,data:a.default.arrayOf(a.default.number),numTrials:a.default.number,proportionLabel:a.default.string,proportionOrPercentage:a.default.string,randomSeed:a.default.number,sampleSize:a.default.number,trackInteraction:a.default.func.isRequired,userProportion:a.default.number,xAxisLabel:a.default.string,yAxisLabel:a.default.string}),R.defaultProps={data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:p.ApiOptions.defaults},l.default.extend(R,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});var A={name:"simulator",displayName:"Simulator",widget:R,transform:e=>{const t=l.default.clone(e);return t.randomSeed=e.problemNum,t},hidden:!0};t.default=A},"7QsT":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"link-click-here",severity:s.default.Severity.WARNING,selector:"link",pattern:/click here/i,message:'Inappropriate link text:\nDo not use the words "click here" in links.'});t.default=o},"7gXX":function(e,t,n){"use strict";function r(e,t,n){const r=e.indexOf("{",t)+1,s=function(e,t){let n=0;for(let r=t,s=e.length;r<s;r++){const t=e[r];if("{"===t?n++:"}"===t&&n--,n<0)return r}return e.length}(e,r);return{endpoint:s,expression:o(e.substring(r,s),n)}}function s(e,t){const n=e.indexOf("\\frac",t),r=e.indexOf("\\dfrac",t);return n>-1&&r>-1?Math.min(n,r):n>-1?n:r>-1?r:-1}function o(e,t){if(!e)return"";let n="",o=0,a=s(e,o);for(;a>-1;){n+=e.substring(o,a),o=a;const i=r(e,o,t);o=i.endpoint+1;const l=r(e,o,t);o=l.endpoint+1,n.length&&(n+=" "),n+=t(i.expression,l.expression),a=s(e,o)}return n+=e.slice(o),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={parseTex:function(e){return o(e,(function(e,t){return e+"/"+t})).replace("\\%","%")},modifyTex:function(e){function t(e){return e.indexOf("\\frac")>-1||e.indexOf("\\dfrac")>-1}return o(e,(function(e,n){let r;return r=t(e)||t(n)?"\\dfrac":"\\frac",r+" {"+e+"}{"+n+"}"}))}};t.default=a},"7kT3":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("uBl0")),o=r(n("5pch")),a=n("4PhQ");const i=s.default.nestedMap,l=s.default.deepEq;function u(e){o.default.extend(this,e)}const c=function(){throw new a.KAError("Abstract method! Must be implemented by Graphie Movable"+this.constructor.displayName,a.Errors.Internal)};o.default.extend(u.prototype,{movableProps:[],add:c,modify:c,remove:c,toFront:function(){},componentDidMount:function(){}});const p=function(e){const t=function e(t){if(!(this instanceof e))throw new a.KAError("Use createElement or JSX with graphie movables",a.Errors.Internal);return this.props=function(e,t){return o.default.extend({},e,{children:o.default.filter(o.default.flatten(t),o.default.identity)})}(t,t.children||[]),this};return e.displayName=e.displayName||o.default.uniqueId("GraphieClass"),t.displayName=e.displayName,(t.prototype=new u(e)).constructor=t,t};var d={GraphieMovable:u,createClass:p,createSimpleClass:function(e){return p({displayName:e.name||o.default.uniqueId("GraphieSimpleClass"),movableProps:["children"],add:function(t){this._elements=e(t,this.props),this._prevProps=this.props},modify:function(e){if(!l(this.props,this._prevProps))return this.remove(),this.add(e),this._prevProps=this.props,"reordered"},remove:function(){i(this._elements,(e=>{e&&e.remove()})),this._elements=null,this._prevProps=null},toFront:function(){i(this._elements,(e=>{o.default.isFunction(e.toFront)&&e.toFront()}))}})}};t.default=d},"7xiW":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("96rG")),u=n("QESs"),c=n("j8wP");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const d=r(n("7gXX")).default.modifyTex;class h extends s.Component{constructor(...e){super(...e),this.state={focused:!1,selectorNamespace:i.default.uniqueId("math-output")},this._getInputClassName=()=>{let e="math-output "+c.ClassNames.INPUT+" "+c.ClassNames.INTERACTIVE;return this.state.focused&&(e+=" "+c.ClassNames.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},this._getDisplayValue=e=>{let t;return t=null!=e?""+e:"",d(t)},this.getValue=()=>this.props.value,this.focus=()=>{this.state.focused||(this.props.onFocus(),this._bindBlurHandler(),this.setState({focused:!0}))},this.blur=()=>{this.state.focused&&(this.props.onBlur(),this._unbindBlurHandler(),this.setState({focused:!1}))},this._bindBlurHandler=()=>{(0,l.default)(document).bind("vclick."+this.state.selectorNamespace,(e=>{(0,l.default)(e.target).closest(a.default.findDOMNode(this)).length||this.blur()}))},this._unbindBlurHandler=()=>{(0,l.default)(document).unbind("."+this.state.selectorNamespace)}}render(){const{TeX:e}=(0,u.getDependencies)();return s.createElement("span",{ref:"input",className:this._getInputClassName(),"aria-label":this.props.labelText,onMouseDown:this.focus,onTouchStart:this.focus},s.createElement("div",{style:{textAlign:"center"}},s.createElement(e,null,this._getDisplayValue(this.props.value))))}componentWillUnmount(){this._unbindBlurHandler()}}h.propTypes={value:o.default.oneOfType([o.default.string,o.default.number]),className:o.default.string,labelText:o.default.string,onFocus:o.default.func,onBlur:o.default.func},h.defaultProps={value:"",onFocus:function(){},onBlur:function(){}};var f=h;t.default=f},"8N6p":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"image-alt-text",severity:s.default.Severity.WARNING,selector:"image",lint:function(e,t,n,r){const s=n[0];return s.alt&&s.alt.trim()?s.alt.length<8?`Images should have alt text:\nfor accessibility, all images should have descriptive alt text.\nThis image's alt text is only ${s.alt.length} characters long.`:void 0:"Images should have alt text:\nfor accessibility, all images should have alt text.\nSpecify alt text inside square brackets after the !."}});t.default=o},"8lwC":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=d(n("q1tI")),a=r(n("17x9")),i=(r(n("5pch")),d(n("+jAD"))),l=r(n("cxY9")),u=r(n("qoj5")),c=r(n("dRoQ"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const h=/khanacademy\.org\/.*\/v\/(.*)$/;function f(e){const t=h.exec(e);return t?t[1]:e}class g extends o.Component{constructor(...e){super(...e),this._handleUrlChange=e=>{this.props.onChange({location:f(e)})},this.change=(...e)=>i.change.apply(this,e),this.serialize=()=>l.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("label",null,"KA Video Slug:"," ",o.createElement(c.default,{name:"location",value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),o.createElement(u.default,null,"KA video URLs will be converted to just the slug.")))}}g.propTypes=(0,s.default)({},i.propTypes,{location:a.default.string,onChange:a.default.func}),g.widgetName="video",g.defaultProps={location:""};var m=g;t.default=m},"9cGa":function(e,t,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const s={assetStatuses:{},setAssetStatus:(e,t)=>{}};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")).createContext(s);t.default=o},A5Oa:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=d(n("q1tI")),a=r(n("17x9")),i=d(n("+jAD")),l=r(n("cxY9")),u=r(n("M++g")),c=r(n("G6Ta"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class h extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.updateMolecule=e=>function(t){const n=[].concat(this.props.smiles);n[e]=t,this.change({smiles:n})}.bind(this),this.updateRotation=e=>function(t){const n=[].concat(this.props.rotationAngle);n[e]=t,this.change({rotationAngle:n})}.bind(this),this.updateSeparators=(e,t)=>n=>{const r=this.props.separators.map((e=>(0,s.default)({},e)));r[e][t]=n,this.change({separators:r})},this.serialize=()=>l.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("div",null,o.createElement("label",null,"LHS SMILES: ",o.createElement(c.default,{onChange:this.updateMolecule(0),value:this.props.smiles[0]}))),o.createElement("div",null,o.createElement("label",null,"LHS Rotation (deg): ",o.createElement(u.default,{onChange:this.updateRotation(0),value:this.props.rotationAngle[0]}))),o.createElement("div",null,o.createElement("label",null,"RHS SMILES: ",o.createElement(c.default,{onChange:this.updateMolecule(1),value:this.props.smiles[1]}))),o.createElement("div",null,o.createElement("label",null,"RHS Rotation (deg): ",o.createElement(u.default,{onChange:this.updateRotation(1),value:this.props.rotationAngle[1]}))),o.createElement("div",null,o.createElement("label",null,"Top of arrow text: ",o.createElement(c.default,{onChange:this.updateSeparators(0,"topText"),value:this.props.separators[0].topText}))),o.createElement("div",null,o.createElement("label",null,"Bottom of arrow text: ",o.createElement(c.default,{onChange:this.updateSeparators(0,"bottomText"),value:this.props.separators[0].bottomText}))))}}h.propTypes=(0,s.default)({},i.propTypes,{rotationAngle:a.default.arrayOf(a.default.number),separators:a.default.arrayOf(a.default.object),smiles:a.default.arrayOf(a.default.string)}),h.widgetName="reaction-diagram",h.defaultProps={smiles:["",""],rotationAngle:[0,0],separators:[{type:"right",topText:"",bottomText:""}]};var f=h;t.default=f},AHSQ:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("17x9")),a=m(n("q1tI")),i=r(n("5pch")),l=r(n("mbWs")),u=m(n("+jAD")),c=r(n("cxY9")),p=r(n("APgo")),d=r(n("M++g")),h=n("/4Qb"),f=r(n("FGkX"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{displaySigFigs:v}=f.default,y="all",b="some",w=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()};class x extends a.Component{constructor(...e){super(...e),this._checkValidity=({name:e,original:t,sigfigs:n})=>{const r=l.default.unitParse(e);let s="",o=!0;if(r.parsed&&t){const e=new l.default.Var("x"),{unit:a}=r,i=new l.default.Eq(t,"=",new l.default.Mul(e,a));try{s=function(e,t){return v(e,t,-10,!1)}(i.solveLinearEquationForVariable(e).eval(),n),o=l.default.compare(w(t),w(a)).equal}catch(e){o=!1}}else o=!1;this.setState({valid:o,solvedExample:s})}}UNSAFE_componentWillMount(){this._checkValidity(this.props)}UNSAFE_componentWillReceiveProps(e){this._checkValidity(e)}render(){let e;return e=this.state.valid?a.createElement("span",null,a.createElement("span",{className:"unit-example-okay"},a.createElement(p.default,h.iconOk)),this.state.solvedExample):a.createElement("span",{className:"unit-example-not-okay"},a.createElement(p.default,h.iconRemove)),a.createElement("div",null,e," ",this.props.name)}}class E extends a.Component{constructor(e){super(e),this.change=(...e)=>u.change.apply(this,e),this.handleAcceptingUnitsChange=e=>{const t=e.target.value.split(",").map((e=>e.trim())).filter((e=>""!==e));this.change({acceptingUnits:t})},this.handleSigfigChange=e=>{this.change({sigfigs:e})},this._checkSigfigValidity=e=>e>0&&e<=10,this._setAccepting=e=>{this.change({accepting:e})},this._doOriginal=e=>{const t=l.default.unitParse(e.value);this.parsed=!1,t.parsed&&"unitMagnitude"===t.type&&(this.original=t.expr,this.parsed=!0)},this.onChange=e=>{this.props.onChange({value:e.target.value})},this.getSaveWarnings=()=>{const{value:e,accepting:t,acceptingUnits:n}=this.props,r=[];return l.default.unitParse(e).parsed||r.push("Answer did not parse"),t===b&&0===n.length&&r.push("There are no accepted units"),r},this.serialize=()=>c.default.serialize.call(this),this.groupId=i.default.uniqueId("accepting"),this._doOriginal(e)}UNSAFE_componentWillReceiveProps(e){this._doOriginal(e)}render(){const{acceptingUnits:e=[],accepting:t}=this.props;let n=null;if(t===b){const t=e.map(((e,t)=>a.createElement(x,{name:e,original:this.original||null,sigfigs:this.props.sigfigs,key:t})));n=a.createElement("div",null,a.createElement("input",{type:"text",defaultValue:e.join(", "),onChange:this.handleAcceptingUnitsChange})," ","(comma-separated)",t)}return a.createElement("div",{className:"unit-editor"},a.createElement("div",null,a.createElement("input",{value:this.props.value,className:"unit-editor-canonical",onChange:this.onChange})," ",this.parsed?a.createElement("span",{className:"unit-example-okay"},a.createElement(p.default,h.iconOk)):a.createElement("span",{className:"unit-example-not-okay"},a.createElement(p.default,h.iconRemove))),a.createElement("div",null,"Significant Figures:"," ",a.createElement(d.default,{value:this.props.sigfigs,onChange:this.handleSigfigChange,checkValidity:this._checkSigfigValidity,useArrowKeys:!0})),a.createElement("div",null,a.createElement("label",null,a.createElement("input",{type:"radio",name:this.groupId,onChange:()=>this._setAccepting(y),checked:this.props.accepting===y})," Any equivalent unit "),a.createElement("label",null,a.createElement("input",{type:"radio",name:this.groupId,onChange:()=>this._setAccepting(b),checked:this.props.accepting===b})," Only these units ")),n)}}E.propTypes=(0,s.default)({},u.propTypes,{value:o.default.string,acceptingUnits:o.default.arrayOf(o.default.string),accepting:o.default.oneOf([y,b]),sigfigs:o.default.number}),E.widgetName="unit-input",E.defaultProps={value:"5x10^5 kg m / s^2",accepting:y,sigfigs:3};var C=E;t.default=C},APgo:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("17x9")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const l=({path:e,width:t,height:n,style:r={},title:o})=>a.createElement("svg",{role:"img","aria-hidden":!o,style:(0,s.default)({verticalAlign:"middle"},r),width:t/n+"em",height:"1em",viewBox:`0 0 ${t} ${n}`},!!o&&a.createElement("title",null,o),a.createElement("path",{d:e,fill:"currentColor"}));l.propTypes={path:o.default.string.isRequired,height:o.default.number.isRequired,width:o.default.number.isRequired,style:o.default.object,title:o.default.string};var u=l;t.default=u},Ae9s:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-align-linebreaks",severity:s.default.Severity.WARNING,selector:"blockMath",pattern:/\\begin{align}[\s\S]*\\\\[\s\S]+\\end{align}/,lint:function(e,t,n,r){let s=r[0];for(;s.length;){const e=s.indexOf("\\\\");if(-1===e)return null;s=s.substring(e+2);const t=s.match(/^\s*\\\\\s*(?!\\\\)/);if(!t)return"Use four backslashes between lines of an align block";s=s.substring(t[0].length)}}});t.default=o},"Akm+":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("8OQS")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=r(n("17x9"));r(n("5pch"));const l=["inputRef","onChecked","goToPrevChoice","goToNextChoice"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class c extends a.Component{constructor(...e){super(...e),this.handleClick=e=>{this.props.onChecked(!this.props.checked)},this.handleKeyUp=e=>{" "===e.key&&(this.props.onChecked(!this.props.checked),e.preventDefault())},this.handleChange=e=>{!this.props.checked&&e.target.checked&&this.props.onChecked(!0)},this.handleKeyDown=e=>{" "===e.key?e.preventDefault():"ArrowUp"===e.key||"ArrowLeft"===e.key?(this.props.goToPrevChoice(),e.preventDefault()):"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(this.props.goToNextChoice(),e.preventDefault())},this.handleRef=e=>{this._inputElement=e,this.props.inputRef&&this.props.inputRef(e)}}render(){const e=this.props,t=(0,o.default)(e,l);return a.createElement("input",(0,s.default)({},t,{type:"radio",onChange:this.handleChange,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,ref:this.handleRef}))}}c.propTypes={checked:i.default.bool.isRequired,inputRef:i.default.func,onChecked:i.default.func.isRequired,goToPrevChoice:i.default.func.isRequired,goToNextChoice:i.default.func.isRequired};var p=c;t.default=p},Atlv:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("96rG")),a=A(n("q1tI")),i=r(n("i8i4")),l=r(n("5pch")),u=r(n("TSYQ")),c=A(n("4PhQ")),p=r(n("XDp7")),d=n("QESs"),h=r(n("S3VJ")),f=r(n("s9bZ")),g=r(n("2OMh")),m=r(n("c+Oy")),v=r(n("yPu2")),y=r(n("vL0m")),b=r(n("SmNe")),w=A(n("4Zwh")),x=r(n("uBl0")),E=n("j8wP"),C=r(n("DuZ2")),k=r(n("xrPN")),O=r(n("p4D3")),M=r(n("Boyy")),P=n("zahm"),_=r(n("yO7p")),S=r(n("9cGa")),T=r(n("vNny")),I=r(n("g8jB")),N=r(n("D5Tb"));function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function A(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{maybeUnescape:j}=f.default,{mapObject:D,mapObjectFromArray:W}=T.default,L=/\S/,F=/(web\+graphie|https):\/\/[^\s]*/,q=()=>{};p.default.useJIPT&&(window.PerseusTranslationComponents=[],p.default.domInsertChecks.push((function(e,t,n){const r=(0,o.default)(t),s=r.data("perseus-component-index"),a=r.data("perseus-paragraph-index");if(t&&void 0!==s){const t=window.PerseusTranslationComponents[s];return!!t&&(e=j(e),t.replaceJiptContent(e,a),!1)}return e})));const z=["content","problemNum","widgets"];class B extends a.Component{constructor(e,t){super(e,t),this.getApiOptions=()=>(0,s.default)({},E.ApiOptions.defaults,this.props.apiOptions),this._getInitialWidgetState=e=>{const t=this._getAllWidgetsInfo(e);return{widgetInfo:t,widgetProps:this._getAllWidgetsStartProps(t,e)}},this._getAllWidgetsInfo=e=>D(e.widgets,((e,t)=>{if(!e.type||!e.alignment){const n={};e.type||(n.type=t.split(" ")[0]),e.alignment||(n.alignment="default"),e=l.default.extend({},e,n)}return w.upgradeWidgetInfoToLatestVersion(e)})),this._getAllWidgetsStartProps=(e,t)=>D(e,(e=>w.getRendererPropsForWidgetInfo(e,t.problemNum))),this._getDefaultWidgetInfo=e=>{const t=x.default.rTypeFromWidgetId.exec(e);return null==t?{}:{type:t[1],graded:!0,options:{}}},this._getWidgetInfo=e=>this.state.widgetInfo[e]||this._getDefaultWidgetInfo(e),this.renderWidget=(e,t,n)=>{const r=this.state.widgetInfo[t];if(r&&"full-width"===r.alignment&&(n.foundFullWidth=!0),r){const n=r&&r.type||e,s=l.default.contains(this.props.highlightedWidgets,t);return a.createElement(N.default,{key:"container:"+t},a.createElement(b.default,{ref:"container:"+t,type:n,initialProps:this.getWidgetProps(t),shouldHighlight:s,linterContext:M.default.pushContextStack(this.props.linterContext,"widget")}))}return null},this.getWidgetProps=e=>{const t=this.getApiOptions(),n=this.state.widgetProps[e]||{};let r=null;const o=this.state.widgetInfo[e];this.props.reviewMode&&o&&(r=o.options),this._interactionTrackers||(this._interactionTrackers={});let a=this._interactionTrackers[e];return a||(a=this._interactionTrackers[e]=new I.default(t.trackInteraction,o&&o.type,e,w.getTracking(o&&o.type))),(0,s.default)({},n,{ref:e,widgetId:e,alignment:o&&o.alignment,static:o&&o.static&&!this.props.problemNum,problemNum:this.props.problemNum,apiOptions:this.getApiOptions(),keypadElement:this.props.keypadElement,questionCompleted:this.props.questionCompleted,onFocus:l.default.partial(this._onWidgetFocus,e),onBlur:l.default.partial(this._onWidgetBlur,e),findWidgets:this.findWidgets,reviewModeRubric:r,onChange:(t,n,r=!1)=>{this._setWidgetProps(e,t,n,r)},trackInteraction:a.track,isLastUsedWidget:e===this.state.lastUsedWidgetId})},this.getSerializedState=e=>D(e||this.state.widgetProps,((e,t)=>{const n=this.getWidgetInstance(t);return n&&n.getSerializedState?n.getSerializedState():e})),this.restoreSerializedState=(e,t)=>{const n=l.default.keys(e),r=l.default.keys(this.state.widgetProps);if(n.length!==r.length||l.default.intersection(n,r).length!==n.length)return void c.default.error("Refusing to restore bad serialized state:",c.Errors.Internal,{metadata:{serializedState:JSON.stringify(e),currentProps:JSON.stringify(this.state.widgetProps)}});let s=1;const o=()=>{--s,t&&0===s&&t()};this.setState({widgetProps:D(e,((e,t)=>{const n=this.getWidgetInstance(t);if(n&&n.restoreSerializedState){++s;const r=n.restoreSerializedState(e,o);return l.default.extend({},this.state.widgetProps[t],r)}return e}))},(()=>{setTimeout(o,0)}))},this.showRationalesForCurrentlySelectedChoices=()=>{Object.keys(this.props.widgets).forEach((e=>{const t=this.getWidgetInstance(e);t&&t.showRationalesForCurrentlySelectedChoices&&t.showRationalesForCurrentlySelectedChoices(this._getWidgetInfo(e).options)}))},this.deselectIncorrectSelectedChoices=()=>{Object.keys(this.props.widgets).forEach((e=>{const t=this.getWidgetInstance(e);t&&t.deselectIncorrectSelectedChoices&&t.deselectIncorrectSelectedChoices()}))},this.findInternalWidgets=e=>{let t;if("string"==typeof e)if(-1!==e.indexOf(" ")){const n=e;t=(e,t,r)=>e===n}else{const n=e;t=(e,t,r)=>t.type===n}else t=e;return this.widgetIds.filter((e=>{const n=this._getWidgetInfo(e),r=this.getWidgetInstance(e);return t(e,n,r)})).map(this.getWidgetInstance)},this.findWidgets=e=>[].concat(this.findInternalWidgets(e),this.props.findExternalWidgets(e)),this.getWidgetInstance=e=>{const t=this.refs["container:"+e];return t?t.getWidget():null},this._onWidgetFocus=(e,t=[])=>{if(!l.default.isArray(t))throw new c.KAError("widget props.onFocus focusPath must be an Array, but was"+JSON.stringify(t),c.Errors.Internal);this._setCurrentFocus([e].concat(t))},this._onWidgetBlur=(e,t)=>{const n=this._currentFocus,r=[e].concat(t);l.default.isEqual(r,n)&&l.default.defer((()=>{l.default.isEqual(this._currentFocus,n)&&this._setCurrentFocus(null)}))},this.getContent=(e,t)=>t.jiptContent||e.content,this.shouldRenderJiptPlaceholder=(e,t)=>p.default.useJIPT&&null==t.jiptContent&&-1!==e.content.indexOf("crwdns"),this.replaceJiptContent=(e,t)=>{if(null==t)this.setState({jiptContent:e});else{/^\s*(`{3,}|~{3,})\s*(\S+)?\s*\n([\s\S]+?)\s*\1\s*$/.test(e)||(/\S\n\s*\n\S/.test(e)?e="$\\large{\\red{\\text{Please translate each paragraph to a single paragraph.}}}$":/^\s*$/.test(e)&&(e="$\\large{\\red{\\text{Translated paragraph is currently empty}}}$"));const n=this.getContent(this.props,this.state),r=h.default.parseToArray(n);r[t]=e,this.setState({jiptContent:h.default.joinFromArray(r)})}},this.outputMarkdown=(e,t)=>{if(l.default.isArray(e)){const n=t.key,r=[];let s=!1;for(let n=0;n<e.length;n++){t.key=n,t.paragraphIndex=n;const o=this.outputMarkdown(e[n],t),a="string"==typeof o;"string"==typeof o&&s?r[r.length-1]+=o:r.push(o),s=a}return t.key=n,r}this._foundTextNodes=!1,t.foundFullWidth=!1;const n=this.outputNested(e,t);let r;return r=null!=this.translationIndex?null:(0,u.default)({"perseus-paragraph-centered":!this._foundTextNodes,"perseus-paragraph-full-width":t.foundFullWidth&&1===e.content.length}),a.createElement(m.default,{key:t.key,className:r,translationIndex:this.translationIndex,paragraphIndex:t.paragraphIndex},a.createElement(N.default,null,n))},this.outputNested=(e,t)=>{if(l.default.isArray(e)){const n=t.key,r=[];let s=!1;for(let n=0;n<e.length;n++){t.key=n;const o=this.outputNested(e[n],t),a="string"==typeof o;"string"==typeof o&&s?r[r.length-1]+=o:r.push(o),s=a}return t.key=n,r}return this.outputNode(e,this.outputNested,t)},this.outputNode=(e,t,n)=>{const r=this.getApiOptions(),o=r.imagePlaceholder;if("widget"===e.type){const t=r.widgetPlaceholder;return t||(this._foundTextNodes=!0,l.default.contains(this.widgetIds,e.id)?a.createElement("span",{key:n.key,className:"renderer-widget-error"},["Widget [[","☃"," ",e.id,"]] already exists."].join("")):(this.widgetIds.push(e.id),this.renderWidget(e.widgetType,e.id,n)))}if("blockMath"===e.type){const t=(0,O.default)(e.content),o={overflowX:"auto",overflowY:"hidden",paddingTop:10,paddingBottom:10,marginTop:-10,marginBottom:-10};if(r.isMobile){const e=16,r={marginLeft:-e,marginRight:-e},i={paddingLeft:e,paddingRight:e},l=(0,s.default)({},o,U.mobileZoomableParentFix);return a.createElement("div",{key:n.key,className:"perseus-block-math",style:r},a.createElement(N.default,null,a.createElement("div",{className:"perseus-block-math-inner",style:(0,s.default)({},l,i)},a.createElement(k.default,null,t))))}return a.createElement("div",{key:n.key,className:"perseus-block-math"},a.createElement(N.default,null,a.createElement("div",{className:"perseus-block-math-inner",style:o},a.createElement(S.default.Consumer,null,(({setAssetStatus:e})=>a.createElement(y.default,{setAssetStatus:e},t))))))}if("math"===e.type){const t=e.content.replace(/\{align[*]?\}/g,"{aligned}");return a.createElement("span",{key:n.key,style:{whiteSpace:"nowrap"}},a.createElement(N.default,null,a.createElement("span",null),a.createElement(S.default.Consumer,null,(({setAssetStatus:e})=>a.createElement(y.default,{onRender:this.props.onRender,setAssetStatus:e},t))),a.createElement("span",null)))}if("image"===e.type){if(o)return o;const t=l.default.has(this.props.images,e.target)?this.props.images[e.target]:null,i=!n.inTable;return a.createElement(N.default,{key:n.key},a.createElement(S.default.Consumer,null,(({setAssetStatus:n})=>a.createElement(v.default,(0,s.default)({setAssetStatus:n,src:g.default.sanitizeUrl(e.target),alt:e.alt,title:e.title,responsive:i,onUpdate:this.props.onRender,zoomToFullSizeOnMobile:r.isMobile&&r.isArticle},t)))))}if("columns"===e.type)return this._isTwoColumn=!0,a.createElement(N.default,{key:n.key},g.default.ruleOutput(e,t,n));if("text"===e.type)return L.test(e.content)&&(this._foundTextNodes=!0),o&&F.test(e.content)?o:e.content;if("table"===e.type||"titledTable"===e.type){const o=g.default.ruleOutput(e,t,(0,s.default)({},n,{isMobile:r.isMobile,inTable:!0}));if(!r.isMobile)return o;const i=16,l={marginLeft:-i,marginRight:-i},u={paddingLeft:0,paddingRight:0},c=(0,s.default)({},u,U.mobileZoomableParentFix),p=a.createElement("div",{style:(0,s.default)({},c,{overflowX:"auto"})},a.createElement(N.default,null,a.createElement(C.default,{animateHeight:!0},o)));return a.createElement("div",{style:l},p)}return a.createElement(N.default,{key:n.key},g.default.ruleOutput(e,t,n))},this.handleRender=e=>{const t=this.props.onRender,n=e.onRender;if(t!==q||n!==q){const e=(0,o.default)(i.default.findDOMNode(this)).find("img");n!==q&&e.off("load",n),t!==q&&e.on("load",t)}t()},this._setCurrentFocus=e=>{const t=this.getApiOptions();if(n=e,r=this._currentFocus,!(null===n||null===r?n===r:l.default.every(n,((e,t)=>{if(null!=r)return l.default.isEqual(e,r[t])})))){const n=this._currentFocus;n&&this.blurPath(n),this._currentFocus=e,t.onFocusChange(this._currentFocus,n)}var n,r},this.focus=()=>{let e,t;for(let n=0;n<this.widgetIds.length;n++){const r=this.widgetIds[n],s=this.getWidgetInstance(r),o=s&&s.focus&&s.focus();if(o){e=r,t=o;break}}if(e){let n;return"object"==typeof t?(n=[e].concat(t.path||[]),c.default.error("Renderer received a focus result of type 'object' instead of the expected type 'boolean'",c.Errors.Internal,{metadata:{focusResult:JSON.stringify(t),currentProps:JSON.stringify(this.state.widgetProps)}})):n=[e],this._setCurrentFocus(n),!0}},this.getDOMNodeForPath=e=>{const t=l.default.first(e),n=l.default.rest(e),r=this.getWidgetInstance(t),s=r&&r.getDOMNodeForPath;return s?s(n):0===n.length?i.default.findDOMNode(r):void 0},this.getGrammarTypeForPath=e=>{const t=l.default.first(e),n=l.default.rest(e),r=this.getWidgetInstance(t);if(r&&r.getGrammarTypeForPath)return r.getGrammarTypeForPath(n)},this.getInputPaths=()=>{const e=[];return l.default.each(this.widgetIds,(t=>{const n=this.getWidgetInstance(t);if(n&&n.getInputPaths){const r=n.getInputPaths();l.default.each(r,(n=>{const r=[t].concat(n);e.push(r)}))}})),e},this.focusPath=e=>{if(l.default.isEqual(this._currentFocus,e))return;this._currentFocus&&this.blurPath(this._currentFocus);const t=l.default.first(e),n=l.default.rest(e),r=this.getWidgetInstance(t);r&&r.focusInputPath&&r.focusInputPath(n)},this.blurPath=e=>{if(!l.default.isEqual(this._currentFocus,e))return;const t=l.default.first(e),n=l.default.rest(e);if(this.getWidgetInstance(t)){const e=this.getWidgetInstance(t);e&&e.blurInputPath&&e.blurInputPath(n)}},this.blur=()=>{this._currentFocus&&this.blurPath(this._currentFocus)},this.serialize=()=>{const e={};return l.default.each(this.state.widgetInfo,(function(t,n){const r=this.getWidgetInstance(n).serialize();l.default.isEmpty(r)||(e[n]=r)}),this),e},this.emptyWidgets=()=>l.default.filter(this.widgetIds,(e=>{const t=this._getWidgetInfo(e);if(t.static)return!1;const n=this.getWidgetInstance(e);if(n&&n.simpleValidate){const e=n.simpleValidate(t.options,null);return x.default.scoreIsEmpty(e)}})),this._setWidgetProps=(e,t,n,r)=>{this.setState((n=>{const o=(0,s.default)({},n.widgetProps,{[e]:(0,s.default)({},n.widgetProps[e],t)}),a=r?n.lastUsedWidgetId:e;return r||this.props.onSerializedStateUpdated(this.getSerializedState(o)),{lastUsedWidgetId:a,widgetProps:o}}),(()=>{setTimeout((()=>{const t=n&&n();r||this.props.onInteractWithWidget(e),!1!==t&&this._setCurrentFocus([e])}),0)}))},this.setInputValue=(e,t,n)=>{const r=l.default.first(e),s=l.default.rest(e),o=this.getWidgetInstance(r);null==o||null==o.setInputValue||o.setInputValue(s,t,n)},this.getUserInput=()=>this.widgetIds.map((e=>{const t=this.getWidgetInstance(e);if(t&&t.getUserInput)return t.getUserInput()})),this.getWidgetIds=()=>this.widgetIds,this.getUserInputForWidgets=()=>W(this.widgetIds,(e=>{const t=this.getWidgetInstance(e);if(t&&t.getUserInput)return t.getUserInput()})),this.scoreWidgets=()=>{const e=this.state.widgetInfo,t=this.getApiOptions().onInputError,n=l.default.filter(this.widgetIds,(t=>{const n=e[t],r=null==(null==n?void 0:n.graded)||n.graded,s=!(null==n||!n.static);return r&&!s})),r={};return l.default.each(n,(n=>{const s=e[n],o=this.getWidgetInstance(n);o&&o.simpleValidate&&(r[n]=o.simpleValidate(null==s?void 0:s.options,t))})),r},this.score=()=>l.default.reduce(this.scoreWidgets(),x.default.combineScores,x.default.noScore),this.guessAndScore=()=>[this.getUserInput(),this.score()],this.examples=()=>{const e=this.widgetIds,t=l.default.compact(l.default.map(e,(e=>{const t=this.getWidgetInstance(e);return null!=t&&t.examples?t.examples():null})));if(!t.length)return null;return l.default.all(t,(function(e){return l.default.isEqual(t[0],e)}))?t[0]:null},this.handleNotGorgonLintErrors=e=>{this._isMounted&&this.setState({notGorgonLintErrors:e})},this._notGorgon=new _.default,this.state=(0,s.default)({jiptContent:null,notGorgonLintErrors:[],lastUsedWidgetId:null},this._getInitialWidgetState(e))}componentDidMount(){this._isMounted=!0,this.handleRender({}),this._currentFocus=null,this.props.serializedState&&this.restoreSerializedState(this.props.serializedState),this.props.linterContext.highlightLint&&this._notGorgon.runLinter(this.props.content,this.handleNotGorgonLintErrors)}UNSAFE_componentWillReceiveProps(e){l.default.isEqual(l.default.pick(this.props,z),l.default.pick(e,z))||this.setState(this._getInitialWidgetState(e))}shouldComponentUpdate(e,t){if(this.props.alwaysUpdate)return!0;const n=!l.default.isEqual(this.state,t);return!l.default.isEqual(this.props,e)||n}UNSAFE_componentWillUpdate(e,t){const n=this.shouldRenderJiptPlaceholder(this.props,this.state),r=this.shouldRenderJiptPlaceholder(e,t),s=this.getContent(this.props,this.state),o=this.getContent(e,t),a=this.props.highlightedWidgets,i=e.highlightedWidgets;this.reuseMarkdown=!n&&!r&&s===o&&l.default.isEqual(this.state.notGorgonLintErrors,t.notGorgonLintErrors)&&(!this.props.linterContext.highlightLint||l.default.isEqual(this.props.widgets,e.widgets))&&this.props.linterContext.highlightLint===e.linterContext.highlightLint&&a===i}componentDidUpdate(e,t){this.handleRender(e),l.default.each(this.widgetIds,(e=>{const t=this.refs["container:"+e];t&&t.replaceWidgetProps(this.getWidgetProps(e))})),this.props.serializedState&&!l.default.isEqual(this.props.serializedState,this.getSerializedState())&&this.restoreSerializedState(this.props.serializedState),this.props.linterContext.highlightLint&&this._notGorgon.runLinter(this.props.content,this.handleNotGorgonLintErrors)}componentWillUnmount(){this.widgetIds=[],null!=this.translationIndex&&(window.PerseusTranslationComponents[this.translationIndex]=null),this._isMounted=!1}render(){const e=this.getApiOptions(),{KatexProvider:t}=(0,d.getDependencies)();if(this.reuseMarkdown)return this.lastRenderedMarkdown;const n=this.getContent(this.props,this.state);if(this.widgetIds=[],this.shouldRenderJiptPlaceholder(this.props,this.state)&&(this.translationIndex||(this.translationIndex=window.PerseusTranslationComponents.push(this)-1),!e.isArticle))return a.createElement(t,null,a.createElement("div",{"data-perseus-component-index":this.translationIndex},n));this._isTwoColumn=!1;const r=g.default.parse(n,{isJipt:null!=this.translationIndex});if(this.props.linterContext.highlightLint){const e=(0,s.default)({content:this.props.content,widgets:this.props.widgets},this.props.linterContext);M.default.runLinter(r,e,!0),this._notGorgon.applyLintErrors(r,[].concat(this.state.notGorgonLintErrors,this.props.legacyPerseusLint||[]))}const o=this.outputMarkdown(r,{baseElements:e.baseElements}),i=(0,u.default)({[E.ClassNames.RENDERER]:!0,[E.ClassNames.RESPONSIVE_RENDERER]:!0,[E.ClassNames.TWO_COLUMN_RENDERER]:this._isTwoColumn});return this.lastRenderedMarkdown=a.createElement(t,null,a.createElement("div",{className:i},o)),this.lastRenderedMarkdown}}B.defaultProps={content:"",widgets:{},images:{},highlightedWidgets:[],questionCompleted:!1,onRender:q,onInteractWithWidget:function(){},findExternalWidgets:()=>[],alwaysUpdate:!1,reviewMode:!1,serializedState:null,onSerializedStateUpdated:()=>{},linterContext:P.linterContextDefault};const U={mobileZoomableParentFix:{transform:"translate3d(0,0,0)"}};var H=B;t.default=H},BCuI:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=m(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=n("j8wP"),u=m(n("+jAD")),c=n("/4Qb"),p=r(n("APgo")),d=r(n("Atlv")),h=r(n("uBl0")),f=n("zahm");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class v extends o.Component{constructor(...e){super(...e),this.state={visible:1},this.change=(...e)=>u.change.apply(this,e),this._handleInteraction=e=>{const t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){const e=this.refs.renderer.getWidgetInstance("group "+t);e.showRationalesForCurrentlySelectedChoices();const n=e.simpleValidate();"points"===n.type&&n.total===n.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=o.createElement(p.default,(0,s.default)({},c.iconOk,{style:{color:"green"}})),t=i.default.chain(this.props.json).first(this.state.visible).map(((e,t)=>`[[${h.default.snowman} group ${t}]]`)).join("\n\n").value(),n={};return i.default.each(this.props.json,((t,r)=>{n[`group ${r}`]={type:"group",graded:!0,version:{major:0,minor:0},options:i.default.extend({},t,{icon:r<this.state.visible-1?e:null})}})),o.createElement("div",{className:"perseus-sequence"},o.createElement(d.default,{ref:"renderer",content:t,widgets:n,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext}))}}v.propTypes=(0,s.default)({},u.propTypes,{apiOptions:l.ApiOptions.propTypes,json:a.default.arrayOf(a.default.shape({content:a.default.string,images:a.default.objectOf(a.default.any),widgets:a.default.objectOf(a.default.any)})),trackInteraction:a.default.func.isRequired,linterContext:f.linterContextProps}),v.defaultProps={json:[{content:"",widgets:{},images:{}}],linterContext:f.linterContextDefault};var y={name:"sequence",displayName:"Graded Sequence",widget:v,traverseChildWidgets:function(e,t){let n=e.json;i.default.isArray(n)||(n=[n]);const r=i.default.map(n,(e=>t(e)));return i.default.extend({},e,{json:r})},tracking:"all",hidden:!0,isLintable:!0};t.default=y},BGgb:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("wINb"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const l="pending",u="loading",c="loaded",p="failed";class d extends o.Component{constructor(e){super(e),this.createLoader=()=>{this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src},this.destroyLoader=()=>{this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)},this.handleLoad=e=>{this.destroyLoader(),this.setState({status:c}),this.props.onLoad&&this.props.onLoad(e)},this.handleError=e=>{this.destroyLoader(),this.setState({status:p}),this.props.onError&&this.props.onError(e)},this.renderImg=()=>{const{src:e,imgProps:t}=this.props;let n=null,r=null;return null!=t.onClick&&(n=e=>{13!==e.keyCode&&32!==e.keyCode||t.onClick&&t.onClick(e)},r=e=>{32===e.keyCode&&e.preventDefault()}),o.createElement("img",(0,s.default)({src:(0,a.default)(e),onKeyUp:n,onKeyDown:r},t))},this.state={status:e.src?u:l}}componentDidMount(){this.state.status===u&&this.createLoader()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({status:e.src?u:l})}componentDidUpdate(e,t){this.state.status!==u||this.img||this.createLoader(),t.status!==this.state.status&&this.props.onUpdate(this.state.status)}componentWillUnmount(){this.destroyLoader()}render(){switch(this.state.status){case c:return this.renderImg();case p:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}}var h=d;t.default=h},Bkj0:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=h(n("q1tI")),o=n("mR6N"),a=r(n("Pwnf")),i=n("Vxy9"),l=n("6OHE"),u=r(n("GLX1")),c=n("bGTE"),p=h(n("HEOz"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends s.PureComponent{constructor(...e){super(...e),this._handleTooltipButtonRef=e=>{e&&this.props.usingKeyboardFocus&&e.focus()}}_getAriaLabel(){const{crossedOut:e,pos:t}=this.props,n=(0,c.getChoiceLetter)(t);return e?p._("Bring back Choice %(letter)s",{letter:n}):p._("Cross out Choice %(letter)s",{letter:n})}render(){const{crossedOut:e,pos:t,primaryProductColor:n,theme:r}=this.props,l="day"===r?n:a.default.white;return s.createElement("button",{type:"button","aria-label":this._getAriaLabel(),className:(0,o.css)([g.tooltipButton]),onClick:()=>this.props.onClick(),onMouseDown:e=>e.preventDefault(),onFocus:()=>this.props.onFocus(),onBlur:()=>this.props.onBlur(),disabled:this.props.disabled,tabIndex:this.props.tabFocusable?0:-1,ref:this._handleTooltipButtonRef},s.createElement(u.default,{pos:t,product:"library",crossedOut:!this.props.crossedOut,primaryProductColor:l,pressed:!0,checked:!1,focused:!1,correct:!1,showCorrectness:!1,reviewMode:!1,previouslyAnswered:!1,transparentBackground:!0}),s.createElement(i.LabelLarge,{style:{color:l}},e?p._("Bring back"):p._("Cross out")))}}t.default=f,f.defaultProps={primaryProductColor:l.colors.kaGreen};const g=o.StyleSheet.create({tooltipButton:{background:"none",border:"none",font:"inherit",padding:0,cursor:"pointer",textDecoration:"none",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"}})},Boyy:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("2OMh")),a=r(n("bRUr")),i=r(n("Y1i7"));const l=r(n("s6+k")).default.filter((e=>e.severity<a.default.Severity.BULK_WARNING));var u={runLinter:function(e,t,n,r=l){const o=[],a=new i.default(e);a.traverse(((e,t,n)=>{if(i.default.isTextNode(e)){let n=t.nextSibling();for(;i.default.isTextNode(n);)e.content+=n.content,t.removeNextSibling(),n=t.nextSibling()}}));let u=[],c=!1;return a.traverse(((e,a,i)=>{const l=[],p=r.filter((e=>e.applies(t))),d=[].concat(t.stack);d.push(e.type);const h=(0,s.default)({},t,{stack:d.join(".")});if(p.forEach((t=>{const r=t.check(e,a,i,h);r&&((r.start||r.end)&&(r.target=i.substring(r.start,r.end)),o.push(r),n&&l.push(r))})),n){var f;if("table"===e.type?(u.length&&l.push.apply(l,u),c=!1,u=[]):c||(c=a.ancestors().some((e=>"table"===e.type))),c&&l.length)(f=u).push.apply(f,l);if(l.length)if(l.sort(((e,t)=>e.severity-t.severity)),"text"!==e.type||l.length>1)a.replace({type:"lint",content:e,message:l.map((e=>e.message)).join("\n\n"),ruleName:l[0].rule,blockHighlight:h.blockHighlight,insideTable:c,severity:l[0].severity});else{const t=e.content,n=l[0],r=n.start||0,s=n.end||t.length,o=t.substring(0,r),i=t.substring(r,s),u=t.substring(s),p=[];o&&p.push({type:"text",content:o}),p.push({type:"lint",content:{type:"text",content:i},message:n.message,ruleName:n.rule,insideTable:c,severity:n.severity}),u&&p.push({type:"text",content:u}),a.replace.apply(a,p)}}})),o},parse:o.default.parse,pushContextStack:function(e,t){const n=e.stack||[];return(0,s.default)({},e,{stack:n.concat(t)})},rules:l};t.default=u},CtR3:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("Hpzc")),o=r(n("bxxM")),a=r(n("iF1x")),i=[].concat(s.default,o.default,a.default);t.default=i},D5Tb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),s=a(n("4PhQ"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}class i extends r.Component{constructor(e){super(e),this.state={error:""}}componentDidCatch(e,t){this.setState({error:e.toString()}),s.default.error(e,s.Errors.Internal,{sentryData:{contexts:{extras:{info:t}}}})}render(){return this.state.error?r.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16"},r.createElement("path",{d:"m8 16c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm0-3c0.55 0 1-0.45 1-1s-0.45-1-1-1-1 0.45-1 1 0.45 1 1 1zm0-9c-0.55 0-1 0.45-1 1v4c0 0.55.45 1 1 1s1-0.45 1-1v-4c0-0.55-0.45-1-1-1z",fill:"#d92916",fillRule:"evenodd"})):this.props.children}}var l=i;t.default=l},DUX9:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("96rG"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const c={};function p(e){if(!c[e]){const t=(0,l.default)("<span>").text(e).appendTo("body");c[e]=t.width()+5,t.remove()}return c[e]}class d extends s.Component{constructor(...e){super(...e),this.state={items:this.props.options.concat("")},this.onChange=(e,t)=>{let n=i.default.clone(this.state.items);n[e]=t.target.value,e===n.length-1&&(n=n.concat("")),this.setState({items:n}),this.props.onChange(i.default.compact(n))},this.onKeyDown=(e,t)=>{const n=t.nativeEvent.keyCode;if(8===n&&""===this.state.items[e]){t.preventDefault();const n=i.default.clone(this.state.items),r=0===e?0:e-1;e!==n.length-1||0!==e&&""===n[r]?(n.splice(e,1),this.setState({items:n},(function(){a.default.findDOMNode(this.refs["input_"+r]).focus()}))):a.default.findDOMNode(this.refs["input_"+r]).focus()}else if(8===n&&1===this.state.items[e].length&&e===this.state.items.length-2){t.preventDefault();const n=i.default.clone(this.state.items);n.splice(e,1),this.setState({items:n}),this.props.onChange(i.default.compact(n))}else if(13===n){t.preventDefault();const n=i.default.clone(this.state.items),r=e+1;e===n.length-2?a.default.findDOMNode(this.refs["input_"+r]).focus():(n.splice(r,0,""),this.setState({items:n},(function(){a.default.findDOMNode(this.refs["input_"+r]).focus()})))}}}UNSAFE_componentWillReceiveProps(e){this.setState({items:e.options.concat("")})}render(){const e=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),t=i.default.map(this.state.items,(function(e,t){return s.createElement("li",{key:t},s.createElement("input",{ref:"input_"+t,type:"text",value:e,onChange:this.onChange.bind(this,t),onKeyDown:this.onKeyDown.bind(this,t),style:{width:p(e)}}))}),this);return s.createElement("ul",{className:e},t)}}d.propTypes={options:o.default.array,layout:o.default.string,onChange:o.default.func.isRequired},d.defaultProps={options:[],layout:"horizontal"};var h=d;t.default=h},DUcE:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=r(n("TSYQ")),a=x(n("q1tI")),i=r(n("17x9")),l=r(n("i8i4")),u=r(n("5pch")),c=n("8SBg"),p=x(n("4PhQ")),d=n("j8wP"),h=r(n("MG0i")),f=x(n("UcaO")),g=r(n("TBZ3")),m=r(n("uBl0")),v=r(n("N2wX")),y=r(n("Eo51")),b=x(n("HEOz"));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{captureScratchpadTouchStart:E}=m.default,C=i.default.arrayOf(i.default.shape({checked:i.default.bool,crossedOut:i.default.bool,content:i.default.node,rationale:i.default.node,hasRationale:i.default.bool,showRationale:i.default.bool,showCorrectness:i.default.bool,correct:i.default.bool,originalIndex:i.default.number,isNoneOfTheAbove:i.default.bool})),k=f.radioBorderColor;class O extends a.Component{constructor(...e){super(...e),this.state={radioGroupName:u.default.uniqueId("perseus_radio_")},this.updateChoice=(e,t)=>{let n;n=t.checked&&!this.props.multipleSelect?this.props.choices.map((e=>!1)):this.props.choices.map((e=>e.checked));const r=this.props.choices.map((e=>e.crossedOut));n[e]=t.checked,r[e]=t.crossedOut,this.props.onChange({checked:n,crossedOut:r})},this.focus=e=>(l.default.findDOMNode(this.refs["radio"+(e||0)]).focus(),!0),this.getInstructionsText=()=>this.props.multipleSelect?this.props.countChoices?b._("Choose %(numCorrect)s answers:",{numCorrect:this.props.numCorrect}):b._("Choose all answers that apply:"):b._("Choose 1 answer:"),this.deselectEnabled=()=>this.props.apiOptions.isMobile||this.props.deselectEnabled,this.goToChoice=e=>{const t=this.props.choices.length;e<0&&(e+=t),e>=t&&(e-=t);const n=this.refs[`radio${e}`];if(!n)return void p.default.error(`found no choice at index ${e}, even after wrapping it to be within bounds`,p.Errors.Internal);n.focusInput();const r=this.props.choices.map((e=>e.crossedOut)),s=this.props.choices.map((e=>!1));this.props.choices[e].crossedOut||(s[e]=!0),this.props.onChange({checked:s,crossedOut:r})}}componentDidUpdate(e){const{apiOptions:t,choices:n,isLastUsedWidget:r,reviewModeRubric:s}=this.props;if(t.canScrollPage&&r&&s&&!e.reviewModeRubric){const e=n.findIndex((e=>e.checked));if(e>=0){const t=l.default.findDOMNode(this.refs["radio"+e]);(0,c.scrollElementIntoView)(t)}}}render(){const e=this.props.multipleSelect?"checkbox":"radio",t=this.props.reviewModeRubric,n=!!t,r=O.styles,i=this.props.apiOptions.satStyling,l=this.props.apiOptions.isMobile,c=this.props.choices,p=c[0].highlighted,f=c[c.length-1].highlighted,g=(0,o.default)("perseus-widget-radio",!this.props.editMode&&"perseus-rendered-radio",(0,s.css)(r.radio,!i&&r.responsiveRadioContainer,!i&&p&&l&&r.radioContainerFirstHighlighted,!i&&f&&l&&r.radioContainerLastHighlighted,i&&r.satRadio)),m=(0,o.default)("instructions",(0,s.css)(r.instructions,l&&r.instructionsMobile)),b=this.getInstructionsText(),w=!i,x=(0,s.css)(r.responsiveFieldset),C=a.createElement("fieldset",{className:`perseus-widget-radio-fieldset ${x}`},a.createElement("legend",{className:"perseus-sr-only"},b),w&&a.createElement("div",{className:m},b),a.createElement("ul",{className:g},this.props.choices.map((function(l,c){let p=v.default;const f={ref:`radio${c}`,apiOptions:this.props.apiOptions,checked:l.checked,crossedOut:l.crossedOut,previouslyAnswered:l.previouslyAnswered,reviewMode:n,correct:l.correct,rationale:l.rationale,content:l.content,disabled:this.props.apiOptions.readOnly||l.disabled,editMode:this.props.editMode,groupName:this.state.radioGroupName,isLastChoice:c===this.props.choices.length-1,showCorrectness:n||!!l.showCorrectness,showRationale:l.hasRationale&&(n||l.showRationale),type:e,pos:c,deselectEnabled:this.deselectEnabled(),onChange:e=>{this.updateChoice(c,e)},goToPrevChoice:()=>this.goToChoice(c-1),goToNextChoice:()=>this.goToChoice(c+1)};l.isNoneOfTheAbove&&(p=y.default,u.default.extend(f,{showContent:l.revealNoneOfTheAbove}));const g=this.props.choices[c+1],m=!!g&&g.highlighted,b=e=>{const o=i&&n&&e,a=i&&n&&g&&g.checked;return(0,s.css)(h.default.aboveScratchpad,r.item,!i&&r.responsiveItem,!i&&e&&r.selectedItem,!i&&e&&l.highlighted&&r.aboveBackdrop,!i&&e&&l.highlighted&&this.props.apiOptions.isMobile&&r.aboveBackdropMobile,!i&&m&&this.props.apiOptions.isMobile&&r.nextHighlighted,i&&r.satRadioOption,o&&!l.correct&&r.satRadioOptionIncorrect,o&&l.correct&&r.satRadioOptionCorrect,a&&!g.correct&&r.satRadioOptionNextIncorrect,a&&g.correct&&r.satRadioOptionNextCorrect,i&&t&&r.satReviewRadioOption)};b(!0);const w=(0,o.default)(b(l.checked),d.ClassNames.RADIO.OPTION,l.checked&&d.ClassNames.RADIO.SELECTED,n&&t.choices[c].correct&&d.ClassNames.CORRECT,n&&!t.choices[c].correct&&d.ClassNames.INCORRECT);let x=null,C=null;return this.props.editMode&&(C=e=>{let t=e.target;for(;t&&t!==x;){if(t.getAttribute("data-is-radio-icon"))return void this.updateChoice(c,{checked:!l.checked});t=t.parentNode}}),a.createElement("li",{key:c,ref:e=>x=e,className:w,onClick:C,onTouchStart:this.props.labelWrap?E:null},a.createElement(p,f))}),this)));return a.createElement("div",{className:(0,s.css)(!i&&r.responsiveContainer)},C)}}O.propTypes={apiOptions:i.default.shape({readOnly:i.default.bool,satStyling:i.default.bool,isMobile:i.default.bool,styling:i.default.shape({radioStyleVersion:i.default.oneOf(["intermediate","final"])}),canScrollPage:i.default.bool}),choices:C,deselectEnabled:i.default.bool,editMode:i.default.bool,labelWrap:i.default.bool,countChoices:i.default.bool,numCorrect:i.default.number,multipleSelect:i.default.bool,reviewModeRubric:i.default.shape({choices:C}),onChange:i.default.func,isLastUsedWidget:i.default.bool},O.styles=s.StyleSheet.create({instructions:{display:"block",color:f.gray17,fontSize:14,lineHeight:1.25,fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[g.default.smOrSmaller]:{fontSize:16},[g.default.xl]:{fontSize:20}},radio:{width:"100%"},responsiveRadioContainer:{borderBottom:`1px solid ${k}`,borderTop:`1px solid ${k}`,width:"auto",[g.default.smOrSmaller]:{marginLeft:f.negativePhoneMargin,marginRight:f.negativePhoneMargin}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},satRadio:{background:"none",marginLeft:0,userSelect:"none"},satRadioOption:{margin:0,padding:0,borderBottom:"1px solid #ccc",":first-child":{borderTop:"1px solid #ccc"}},satRadioOptionCorrect:{borderBottomColor:f.satCorrectBorderColor,":first-child":{borderTopColor:f.satCorrectBorderColor}},satRadioOptionIncorrect:{borderBottomColor:f.satIncorrectBorderColor,":first-child":{borderTopColor:f.satIncorrectBorderColor}},satRadioOptionNextCorrect:{borderBottomColor:f.satCorrectBorderColor},satRadioOptionNextIncorrect:{borderBottomColor:f.satIncorrectBorderColor},satReviewRadioOption:{pointerEvents:"none"},item:{marginLeft:20},inlineItem:{display:"inline-block",paddingLeft:20,verticalAlign:"middle"},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:`1px solid ${k}`}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:f.negativePhoneMargin,marginRight:f.negativePhoneMargin,paddingLeft:f.phoneMargin},responsiveFieldset:{paddingRight:f.phoneMargin}}),O.defaultProps={editMode:!1};var M=O;t.default=M},DuZ2:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("i8i4"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class l extends o.Component{constructor(...e){super(...e),this.state={visible:!1,marginBottomPx:0,zoomed:!0},this.reset=()=>{this._isMounted&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},(()=>{this.measureAndScaleChildToFit(!1)})))},this.stopPropagationIfZoomed=e=>{this.state.zoomed||e.stopPropagation()},this.handleClickIfZoomed=e=>{this.state.zoomed||(e.stopPropagation(),this.handleClick())},this.handleClick=()=>{this.setState({zoomed:!this.state.zoomed})}}componentDidMount(){this._isMounted=!0,this.maybeInitializeMeasuring()}componentDidUpdate(){this.maybeInitializeMeasuring()}componentWillUnmount(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect(),this._isMounted=!1}maybeInitializeMeasuring(){const e=this.props.readyToMeasure&&!this._measuringInitialized;this._isMounted&&e&&(this._measuringInitialized=!0,this._node=a.default.findDOMNode(this),setTimeout((()=>this.measureAndScaleChildToFit(!1)),0),window.MutationObserver&&(this._observer=new MutationObserver((e=>{if(this._isMounted)for(const t of e)if(t.target!==this._node){this.measureAndScaleChildToFit(this.state.zoomed);break}})),this._observer.observe(this._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",this.reset))}measureAndScaleChildToFit(e){if(!this._isMounted)return;const t={width:this._node.offsetWidth,height:this._node.offsetHeight},n=this.props.computeChildBounds(this._node,t),r=n.width+1,s=n.height+1;if(r>t.width){const n=t.width/r;this.setState({scale:n,zoomed:e,compactHeight:Math.ceil(n*s),expandedHeight:s}),setTimeout((()=>{this._isMounted&&this.setState({visible:!0})}))}else this.setState({visible:!0})}render(){const{visible:e,scale:t,compactHeight:n,expandedHeight:r,zoomed:a}=this.state,{animateHeight:i}=this.props,l=i?"opacity transform height":"opacity transform",u=e?{transitionProperty:l,WebkitTransitionProperty:l,msTransitionProperty:l,transitionDuration:"0.3s",WebkitTransitionDuration:"0.3s",msTransitionDuration:"0.3s",transitionTimingFunction:"ease-out",WebkitTransitionTimingfunction:"ease-out",msTransitionTmingFunction:"ease-out"}:{},c=e?"":" translate(0, 8px)",p=(null!=t?t:1).toString(),d=a?`scale(1, 1) ${c}`:`scale(${p}, ${p}) ${c}`,h=(0,s.default)({display:"block",width:"100%",height:a?r:n,transform:d,WebkitTransform:d,msTransform:d,transformOrigin:"0 0",WebkitTransformOrigin:"0 0",msTransformOrigin:"0 0",opacity:e?1:0,WebkitTapHighlightColor:"transparent"},u);return o.createElement("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:h},this.props.children)}}l.defaultProps={animateHeight:!1,readyToMeasure:!0,computeChildBounds:e=>{const t=e.firstElementChild;return{width:t.offsetWidth,height:t.offsetHeight}}};var u=l;t.default=u},EcLb:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"image-spaces-around-urls",severity:s.default.Severity.ERROR,selector:"image",lint:function(e,t,n,r,s){const o=n[0].target;if(s&&s.content){const e=s.content.indexOf(o);if(-1===e)return;if("("!==s.content[e-1]||")"!==s.content[e+o.length])return"Whitespace before or after image url:\nFor images, don't include any space or newlines after '(' or before ')'.\nWhitespace in image URLs causes translation difficulties."}}});t.default=o},Eo51:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("TSYQ")),a=d(n("q1tI")),i=r(n("17x9")),l=d(n("HEOz")),u=r(n("Atlv")),c=r(n("N2wX"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class h extends a.Component{constructor(...e){super(...e),this.focusInput=()=>{this._choice.focusInput()}}render(){const e=(0,s.default)({},this.props,{className:(0,o.default)(this.props.className,"none-of-above"),content:this.props.showContent?this.props.content:a.createElement(u.default,{key:"noneOfTheAboveRenderer",content:l._("None of the above")}),ref:e=>this._choice=e});return a.createElement(c.default,e)}}h.propTypes={className:i.default.string,content:i.default.node,showContent:i.default.bool},h.defaultProps={showContent:!0};var f=h;t.default=f},EsmD:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=r(n("5pch")),i=g(n("+jAD")),l=r(n("LeSj")),u=r(n("qoj5")),c=r(n("KOBE")),p=r(n("GbkG")),d=n("INEF"),h=n("NUXr");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const m=p.default.widget;class v extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.handleAvailableTypesChange=e=>{let t=this.props.correct;if(!a.default.contains(e,this.props.correct.type)){const n=this.props.graph,r=(0,d.chooseType)(e);t=(0,d.defaultPlotProps)(r,n)}this.props.onChange({availableTypes:e,correct:t})},this.serialize=()=>a.default.chain(this.props).pick("correct","availableTypes").extend({graph:a.default.omit(this.props.graph,"box")}).value()}render(){const e=h.containerSizeClass.SMALL;let t,n;if(!0===this.props.graph.valid){const r={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:(e,t)=>{var n;let r=this.props.correct;r=r.type===(null==(n=e.plot)?void 0:n.type)?a.default.extend({},r,e.plot):e.plot,this.props.onChange({correct:r},t)},trackInteraction:function(){}};n=o.createElement(m,(0,s.default)({},r,{apiOptions:this.props.apiOptions,containerSizeClass:e})),t=(0,d.getEquationString)(r)}else n=o.createElement("div",{className:"perseus-error"},this.props.graph.valid);return o.createElement("div",null,o.createElement("div",null,"Correct answer"," ",o.createElement(u.default,null,o.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",t),o.createElement(l.default,{editableSettings:["graph","snap","image"],box:(0,h.getInteractiveBoxFromSizeClass)(e),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Available functions: "),o.createElement(c.default,{allowEmpty:!1,values:this.props.availableTypes,buttons:a.default.map(d.allTypes,d.typeToButton),onChange:this.handleAvailableTypesChange})),n)}}v.propTypes=(0,s.default)({},i.propTypes),v.widgetName="grapher",v.defaultProps={correct:d.DEFAULT_GRAPHER_PROPS.plot,graph:d.DEFAULT_GRAPHER_PROPS.graph,availableTypes:d.DEFAULT_GRAPHER_PROPS.availableTypes};var y=v;t.default=y},FGkX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function r(e){let t=0;for(let n=e.length-1;n>=0;n--){if("0"!=e.charAt(n))return t;t++}return t}function s(e){let t=!0,n=!1,r=!1,s="",o="",a="",i=0,l=0,u=!0;for(let c=0;c<e.length;c++){const p=e.charAt(c);if(p>="1"&&p<="9")a+=s+p,s="",r=!0,n||(l++,i++),t=!1;else if("0"==p)n?r?(a+=s+p,s=""):(o+=p,i--):(l++,r?(o+=p,i++,s+=p):o+=p),t=!1;else if(n||"."!=p)if("e"==p||"E"==p&&c+1<e.length){const t=parseInt(e.substring(c+1,e.length));i+=t,l+=t,c=e.length}else!t||"+"!=p&&"-"!=p||"-"==p&&(u=!u);else a+=s,s="",n=!0,t=!1}return""==a||u}function o(e){let t=!0,n=!1,r=!1,s="",o="",a="",i=0,l=0,u=!0;for(let c=0;c<e.length;c++){const p=e.charAt(c);if(p>="1"&&p<="9")a+=s+p,s="",r=!0,n||(l++,i++),t=!1;else if("0"==p)n?r?(a+=s+p,s=""):(o+=p,i--):(l++,r?(o+=p,i++,s+=p):o+=p),t=!1;else if(n||"."!=p)if("e"==p||"E"==p&&c+1<e.length){const t=parseInt(e.substring(c+1,e.length));i+=t,l+=t,c=e.length}else!t||"+"!=p&&"-"!=p||"-"==p&&(u=!u);else a+=s,s="",n=!0,t=!1}return""==a?o:a}function a(e){let t=!0,n=!1,r=!1,s="",o="",a="",i=0,l=0,u=!0;for(let c=0;c<e.length;c++){const p=e.charAt(c);if(p>="1"&&p<="9")a+=s+p,s="",r=!0,n||(l++,i++),t=!1;else if("0"==p)n?r?(a+=s+p,s=""):(o+=p,i--):(l++,r?(o+=p,i++,s+=p):o+=p),t=!1;else if(n||"."!=p)if("e"==p||"E"==p&&c+1<e.length){const t=parseInt(e.substring(c+1,e.length));i+=t,l+=t,c=e.length}else!t||"+"!=p&&"-"!=p||"-"==p&&(u=!u);else a+=s,s="",n=!0,t=!1}return""==a?l:i}function i(e,t){const n=e.length-t-1;if(n<0)return"";if(n>=e.length-1)return e;const r=e.charAt(n+1),s=e.charAt(n);let o=!1;if(r>"5")o=!0;else if("5"==r){for(let t=n+2;t<e.length;t++)"0"!=e.charAt(t)&&(o=!0);s%2==1&&(o=!0)}let a="";for(let t=n;t>=0;t--){const n=e.charAt(t);if(o){let e;if("9"==n)e="0";else{switch(n){case"0":e="1";break;case"1":e="2";break;case"2":e="3";break;case"3":e="4";break;case"4":e="5";break;case"5":e="6";break;case"6":e="7";break;case"7":e="8";break;case"8":e="9"}o=!1}a=e+a}else a=n+a}return o&&(a="1"+a),a}var l={SignificantFigures:class{constructor(e){this.order=a(e),this.mantissa=o(e),this.positive=s(e),this.sigFigs=this.mantissa.length,this.sigDecs=this.order-this.mantissa.length}},displaySigFigs:function(e,t,n,l){const u=""+e;let c,p,d,h=a(u),f=o(u),g=s(u),m=!1;if(0==e||""==f||"0"==f){f="";for(let e=0;e<t;e++)f+="0";h=t+n,n<0&&-n>=t&&(m=!0)}else{if(p=h-f.length-n,d=t-f.length,c=Math.min(d,p),c<0){let e=i(f,-c);e.length>f.length+c&&(h++,p>d&&(e=i(e,1))),f=e}else if(c>0)for(let e=0;e<c;e++)f+="0";""!=f&&"0"!=f||(f="0",g=!0,h=1+n,0!=h&&(m=!0))}let v="";if(g||(v+="-"),l||f.length>20||h>4||h<-2||h-f.length>0&&r(f)>0||m)v+=f.charAt(0),f.length>1&&(v+="."+f.substring(1,f.length)),h-1!=0&&(v+=" x 10^"+(h-1));else{let e="",t="",n=!0;if(h>0)if(f.length>h)e=f.substring(0,h),t=f.substring(h,f.length);else{e=f,n=0!=r(f);for(let t=0;t<h-f.length;t++)e+="0"}else{for(let e=0;e<-h;e++)t+="0";t+=f}v+=(""==e?"0":e)+(n?".":"")+t}return v}};t.default=l},FGwj:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=M(n("q1tI")),a=r(n("fhzG")),i=r(n("i8i4")),l=r(n("5pch")),u=r(n("96rG")),c=n("eAf/"),p=n("4PhQ"),d=r(n("jH0K")),h=r(n("APgo")),f=r(n("M++g")),g=r(n("7xiW")),m=n("QESs"),v=r(n("eMwK")),y=n("j8wP"),b=n("/4Qb"),w=r(n("uBl0")),x=r(n("XwLL")),E=r(n("yfnS")),C=r(n("p8fL")),k=M(n("HEOz"));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{deepEq:P,getGridStep:_,captureScratchpadTouchStart:S}=w.default,{assert:T}=C.default,I={url:null};const N={apiOptions:y.ApiOptions.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};function R(e){return e.constraints.fixed?E.default.DYNAMIC:E.default.INTERACTIVE}function A(e){return String(x.default.roundTo(9,e))}function j(e){const{TeX:t}=(0,m.getDependencies)();return[o.createElement(t,{key:"("},"("),A(e[0]),o.createElement(t,{key:","},", {}"),A(e[1]),o.createElement(t,{key:")"},")")]}function D(e){const{TeX:t}=(0,m.getDependencies)();return[o.createElement(t,{key:"<"},k.doNotTranslate("\\langle")),A(e[0]),o.createElement(t,{key:","},", {}"),A(e[1]),o.createElement(t,{key:">"},k.doNotTranslate("\\rangle"))]}function W(e,t){return e=l.default.clone(e).sort(c.point.compare),t=l.default.clone(t).sort(c.point.compare),l.default.all(l.default.map(e,(function(e,n){const r=t[n];return c.point.equal(e,r)})))}const L=e=>e.customKeypad?v.default:e.staticRender?g.default:f.default,F={apply:function(e){return q[e.type].isValid(e)?q[e.type].apply(e):l.default.identity},append:function(e,t){const n=F._appendAndCollapseLastTwo(e,t);return F._collapseFinalNoOps(n)},_collapseFinalNoOps:function(e){return e.length&&F.isNoOp(l.default.last(e))?l.default.initial(e):e},_appendAndCollapseLastTwo:function(e,t){if(!e.length)return[t];const n=F.collapse(l.default.last(e),t);return l.default.initial(e).concat(n)},isNoOp:function(e){return q[e.type].isNoOp(e)},collapse:function(e,t){return e.type!==t.type?[e,t]:F.isEmpty(e)&&F.isEmpty(t)?[]:F.isValid(e)&&F.isValid(t)?F._collapseValidMonotypedTransforms(e,t):[e,t]},isValid:function(e){return q[e.type].isValid(e)},isEmpty:function(e){return q[e.type].isEmpty(e)},_collapseValidMonotypedTransforms:function(e,t){let n=q[e.type].collapse(e,t);return n?(l.default.isArray(n)||(n=[n]),l.default.each(n,(function(t){t.type=e.type})),n):[e,t]},toTeX:function(e){return q[e.type].toTeX(e)},ListItem:(0,a.default)({displayName:"ListItem",render:function(){if("dynamic"===this.props.mode)return o.createElement("div",null,F.toTeX(this.props.transform));if("interactive"===this.props.mode){const e=q[this.props.transform.type].Input;return o.createElement(e,(0,s.default)({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}throw new p.KAError("Invalid mode: "+this.props.mode,p.Errors.Internal)},value:function(){return"interactive"===this.props.mode?l.default.extend({type:this.props.transform.type},this.refs.transform.value()):this.props.transform},handleChange:l.default.debounce((function(e){this.props.onChange(this.value(),e)}),300),_getComponentAtPath:function(e){const t=this.refs.transform,n=l.default.head(e);return t.refs[n]},focus:function(){const e=this.refs.transform,t=l.default.head(e.getInputPaths());t&&this.focusInputPath(t)},focusInputPath:function(e){this._getComponentAtPath(e).focus()},blurInputPath:function(e){this._getComponentAtPath(e).blur()},getDOMNodeForPath:function(e){return i.default.findDOMNode(this._getComponentAtPath(e))},getGrammarTypeForPath:function(e){return"number"},setInputValue:function(e,t,n){t.length&&(t=parseFloat(t),isNaN(t))||this.refs.transform.setInputValue(e,t,n)},getInputPaths:function(){return"dynamic"===this.props.mode?[]:this.refs.transform.getInputPaths()}})},q={translation:{verbName:k._("Translate"),nounName:k._("Translation"),lowerNounName:k._("translation"),apply:function(e){return function(t){return c.vector.add(t,e.vector)}},isValid:function(e){return l.default.isFinite(e.vector[0])&&l.default.isFinite(e.vector[1])},isEmpty:function(e){return null===e.vector[0]&&null===e.vector[1]},isNoOp:function(e){return c.vector.equal(e.vector,[0,0])},collapse:function(e,t){return{vector:c.vector.add(e.vector,t.vector)}},toTeX:function(e){return k.$_("Translation by %(vector)s",{vector:D(e.vector)})},Input:class extends o.Component{constructor(...e){super(...e),this.state={vector:this.props.vector||[null,null]},this.value=()=>({vector:[this.refs.x.getValue(),this.refs.y.getValue()]}),this.setInputValue=(e,t,n)=>{const r=l.default.first(e),s=l.default.clone(this.state.vector);"x"===r?s[0]=t:"y"===r&&(s[1]=t),this.setState({vector:s},(()=>{this.props.onChange(n)}))},this.getInputPaths=()=>[["x"],["y"]]}componentDidUpdate(e){P(this.props,e)||this.setState({vector:this.props.vector})}render(){const e=L(this.props.apiOptions),{TeX:t}=(0,m.getDependencies)(),n=[o.createElement(t,{key:"<"},k.doNotTranslate("\\langle")),o.createElement(e,{key:"vec_x",ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:!0,onChange:e=>{const t=this.state.vector[1];this.setState({vector:[e,t]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"x"),onBlur:l.default.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:","},", {}"),o.createElement(e,{key:"vec_y",ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:!0,onChange:e=>{const t=this.state.vector[0];this.setState({vector:[t,e]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"y"),onBlur:l.default.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:">"},k.doNotTranslate("\\rangle"))];return o.createElement("div",null,k.$_("Translation by %(vector)s",{vector:n}))}}},rotation:{verbName:k._("Rotate"),nounName:k._("Rotation"),lowerNounName:k._("rotation"),apply:function(e){return function(t){return c.point.rotateDeg(t,e.angleDeg,e.center)}},isValid:function(e){return l.default.isFinite(e.angleDeg)&&l.default.isFinite(e.center[0])&&l.default.isFinite(e.center[1])},isEmpty:function(e){return null===e.angleDeg&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return c.number.equal(e.angleDeg,0)},collapse:function(e,t){return!!c.point.equal(e.center,t.center)&&{center:e.center,angleDeg:e.angleDeg+t.angleDeg}},toTeX:function(e){return k.$_("Rotation by %(degrees)s about %(point)s",{degrees:(t=e.angleDeg,A(t)+"°"),point:j(e.center)});var t},Input:class extends o.Component{constructor(...e){super(...e),this.state={center:this.props.center||[null,null],angleDeg:this.props.angleDeg||null},this.value=()=>({angleDeg:this.refs.angleDeg.getValue(),center:[this.refs.centerX.getValue(),this.refs.centerY.getValue()]}),this.setInputValue=(e,t,n)=>{const r=l.default.first(e);let s=l.default.clone(this.state.angleDeg);const o=l.default.clone(this.state.center);"angleDeg"===r?s=t:"centerX"===r?o[0]=t:"centerY"===r&&(o[1]=t),this.setState({angleDeg:s,center:o},(()=>{this.props.onChange(n)}))},this.getInputPaths=()=>[["centerX"],["centerY"],["angleDeg"]]}componentDidUpdate(e){P(this.props,e)||this.setState({center:this.props.center,angleDeg:this.props.angleDeg})}render(){const e=L(this.props.apiOptions),{TeX:t}=(0,m.getDependencies)(),n=[o.createElement(t,{key:"("},"("),o.createElement(e,{key:"X",ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{const t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"centerX"),onBlur:l.default.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:","},", {}"),o.createElement(e,{key:"Y",ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{const t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"centerY"),onBlur:l.default.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:")"},")")],r=[o.createElement(e,{key:"deg",ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:!0,onChange:e=>{this.setState({angleDeg:e},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"angleDeg"),onBlur:l.default.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),"°"],s=k.$_("Rotation about %(point)s by %(degrees)s",{point:n,degrees:r});return o.createElement("div",null,s)}}},reflection:{verbName:k._("Reflect"),nounName:k._("Reflection"),lowerNounName:k._("reflection"),apply:function(e){return function(t){return c.point.reflectOverLine(t,e.line)}},isValid:function(e){return l.default.all(l.default.flatten(e.line),l.default.isFinite)&&!c.point.equal(e.line[0],e.line[1])},isEmpty:function(e){return l.default.all(l.default.flatten(e.line),l.default.isNull)},isNoOp:function(e){return!1},collapse:function(e,t){return!!c.line.equal(e.line,t.line)&&[]},toTeX:function(e){const t=e.line[0],n=e.line[1];return k.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:j(t),point2:j(n)})},Input:class extends o.Component{constructor(...e){super(...e),this.state={line:this.props.line||[[null,null],[null,null]]},this.changePoint=(e,t,n,r)=>{const s=l.default.map(this.state.line,l.default.clone);s[e][t]=n,this.setState({line:s},(()=>{this.props.onChange(r)}))},this.value=()=>({line:[[this.refs.x1.getValue(),this.refs.y1.getValue()],[this.refs.x2.getValue(),this.refs.y2.getValue()]]}),this.setInputValue=(e,t,n)=>{const r=l.default.first(e);let s,o;"x"===r[0]?s=0:"y"===r[0]&&(s=1),"1"===r[1]?o=0:"2"===r[1]&&(o=1),this.changePoint(o,s,t,n)},this.getInputPaths=()=>[["x1"],["y1"],["x2"],["y2"]]}componentDidUpdate(e){P(this.props,e)||this.setState({line:this.props.line})}render(){const e=L(this.props.apiOptions),{TeX:t}=(0,m.getDependencies)(),n=[o.createElement(t,{key:"("},"("),o.createElement(e,{key:"x1",ref:"x1",value:this.state.line[0][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,0),onFocus:l.default.partial(this.props.onFocus,"x1"),onBlur:l.default.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:","},", {}"),o.createElement(e,{key:"y1",ref:"y1",value:this.state.line[0][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,0,1),onFocus:l.default.partial(this.props.onFocus,"y1"),onBlur:l.default.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:")"},")")],r=[o.createElement(t,{key:"("},"("),o.createElement(e,{key:"x2",ref:"x2",value:this.state.line[1][0],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,0),onFocus:l.default.partial(this.props.onFocus,"x2"),onBlur:l.default.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:","},", {}"),o.createElement(e,{key:"y2",ref:"y2",value:this.state.line[1][1],useArrowKeys:!0,onChange:this.changePoint.bind(this,1,1),onFocus:l.default.partial(this.props.onFocus,"y2"),onBlur:l.default.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:")"},")")];return o.createElement("div",null,k.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:n,point2:r}))}}},dilation:{verbName:k._("Dilate"),nounName:k._("Dilation"),lowerNounName:k._("dilation"),apply:function(e){return function(t){return function(e,t,n){const r=c.vector.subtract(e,t),s=c.vector.scale(r,n);return c.vector.add(t,s)}(t,e.center,e.scale)}},isValid:function(e){return l.default.isFinite(e.scale)&&l.default.isFinite(e.center[0])&&l.default.isFinite(e.center[1])},isEmpty:function(e){return null===e.scale&&null===e.center[0]&&null===e.center[1]},isNoOp:function(e){return c.number.equal(e.scale,1)},collapse:function(e,t){return!!c.point.equal(e.center,t.center)&&{center:e.center,scale:e.scale*t.scale}},toTeX:function(e){const t=function(e){const t=x.default.toFraction(e,c.number.DEFAULT_TOLERANCE);return 1===t[1]?A(e):A(t[0])+"/"+A(t[1])}(e.scale);return k.$_("Dilation of scale %(scale)s about %(point)s",{scale:t,point:j(e.center)})},Input:class extends o.Component{constructor(...e){super(...e),this.state={center:this.props.center||[null,null],scale:this.props.scale||null},this.value=()=>({scale:this.refs.scale.getValue(),center:[this.refs.x.getValue(),this.refs.y.getValue()]}),this.setInputValue=(e,t,n)=>{const r=l.default.first(e);let s=this.state.scale;const o=l.default.clone(this.state.center);"x"===r?o[0]=t:"y"===r?o[1]=t:"scale"===r&&(s=t),this.setState({scale:s,center:o},(()=>{this.props.onChange(n)}))},this.getInputPaths=()=>[["x"],["y"],["scale"]]}componentDidUpdate(e){P(this.props,e)||this.setState({center:this.props.center,scale:this.props.scale})}render(){const e=L(this.props.apiOptions),{TeX:t}=(0,m.getDependencies)(),n=[o.createElement(t,{key:"("},"("),o.createElement(e,{key:"point_x",ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:!0,onChange:e=>{const t=this.state.center[1];this.setState({center:[e,t]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"x"),onBlur:l.default.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:","},", {}"),o.createElement(e,{key:"point_y",ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:!0,onChange:e=>{const t=this.state.center[0];this.setState({center:[t,e]},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"y"),onBlur:l.default.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),o.createElement(t,{key:")"},")")],r=o.createElement(e,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:!0,onChange:e=>{this.setState({scale:e},(()=>{this.props.onChange()}))},onFocus:l.default.partial(this.props.onFocus,"scale"),onBlur:l.default.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return o.createElement("div",null,k.$_("Dilation about %(point)s by %(scale)s",{point:n,scale:r}))}}}},z={getPointCountForType:function(e){const t=e.split("-");return"polygon"===t[0]?t[1]||3:"line"===t[0]||"lineSegment"===t[0]?2:"angle"===t[0]?3:"circle"===t[0]?2:"point"===t[0]?1:void 0},addMovableShape:function(e,t){if(t.editable&&t.translatable)throw new p.KAError("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously. options: "+JSON.stringify(t),p.Errors.Internal);const n=l.default.map(t.shape.coords,(function(s){let o=!1,a=s;const i=e.addMovablePoint({coord:s,normalStyle:t.normalPointStyle,highlightStyle:t.highlightPointStyle,constraints:{fixed:!t.translatable&&!t.editable},visible:t.showPoints,snapX:t.snap&&t.snap[0]||0,snapY:t.snap&&t.snap[1]||0,bounded:!1,onMove:function(e,s){o||(a=i.coord,o=!0);let u=c.vector.subtract([e,s],i.coord);t.onMove&&(u=t.onMove(u[0],u[1])),t.translatable&&l.default.each(n,(function(e){e!==i&&e.setCoord(c.vector.add(e.coord,u))}));const p=i.coord,d=c.vector.add(i.coord,u);return i.coord=d,r.update(),i.coord=p,d},onMoveEnd:function(){if(t.onMoveEnd&&o){o=!1;const e=c.vector.subtract(i.coord,a);t.onMoveEnd(e[0],e[1])}r.update()}});return i.bounded=!0,i})),r=z.addShape(e,t,n),s=r.remove;return r.remove=function(){s.apply(r),l.default.invoke(n,"remove")},r},addShape:function(e,t,n){n=n||t.shape.coords;const r=z._typesOf(t.shape),s=t.shape.options||z.defaultOptions(r),o=z._mapTypes(r,n,(function(n,r,o){const a=l.default.extend({},t,s[o]);return z._addType(e,n,r,a)})),a=l.default.filter(l.default.pluck(o,"update"),l.default.identity),i=l.default.filter(l.default.pluck(o,"remove"),l.default.identity),u=function(){return l.default.map(o,(function(e){return e.getOptions?e.getOptions():{}}))};return{type:r,points:n,update:function(){l.default.invoke(a,"call")},remove:function(){l.default.invoke(i,"call")},toJSON:function(){const e=l.default.map(n,(function(e){return l.default.isArray(e)?e:e.coord}));return{type:r,coords:e,options:u()}},getOptions:u}},equal:function(e,t){const n=z._typesOf(e),r=z._typesOf(t);if(n.length!==r.length)return!1;const s=z._mapTypes(n,e.coords,z._combine),o=z._mapTypes(r,t.coords,z._combine);return l.default.all(l.default.map(s,(function(e,t){const n=o[t];return e.type===n.type&&z._forType(e.type).equal(e.coords,n.coords)})))},_typesOf:function(e){let t=e.type;return l.default.isArray(t)||(t=[t]),l.default.map(t,(function(e){return"polygon"===e?"polygon-3":e}))},defaultOptions:function(e){return l.default.map(e,(function(e){const t=z._forType(e).defaultOptions;return l.default.extend({},t)}))},_forType:function(e){const t=e.split("-")[0];return z[t]},_mapTypes:function(e,t,n,r){return l.default.map(e,(function(e,s){const o=z.getPointCountForType(e),a=l.default.first(t,o);return t=l.default.rest(t,o),n.call(r,e,a,s)}))},_addType:function(e,t,n,r){const s=l.default.isArray(n[0])?{coordA:n[0],coordZ:n[1]}:{pointA:n[0],pointZ:n[1]};if("polygon"===(t=t.split("-")[0])){const t=e.addMovablePolygon(l.default.extend({},r,{fixed:!r.editable,snapX:r.snap&&r.snap[0]||0,snapY:r.snap&&r.snap[1]||0,points:n,constrainToGraph:!1}));return{update:t.transform.bind(t),remove:t.remove.bind(t)}}if("line"===t||"lineSegment"===t){const n=e.addMovableLineSegment(l.default.extend({},r,s,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===t}));return{update:n.transform.bind(n,!0),remove:n.remove.bind(n)}}if("angle"===t){const t=!!r.editable&&null,s=e.addMovableAngle({angleLabel:"$deg0",fixed:!0,points:n,normalStyle:r.normalStyle,reflex:r.reflex});return l.default.isArray(n[0])||r.editable||(n[0].remove(),n[2].remove()),{update:s.update.bind(s,t),remove:s.remove.bind(s),getOptions:function(){return{reflex:s.isReflex()}}}}if("circle"===t){let t={remove:l.default.identity};const s=function(){const s=n[0].coord||n[0],o=n[1].coord||n[1],a=c.point.distanceToPoint(s,o);t.remove(),t=e.circle(s,a,l.default.extend({stroke:E.default.DYNAMIC,"stroke-width":2},r.normalStyle))};return s(),n[1].remove&&!r.editable&&n[1].remove(),{update:s,remove:function(){t.remove()}}}if("point"===t)return{update:null,remove:null};throw new p.KAError("Invalid shape type "+t,p.Errors.Internal)},_combine:function(e,t){return{type:e,coords:t}},polygon:{equal:W},line:{equal:c.line.equal},lineSegment:{equal:W},angle:{equal:function(e,t){if(!c.point.equal(e[1],t[1]))return!1;const n=[e[1],e[0]],r=[e[1],e[2]],s=[t[1],t[0]],o=[t[1],t[2]],a=c.ray.equal(n,s)&&c.ray.equal(r,o),i=c.ray.equal(n,o)&&c.ray.equal(r,s);return a||i},defaultOptions:{reflex:!1}},circle:{equal:function(e,t){const n=c.point.distanceToPoint(e[0],e[1]),r=c.point.distanceToPoint(t[0],t[1]);return c.point.equal(e[0],t[0])&&c.number.equal(n,r)}},point:{equal:c.point.equal}},B=F.ListItem;class U extends o.Component{constructor(...e){super(...e),this._transformationRefs=()=>l.default.times(this.props.transformations.length,(e=>this.refs["transformation"+e])),this.value=()=>l.default.invoke(this._transformationRefs(),"value"),this.handleChange=(e,t)=>{this.props.onChange(this.value(),t)},this.focusLast=()=>{const e=this._transformationRefs();0!==e.length&&l.default.last(e).focus()}}render(){if("static"===this.props.mode)return o.createElement("span",null);const e=l.default.map(this.props.transformations,(function(e,t){return o.createElement(B,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:l.default.partial(this.props.onFocus,""+t),onBlur:l.default.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})}),this);return o.createElement("div",{className:"perseus-transformation-list"},e)}}class H extends o.Component{render(){const e=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return o.createElement("button",{type:"button",className:e,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:S},this.props.children)}}class V extends o.Component{constructor(...e){super(...e),this.state={selected:null},this.changeSelected=e=>{this.props.removeTool(this.state.selected),e&&e!==this.state.selected?(this.props.addTool(e),this.setState({selected:e})):this.setState({selected:null})}}render(){const e=l.default.map(q,(function(e,t){if(this.props.enabled[t])return o.createElement(H,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)}),this);return o.createElement("div",{className:"transformer-tools-bar"},o.createElement("span",{className:"simple-button-group"},e),o.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:S},o.createElement(h.default,b.iconUndo)," "+k._("Undo")),o.createElement("div",{className:"clear"}))}}class G extends o.Component{constructor(...e){super(...e),this.changeSelected=e=>{e&&this.props.addTool(e)}}render(){const e=l.default.map(q,(function(e,t){if(this.props.enabled[t])return o.createElement(H,{key:t,toggled:!1,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},o.createElement(h.default,b.iconPlus)," ",e.nounName)}),this);return o.createElement("div",{className:"transformer-tools-bar"},e,o.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:S},o.createElement(h.default,b.iconUndo)," "+k._("Undo")),o.createElement("div",{className:"clear"}))}}class Y extends o.Component{constructor(...e){super(...e),this.shouldSetupGraphie=(e,t)=>!P(t.starting,e.starting)||(t.graphMode!==e.graphMode||(t.listMode!==e.listMode||(t.drawSolutionShape!==e.drawSolutionShape||(!(!e.drawSolutionShape||P(t.correct.shape,e.correct.shape))||!P(this.tools,e.tools))))),this.graphie=()=>this.refs.graph.graphie(),this.setupGraphie=e=>{this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords&&z.addShape(e,{fixed:!0,shape:this.props.correct.shape,normalStyle:{stroke:E.default.GRAY,"stroke-dasharray":"","stroke-width":2}}),this.currentTool=null,this.refs.toolsBar.changeSelected(null),this.addTransformerShape(this.props.starting.shape,!1),this.setTransformations(this.props.transformations),this.tools={translation:l.default.clone(this.props.tools.translation),rotation:l.default.clone(this.props.tools.rotation),reflection:l.default.clone(this.props.tools.reflection),dilation:l.default.clone(this.props.tools.dilation)}},this.setTransformations=e=>{this.resetCoords(),this.transformations=l.default.clone(e),l.default.each(this.transformations,this.applyTransform)},this.addTransformerShape=(e,t)=>{const n=this,r=this.graphie();this.shape=z.addMovableShape(r,{shape:e,editable:!1,showPoints:"static"!==this.props.graphMode,translatable:t,onMove:function(e,t){return e=x.default.roundToNearest(r.snap[0],e),t=x.default.roundToNearest(r.snap[1],t),n.addTransform({type:"translation",vector:[e,t]}),[e,t]},normalPointStyle:{fill:t?E.default.INTERACTIVE:E.default.DYNAMIC,stroke:t?E.default.INTERACTIVE:E.default.DYNAMIC},highlightPointStyle:{fill:E.default.INTERACTING,stroke:E.default.INTERACTING}})},this.addTool=e=>{const t=this;if("interactive"===this.props.graphMode)if("translation"===e)this.currentTool=this.addTranslationTool();else if("rotation"===e)this.currentTool=this.addRotationTool();else if("reflection"===e)this.currentTool=this.addReflectionTool();else{if("dilation"!==e)throw new p.KAError("Invalid tool id: "+e,p.Errors.Internal);this.currentTool=this.addDilationTool()}else{let n;if("translation"===e)n={type:"translation",vector:[null,null]};else if("rotation"===e)n={type:"rotation",center:[null,null],angleDeg:null};else if("reflection"===e)n={type:"reflection",line:[[null,null],[null,null]]};else{if("dilation"!==e)throw new p.KAError("Invalid tool id: "+e,p.Errors.Internal);n={type:"dilation",center:[null,null],scale:null}}this.doTransform(n,(function(){t.refs.transformationList.focusLast()}))}},this.removeTool=e=>{this.currentTool&&this.currentTool.remove(),this.currentTool=null},this.addTranslationTool=()=>{var e,t;const n=this;return null==(e=this.shape)||e.remove(),this.addTransformerShape(null==(t=this.shape)?void 0:t.toJSON(),!0),{remove:function(){var e,t;null==(e=n.shape)||e.remove(),n.addTransformerShape(null==(t=n.shape)?void 0:t.toJSON(),!1)}}},this.snapCoord=e=>{const t=this.graphie();return l.default.map(e,(function(e,n){return x.default.roundToNearest(t.snap[n],e)}))},this.normalizeReflectionCoords=e=>{const t=this.snapCoord(c.line.midpoint(e)),n=c.vector.polarDegFromCart(c.vector.subtract(e[0],e[1])),r=[1,x.default.roundToNearest(45,n[1])],s=c.vector.cartFromPolarDeg(r);return l.default.map([-1,1],(function(e){const n=c.vector.add(t,c.vector.scale(s,e*this.scaleToCurrentRange(2)));return this.snapCoord(n)}),this)},this.addReflectionTool=()=>{const e=this.props.tools.reflection;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),r=function(){t.changeTool("reflection",{coords:l.default.pluck(o,"coord")})},s=this.normalizeReflectionCoords(e.coords),o=l.default.map(s,(function(e){return n.addMovablePoint({coord:e,visible:!1})}),this);let a;const i=R(e);n.style({},(function(){a=n.addMovableLineSegment({fixed:e.constraints.fixed,constraints:e.constraints,pointA:o[0],pointZ:o[1],snapX:n.snap[0],snapY:n.snap[1],extendLine:!0,normalStyle:{stroke:i,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:E.default.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:!0,onMoveEnd:r})}));const p=n.addReflectButton({fixed:e.constraints.fixed,line:a,size:this.scaleToCurrentRange(1),onClick:function(){t.doTransform({type:"reflection",line:l.default.pluck(o,"coord")}),d&&(d.setCoord(c.vector.add(p.coord,c.vector.subtract(p.coord,d.coord))),d.update())},normalStyle:{stroke:i,"stroke-width":2,fill:i},highlightStyle:{stroke:E.default.INTERACTING,"stroke-width":3,fill:E.default.INTERACTING},onMoveEnd:r});let d=null;if(!e.constraints.fixed){const e=c.vector.polarDegFromCart(c.vector.subtract(o[1].coord,o[0].coord))[1]+90;d=n.addRotateHandle({center:p,radius:this.scaleToCurrentRange(2),angleDeg:e,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function(e){return x.default.roundToNearest(45,e)},onMoveEnd:r})}return(0,u.default)(a).on("move",(function(){p.update(),(0,u.default)(p).trigger("move")})),d&&(0,u.default)(d).on("move",(function(){const e=t.snapCoord(d.coord),n=c.vector.subtract(e,p.coord),r=p.isFlipped()?1:0;o[r].setCoord(c.vector.add(p.coord,c.vector.rotateDeg(n,90))),o[1-r].setCoord(c.vector.add(p.coord,c.vector.rotateDeg(n,-90))),a.transform(!0),p.update()})),{remove:function(){p.remove(),d&&d.remove(),a.remove(),o[0].remove(),o[1].remove()}}},this.scaleToCurrentRange=e=>function(e,t){const n=t[0][1]-t[0][0],r=t[1][1]-t[1][0];return e*Math.max(n,r)/20}(e,this.refs.graph.props.range),this.addRotationTool=()=>{const e=this.props.tools.rotation;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),r=R(e);return this.rotatePoint=n.addMovablePoint({constraints:e.constraints,coord:e.coord,snapX:n.snap[0],snapY:n.snap[1],normalStyle:{"stroke-dasharray":"",stroke:r,fill:r},highlightStyle:{"stroke-dasharray":"",stroke:E.default.INTERACTING,fill:E.default.INTERACTING}}),this.rotateHandle=n.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(1.5),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function(e,n){const r=t.getRotationTransformFromAngle(t.rotatePoint.coord,e-n);return t.doTransform(r),n+r.angleDeg}}),this.rotatePoint.onMoveEnd=(e,n)=>{t.changeTool("rotation",{coord:[e,n]})},{remove:function(){var e,n;null==(e=t.rotateHandle)||e.remove(),null==(n=t.rotatePoint)||n.remove()}}},this.addDilationTool=()=>{const e=this.props.tools.dilation;if(!e.enabled)return;const t=this,n=this.refs.graph.graphie(),r=R(e);t.dilationCircle=n.addCircleGraph({centerConstraints:e.constraints,center:e.coord,radius:t.scaleToCurrentRange(2),snapX:n.snap[0],snapY:n.snap[1],minRadius:t.scaleToCurrentRange(1),snapRadius:t.scaleToCurrentRange(.5),onResize:function(e,n){t.doTransform({type:"dilation",center:t.dilationCircle.centerPoint.coord,scale:e/n})},circleNormalStyle:{stroke:r,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:E.default.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:E.default.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:r,fill:r,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:r,fill:r,"stroke-width":2,"stroke-dasharray":""}});const s=this.dilationCircle.centerPoint.onMoveEnd;return this.dilationCircle.centerPoint.onMoveEnd=(...e)=>{s&&s(e),t.changeTool("dilation",{coord:t.dilationCircle.centerPoint.coord})},{remove:function(){var e;null==(e=t.dilationCircle)||e.remove()}}},this.getRotationTransformFromAngle=(e,t)=>{(t=(t+360)%360)>180&&(t-=360);return{type:"rotation",center:e,angleDeg:15*Math.round(t/15)}},this.doTransform=(e,t)=>{this.applyTransform(e),this.addTransform(e,t)},this.applyTransform=e=>{if("static"!==this.props.graphMode){const t=F.apply(e);this.applyCoordTransformation(t)}},this.applyCoordTransformation=e=>{var t;l.default.each(this.shape.points,(function(t){const n=e(t.coord);t.setCoord(n)})),null==(t=this.shape)||t.update()},this.resetCoords=()=>{var e;const t=this.props.starting.shape.coords;l.default.each(this.shape.points,(function(e,n){e.setCoord(t[n])})),null==(e=this.shape)||e.update()},this.handleUndoClick=()=>{this.refs.toolsBar.changeSelected(null),this.props.transformations.length&&this.props.onChange({transformations:l.default.initial(this.props.transformations)})},this.setTransformationProps=(e,t)=>{this.props.onChange({transformations:e},t)},this.addTransform=(e,t)=>{this.transformations=F.append(this.transformations,e),this.props.onChange({transformations:l.default.clone(this.transformations)},t)},this.changeTool=(e,t)=>{const n=l.default.clone(this.props.tools);n[e]=l.default.extend({},this.props.tools[e],t),this.tools[e]=l.default.clone(n[e]),this.props.onChange({tools:n}),this.props.trackInteraction()},this.simpleValidate=e=>Y.validate(this.getUserInput(),e),this.getCoords=()=>{const e=this.props.starting.shape.coords,t=this.props.transformations;return l.default.reduce(t,(function(e,t){return l.default.map(e,F.apply(t))}),e)},this.getEditorJSON=()=>{const e=l.default.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");return e.graph=this.refs.graph.toJSON(),e.version=1.2,e.answer=this.getUserInput(),e},this.getUserInput=()=>{var e;return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:null==(e=this.shape)?void 0:e.getOptions()}}},this._handleFocus=(...e)=>{this.props.onFocus(e)},this._handleBlur=(...e)=>{this.props.onBlur(e)},this._getTransformationForID=e=>{const t=["transformationList","transformation"+e];let n=this;return l.default.each(t,(e=>{n=n.refs[e]})),n},this.getInputPaths=()=>{if("static"===this.props.listMode)return[];let e=[];return l.default.each(this.props.transformations,((t,n)=>{const r=this._getTransformationForID(n).getInputPaths(),s=l.default.map(r,(e=>[""+n].concat(e)));e=e.concat(s)})),e},this._passToInner=function(e,t,...n){if(!t||!t.length)return;const r=l.default.rest(t),s=l.default.head(t),o=this._getTransformationForID(s);return o[e].apply(o,[r].concat(n))},this.focus=()=>{const e=this.getInputPaths();return e.length>0&&(this.focusInputPath(e[0]),!0)},this.focusInputPath=e=>0!==e.length&&(T(e.length>=2),this._passToInner("focusInputPath",e)),this.blurInputPath=e=>0!==e.length&&(T(e.length>=2),this._passToInner("blurInputPath",e)),this.setInputValue=(e,t,n)=>(T(e.length>=2),this._passToInner("setInputValue",e,t,n)),this.getDOMNodeForPath=e=>(T(e.length>=2),this._passToInner("getDOMNodeForPath",e)),this.getGrammarTypeForPath=e=>(T(e.length>=2),this._passToInner("getGrammarTypeForPath",e))}render(){const e=l.default.extend(function(e,t){const n=(e=e||{}).labels||["x","y"],r=e.range||[[-10,10],[-10,10]],s=e.step||[1,1];return{box:[t,t],labels:n,range:r,step:s,gridStep:e.gridStep||_(r,s,t),valid:!0,backgroundImage:I,markings:"grid",showProtractor:!1}}(this.props.graph,400),this.props.graph),t="interactive"===this.props.graphMode,n=t?V:G,r=o.createElement("div",{style:{width:e.box[0]}},o.createElement(n,{ref:"toolsBar",enabled:(s=this.props.tools,a="enabled",l.default.object(l.default.map(s,(function(e,t){return[t,e[a]]})))),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));var s,a;return o.createElement("div",{className:"perseus-widget perseus-widget-transformer"},o.createElement(d.default,{ref:"graph",box:e.box,range:e.range,labels:e.labels,step:e.step,gridStep:e.gridStep,markings:e.markings,backgroundImage:e.backgroundImage,showProtractor:e.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!t&&k._("Add transformations below:"),"static"===this.props.graphMode&&[o.createElement("br",{key:"static-br"}),o.createElement("em",{key:"static-nomove"}," ",k._("Note: For this question, the shape will not move.")," ")],t&&r,o.createElement(U,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!t&&r)}componentDidMount(){this.setupGraphie(this.graphie())}componentDidUpdate(e){this.shouldSetupGraphie(this.props,e)?this.refs.graph.reset():P(this.props.transformations,this.transformations)||this.setTransformations(this.props.transformations)}static validate(e,t){for(const n in q)if(t.tools[n].required){if(!l.default.any(l.default.map(e.transformations,(function(e){return e.type===n&&!F.isEmpty(e)&&!F.isNoOp(e)}))))return{type:"invalid",message:k._("Your transformation must use a %(type)s.",{type:q[n].lowerNounName})}}return z.equal(e.shape,t.correct.shape)?{type:"points",earned:1,total:1,message:null}:!t.gradeEmpty&&P(e.shape.coords,t.starting.shape.coords)?{type:"invalid",message:k._("Use the interactive graph to define a correct transformation.")}:{type:"points",earned:0,total:1,message:null}}}Y.defaultProps=l.default.defaults({transformations:[]},N);var $={name:"transformer",displayName:"Transformer",widget:Y};t.default=$},FVCV:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("96rG")),a=r(n("p8fL")),i=n("eAf/");const l=a.default.normalizeOptions,u=a.default.assert,c=["add","modify","draw","remove","onMoveStart","onMove","onMoveEnd","onClick"],p={cursor:null},d={added:!1,isHovering:!1,isMouseOver:!1,isDragging:!1,mouseTarget:null},h=function(e,t){s.default.extend(this,{graphie:e,state:{id:s.default.uniqueId("movable")}}),this.modify(s.default.extend({},d,t))};a.default.createGettersFor(h,s.default.extend({},p,d)),a.default.addMovableHelperMethodsTo(h),s.default.extend(h.prototype,{cloneState:function(){return s.default.clone(this.state)},_createDefaultState:function(){return s.default.extend({id:this.state.id,add:[],modify:[],draw:[],remove:[],onMoveStart:[],onMove:[],onMoveEnd:[],onClick:[]},p)},modify:function(e){this.update(s.default.extend({},this._createDefaultState(),e))},grab:function(e){u(i.point.is(e));const t=this,n=t.graphie,r=t.state;r.isHovering=!0,r.isDragging=!0,n.isDragging=!0;const s=e;let a=s;t._fireEvent(r.onMoveStart,s,s);const l=function(e){e.preventDefault();const s=n.getMouseCoord(e);t._fireEvent(r.onMove,s,a),t.draw(),a=s};(0,o.default)(document).bind("vmousemove",l),(0,o.default)(document).bind("vmouseup",(function e(i){(0,o.default)(document).unbind("vmousemove",l),(0,o.default)(document).unbind("vmouseup",e),r.isHovering&&t._fireEvent(r.onClick,a,s),r.isHovering=t.state.isMouseOver,r.isDragging=!1,n.isDragging=!1,t._fireEvent(r.onMoveEnd,a,s),t.draw()}))},update:function(e){const t=this,n=t.graphie,r=t.cloneState(),a=s.default.extend(t.state,l(c,e));if(a.mouseTarget&&!r.mouseTarget){let e;e=a.mouseTarget.getMouseTarget?(0,o.default)(a.mouseTarget.getMouseTarget()):(0,o.default)(a.mouseTarget[0]);!("ontouchstart"in window)&&(e.on("vmouseover",(function(){a.isMouseOver=!0,n.isDragging||(a.isHovering=!0),t.state.added&&t.draw()})),e.on("vmouseout",(function(){a.isMouseOver=!1,a.isDragging||(a.isHovering=!1),t.state.added&&t.draw()}))),e[0].addEventListener("touchstart",(function(e){e.preventDefault()}),{passive:!1}),e.on("vmousedown",(function(e){if(0!==e.which&&1!==e.which)return;e.preventDefault();const r=n.getMouseCoord(e);t.grab(r)}))}if(a.mouseTarget&&void 0!==a.cursor){let e;e=a.mouseTarget.getMouseTarget?(0,o.default)(a.mouseTarget.getMouseTarget()):(0,o.default)(a.mouseTarget[0]),e.css("cursor",a.cursor||"")}a.added||(t._fireEvent(a.modify,t.cloneState(),{}),a.added=!0,t.prevState=t.cloneState()),t._fireEvent(a.modify,t.cloneState(),t.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.state.mouseTarget&&((0,o.default)(this.state.mouseTarget).off(),this.state.mouseTarget.remove(),this.state.mouseTarget=null)},toBack:function(){this.state.mouseTarget&&this.state.mouseTarget.toBack()},toFront:function(){this.state.mouseTarget&&this.state.mouseTarget.toFront()}});var f=h;t.default=f},FW0l:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=r(n("qoj5")),l=r(n("ONox")),u=r(n("DUX9"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const p="horizontal",d="vertical";class h extends s.Component{constructor(...e){super(...e),this.onLayoutChange=e=>{this.props.onChange({layout:e.target.value})},this.serialize=()=>a.default.pick(this.props,"correct","layout","padding")}render(){const e=this;return s.createElement("div",null,s.createElement("div",null," ","Correct answer:"," ",s.createElement(i.default,null,s.createElement("p",null,"Enter the correct answer (in the correct order) here. The preview on the right will have the cards in a randomized order, which is how the student will see them."))),s.createElement(u.default,{options:this.props.correct,onChange:function(t,n){e.props.onChange({correct:t},n)},layout:this.props.layout}),s.createElement("div",null,s.createElement("label",null," ","Layout:"," ",s.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},s.createElement("option",{value:p},"Horizontal"),s.createElement("option",{value:d},"Vertical"))),s.createElement(i.default,null,s.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text and larger images."))),s.createElement("div",null,s.createElement(l.default,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),s.createElement(i.default,null,s.createElement("p",null,"Padding is good for text, but not needed for images."))))}}h.propTypes={correct:o.default.array,layout:o.default.oneOf([p,d]),padding:o.default.bool},h.widgetName="sorter",h.defaultProps={correct:["$x$","$y$","$z$"],layout:p,padding:!0};var f=h;t.default=f},G4Rg:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("UW/U")),a=r(n("Bkj0")),i=r(n("TBZ3"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}class u extends s.PureComponent{constructor(...e){super(...e),this._handleKeyDown=e=>{"Tab"===e.key&&(this.props.onDismiss(),e.preventDefault())}}_renderTooltipContent(){return s.createElement("div",{onKeyDown:this._handleKeyDown},s.createElement(a.default,this.props.buttonProps))}render(){return s.createElement("div",null,s.createElement(o.default,{content:this._renderTooltipContent(),offsetFrom:"arrow",offset:10,dismissed:this.props.dismissed,showOnMount:!0,toggleOnHover:!1,onClick:()=>this.props.buttonProps.onClick(),media:i.default.mdOrLarger},this.props.children),!this.props.dismissed&&s.createElement(c,{onDismiss:this.props.onDismiss}))}}t.default=u;class c extends s.PureComponent{constructor(...e){super(...e),this._handleGlobalClick=()=>{this.props.onDismiss()},this._handleGlobalKeyup=e=>{"Escape"===e.key&&this.props.onDismiss()}}componentDidMount(){setTimeout((()=>{window.addEventListener("click",this._handleGlobalClick),window.addEventListener("keyup",this._handleGlobalKeyup)}),0)}componentWillUnmount(){window.removeEventListener("click",this._handleGlobalClick),window.removeEventListener("keyup",this._handleGlobalKeyup)}render(){return null}}},G6Ta:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("8OQS")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=r(n("17x9")),l=r(n("i8i4"));const u=["labelText"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}class p extends a.Component{constructor(...e){super(...e),this.focus=()=>{l.default.findDOMNode(this).focus()},this.blur=()=>{l.default.findDOMNode(this).blur()},this.getValue=()=>{var e;return null==(e=l.default.findDOMNode(this))?void 0:e.value},this.getStringValue=()=>{var e;return null==(e=l.default.findDOMNode(this))?void 0:e.value.toString()},this.setSelectionRange=(e,t)=>{l.default.findDOMNode(this).setSelectionRange(e,t)},this.getSelectionStart=()=>l.default.findDOMNode(this).selectionStart,this.getSelectionEnd=()=>l.default.findDOMNode(this).selectionEnd}render(){const e=this.props,{labelText:t}=e,n=(0,o.default)(e,u);return a.createElement("input",(0,s.default)({},n,{type:"text","aria-label":t,onChange:e=>this.props.onChange(e.target.value)}))}}p.propTypes={value:i.default.string,onChange:i.default.func.isRequired,className:i.default.string,labelText:i.default.string,onFocus:i.default.func,onBlur:i.default.func,disabled:i.default.bool},p.defaultProps={value:"",disabled:!1};var d=p;t.default=d},GFV9:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=h(n("+jAD")),u=r(n("cxY9")),c=r(n("lQTD")),p=r(n("1SF4"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const f=r(n("k1y+")).default.widget;class g extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.onMatrixBoardSizeChange=e=>{const t=function(e){const t=[1,1];return(0,i.default)(e).each(((e,n)=>{let r=0;(0,i.default)(e).each(((e,t)=>{null!=e&&e.toString().length&&(r=t+1)})),t[1]=Math.max(t[1],r),r>0&&(t[0]=Math.max(t[0],n+1))})),t}(this.props.answers);if(null!==e[0]&&null!==e[1]){e=[Math.round(Math.min(Math.max(e[0],1),6)),Math.round(Math.min(Math.max(e[1],1),6))];const n=(0,i.default)(Math.min(e[0],t[0])).times((n=>(0,i.default)(Math.min(e[1],t[1])).times((e=>this.props.answers[n][e]))));this.props.onChange({matrixBoardSize:e,answers:n})}},this.serialize=()=>u.default.serialize.call(this)}render(){const e=i.default.extend({numericInput:!0,onBlur:()=>{},onFocus:()=>{},trackInteraction:()=>{}},this.props);return o.createElement("div",{className:"perseus-matrix-editor"},o.createElement("div",{className:"perseus-widget-row"}," ","Max matrix size:"," ",o.createElement(p.default,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})),o.createElement("div",{className:"perseus-widget-row"},o.createElement(f,e)),o.createElement("div",{className:"perseus-widget-row"}," ","Matrix prefix:"," ",o.createElement(c.default,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:e=>{this.change({prefix:e.content})}})),o.createElement("div",{className:"perseus-widget-row"}," ","Matrix suffix:"," ",o.createElement(c.default,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:e=>{this.change({suffix:e.content})}})))}}g.propTypes=(0,s.default)({},l.propTypes,{matrixBoardSize:a.default.arrayOf(a.default.number).isRequired,answers:a.default.arrayOf(a.default.arrayOf(a.default.number)),prefix:a.default.string,suffix:a.default.string,cursorPosition:a.default.arrayOf(a.default.number)}),g.widgetName="matrix",g.defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]};var m=g;t.default=m},GLX1:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=n("mR6N"),i=f(n("HEOz")),l=n("bGTE"),u=n("/4Qb"),c=r(n("APgo")),p=r(n("gP8R")),d=f(n("UcaO"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const g=25;class m extends o.Component{constructStyles(e,t,n){let r,s=d.satBlue,o=d.satBlue;return e?t?(s=d.satCorrectColor,o=n?d.white:d.satCorrectColor,r=n?d.satCorrectColor:d.white):n&&(s=d.satIncorrectColor,o=d.white,r=d.satIncorrectColor):n&&(o=d.white,r=d.satBlue),{color:o,backgroundColor:r,borderColor:s}}render(){const{letter:e,a11yText:t,reviewMode:n,checked:r,correct:s,crossedOut:i}=this.props,{color:l,backgroundColor:u,borderColor:c}=this.constructStyles(n,s,r);return o.createElement("div",{className:(0,a.css)(x.iconWrapper)},o.createElement("div",{className:(0,a.css)(x.satCircle),style:{backgroundColor:u,borderColor:c}}),o.createElement("div",{style:{color:l},className:(0,a.css)(x.letter)},o.createElement("span",{className:"perseus-sr-only"},t),o.createElement("span",{"aria-hidden":"true"},e)),i&&o.createElement(b,{color:c,sat:!0}))}}const v=24;class y extends o.Component{getChoiceInner(){const{letter:e,showCorrectness:t,correct:n}=this.props;return t?n?o.createElement(c.default,(0,s.default)({},u.iconCheck,{style:{position:"relative",top:-1}})):o.createElement(c.default,u.iconMinus):e}getDynamicStyles(){const{checked:e,showCorrectness:t,pressed:n,primaryProductColor:r,correct:s,transparentBackground:o}=this.props;if(!t&&n)return{borderColor:r,color:r,backgroundColor:o?"transparent":d.white};if(e){const e=t&&s?d.kaGreen:r;return{color:d.white,backgroundColor:e,borderColor:e}}return{borderColor:d.gray68,color:d.gray68}}render(){const{a11yText:e,checked:t,crossedOut:n,showCorrectness:r,correct:s,focused:i,primaryProductColor:l,previouslyAnswered:u}=this.props,c=this.getDynamicStyles();return o.createElement("div",{className:(0,a.css)(x.iconWrapper)},o.createElement(p.default,{color:l,visible:i},o.createElement("div",{style:c,className:(0,a.css)(x.libraryCircle,r&&s&&x.libraryCircleCorrect,r&&!s&&x.libraryCircleIncorrect,r&&!s&&(t||u)&&x.libraryCircleIncorrectAnswered),"data-is-radio-icon":!0},o.createElement("div",{className:"perseus-sr-only"},e),o.createElement("div",{"aria-hidden":!0},this.getChoiceInner()))),n&&o.createElement(b,{color:c.borderColor}))}}function b(e){const t=e.sat?29:28;return o.createElement("svg",{width:t,height:t,viewBox:`0 0 ${t} ${t}`,className:(0,a.css)(x.crossOutLine)},o.createElement("line",{x1:2,x2:t-2,y1:t-2,y2:2,stroke:e.color,strokeWidth:"2",strokeLinecap:"round"}))}class w extends o.Component{a11yText(e){const{checked:t,correct:n,crossedOut:r,showCorrectness:s}=this.props;return s&&n?t?i._("(Choice %(letter)s, Checked, Correct)",{letter:e}):r?i._("(Choice %(letter)s, Crossed out, Correct)",{letter:e}):i._("(Choice %(letter)s, Correct)",{letter:e}):s&&!n?t?i._("(Choice %(letter)s, Checked, Incorrect)",{letter:e}):r?i._("(Choice %(letter)s, Crossed out, Incorrect)",{letter:e}):i._("(Choice %(letter)s, Incorrect)",{letter:e}):t?i._("(Choice %(letter)s, Checked)",{letter:e}):r?i._("(Choice %(letter)s, Crossed out)",{letter:e}):i._("(Choice %(letter)s)",{letter:e})}render(){const{pos:e,reviewMode:t,checked:n,crossedOut:r,correct:s,product:a,showCorrectness:i,pressed:u,focused:c,primaryProductColor:p,previouslyAnswered:d,transparentBackground:h}=this.props,f=(0,l.getChoiceLetter)(e);return"sat"===a?o.createElement(m,{letter:f,a11yText:this.a11yText(f),reviewMode:t,checked:n,correct:s,crossedOut:r}):o.createElement(y,{letter:f,a11yText:this.a11yText(f),reviewMode:t,checked:n,crossedOut:r,pressed:u,focused:c,correct:s,showCorrectness:i,primaryProductColor:p,previouslyAnswered:d,transparentBackground:h})}}w.defaultProps={primaryProductColor:d.kaGreen};const x=a.StyleSheet.create({satCircle:{display:"block",borderRadius:g,borderStyle:"solid",borderWidth:2,content:"''",height:g,width:g,top:1,left:1},iconWrapper:{display:"inline-block",position:"relative"},crossOutLine:{position:"absolute",top:"calc(50% - 14px)",left:"calc(50% - 14px)"},libraryCircle:{width:v,height:v,boxSizing:"border-box",borderRadius:v,borderStyle:"solid",borderWidth:2,fontFamily:d.baseFontFamily,fontWeight:"bold",fontSize:12,display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1px"},libraryCircleCorrect:{fontSize:v},libraryCircleIncorrect:{fontSize:v,borderColor:d.gray68,color:d.gray68},libraryCircleIncorrectAnswered:{backgroundColor:d.warning1,borderColor:d.warning1,color:d.white},letter:{border:"2px solid transparent",width:g,height:g,position:"absolute",top:1,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:d.boldFontFamily,fontSize:13}});var E=w;t.default=E},GbkG:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=w(n("q1tI")),a=r(n("5pch")),i=n("eAf/"),l=r(n("bHYm")),u=r(n("yPu2")),c=r(n("uBl0")),p=r(n("ydm1")),d=r(n("Giaf")),h=r(n("T2HF")),f=r(n("yfnS")),g=n("UcaO"),m=n("NUXr"),v=w(n("+jAD")),y=n("INEF");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const x=d.default.MovablePoint,E=d.default.MovableLine;const C={padding:"5px 5px"};class k extends o.Component{constructor(...e){super(...e),this._coords=()=>{const e=this.props,t=e.graph,n=e.model&&(0,y.maybePointsFromNormalized)(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null},this._asymptote=()=>this.props.asymptote,this.change=(...e)=>v.change.apply(this,e),this.renderPlot=()=>{const e=this.props.model,t=this.props.graph.range[0],n=(0,s.default)({stroke:this.props.isMobile?f.default.BLUE_C:f.default.DYNAMIC},this.props.isMobile?{"stroke-width":3}:{}),r=e.getCoefficients(this._coords(),this._asymptote());if(!r)return;const a=e.getPropsForCoeffs(r,t);return o.createElement(e.Movable,(0,s.default)({},a,{key:this.props.model.url,range:t,style:n}))},this.renderAsymptote=()=>{const e=this.props.model,t=this.props.graph,n=this._asymptote(),r={strokeDasharray:"- "};return n&&o.createElement(E,{onMove:(e,t)=>{const n=i.vector.subtract(e,t),r=a.default.map(this._asymptote(),(e=>i.vector.add(e,n)));this.props.onChange({asymptote:r})},constraints:[l.default.MovableLine.constraints.bound(),l.default.MovableLine.constraints.snap(),(n,r)=>{const s=i.vector.subtract(n,r),o=a.default.map(this._asymptote(),(e=>i.vector.add(e,s)));return!e.extraAsymptoteConstraint||e.extraAsymptoteConstraint(n,r,this._coords(),o,t)}],normalStyle:r,highlightStyle:r},a.default.map(n,((e,t)=>o.createElement(x,{key:`asymptoteCoord-${t}`,coord:e,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))))}}render(){const e=a.default.map(this._coords(),((e,t)=>o.createElement(x,{key:t,coord:e,static:this.props.static,constraints:[l.default.MovablePoint.constraints.bound(),l.default.MovablePoint.constraints.snap(),e=>{const n=a.default.all(this._coords(),((n,r)=>t===r||!n||!i.number.equal(e[0],n[0])));if(!n)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){const n=this.props.model.extraCoordConstraint,r=a.default.clone(this._coords()),s=a.default.clone(r[t]);return r[t]=e,n(e,s,r,this._asymptote(),this.props.graph)}return n}],onMove:(e,n)=>{let r;const s=this._asymptote();r=s&&this.props.model.allowReflectOverAsymptote&&function(e,t,n){const r=(e,t,n)=>(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1]);return r(n[0],n[1],t)>0!=r(n[0],n[1],e)>0}(e,n,s)?a.default.map(this._coords(),(e=>i.point.reflectOverLine(e,s))):a.default.clone(this._coords()),r[t]=e,this.props.onChange({coords:r})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile}))),t=this.props.graph.box,n=this.props.graph.backgroundImage;let r=null;if(n.url){const e=t[0]/g.interactiveSizes.defaultBoxSize;r=o.createElement(u.default,{src:n.url,width:n.width,height:n.height,scale:e})}return o.createElement("div",{className:"perseus-widget perseus-widget-grapher",style:{width:t[0],height:t[1],boxSizing:"initial"}},o.createElement("div",{className:"graphie-container above-scratchpad",style:{width:t[0],height:t[1]}},r,o.createElement(d.default,(0,s.default)({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&e)))}}k.defaultProps={graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1};class O extends o.Component{constructor(...e){super(...e),this.handlePlotChanges=e=>{const t=a.default.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()},this.handleActiveTypeChange=e=>{const t=this.props.graph,n=a.default.extend({},this.props.plot,(0,y.defaultPlotProps)(e,t));this.props.onChange({plot:n})},this._setupGraphie=(e,t)=>{const n=this.props.apiOptions.isMobile;if("graph"===t.markings?(e.graphInit({range:t.range,scale:a.default.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?this._calculateMobileTickStep(t.gridStep,t.step,t.range):a.default.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:a.default.pluck(t.gridConfig,"unityLabel"),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):"grid"===t.markings?e.graphInit({range:t.range,scale:a.default.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):"none"===t.markings&&e.init({range:t.range,scale:a.default.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){const t={normalStyle:{strokeWidth:1}};this.horizHairline=new h.default(e,[0,0],[0,0],t),this.horizHairline.attr({stroke:f.default.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new h.default(e,[0,0],[0,0],t),this.vertHairline.attr({stroke:f.default.INTERACTIVE}),this.vertHairline.hide()}},this.showHairlines=e=>{this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())},this.hideHairlines=()=>{this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())}}render(){const e=this.props.plot.type,t=this.props.plot.coords,n=this.props.plot.asymptote,r=o.createElement("div",{style:C,className:"above-scratchpad"},o.createElement(p.default,{value:e,allowEmpty:!0,buttons:a.default.map(this.props.availableTypes,y.typeToButton),onChange:this.handleActiveTypeChange})),i=(0,m.getInteractiveBoxFromSizeClass)(this.props.containerSizeClass),l=(0,s.default)({},this.props.graph,(0,y.getGridAndSnapSteps)(this.props.graph,i[0]),{gridConfig:this._getGridConfig((0,s.default)({},this.props.graph,{box:i},(0,y.getGridAndSnapSteps)(this.props.graph,i[0])))}),u={graph:{box:i,range:l.range,step:l.step,snapStep:l.snapStep,backgroundImage:l.backgroundImage,options:l,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&(0,y.functionForType)(e),coords:t,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return o.createElement("div",null,o.createElement(k,u),this.props.availableTypes.length>1&&r)}_getGridConfig(e){return e.step.map(((t,n)=>c.default.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])))}_calculateMobileTickStep(e,t,n){const r=c.default.constrainedTickStepsFromTickSteps(t,n);return r[0]=r[0]/e[0],r[1]=r[1]/e[1],r}simpleValidate(e){return(0,y.validate)(this.getUserInput(),e)}getUserInput(){return O.getUserInputFromProps(this.props)}focus(){}static validate(e,t){return(0,y.validate)(e,t)}static getUserInputFromProps(e){return e.plot}}O.defaultProps=y.DEFAULT_GRAPHER_PROPS;const M=e=>{const t={availableTypes:e.availableTypes,graph:e.graph};if(1===t.availableTypes.length){const e=t.graph,n=(0,y.chooseType)(t.availableTypes);t.plot=(0,y.defaultPlotProps)(n,e)}return t};var P={name:"grapher",displayName:"Grapher",widget:O,transform:M,staticTransform:e=>(0,s.default)({},M(e),{availableTypes:[e.correct.type],plot:e.correct})};t.default=P},Giaf:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=m(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("96rG")),u=m(n("4PhQ")),c=r(n("7kT3")),p=r(n("kPsx")),d=r(n("uBl0")),h=r(n("p8fL")),f=r(n("NT9k"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const v=c.default.GraphieMovable,y=f.default.createGraphie,{deepEq:b,nestedMap:w}=d.default,{assert:x}=h.default;class E extends s.Component{constructor(...e){super(...e),this.getGraphie=()=>this._graphie,this._range=()=>i.default.map(this.props.range,(e=>e[0]>=e[1]?[-10,10]:e)),this._box=()=>i.default.map(this.props.box,(e=>e>0?e:340)),this._scale=()=>{const e=this._box(),t=this._range();return i.default.map(e,((e,n)=>e/(t[n][1]-t[n][0])))},this._setupGraphie=()=>{this._removeMovables();const e=a.default.findDOMNode(this.refs.graphieDiv);(0,l.default)(e).empty();const t=this._graphie=y(e);t.init({range:this._range(),scale:this._scale(),isMobile:this.props.isMobile}),this.props.addMouseLayer&&t.addMouseLayer({onClick:this.props.onClick,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),t.snap=this.props.options.snapStep||[1,1],this.props.responsive&&((0,l.default)(e).css({width:"100%",height:"100%"}),t.raphael.setSize("100%","100%")),this.props.setup(t,i.default.extend({range:this._range(),scale:this._scale()},this.props.options))},this._removeMovables=()=>{i.default.invoke(this._movables,"remove"),this._movables={}},this._renderMovables=(e,t)=>{const n=t.graphie,r=t.oldMovables,s=t.newMovables,o=e=>{i.default.each(e.movableProps,(n=>{e.props[n]=this._renderMovables(e.props[n],t)}))};let a=!1;return w(e,(e=>{if(!e)return t.nextKey++,e;const i=new e.type(e.props);x(i instanceof v,"All children of a Graphie component must be Graphie movables");const l=e.key,c=null==l?"_no_id_"+t.nextKey:l;t.nextKey++;const p=e.ref;o(i);const d=r[c];if(d)if(i.constructor===d.constructor){d.props=i.props;"reordered"===d.modify(n)&&(a=!0),s[c]=d}else null==l&&u.default.error("Replacing a <Graphie> child with a child of a different type. Please add keys to your <Graphie> children",u.Errors.Internal),d.remove(),i.add(n),a=!0,s[c]=i;else i.add(n),a=!0,s[c]=i;return a&&s[c].toFront(),p&&(this.movables[p]=s[c]),s[c]}))},this._updateMovables=()=>{const e=this._graphie,t=this._movables,n={};this._movables=n,this.movables={},this._renderMovables(this.props.children,{nextKey:1,graphie:e,oldMovables:t,newMovables:n}),i.default.each(t,((e,t)=>{n[t]||e.remove()}))}}componentDidMount(){this._setupGraphie(),this._updateMovables()}shouldComponentUpdate(e){return!i.default.isEqual(this.props,e)}componentDidUpdate(e){this.props.setup!==e.setup&&u.default.error("<Graphie> was given a new setup function. This is a bad idea; please refactor your code to give the same setup function reference to <Graphie> on every render.",u.Errors.Internal),b(this.props.options,e.options)&&b(this.props.box,e.box)&&b(this.props.range,e.range)||this._setupGraphie(),this._updateMovables()}render(){return s.createElement("div",{className:"graphie-container"},s.createElement("div",{className:"graphie",ref:"graphieDiv"}))}}E.propTypes={addMouseLayer:o.default.bool,box:o.default.arrayOf(o.default.number).isRequired,children:o.default.node,isMobile:o.default.bool,onClick:o.default.func,onMouseDown:o.default.func,onMouseMove:o.default.func,onMouseUp:o.default.func,options:o.default.shape({snapStep:o.default.arrayOf(o.default.number)}),range:o.default.arrayOf(o.default.arrayOf(o.default.number)),responsive:o.default.bool,setDrawingAreaAvailable:o.default.func,setup:o.default.func.isRequired},E.defaultProps={range:[[-10,10],[-10,10]],options:{},responsive:!1,addMouseLayer:!0},i.default.extend(E,c.default),i.default.extend(E,p.default);var C=E;t.default=C},H5xB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),s=n("mR6N");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}class a extends r.PureComponent{render(){const{direction:e,pxFromStart:t,pxFromEnd:n}=this.props,o=[i.wrapper,"horizontal"===e&&i.wrapperHorizontal,"vertical"===e&&i.wrapperVertical],a=[i.content,"horizontal"===e&&i.contentHorizontal,"vertical"===e&&i.contentVertical];return 0===t?r.createElement("div",{className:s.css.apply(void 0,o)},r.createElement("div",{className:s.css.apply(void 0,a)},this.props.children)):0===n?r.createElement("div",{className:s.css.apply(void 0,o.concat([i.wrapperAlignToEnd]))},r.createElement("div",{className:s.css.apply(void 0,a)},this.props.children)):r.createElement("div",{className:s.css.apply(void 0,o)},r.createElement("div",{style:{flexShrink:n,flexBasis:t}}),r.createElement("div",{className:s.css.apply(void 0,a)},this.props.children),r.createElement("div",{style:{flexShrink:t,flexBasis:n}}))}}t.default=a;const i=s.StyleSheet.create({wrapper:{display:"flex",overflow:"hidden"},wrapperHorizontal:{flexDirection:"row",width:"100%"},wrapperVertical:{flexDirection:"column",height:"100%"},wrapperAlignToEnd:{justifyContent:"flex-end"},content:{flex:"0 0 auto"},contentHorizontal:{maxWidth:"100%"},contentVertical:{maxHeight:"100%"}})},HQqP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL"));const o=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),a=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function i(e){this.message=e}function l(e,t,n){const r=t[0],o=t.slice(1);let a;a=Array.isArray(e)?[].concat(e):(0,s.default)({},e||{});let i=n;return o.length>0&&(i=l(a[r],o,n)),a[r]=i,a}function u(e,t){if(0===t.length)return e;if(""===e)throw new i("Mismatched parentheses");const n=e[0],r=e.slice(1);return u(r,"("===n?t.concat(n):")"===n?t.slice(1):t)}function c(e,t){const n=e[0],r=e.slice(1);if("("===n){let e=(0,s.default)({},t,{parens:t.parens+"("});e=function(e,t){const n=t.reduce((function(e,t){return e[t]}),e);return l(e,t,n+1)}(t,["idx",t.idx.length-1,1]);let n=-1;t.idx[t.idx.length-1][0]%2==0&&(n=0);const o=d(r,(0,s.default)({},e,{idx:e.idx.concat([[n,0]]),parens:e.parens.concat("(")})),a=d(u(r,["("]),e);return[o].concat(a)}if(")"===n){if("("!==t.parens[t.parens.length-1])throw new i("Mismatched parentheses");return null}throw new i("Invalid bare character: "+n)}function p(e,t){const n=function(e,t){let n=null,r=null;if("["===e[0]){const t=e.indexOf("]");if(-1===t)return["",e];n=e.slice(1,t),r=e.slice(t+1)}else n=a.exec(e)[1],r=e.slice(n.length);return[n,r]}(e),r=n[0];if(""===r)return["error","Unable to parse bracketed atom."];const s=n[1],o=l(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]);let i=d(s,l(o,["bond","bondType"],"single"));!Array.isArray(i)&&i&&(i=[i]);const u={type:"atom",symbol:r,bonds:i,idx:o.idx};return t.bond?{type:"bond",bondType:t.bond.bondType,to:u}:u}function d(e,t){if(!function(e){return o.test(e)}(e))throw new i("Invalid input.");return e&&0!==e.length?(n=e,a.test(n)?p(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):function(e){return"="===e||"#"===e}(e[0])?function(e,t){const n=e[0],r=e.slice(1);if("="===n)return d(r,l(t,["bond","bondType"],"double"));if("#"===n)return d(r,l(t,["bond","bondType"],"triple"));throw new i("Invalid character: "+n)}(e,t):c(e,t)):null;var n}var h={parse:d,ParseError:i};t.default=h},HdDY:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=r(n("17x9")),i=(r(n("5pch")),n("mR6N")),l=n("j8wP"),u=g(n("+jAD")),c=r(n("lQTD")),p=r(n("G6Ta")),d=r(n("APgo")),h=n("/4Qb");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class m extends o.Component{constructor(...e){super(...e),this.change=(...e)=>u.change.apply(this,e),this.handleAddHint=()=>{this.props.onChange({hint:{content:""}},(()=>{this.refs["hint-editor"].focus()}))},this.handleRemoveHint=e=>{this.props.onChange({hint:null})},this.getSaveWarnings=()=>this.refs.editor.getSaveWarnings(),this.serialize=()=>(0,s.default)({title:this.props.title},this.refs.editor.serialize(),{hint:this.refs["hint-editor"]&&this.refs["hint-editor"].serialize()})}render(){return o.createElement("div",{className:"perseus-group-editor"},o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",{className:(0,i.css)(v.title)},"Title:"," ",o.createElement(p.default,{value:this.props.title,className:(0,i.css)(v.input),onChange:this.change("title")}))),o.createElement(c.default,{ref:"editor",content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),!this.props.hint&&o.createElement("button",{type:"button",style:{marginTop:10},className:"add-hint simple-button orange",onClick:this.handleAddHint},o.createElement(d.default,h.iconPlus)," Add a hint"),this.props.hint&&o.createElement("div",{className:"perseus-hint-editor"},o.createElement("div",{className:(0,i.css)(v.hintsTitle)},"Hint"),o.createElement(c.default,{ref:"hint-editor",content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:e=>{this.change("hint",Object.assign({},this.props.hint,e))}}),o.createElement("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.handleRemoveHint},o.createElement(d.default,h.iconTrash)," Remove this hint")))}}m.propTypes=(0,s.default)({},u.propTypes,{title:a.default.string,content:a.default.string,widgets:a.default.object,images:a.default.object,apiOptions:l.ApiOptions.propTypes}),m.widgetName="graded-group",m.defaultProps={title:"",content:"",widgets:{},images:{},hint:null};const v=i.StyleSheet.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}});var y=m;t.default=y},Hpzc:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("b5JB")),o=r(n("hxS7")),a=r(n("e04/")),i=r(n("IYtG")),l=[s.default,o.default,a.default,i.default];t.default=l},IGe5:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=c(n("q1tI")),a=r(n("17x9")),i=(r(n("5pch")),c(n("+jAD"))),l=r(n("cxY9"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class p extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.handleContentChange=e=>{this.change({content:e.target.value})},this.serialize=()=>l.default.serialize.call(this)}render(){return o.createElement("div",null,"Content:",o.createElement("input",{type:"text",value:this.props.content,onChange:this.handleContentChange}))}}p.propTypes=(0,s.default)({},i.propTypes,{content:a.default.string}),p.widgetName="passage-ref-target",p.defaultProps={content:""};var d=p;t.default=d},INEF:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPlotProps=t.chooseType=t.allTypes=t.DEFAULT_GRAPHER_PROPS=t.DEFAULT_BACKGROUND_IMAGE=void 0,t.functionForType=O,t.validate=t.typeToButton=t.pointsFromNormalized=t.maybePointsFromNormalized=t.getGridAndSnapSteps=t.getEquationString=void 0;var s=r(n("5pch")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("uBl0")),i=r(n("Giaf")),l=r(n("wINb")),u=n("eAf/");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const p=i.default.Plot,d={url:null};function h(e){let t=e[0],n=e[1],r=e[2];const s=e[3];t<0&&(t*=-1,n*=-1,r*=-1);const o=2*Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,s]}function f(e){let t=e[0],n=e[1],r=e[2];const s=e[3];t<0&&(t*=-1,n*=-1,r*=-1);const o=Math.PI;for(n<0&&(n*=-1,r*=-1,r+=o/2);r>0;)r-=o;for(;r<0;)r+=o;return[t,n,r,s]}t.DEFAULT_BACKGROUND_IMAGE=d;const g={areEqual:function(e,t){return a.default.deepEq(e,t)},Movable:p,getPropsForCoeffs:function(e){return{fn:s.default.partial(this.getFunctionForCoeffs,e)}}},m=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],r=n[0]-t[0],s=n[1]-t[1];if(0===r)return;const o=s/r;return[o,n[1]-o*n[0]]},getFunctionForCoeffs:function(e,t){return e[0]*t+e[1]},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],r=t[1];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}}),v=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:i.default.Parabola,getCoefficients:function(e){const t=e[0],n=e[1],r=t[0],s=t[1],o=(n[1]-s)/((n[0]-r)*(n[0]-r));return[o,-2*r*o,o*r*r+s]},getFunctionForCoeffs:function(e,t){return(e[0]*t+e[1])*t+e[2]},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],r=t[1],s=t[2];return"y = "+n.toFixed(3)+"x^2 + "+r.toFixed(3)+"x + "+s.toFixed(3)}}),y=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:i.default.Sinusoid,getCoefficients:function(e){const t=e[0],n=e[1],r=n[1]-t[1],s=Math.PI/(2*(n[0]-t[0]));return[r,s,t[0]*s,t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],r=e[1],s=e[2],o=e[3];return n*Math.sin(r*t-s)+o},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],r=t[1],s=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+r.toFixed(3)+"x - "+s.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return a.default.deepEq(h(e),h(t))}}),b=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],r=n[1]-t[1],s=Math.PI/(4*(n[0]-t[0]));return[r,s,t[0]*s,t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],r=e[1],s=e[2],o=e[3];return n*Math.tan(r*t-s)+o},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],r=t[1],s=t[2],o=t[3];return"y = "+n.toFixed(3)+" sin("+r.toFixed(3)+"x - "+s.toFixed(3)+") + "+o.toFixed(3)},areEqual:function(e,t){return a.default.deepEq(f(e),f(t))}}),w=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,n,r,o){const a=s.default.head(r)[1];return s.default.all(n,(e=>e[1]!==a))},extraAsymptoteConstraint:function(e,t,n,r,o){const a=e[1];if(s.default.all(n,(e=>e[1]>a))||s.default.all(n,(e=>e[1]<a)))return[t[0],a];const i=t[1];if(s.default.all(n,(e=>e[1]>i))){const e=s.default.min(s.default.map(n,(e=>e[1])));return[t[0],e-o.snapStep[1]]}const l=s.default.max(s.default.map(n,(e=>e[1])));return[t[0],l+o.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const n=e[0],r=e[1],o=s.default.head(t)[1],a=Math.log((n[1]-o)/(r[1]-o))/(n[0]-r[0]);return[(n[1]-o)/Math.exp(a*n[0]),a,o]},getFunctionForCoeffs:function(e,t){const n=e[0],r=e[1],s=e[2];return n*Math.exp(r*t)+s},getEquationString:function(e,t){if(!t)return null;const n=this.getCoefficients(e,t),r=n[0],s=n[1],o=n[2];return"y = "+r.toFixed(3)+"e^("+s.toFixed(3)+"x) + "+o.toFixed(3)}}),x=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,n,r,o){const a=s.default.head(r)[0];return s.default.all(n,(e=>e[0]!==a))&&n[0][1]!==n[1][1]},extraAsymptoteConstraint:function(e,t,n,r,o){const a=e[0];if(s.default.all(n,(e=>e[0]>a))||s.default.all(n,(e=>e[0]<a)))return[a,t[1]];const i=t[0];if(s.default.all(n,(e=>e[0]>i))){return[s.default.min(s.default.map(n,(e=>e[0])))-o.snapStep[0],t[1]]}return[s.default.max(s.default.map(n,(e=>e[0])))+o.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const n=e=>[e[1],e[0]],r=w.getCoefficients(s.default.map(e,n),s.default.map(t,n)),o=-r[2]/r[0],a=1/r[0];return[1/r[1],a,o]},getFunctionForCoeffs:function(e,t,n){const r=e[0],s=e[1],o=e[2];return r*Math.log(s*t+o)},getEquationString:function(e,t){if(!t)return null;const n=this.getCoefficients(e,t),r=n[0],s=n[1],o=n[2];return"y = ln("+r.toFixed(3)+"x + "+s.toFixed(3)+") + "+o.toFixed(3)}}),E=s.default.extend({},g,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],n=e[1],r=n[0]-t[0],s=n[1]-t[1];if(0===r)return;let o=Math.abs(s/r);n[1]<t[1]&&(o*=-1);return[o,t[0],t[1]]},getFunctionForCoeffs:function(e,t){const n=e[0],r=e[1],s=e[2];return n*Math.abs(t-r)+s},getEquationString:function(e){const t=this.getCoefficients(e),n=t[0],r=t[1],s=t[2];return"y = "+n.toFixed(3)+"| x - "+r.toFixed(3)+"| + "+s.toFixed(3)}}),C={linear:m,quadratic:v,sinusoid:y,tangent:b,exponential:w,logarithm:x,absolute_value:E},k=s.default.keys(C);function O(e){return C[e]}t.allTypes=k;t.validate=(e,t)=>{if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(null==e.coords)return{type:"invalid",message:null};const n=O(e.type),r=n.getCoefficients(e.coords,e.asymptote),s=n.getCoefficients(t.correct.coords,t.correct.asymptote);return null==r||null==s?{type:"invalid",message:null}:n.areEqual(r,s)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}};t.getEquationString=e=>{const t=e.plot;if(t.type&&t.coords){return O(t.type).getEquationString(t.coords,t.asymptote)||""}return""};const M=(e,t,n,r)=>e.map((e=>{const s=e.map(((e,r)=>{const s=t[r],o=n[r],a=function(e,t){return Math.floor((e[1]-e[0])/t)}(s,o),i=Math.round(e*a);return s[0]+o*i}));return u.point.roundTo(s,r)}));t.pointsFromNormalized=M;const P=(e,t,n,r)=>e?M(e,t,n,r):e;t.maybePointsFromNormalized=P;const _=(e,t)=>{const n=O(e),r=a.default.snapStepFromGridStep([1,1]);return{type:e,asymptote:P(n.defaultAsymptote,t.range,t.step,r),coords:null}};t.defaultPlotProps=_;const S=s.default.first;t.chooseType=S;t.getGridAndSnapSteps=(e,t)=>{const n=e.gridStep||a.default.getGridStep(e.range,e.step,t);return{gridStep:n,snapStep:e.snapStep||a.default.snapStepFromGridStep(n)}};const T={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:d,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},I=_("linear",T),N={graph:T,plot:I,availableTypes:[I.type]};t.DEFAULT_GRAPHER_PROPS=N;t.typeToButton=e=>{const t=e.charAt(0).toUpperCase()+e.substring(1);return{value:e,title:t,content:o.createElement("img",{src:(0,l.default)(O(e).url),alt:t})}}},IR3g:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("ChhH")),o=r(n("wINb")),a=r(n("FCtg")),i=n("4PhQ");t.default=()=>{if(a.default.isServerSide())return Promise.reject(new i.KAError("MathJax not available during SSR.",i.Errors.NotAllowed));const e=(0,o.default)("https://cdn.kastatic.org/third_party/javascript-khansrc/khan-mathjax-build/2.1/MathJax.js?config=KAthJax-730d56e87e9c926b91584f6030314815");return(0,s.default)(e,"MathJax").then((e=>new Promise((t=>{e&&e.Hub.Queue(t)}))))}},IUub:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("fhzG")),i=r(n("5pch")),l=r(n("uBl0")),u=r(n("LeSj")),c=r(n("qoj5")),p=r(n("VWbw")),d=n("UcaO"),h=n("NUXr");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const g=l.default.DeprecationMixin,m=p.default.widget,v={url:null};var y=(0,a.default)({displayName:"InteractiveGraphEditor",className:"perseus-widget-interactive-graph",statics:{widgetName:"interactive-graph"},getDefaultProps:function(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],valid:!0,backgroundImage:v,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10,correct:{type:"linear",coords:null}}},deprecatedProps:{showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},UNSAFE_componentWillMount(){g.UNSAFE_componentWillMount.call(this)},render:function(){let e,t;const n=this.props.gridStep||l.default.getGridStep(this.props.range,this.props.step,d.interactiveSizes.defaultBoxSize),r=this.props.snapStep||l.default.snapStepFromGridStep(n),a=h.containerSizeClass.SMALL;if(!0===this.props.valid){const l={ref:"graph",box:this.props.box,range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:n,snapStep:r,graph:this.props.correct,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,trackInteraction:function(){},onChange:e=>{let t=this.props.correct;t=t.type===e.graph.type?i.default.extend({},t,e.graph):e.graph,this.props.onChange({correct:t})}};e=o.createElement(m,(0,s.default)({},l,{containerSizeClass:a,apiOptions:(0,s.default)({},this.props.apiOptions,{isMobile:!1})})),t=m.getEquationString(l)}else e=o.createElement("div",{className:"perseus-error"},this.props.valid);return o.createElement("div",{className:"perseus-widget-interactive-graph"},o.createElement("div",null,"Correct answer"," ",o.createElement(c.default,null,o.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",t),o.createElement(u.default,{box:(0,h.getInteractiveBoxFromSizeClass)(a),range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:n,snapStep:r,valid:this.props.valid,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onChange:this.props.onChange}),"polygon"===this.props.correct.type&&o.createElement("div",{className:"type-settings"},o.createElement("label",null," ","Student answer must"," ",o.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},o.createElement("option",{value:"exact"},"match exactly"),o.createElement("option",{value:"congruent"},"be congruent"),o.createElement("option",{value:"approx"},"be approximately congruent"),o.createElement("option",{value:"similar"},"be similar"))),o.createElement(c.default,null,o.createElement("ul",null,o.createElement("li",null,o.createElement("p",null,o.createElement("b",null,"Match Exactly:")," Match exactly in size, orientation, and location on the grid even if it is not shown in the background.")),o.createElement("li",null,o.createElement("p",null,o.createElement("b",null,"Be Congruent:")," Be congruent in size and shape, but can be located anywhere on the grid.")),o.createElement("li",null,o.createElement("p",null,o.createElement("b",null,"Be Approximately Congruent:")," Be exactly similar, and congruent in size and shape to within 0.1 units, but can be located anywhere on the grid."," ",o.createElement("em",null,"Use this with snapping to angle measure."))),o.createElement("li",null,o.createElement("p",null,o.createElement("b",null,"Be Similar:")," Be similar with matching interior angles, and side measures that are matching or a multiple of the correct side measures. The figure can be located anywhere on the grid."))))),"angle"===this.props.correct.type&&o.createElement("div",{className:"type-settings"},o.createElement("div",null,o.createElement("label",null," ","Student answer must"," ",o.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},o.createElement("option",{value:"exact"},"match exactly"),o.createElement("option",{value:"congruent"},"be congruent"))),o.createElement(c.default,null,o.createElement("p",null,"Congruency requires only that the angle measures are the same. An exact match implies congruency, but also requires that the angles have the same orientation and that the vertices are in the same position.")))),e)},changeMatchType:function(e){const t=i.default.extend({},this.props.correct,{match:e.target.value});this.props.onChange({correct:t})},serialize:function(){const e=i.default.pick(this.props,"step","backgroundImage","markings","labels","showProtractor","showRuler","showTooltips","rulerLabel","rulerTicks","range","gridStep","snapStep"),t=this.refs.graph;if(t){const n=t&&t.getUserInput();i.default.extend(e,{graph:{type:n.type},correct:n}),i.default.each(["allowReflexAngles","angleOffsetDeg","numPoints","numSides","numSegments","showAngles","showSides","snapTo","snapDegrees"],(function(t){i.default.has(n,t)&&(e.graph[t]=n[t])}))}return e}});t.default=y},IYtG:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Expression=void 0;var s=x(n("q1tI")),o=r(n("5pch")),a=r(n("TSYQ")),i=r(n("mbWs")),l=n("reBI"),u=x(n("4PhQ")),c=r(n("Yw3Q")),p=n("j8wP"),d=x(n("+jAD")),h=r(n("7BBF")),f=r(n("APgo")),g=r(n("l+pH")),m=r(n("16F6")),v=n("zahm"),y=n("/4Qb"),b=x(n("HEOz"));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{KeypadInput:E}=l.components,{KeypadTypes:C}=l.consts,k=b._("Sorry, I don't understand that!"),O=e=>e.replace(/([_^])([^{])/g,"$1{$2}");class M extends s.Component{constructor(...e){super(...e),this.displayName="Expression",this.state={showErrorTooltip:!1,showErrorText:!1},this.componentDidMount=()=>{this._isMounted=!0},this.componentDidUpdate=e=>{o.default.isEqual(this.props.value,e.value)&&o.default.isEqual(this.props.functions,e.functions)||(clearTimeout(this.errorTimeout),this.parse(this.props.value,this.props).parsed?this.setState({showErrorTooltip:!1}):this.errorTimeout=setTimeout((()=>{!1!==this.props.apiOptions.onInputError(null,this.props.value,k)&&this.setState({showErrorTooltip:!0})}),2e3))},this.componentWillUnmount=()=>{clearTimeout(this.errorTimeout),this._isMounted=!1},this._isMounted=!1,this.errorTimeout=null,this.simpleValidate=(e,t)=>(t=t||function(){},M.validate(this.getUserInput(),e,t)),this.getUserInput=()=>M.getUserInputFromProps(this.props),this.change=(...e)=>d.change.apply(this,e),this.parse=(e,t)=>{const n=o.default.pick(t||this.props,"functions");return o.default.extend(n,{decimal_separator:b.getDecimalSeparator()}),i.default.parse(O(e),n)},this.changeAndTrack=(e,t)=>{this.change("value",e,t),this.props.trackInteraction()},this._handleFocus=()=>{this.props.onFocus([])},this._handleBlur=()=>{this.props.onBlur([])},this.focus=()=>(this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.insert=e=>{this.props.apiOptions.staticRender||this.refs.input.insert(e)},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"expression",this.setInputValue=(e,t,n)=>{this.props.onChange({value:t},n)}}static validate(e,t,n=function(){}){const r=o.default.clone(t);o.default.extend(r,{decimal_separator:b.getDecimalSeparator()});const s=e=>{const n=i.default.parse(e.value,t);return n.parsed?h.default.expression.createValidatorFunctional(n.expr,(0,o.default)({}).extend(r,{simplify:e.simplify,form:e.form})):(u.default.error(`Unable to parse solution answer '${e.value}' for expression`,u.Errors.Internal),u.default.log("Rubric",null,t),null)};let a,l,c,p=!0;for(const n of t.answerForms||[]){const t=s(n);if(!t)continue;const r=t(e);if(r.correct){a=n,l=r.message||"";break}p=p&&r.empty,"correct"===n.considered&&r.ungraded&&!c&&(c=r)}if(!a)return c?{type:"invalid",message:c.message,suppressAlmostThere:c.suppressAlmostThere}:p?{type:"invalid",message:null}:{type:"points",earned:0,total:1};if("ungraded"===a.considered){return{type:"invalid",message:!1===n(null,e,l)?null:l}}return{type:"points",earned:"correct"===a.considered?1:0,total:1,message:l}}static getUserInputFromProps(e){return O(e.value)}static getOneCorrectAnswerFromRubric(e){const t=(e.answerForms||[]).filter((e=>"correct"===e.considered));if(0!==t.length)return t[0].value}render(){if(this.props.apiOptions.customKeypad)return s.createElement(E,{ref:"input",value:this.props.value,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:()=>{var e;null==(e=this.props.keypadElement)||e.configure(this.props.keypadConfiguration,(()=>{this._isMounted&&this._handleFocus()}))},onBlur:this._handleBlur});if(this.props.apiOptions.staticRender)return s.createElement(g.default,{ref:"input",value:this.props.value,type:"tex",examples:[],shouldShowExamples:!1,onChange:this.changeAndTrack,onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,linterContext:this.props.linterContext});const e=s.createElement("span",{className:"error-tooltip",role:"tooltip"},s.createElement(c.default,{className:"error-text-container",horizontalPosition:"right",horizontalAlign:"left",verticalPosition:"top",arrowSize:10,borderColor:"#fcc335",show:this.state.showErrorText},s.createElement("span",{className:"error-icon","data-test-id":"test-error-icon",onMouseEnter:()=>{this.setState({showErrorText:!0})},onMouseLeave:()=>{this.setState({showErrorText:!1})},onClick:()=>{this.setState({showErrorText:!this.state.showErrorText})}},s.createElement(f.default,y.iconExclamationSign)),s.createElement("div",{className:"error-text"},k))),t=(0,a.default)({"perseus-widget-expression":!0,"show-error-tooltip":this.state.showErrorTooltip});return s.createElement("div",{className:t},s.createElement(m.default,{ref:"input",className:p.ClassNames.INTERACTIVE,value:this.props.value,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonsVisible:this.props.buttonsVisible||"focused",buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur}),this.state.showErrorTooltip&&e)}}t.Expression=M,M.defaultProps={value:"",times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:()=>{},onBlur:()=>{},apiOptions:p.ApiOptions.defaults,linterContext:v.linterContextDefault};const P=e=>{const t=C.EXPRESSION,n={},r={};for(const t of e.answerForms){const s=i.default.parse(t.value,e);if(s.parsed){const e=s.expr,t=e=>"pi"===e||"theta"===e,o=e=>t(e)?e.toUpperCase():e;for(const t of e.getVars())n[o(t)]=!0;for(const t of e.getConsts())r[o(t)]=!0}}const s=Object.keys(n);s.sort();const o=Object.keys(r);o.sort();const a=[].concat(s,o);return a.length||a.push("PI"),{keypadType:t,extraKeys:a}};var _={name:"expression",displayName:"Expression / Equation",defaultAlignment:"inline-block",widget:M,transform:e=>{const{times:t,functions:n,buttonSets:r,buttonsVisible:s}=e;return{keypadConfiguration:P(e),times:t,functions:n,buttonSets:r,buttonsVisible:s}},version:{major:1,minor:0},propUpgrades:{1:e=>({times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,answerForms:[{considered:"correct",form:e.form,simplify:e.simplify,value:e.value}]})},isLintable:!0};t.default=_},JTPa:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=f(n("HEOz")),u=f(n("+jAD")),c=r(n("cxY9")),p=r(n("qoj5")),d=r(n("M++g"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class g extends o.Component{constructor(...e){super(...e),this.change=(...e)=>u.change.apply(this,e),this.handleTargetValueChange=(e,t)=>{this.change(e,t.target.value)},this.serialize=()=>c.default.serialize.call(this)}render(){return o.createElement("div",{className:"perseus-widget-simulator"},o.createElement("div",null,l._("X-Axis Label"),":",o.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.xAxisLabel,onChange:i.default.partial(this.handleTargetValueChange,"xAxisLabel")})),o.createElement("div",null,l._("Y-Axis Label"),":",o.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.yAxisLabel,onChange:i.default.partial(this.handleTargetValueChange,"yAxisLabel")})),o.createElement("div",null,l._('"True Proportion" Label'),":",o.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.proportionLabel,onChange:i.default.partial(this.handleTargetValueChange,"proportionLabel")}),o.createElement(p.default,null,o.createElement("p",null,'This text will be displayed next to the box in which the user enters the sample proportion for their simulation. For example, if your question is about surveying for approval ratings, you might want this to say "Sample approval rating".'))),o.createElement("div",null,l._("Proportion or Percentage"),":",o.createElement("select",{className:"perseus-widget-dropdown",value:this.props.proportionOrPercentage,onChange:i.default.partial(this.handleTargetValueChange,"proportionOrPercentage")},o.createElement("option",{key:"proportion",value:"proportion"},"Proportion"),o.createElement("option",{key:"percentage",value:"percentage"},"Percentage")),o.createElement(p.default,null,o.createElement("p",null,"Do you want the user to describe their simulation in terms of a proportion or a percentage?"))),o.createElement("div",null,l._("Number of trials"),":",o.createElement(d.default,{value:this.props.numTrials,checkValidity:e=>e>=0&&e<=5e3,onChange:this.change("numTrials")}),o.createElement(p.default,null,o.createElement("p",null,"This controls the number of trials used in the simulation. For example, if you set this to 50, then the survey will be conducted 50 times. Warning: setting this too high (i.e., greater than 5000 or so) will freeze the page."))))}}g.propTypes=(0,s.default)({},u.propTypes,{xAxisLabel:a.default.string,yAxisLabel:a.default.string,numTrials:a.default.number,proportionLabel:a.default.string,proportionOrPercentage:a.default.string}),g.widgetName="simulator",g.defaultProps={xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",numTrials:100,proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion"};var m=g;t.default=m},JtQr:function(e,t,n){"use strict";function r(e,t){const n=new Path2D;e.lineWidth=i.lineWidth,e.strokeStyle=i.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const s={text:function(e,t){null!==t.value&&(e.fillStyle=i.fgColor,e.font=i.font,e.fillText(t.value,t.pos[0]-i.fontSizePx/2+1,t.pos[1]+i.fontSizePx/2))},"line:single":r,"line:double":function(e,t){let n=new Path2D;e.lineWidth=5*i.lineWidth,e.strokeStyle=i.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=3*i.lineWidth,e.strokeStyle=i.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n)},"line:triple":function(e,t){let n=new Path2D;e.lineWidth=7*i.lineWidth,e.strokeStyle=i.fgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),n=new Path2D,e.lineWidth=5*i.lineWidth,e.strokeStyle=i.bgColor,n.moveTo(t.startPos[0],t.startPos[1]),n.lineTo(t.endPos[0],t.endPos[1]),e.stroke(n),r(e,t)}};const o={"line:single":0,"line:double":0,"line:triple":0,text:1};function a(e,t){return o[e.type]-o[t.type]}const i={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1,font:"12px sans"};var l=function(e,t){t.sort(a).forEach(function(e){return function(t){s[t.type](e,t)}}(e))};t.default=l},Jxul:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=m(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=r(n("96rG")),u=n("MRvb"),c=n("PDH5"),p=n("mR6N"),d=r(n("8Kom")),h=m(n("+jAD")),f=r(n("uBl0"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{updateQueryString:v}=f.default;class y extends o.Component{constructor(...e){super(...e),this.handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(i.default.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})},this.change=(...e)=>h.change.apply(this,e),this.simpleValidate=e=>y.validate({status:this.props.status,message:this.props.message},e)}static validate(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}componentDidMount(){(0,l.default)(window).on("message",this.handleMessageEvent)}componentWillUnmount(){(0,l.default)(window).off("message",this.handleMessageEvent)}render(){if(!this.props.programID)return o.createElement("div",null);let e,t=!1,n=function(e){const t=`/computer-programming/program/${e}/embedded?embed=yes&author=no`;return(0,c.isFileProtocol)(d.default.protocol)?`https://khanacademy.org${t}`:(0,u.toAbsoluteUrl)(t)}(this.props.programID);const r={height:this.props.height,width:"100%"};if(this.props.showEditor?(n+="&editor=yes",e="perseus-scratchpad-editor"):(n+="&editor=no&width=688",e="perseus-scratchpad","webpage"!==this.props.programType&&(t=!0)),this.props.showButtons?(n+="&buttons=yes",r.height+=67):n+="&buttons=no",this.props.settings){const e={};i.default.each(this.props.settings,(function(t){t.name&&t.value&&(e[t.name]=t.value)})),n=v(n,"settings",JSON.stringify(e))}const s=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return o.createElement("div",{className:(0,p.css)(b.widthOverride,t&&b.container)},o.createElement("iframe",{sandbox:s,src:n,style:r,className:e,allowFullScreen:!0}))}}y.propTypes=(0,s.default)({},h.propTypes,{programID:a.default.string,programType:a.default.oneOf(["pjs","sql","webpage"]),width:a.default.number,height:a.default.number,settings:a.default.array,showEditor:a.default.bool,showButtons:a.default.bool,status:a.default.oneOf(["incomplete","incorrect","correct"]),message:a.default.string}),y.defaultProps={showEditor:!1,showButtons:!1,status:"incomplete",message:null};const b=p.StyleSheet.create({widthOverride:{width:820},container:{margin:"auto"}});var w={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:y,hidden:!0};t.default=w},"K/mI":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.sigfigPrint=t.default=t.countSigfigs=void 0;var s=m(n("q1tI")),o=r(n("i8i4")),a=r(n("5pch")),i=r(n("96rG")),l=r(n("mbWs")),u=r(n("gmVs")),c=m(n("HEOz")),p=n("j8wP"),d=m(n("+jAD")),h=r(n("7xiW")),f=r(n("FGkX"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{SignificantFigures:v,displaySigFigs:y}=f.default,b=function(e){return new v(e).sigFigs};t.countSigfigs=b;t.sigfigPrint=function(e,t){return y(e,t,-10,!1)};class w extends s.Component{constructor(...e){super(...e),this._showError=()=>{if(""===this.props.value)return;const e=(0,i.default)(o.default.findDOMNode(this.refs.error));e.is(":visible")||e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)},this._hideError=()=>{const e=(0,i.default)(o.default.findDOMNode(this.refs.error));e.is(":visible")&&e.animate({top:50,opacity:.1},300,(function(){(0,i.default)(this).hide()}))},this.change=(...e)=>d.change.apply(this,e),this.handleBlur=()=>{this.props.onBlur([]),clearTimeout(this._errorTimeout),l.default.unitParse(this.props.value).parsed||this._showError()},this.handleChange=e=>{this._hideError(),this.props.onChange({value:e.target.value})},this.simpleValidate=(e,t)=>(t=t||function(){},w.validate(this.getUserInput(),e)),this.getUserInput=()=>this.props.value,this.getInputPaths=()=>[[]],this.focusInputPath=e=>{const t=o.default.findDOMNode(this.refs.input);t&&t.focus()},this.handleFocus=()=>{this.props.onFocus([])},this.blurInputPath=e=>{const t=o.default.findDOMNode(this.refs.input);t&&t.blur()},this.setInputValue=(e,t,n)=>{this.props.onChange({value:t},n)},this.getDOMNodeForPath=()=>o.default.findDOMNode(this.refs.input),this.getGrammarTypeForPath=e=>"unit"}static validate(e,t){const n=l.default.unitParse(t.value).expr,r=l.default.unitParse(e);if(!r.parsed)return{type:"invalid",message:c._("I couldn't understand those units.")};let s=null;const o=t.sigfigs,i=b(r.coefficient)===o;let u,p;i||(s=c._("Check your significant figures."));try{const e=new l.default.Var("x"),t=new l.default.Eq(n.simplify(),"=",new l.default.Mul(e,r.expr.simplify())).solveLinearEquationForVariable(e);u=Number(t.eval()).toPrecision(o)===Number(1).toPrecision(o)}catch(e){u=!1}u||(s=c._("That answer is numerically incorrect."));const d=x(r.expr.simplify()),h=x(n.simplify());p="all"===t.accepting?l.default.compare(d,h).equal:(0,a.default)(t.acceptingUnits).any((e=>{const t=x(l.default.unitParse(e).unit.simplify());return l.default.compare(t,d).equal})),p||(s=c._("Check your units."));return{type:"points",earned:p&&u&&i?1:0,total:1,message:s}}render(){const e=this.props.apiOptions.staticRender?s.createElement(h.default,{onChange:this.handleChange,ref:"input",className:p.ClassNames.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur}):s.createElement("input",{onChange:this.handleChange,ref:"input",className:p.ClassNames.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return s.createElement("div",{className:"old-unit-input"},e,s.createElement("div",{ref:"error",className:"error",style:{display:"none"}},c._("I don't understand that")))}componentDidUpdate(){clearTimeout(this._errorTimeout),l.default.unitParse(this.props.value).parsed?this._hideError():this._errorTimeout=setTimeout(this._showError,2e3)}componentWillUnmount(){clearTimeout(this._errorTimeout)}}w.defaultProps={apiOptions:p.ApiOptions.defaults,value:""};const x=function(e){return e.simplify().asMul().partition()[1].flatten().simplify()};var E={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:w,transform:e=>(0,u.default)(e).del(["value"]).freeze(),version:{major:0,minor:1},hidden:!0};t.default=E},KGvg:function(e,t,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const s={onRendered:e=>{}};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")).createContext(s);t.default=o},KOBE:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("i8i4")),a=r(n("fhzG")),i=r(n("17x9")),l=r(n("ZWnV")),u=n("mR6N");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var p=(0,a.default)({displayName:"MultiButtonGroup",propTypes:{values:i.default.arrayOf(i.default.any),buttons:i.default.arrayOf(i.default.shape({value:i.default.any.isRequired,content:i.default.node,title:i.default.string})).isRequired,onChange:i.default.func.isRequired,allowEmpty:i.default.bool},getDefaultProps:function(){return{values:[],allowEmpty:!0}},focus:function(){return o.default.findDOMNode(this).focus(),!0},toggleSelect:function(e){const t=(this.props.values||[]).slice(0),n=this.props.allowEmpty;t.indexOf(e)>=0&&(t.length>1||n)?t.splice(t.indexOf(e),1):t.indexOf(e)<0&&t.push(e),this.props.onChange(t)},render:function(){const e=this.props.values||[],t=this.props.buttons.map(((t,n)=>{const r=e.indexOf(t.value)>=0;return s.createElement("button",{title:t.title,type:"button",id:""+n,key:""+n,ref:"button"+n,className:(0,u.css)(l.default.button.buttonStyle,r&&l.default.button.selectedStyle),onClick:this.toggleSelect.bind(this,t.value)},t.content||""+t.value)}));return s.createElement("div",{style:{display:"inline-block"}},t)}});t.default=p},KSWw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;function r(e,t,n,r){let s=e.symbol;if("C"===s&&1!==Object.keys(t).length&&(s=null),"1,0"===e.idx){const t=[0,0];return e.pos=t,e.baseAngle=-30+r,{type:"text",value:s,pos:t,idx:e.idx}}const o=t[e.connections.find((function(e){return t[e].pos}))],a=o.connections.indexOf(e.idx);let i=60,l=120;4===o.connections.length?(l=90,i=90):(n.find((t=>"triple"===t.bondType&&t.to===e.idx))||n.find((e=>"triple"===e.bondType&&e.to===o.idx)))&&(l=0,i=0);let u=0;const c=o.idx.split(":"),p=c[c.length-1].split(",")[0];u=parseInt(p)%2!=0?o.baseAngle-(i-l*a):o.baseAngle+(i-l*a);const d=function(e,t,n){const r=e[0],s=e[1];return[r+Math.cos(2*t*Math.PI/360)*n,s+-1*Math.sin(2*t*Math.PI/360)*n]}(o.pos,u,30);return e.pos=d,e.baseAngle=u,{type:"text",value:s,pos:d,idx:e.idx}}function s(e,t){const n=function(e,t){let n=[e.pos[0],e.pos[1]],r=[t.pos[0],t.pos[1]];return"C"!==e.symbol&&(n=[t.pos[0]-.75*(t.pos[0]-e.pos[0]),t.pos[1]-.75*(t.pos[1]-e.pos[1])]),"C"!==t.symbol&&(r=[e.pos[0]-.75*(e.pos[0]-t.pos[0]),e.pos[1]-.75*(e.pos[1]-t.pos[1])]),[n,r]}(t[e.from],t[e.to]);return{type:"line:"+e.bondType,startPos:n[0],endPos:n[1]}}function o(e){return e.join(":")}function a(e,t,n){if(null===n)return[e,t];if("atom"===n.type){const r=o(n.idx);e[r]={idx:r,symbol:n.symbol,connections:[]},n.bonds&&n.bonds.forEach((function(n){const s=o(n.to.idx);e[r].connections.push(s),t.push({from:r,to:s,bondType:n.bondType}),a(e,t,n.to),e[s].connections.push(r)}))}return[e,t]}function i(e,t,n,s,o){if(0===t.length)return e;const a=t.shift(),l=n[a];return l.connections.forEach((function(e){n[e].pos||t.push(e)})),i(e.concat(r(l,n,s,o)),t,n,s,o)}function l(e,t,n){return 0===n.length?e:l(e.concat(s(n[0],t)),t,n.slice(1))}var u={layout:function(e,t){const n=a({},[],e),r=n[0],s=n[1];return l(i([],["1,0"],r,s,t),r,s)},_atomLayout:r,_bondLayout:s,_bondLength:30,_convertTree:a};t.default=u},KSpR:function(e,t,n){"use strict";!function(e,t,n,r){if(void 0!==e){var s="virtualMouseBindings",o="virtualTouchID",a="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),i="clientX clientY pageX pageY screenX screenY".split(" "),l=e.event.mouseHooks?e.event.mouseHooks.props:[],u=e.event.props.concat(l),c={},p=0,d=0,h=0,f=!1,g=[],m=!1,v=!1,y="addEventListener"in n,b=e(n),w=1,x=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var E=0;E<a.length;E++)e.event.special[a[E]]=W(a[E]);y&&n.addEventListener("click",(function(t){var n,r,s,a,i,l=g.length,u=t.target;if(l)for(n=t.clientX,r=t.clientY,threshold=e.vmouse.clickDistanceThreshold,s=u;s;){for(a=0;a<l;a++)if(i=g[a],0,s===u&&Math.abs(i.x-n)<threshold&&Math.abs(i.y-r)<threshold||e.data(s,o)===i.touchID)return t.preventDefault(),void t.stopPropagation();s=s.parentNode}}),!0)}function C(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function k(t){for(var n,r,o={};t;){for(r in n=e.data(t,s))n[r]&&(o[r]=o.hasVirtualBinding=!0);t=t.parentNode}return o}function O(){v=!0}function M(){v=!1}function P(){_(),p=setTimeout((function(){p=0,x=0,g.length=0,m=!1,O()}),e.vmouse.resetTimerDuration)}function _(){p&&(clearTimeout(p),p=0)}function S(t,n,r){var o;return(r&&r[t]||!r&&function(t,n){for(var r;t;){if((r=e.data(t,s))&&(!n||r[n]))return t;t=t.parentNode}return null}(n.target,t))&&(o=function(t,n){var r,s,o,a,l,c,p,d,h,f=t.type;if((t=e.Event(t)).type=n,r=t.originalEvent,s=e.event.props,f.search(/mouse/)>-1&&(s=u),r)for(p=s.length;p;)t[a=s[--p]]=r[a];if(f.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==f.search(/^touch/)&&(f=(o=C(r)).touches,l=o.changedTouches,c=f&&f.length?f[0]:l&&l.length?l[0]:void 0))for(d=0,h=i.length;d<h;d++)t[a=i[d]]=c[a];return t}(n,t),e(n.target).trigger(o)),o}function T(t){var n=e.data(t.target,o);if(!(m||x&&x===n)){var r=S("v"+t.type,t);r&&(r.isDefaultPrevented()&&t.preventDefault(),r.isPropagationStopped()&&t.stopPropagation(),r.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function I(t){var n,r,s=C(t).touches;if(s&&1===s.length&&(r=k(n=t.target)).hasVirtualBinding){x=w++,e.data(n,o,x),_(),M(),f=!1;var a=C(t).touches[0];d=a.pageX,h=a.pageY,S("vmouseover",t,r),S("vmousedown",t,r)}}function N(e){v||(f||S("vmousecancel",e,k(e.target)),f=!0,P())}function R(t){if(!v){var n=C(t).touches[0],r=o,s=e.vmouse.moveDistanceThreshold,o=o||Math.abs(n.pageX-d)>s||Math.abs(n.pageY-h)>s,a=k(t.target);o&&!r&&S("vmousecancel",t,a),S("vmousemove",t,a),P()}}function A(e){if(!v){O();var t,n=k(e.target);if(S("vmouseup",e,n),!f){var r=S("vclick",e,n);r&&r.isDefaultPrevented()&&(t=C(e).changedTouches[0],g.push({touchID:x,x:t.clientX,y:t.clientY}),m=!0)}S("vmouseout",e,n),f=!1,P()}}function j(t){var n,r=e.data(t,s);if(r)for(n in r)if(r[n])return!0;return!1}function D(){}function W(t){var n=t.substr(1);return{setup:function(r,o){j(this)||e.data(this,s,{}),e.data(this,s)[t]=!0,c[t]=(c[t]||0)+1,1===c[t]&&b.bind(n,T),e(this).bind(n,D),y&&(c.touchstart=(c.touchstart||0)+1,1===c.touchstart&&b.bind("touchstart",I).bind("touchend",A).bind("touchmove",R).bind("scroll",N))},teardown:function(r,o){--c[t],c[t]||b.unbind(n,T),y&&(--c.touchstart,c.touchstart||b.unbind("touchstart",I).unbind("touchmove",R).unbind("touchend",A).unbind("scroll",N));var a=e(this),i=e.data(this,s);i&&(i[t]=!1),a.unbind(n,D),j(this)||a.removeData(s)}}}}(window.jQuery,window,document)},KmI1:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("96rG")),o=n("QESs"),a=r(n("XwLL"));function i(e,t){const n=(0,s.default)(e).find("."+t);return 0===n.length?(0,s.default)("<span>").addClass(t).appendTo((0,s.default)(e)):n}function l(e,t){let n=0;!function r(){e.scrollHeight>18||n>=10?t():(n++,setTimeout(r,100))}()}var u={processMath:async function(e,t,n,r){const u=(0,s.default)(e);if(null==u.attr("data-math-formula")||n){const n=i(u,"katex-holder"),s=i(u,"mathjax-holder"),c=s.find("script[type='math/tex']")[0];null==t&&(u.attr("data-math-formula")?t=u.attr("data-math-formula"):c&&(t=c.text||c.textContent)),t=null!=t?t+"":"",t=a.default.cleanMath(t),u.attr("data-math-formula",t);const p=await(0,o.getDependencies)().getKaTeX();try{if(p.render(t,n[0],{colorIsTextColor:!0}),"mathjax"===u.attr("data-math-type")&&"undefined"!=typeof MathJax){const e=MathJax.Hub.getJaxFor(c);if(e){const t=e.SourceElement();t.previousSibling&&t.previousSibling.className&&e.Remove()}}return u.attr("data-math-type","katex"),void(r&&l(e,r))}catch(e){if((0,o.getDependencies)().logKaTeXError(t,e),e instanceof p.ParseError)throw e}u.attr("data-math-type","mathjax"),c?"text"in c?c.text=t:c.textContent=t:s.append("<script type='math/tex'>"+t.replace(/<\//g,"< /")+"<\/script>"),"undefined"!=typeof MathJax&&(MathJax.Hub.Queue(["Reprocess",MathJax.Hub,s[0]]),r&&MathJax.Hub.Queue((function(){const t=MathJax.Callback((function(){}));return l(e,(function(){r(),t()})),t})))}},cleanupMath:function(e){const t=(0,s.default)(e);if(t.attr("data-math-formula")){if("undefined"!=typeof MathJax){const e=MathJax.Hub.getJaxFor(t.find("script")[0]);if(e){const t=e.SourceElement();t.previousSibling&&t.previousSibling.className&&e.Remove()}}t.text(t.attr("data-math-formula")),t.attr("data-math-formula",null),t.attr("data-math-type",null)}return e},retrieveMathFormula:function(e){return(0,s.default)(e).attr("data-math-formula")}};t.default=u},L3IC:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("ydm1")),a=n("QESs"),i=n("+jAD"),l=r(n("16F6")),u=r(n("M++g"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}class p extends s.Component{constructor(...e){super(...e),this.change=e=>i.change.call(this,e)}render(){const{TeX:e}=(0,a.getDependencies)();return s.createElement("div",null,s.createElement("div",{className:"perseus-widget-row"},"Constraint:"," ",s.createElement(o.default,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})),"snap"===this.props.constraint&&s.createElement("div",{className:"perseus-widget-row"},"Snap:"," ",s.createElement(u.default,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})),"x"===this.props.constraint&&s.createElement("div",{className:"graph-settings"},s.createElement("div",{className:"perseus-widget-row"},s.createElement(e,null,"x=")," ",s.createElement(l.default,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"y"===this.props.constraint&&s.createElement("div",{className:"graph-settings"},s.createElement("div",{className:"perseus-widget-row"},s.createElement(e,null,"y=")," ",s.createElement(l.default,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"Ensure these are set so nothing can be dragged off the canvas:",s.createElement("div",{className:"perseus-widget-row"},s.createElement("div",{className:"perseus-widget-row"},s.createElement(e,null,"x \\in \\Large[")," ",s.createElement(l.default,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),s.createElement(e,null,", ")," ",s.createElement(l.default,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",s.createElement(e,null,"\\Large]"))),s.createElement("div",{className:"perseus-widget-row"},s.createElement("div",{className:"perseus-widget-row"},s.createElement(e,null,"y \\in \\Large[")," ",s.createElement(l.default,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),s.createElement(e,null,", ")," ",s.createElement(l.default,{buttonSets:[],buttonsVisible:"never",value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",s.createElement(e,null,"\\Large]"))))}}p.defaultProps={constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};var d=p;t.default=d},L6Cw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=u(n("q1tI")),a=u(n("+jAD")),i=r(n("cxY9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class c extends o.Component{constructor(...e){super(...e),this.handleAnswerChange=e=>{this.change({correct:e.target.value})},this.change=(...e)=>a.change.apply(this,e),this.focus=()=>(this.refs.input.focus(),!0),this.serialize=()=>i.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("label",null,"Correct answer:",o.createElement("input",{value:this.props.correct,onChange:this.handleAnswerChange,ref:"input"})))}}c.propTypes=(0,s.default)({},a.propTypes),c.widgetName="example-widget",c.defaultProps={correct:""};var p=c;t.default=p},L7Hz:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"unbalanced-code-delimiters",severity:s.default.Severity.ERROR,pattern:/[`~]+/,message:"Unbalanced code delimiters:\ncode blocks should begin and end with the same type and number of delimiters"});t.default=o},LU9M:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=d(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=n("mR6N"),l=d(n("UcaO")),u=r(n("APgo")),c=d(n("whzC"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const h={path:"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z",height:12,width:12};class f extends s.Component{constructor(...e){super(...e),this.state={tooltipAbove:!0},this.getPosition=()=>{const e=a.default.findDOMNode(this).getBoundingClientRect();this.setState({tooltipAbove:e.top>100})},this.renderLink=e=>{const t=this.state.tooltipAbove;let n,r,o;return 1===this.props.severity?(n=g.indicatorError,r="Error",o=g.publishBlockingError):2===this.props.severity?(n=g.indicatorWarning,r="Warning",o=g.warning):(n=g.indicatorGuideline,r="Recommendation",o=g.warning),s.createElement("a",{href:c.safeLinkTo(`https://khanacademy.org/r/linter-rules#${this.props.ruleName}`),target:"lint-help-window",className:(0,i.css)(e)},s.createElement("span",{className:(0,i.css)(g.indicator,n)},1===this.props.severity&&s.createElement(u.default,h)),s.createElement("div",{className:(0,i.css)(g.tooltip,t&&g.tooltipAbove)},this.props.message.split("\n\n").map(((e,t)=>s.createElement("p",{key:t,className:(0,i.css)(g.tooltipParagraph)},s.createElement("span",{className:(0,i.css)(o)},r,":"," "),e))),s.createElement("div",{className:(0,i.css)(g.tail,t&&g.tailAbove)})))}}componentDidMount(){this._positionTimeout=window.setTimeout(this.getPosition)}componentWillUnmount(){window.clearTimeout(this._positionTimeout)}render(){const{children:e,inline:t,blockHighlight:n,insideTable:r}=this.props;return r?t?s.createElement("span",{"data-lint-inside-table":"true"},e):s.createElement("div",{"data-lint-inside-table":"true"},e):n?s.createElement("span",{className:(0,i.css)(g.lintContainer,g.lintContainerBlock)},this.renderLink(g.radioWidgetHoverTarget),s.createElement("span",null,e)):t?s.createElement("span",{className:(0,i.css)(g.lintContainer)},this.renderLink(g.inlineHoverTarget),s.createElement("span",null,e)):s.createElement("div",{className:(0,i.css)(g.lintContainer)},this.renderLink(g.hoverTarget),s.createElement("div",null,e))}}f.propTypes={children:o.default.node,inline:o.default.bool,message:o.default.string.isRequired,ruleName:o.default.string.isRequired,insideTable:o.default.bool.isRequired,blockHighlight:o.default.bool,severity:o.default.number};const g=i.StyleSheet.create({lintContainer:{position:"relative"},lintContainerBlock:{display:"block"},hoverTarget:{position:"absolute",top:0,right:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:l.warningColorHover},":hover div":{display:"block"},":hover ~ div":{outline:"1px solid "+l.warningColor},":hover ~ div div[data-lint-inside-table]":{outline:"1px solid "+l.warningColor},":hover ~ div span[data-lint-inside-table]":{backgroundColor:l.warningColor,color:l.white}},inlineHoverTarget:{float:"right",position:"relative",marginRight:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:l.warningColorHover},":hover div":{display:"block"},":hover ~ span":{backgroundColor:l.warningColor,color:l.white}},radioWidgetHoverTarget:{position:"absolute",left:-40,display:"block",width:24,height:24,minWidth:264,":hover > span":{backgroundColor:l.warningColorHover},":hover > div":{display:"block",padding:8,width:280},":hover > div > div":{left:8},":hover ~ span":{backgroundColor:l.warningColor,color:l.white}},indicator:{alignItems:"center",borderRadius:4,color:"white",display:"flex",fontSize:12,height:8,justifyContent:"center",margin:8,width:8},indicatorError:{backgroundColor:"#be2612",borderRadius:8,height:16,width:16},indicatorWarning:{backgroundColor:"#f86700"},indicatorGuideline:{backgroundColor:"#ffbe26"},tooltip:{position:"absolute",right:-12,display:"none",zIndex:1e3,color:l.white,backgroundColor:l.gray17,opacity:.9,fontFamily:l.baseFontFamily,fontSize:"12px",lineHeight:"15px",width:"320px",borderRadius:"4px"},tooltipAbove:{bottom:32},tail:{position:"absolute",top:-12,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"12px solid "+l.gray17},tailAbove:{bottom:-12,borderBottom:"none",borderTop:"12px solid "+l.gray17,top:"auto"},tooltipParagraph:{margin:12},warning:{color:l.warningColor,fontFamily:l.boldFontFamily},publishBlockingError:{color:l.publishBlockingErrorColor}});var m=f;t.default=m},La43:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getClientRectsForTextInRange=function(e){const t=[];return i(e.commonAncestorContainer,e,t),t},t.getRelativePosition=a,t.getRelativeRect=function({left:e,top:t,width:n,height:r},o){return(0,s.default)({},a({left:e,top:t},o),{width:n,height:r})};var s=r(n("pVnL")),o=n("OgJR");function a(e,t){return{left:e.left-t.left,top:e.top-t.top}}function i(e,t,n){const r=new Range;if(r.selectNodeContents(e),e.nodeType===Node.TEXT_NODE){const s=(0,o.intersectRanges)(t,r);s&&function(e,t,n){const r=e.parentElement,s=window.getComputedStyle(r);let o=null;if("string"==typeof s.lineHeight&&s.lineHeight.endsWith("px")){const e=parseFloat(s.lineHeight);isNaN(e)||(o=e)}const a=Array.from(t.getClientRects());for(const e of a){const t={left:e.left,top:e.top,height:e.height,width:e.width};if(null!==o){const e=o-t.height;t.top-=e,t.height=o}n.push(t)}}(e,s,n)}else if(e.nodeType===Node.ELEMENT_NODE){if(!(0,o.rangesOverlap)(t,r))return;for(const r of Array.from(e.childNodes))i(r,t,n)}}},LeSj:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=w(n("q1tI")),a=r(n("17x9")),i=r(n("fhzG")),l=r(n("i8i4")),u=r(n("5pch")),c=w(n("+jAD")),p=r(n("ydm1")),d=r(n("qoj5")),h=r(n("ONox")),f=r(n("1SF4")),g=n("QESs"),m=r(n("uBl0")),v=r(n("XwLL")),y=n("UcaO");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const x={url:null,width:0,height:0};var E=(0,i.default)({displayName:"GraphSettings",propTypes:(0,s.default)({},c.propTypes,{editableSettings:a.default.arrayOf(a.default.oneOf(["canvas","graph","snap","image","measure"])),box:a.default.arrayOf(a.default.number),labels:a.default.arrayOf(a.default.string),range:a.default.arrayOf(a.default.arrayOf(a.default.number)),step:a.default.arrayOf(a.default.number),gridStep:a.default.arrayOf(a.default.number),snapStep:a.default.arrayOf(a.default.number),valid:a.default.oneOfType([a.default.bool,a.default.string]),backgroundImage:a.default.object,markings:a.default.oneOf(["graph","grid","none"]),showProtractor:a.default.bool,showRuler:a.default.bool,showTooltips:a.default.bool,rulerLabel:a.default.string,rulerTicks:a.default.number}),getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[y.interactiveSizes.defaultBoxSizeSmall,y.interactiveSizes.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:x,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},getInitialState:function(){return this.stateFromProps(this.props)},componentDidMount:function(){this._isMounted=!0,this.changeGraph=u.default.debounce(this.changeGraph,300)},UNSAFE_componentWillReceiveProps:function(e){u.default.isEqual(this.props.labels,e.labels)&&u.default.isEqual(this.props.gridStep,e.gridStep)&&u.default.isEqual(this.props.snapStep,e.snapStep)&&u.default.isEqual(this.props.step,e.step)&&u.default.isEqual(this.props.range,e.range)&&u.default.isEqual(this.props.backgroundImage,e.backgroundImage)||this.setState(this.stateFromProps(e))},componentWillUnmount:function(){this._isMounted=!1},stateFromProps:function(e){return{labelsTextbox:e.labels,gridStepTextbox:e.gridStep,snapStepTextbox:e.snapStep,stepTextbox:e.step,rangeTextbox:e.range,backgroundImage:u.default.clone(e.backgroundImage)}},change(...e){return c.change.apply(this,e)},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})},changeBackgroundUrl:function(e){if("keypress"===e.type&&"Enter"!==e.key)return;const t=(e,t,n)=>{const r=u.default.clone(this.props.backgroundImage);r.url=e,r.width=t,r.height=n,this.setState({backgroundImage:r},this.changeGraph)},n=l.default.findDOMNode(this.refs["bg-url"]).value;n?m.default.getImageSize(n,((e,r)=>{this._isMounted&&t(n,e,r)})):t(null,0,0)},renderLabelChoices:function(e){return u.default.map(e,(function(e){return o.createElement("option",{value:e[1]},e[0])}))},validRange:function(e){return u.default.every(e,(function(e){return u.default.isFinite(e)}))?!(e[0]>=e[1])||"Range must have a higher number on the right":"Range must be a valid number"},validateStepValue:function(e){const{step:t,range:n,name:r,minTicks:s,maxTicks:o}=e;if(!u.default.isFinite(t))return r+" must be a valid number";const a=function(e,t){return Math.floor((e[1]-e[0])/t)}(n,t);return a<s?r+" is too large, there must be at least "+s+" ticks.":!(a>o)||r+" is too small, there can be at most "+o+" ticks."},validSnapStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(e,t){return this.validateStepValue({step:e,range:t,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(e){if(!e.url)return!0;return!!(e.width<=450&&e.height<=450)||"Image must be smaller than 450px x 450px."},validateGraphSettings:function(e,t,n,r,s){const o=this;let a;if(!u.default.every(e,(function(e){return a=o.validRange(e),!0===a})))return a;if(!u.default.every(t,(function(t,n){return a=o.validStep(t,e[n]),!0===a})))return a;if(!u.default.every(n,(function(t,n){return a=o.validGridStep(t,e[n]),!0===a})))return a;if(!u.default.every(r,(function(t,n){return a=o.validSnapStep(t,e[n]),!0===a})))return a;const i=this.validBackgroundImageSize(s);return!0===i||(a=i,a)},changeLabel:function(e,t){const n=t.target.value,r=this.state.labelsTextbox.slice();r[e]=n,this.setState({labelsTextbox:r},this.changeGraph)},changeRange:function(e,t){const n=this.state.rangeTextbox.slice();n[e]=t;const r=this.state.stepTextbox.slice(),s=this.state.gridStepTextbox.slice(),o=this.state.snapStepTextbox.slice(),a=m.default.scaleFromExtent(n[e],this.props.box[e]);!0===this.validRange(n[e])&&(r[e]=m.default.tickStepFromExtent(n[e],this.props.box[e]),s[e]=m.default.gridStepFromTickStep(r[e],a),o[e]=s[e]/2),this.setState({stepTextbox:r,gridStepTextbox:s,snapStepTextbox:o,rangeTextbox:n},this.changeGraph)},changeStep:function(e){this.setState({stepTextbox:e},this.changeGraph)},changeSnapStep:function(e){this.setState({snapStepTextbox:e},this.changeGraph)},changeGridStep:function(e){this.setState({gridStepTextbox:e,snapStepTextbox:u.default.map(e,(function(e){return e/2}))},this.changeGraph)},changeGraph:function(){const e=this.state.labelsTextbox,t=u.default.map(this.state.rangeTextbox,(function(e){return u.default.map(e,Number)})),n=u.default.map(this.state.stepTextbox,Number),r=this.state.gridStepTextbox,s=this.state.snapStepTextbox,o=this.state.backgroundImage,a=this.validateGraphSettings(t,n,r,s,o);!0===a?this.change({valid:!0,labels:e,range:t,step:n,gridStep:r,snapStep:s,backgroundImage:o}):this.change({valid:a})},render:function(){const e=[v.default.roundTo(2,m.default.scaleFromExtent(this.props.range[0],this.props.box[0])),v.default.roundTo(2,m.default.scaleFromExtent(this.props.range[1],this.props.box[1]))],{TeX:t}=(0,g.getDependencies)();return o.createElement("div",null,u.default.contains(this.props.editableSettings,"canvas")&&o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},"Canvas size (x,y pixels)",o.createElement(f.default,{value:this.props.box,onChange:e=>{this.change({box:e})}})),o.createElement("div",{className:"perseus-widget-row"},"Scale (px per div):"," ",o.createElement(t,null,"("+e[0]+", "+e[1]+")"))),u.default.contains(this.props.editableSettings,"graph")&&o.createElement("div",{className:"graph-settings"},o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"}," ","x Label",o.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:e=>this.changeLabel(0,e),value:this.state.labelsTextbox[0]||""})),o.createElement("div",{className:"perseus-widget-right-col"},"y Label",o.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:e=>this.changeLabel(1,e),value:this.state.labelsTextbox[1]||""}))),o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},"x Range",o.createElement(f.default,{value:this.state.rangeTextbox[0],onChange:e=>this.changeRange(0,e)})),o.createElement("div",{className:"perseus-widget-right-col"},"y Range",o.createElement(f.default,{value:this.state.rangeTextbox[1],onChange:e=>this.changeRange(1,e)}))),o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},"Tick Step",o.createElement(f.default,{value:this.state.stepTextbox,onChange:this.changeStep})),o.createElement("div",{className:"perseus-widget-right-col"},"Grid Step",o.createElement(f.default,{value:this.state.gridStepTextbox,onChange:this.changeGridStep}))),u.default.contains(this.props.editableSettings,"snap")&&o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},"Snap Step",o.createElement(f.default,{value:this.state.snapStepTextbox,onChange:this.changeSnapStep}))),o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Markings: "),o.createElement(p.default,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})),o.createElement("div",{className:"perseus-widget-left-col"},o.createElement(h.default,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.change}))),u.default.contains(this.props.editableSettings,"image")&&o.createElement("div",{className:"image-settings"},o.createElement("div",null,"Background image:"),o.createElement("div",null,"Url:"," ",o.createElement("input",{type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url||"",onChange:e=>{const t=u.default.clone(this.props.backgroundImage);t.url=e.target.value,this.setState({backgroundImage:t})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),o.createElement(d.default,null,o.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.')))),u.default.contains(this.props.editableSettings,"measure")&&o.createElement("div",{className:"misc-settings"},o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},o.createElement(h.default,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.change})),o.createElement("div",{className:"perseus-widget-right-col"},o.createElement(h.default,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.change}))),this.props.showRuler&&o.createElement("div",null,o.createElement("div",null,o.createElement("label",null," ","Ruler label:"," ",o.createElement("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel},o.createElement("option",{value:""},"None"),o.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),o.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),o.createElement("div",null,o.createElement("label",null," ","Ruler ticks:"," ",o.createElement("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks},u.default.map([1,2,4,8,10,16],(function(e){return o.createElement("option",{value:e},e)}))))))))}});t.default=E},Lgby:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("ydm1")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}class i extends o.Component{render(){return o.createElement(s.default,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:o.createElement("span",null,"—")},{value:"->",content:o.createElement("span",null,"→")}],onChange:this.props.onChange})}}i.defaultProps={value:""};var l=i;t.default=l},"Lp/H":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.logKaTeXError=async function(e,t){if((0,o.isFileProtocol)(a.default.protocol)||i.default.isServerSide())return Promise.resolve();if(Math.random()>.01)return Promise.resolve();const{version:n}=await(0,l.getKaTeX)(),r=t.message,c=window.location.href,p=n+e+r+c;if(u.has(p))return Promise.resolve();return u.add(p),(0,s.khanFetch)("/api/internal/_mt/katex_error",{method:"POST",body:JSON.stringify({version:n,expression:e,error:r,page:c}),headers:{"Content-Type":"application/json"}})};var s=n("skGw"),o=n("PDH5"),a=r(n("8Kom")),i=r(n("FCtg")),l=n("yBUS");const u=new Set},Ls3g:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=n("6OHE"),l=r(n("23vA")),u=r(n("uBl0")),c=r(n("wINb"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}class d extends a.Component{constructor(...e){super(...e),this._markers=[],this.handleImageDoubleClick=e=>{e.preventDefault();const t=e.currentTarget.getBoundingClientRect(),n=Math.round((e.clientX-t.left)/t.width*1e3)/10,r=Math.round((e.clientY-t.top)/t.height*1e3)/10,{markers:s,onChange:o}=this.props;o([].concat(s,[{answers:[],label:"",x:n,y:r}]))}}openDropdownForMarkerIndices(e){e.forEach((e=>{this._markers[e]&&this._markers[e].openDropdown()}))}render(){const{choices:e,imageUrl:t,imageWidth:n,imageHeight:r,markers:i,onChange:p}=this.props;return a.createElement("div",null,a.createElement("div",{className:(0,o.css)(h.title)},"Markers"),a.createElement("div",{className:(0,o.css)(h.subtitle)},t?a.createElement("span",null,"Double-click on the image to add a marker.",a.createElement("br",null),a.createElement("br",null),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."):"Upload an image to place markers."),t&&a.createElement("div",{className:(0,o.css)(h.markersCanvas),style:{maxWidth:n,maxHeight:r}},a.createElement("img",{alt:"",className:(0,o.css)(h.image),src:(0,c.default)(u.default.getRealImageUrl(t)),onDoubleClick:this.handleImageDoubleClick}),i.map(((t,n)=>a.createElement(l.default,(0,s.default)({},t,{choices:e,key:`${t.x}.${t.y}`,onChange:e=>p([].concat(i.slice(0,n),[e],i.slice(n+1))),onRemove:()=>p([].concat(i.slice(0,n),i.slice(n+1))),ref:e=>this._markers[n]=e}))))))}}t.default=d;const h=o.StyleSheet.create({title:(0,s.default)({},i.typography.bodyXsmallBold,{marginBottom:6,color:i.colors.gray17}),subtitle:(0,s.default)({},i.typography.labelSmall,{marginBottom:12,color:i.colors.gray68}),markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}})},"M++g":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("8OQS")),a=r(n("TSYQ")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),l=r(n("17x9")),u=r(n("i8i4")),c=r(n("5pch")),p=r(n("96rG")),d=n("eAf/"),h=r(n("uBl0")),f=r(n("XwLL"));const g=["onFormatChange","checkValidity","useArrowKeys"];function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const{firstNumericalParse:v,captureScratchpadTouchStart:y}=h.default,b=f.default.toNumericString,w=f.default.getNumericFormat;class x extends i.Component{constructor(...e){super(...e),this.state={format:this.props.format},this.getValue=()=>this.parseInputValue(u.default.findDOMNode(this.refs.input).value),this.getStringValue=()=>u.default.findDOMNode(this.refs.input).value.toString(),this.parseInputValue=e=>{if(""===e){const e=this.props.placeholder;return c.default.isFinite(e)?+e:null}const t=v(e);return c.default.isFinite(t)?t:this.props.value},this.focus=()=>{u.default.findDOMNode(this.refs.input).focus(),this._handleFocus()},this.blur=()=>{u.default.findDOMNode(this.refs.input).blur(),this._handleBlur()},this.setSelectionRange=(e,t)=>{u.default.findDOMNode(this).setSelectionRange(e,t)},this.getSelectionStart=()=>u.default.findDOMNode(this).selectionStart,this.getSelectionEnd=()=>u.default.findDOMNode(this).selectionEnd,this._checkValidity=e=>{if(null==e)return!0;const t=v(e),n=this.props.checkValidity;return c.default.isFinite(t)&&n(t)},this._handleChange=e=>{const t=e.target.value,n=this.parseInputValue(t),r=w(t);this.props.onChange(n),r&&(this.props.onFormatChange(n,r),this.setState({format:r}))},this._handleFocus=()=>{this.props.onFocus&&this.props.onFocus()},this._handleBlur=e=>{e&&"keypress"===e.type&&13!==e.keyCode||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())},this._onKeyDown=e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.useArrowKeys||!c.default.contains(["ArrowUp","ArrowDown"],e.key))return;let t=this.getValue();t===Math.floor(t)&&("ArrowUp"===e.key?t+=1:"ArrowDown"===e.key&&(t-=1),this._checkValidity(t)&&this.props.onChange(t))},this._setValue=(e,t)=>{(0,p.default)(u.default.findDOMNode(this.refs.input)).val(b(e,t))}}render(){let e=(0,a.default)({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:"mini"===this.props.size,small:"small"===this.props.size,normal:"normal"===this.props.size});null!=this.props.className&&(e=e+" "+this.props.className);const t=this.props,n=(0,o.default)(t,g);return i.createElement("input",(0,s.default)({},n,{className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:y,defaultValue:b(this.props.value,this.state.format),value:void 0}))}componentDidUpdate(e){d.number.equal(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}}x.propTypes={value:l.default.number,format:l.default.string,placeholder:l.default.oneOfType([l.default.string,l.default.number]),onChange:l.default.func.isRequired,onFormatChange:l.default.func,checkValidity:l.default.func,size:l.default.string,label:l.default.oneOf(["put your labels outside your inputs!"])},x.defaultProps={value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1};var E=x;t.default=E},MG0i:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=r(n("TBZ3")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("UcaO"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const{zIndexAboveScratchpad:l,zIndexInteractiveComponent:u,radioBorderColor:c,checkedColor:p,circleSize:d,radioMarginWidth:h}=a;var f=s.StyleSheet.create({perseusInteractive:{zIndex:u,position:"relative"},aboveScratchpad:{position:"relative",zIndex:l},blankBackground:{backgroundColor:"#FDFDFD"},perseusSrOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1},responsiveLabel:{[o.default.smOrSmaller]:{fontSize:14,lineHeight:1.3},[o.default.md]:{fontSize:17,lineHeight:1.4},[o.default.lgOrLarger]:{fontSize:20,lineHeight:1.4}},responsiveInput:{display:"inline-block",WebkitAppearance:"none",appearance:"none","::-ms-check":{display:"none"},backgroundColor:"#fff",border:"2px solid #fff",boxShadow:`0 0px 0px 1px ${c}`,outline:"none",boxSizing:"border-box",flexShrink:0,marginBottom:1,marginLeft:1,marginRight:1,marginTop:1,height:d-2,width:d-2},responsiveRadioInput:{borderRadius:"50%",":checked":{backgroundColor:p,border:"none",borderRadius:"50%",boxShadow:`inset 0px 0px 0px 2px white, 0 0px 0px 2px ${p}`,marginTop:h,marginBottom:h,marginLeft:h,marginRight:h,height:d-2*h,width:d-2*h}},responsiveRadioInputActive:{backgroundColor:"#fff",border:"2px solid #fff",borderRadius:"50%",boxShadow:`0 0px 0px 2px ${p}`,marginTop:h,marginBottom:h,marginLeft:h,marginRight:h,height:d-2*h,width:d-2*h,":checked":{backgroundColor:"#fff"}},disableTextSelection:{userSelect:"none"}});t.default=f},N0Hx:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=r(n("wa3X")),l=n("6OHE"),u=r(n("LEdJ"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const p=o.StyleSheet.create({title:(0,s.default)({},l.typography.bodyXsmallBold,{marginBottom:6,color:l.colors.gray17}),components:{display:"flex"},spacer:{width:16},btn:{minWidth:90}});var d=({onChange:e,url:t})=>a.createElement("div",null,a.createElement("div",{className:(0,o.css)(p.title)},"Image"),a.createElement("div",{className:(0,o.css)(p.components)},a.createElement(u.default,{placeholder:"URL",grow:1,onChange:t=>e(t.target.value),value:t}),a.createElement("div",{className:(0,o.css)(p.spacer)}),a.createElement(i.default,{disabled:!t,"aria-label":t?"":"Not implemented. Use the 'Add Image' button in the editor to upload image, then copy the URL here.",onClick:()=>e(""),style:p.btn},t?"Remove":"Upload")));t.default=d},N2wX:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TouchIgnoreTimeout=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=(r(n("5pch")),y(n("q1tI"))),i=r(n("17x9")),l=r(n("TSYQ")),u=n("j8wP"),c=r(n("MG0i")),p=y(n("UcaO")),d=r(n("TBZ3")),h=r(n("Akm+")),f=r(n("GLX1")),g=r(n("TOec")),m=r(n("lCk0"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const b={backgroundColor:p.satSelectedBackgroundColor,outline:`2px solid ${p.satBlue}`,zIndex:1},w="16px 16px",x="12px 16px";t.TouchIgnoreTimeout=10;class E extends a.Component{constructor(...e){super(...e),this.state={isInputFocused:!1,isInputActive:!1},this.onInputFocus=()=>{this.setState({isInputFocused:!0})},this.onInputBlur=()=>{this.setState({isInputFocused:!1})},this.onInputMouseDown=e=>{"mousedown"===e.type&&this.justFinishedTouch||(this.setState({isInputActive:!0}),this.props.apiOptions.satStyling&&this._input&&this._input.focus())},this.onInputMouseUp=e=>{if("mouseup"!==e.type||!this.justFinishedTouch){if("touchend"===e.type)return this.justFinishedTouch=!0,null!=this.justFinishedTimeoutID&&clearTimeout(this.justFinishedTimeoutID),void(this.justFinishedTimeoutID=setTimeout((()=>{this.setState({isInputActive:!1}),this.justFinishedTouch=!1}),10));this.setState({isInputActive:!1}),this.props.apiOptions.satStyling&&this._input&&this._input.focus()}},this.onInputMouseOut=()=>{this.setState({isInputActive:!1})},this.inputRef=e=>{this._input=e},this.renderOptionStatus=()=>{const{correct:e,checked:t,crossedOut:n,reviewMode:r,previouslyAnswered:s}=this.props;return this.props.apiOptions.satStyling?null:r||s?a.createElement(g.default,{checked:t,correct:e,crossedOut:n,previouslyAnswered:s}):null},this.renderChoiceIcon=()=>{const{radioStyleVersion:e,primaryProductColor:t}=this.props.apiOptions.styling;return void 0!==e&&"final"===e||this.props.apiOptions.satStyling?a.createElement(f.default,{pos:this.props.pos,correct:this.props.correct,crossedOut:this.props.crossedOut,pressed:this.state.isInputActive,focused:this.state.isInputFocused,checked:this.props.checked,showCorrectness:this.props.showCorrectness,reviewMode:this.props.reviewMode,product:this.props.apiOptions.satStyling?"sat":"library",primaryProductColor:t,previouslyAnswered:this.props.previouslyAnswered}):null},this._setChecked=e=>{e?this._sendChange({checked:!0,crossedOut:!1}):this._sendChange({checked:!1})},this._setCrossedOut=e=>{e?this._sendChange({checked:!1,crossedOut:!0}):this._sendChange({crossedOut:!1})},this._sendChange=e=>{const t=null!=e.checked?e.checked:this.props.checked,n=null!=e.crossedOut?e.crossedOut:this.props.crossedOut;this.props.onChange({checked:t,crossedOut:n})},this.focusInput=()=>{var e;null==(e=this._input)||e.focus()}}UNSAFE_componentWillUpdate(e){this.state.isInputFocused&&e.disabled&&this.setState({isInputFocused:!1})}componentWillUnmount(){null!=this.justFinishedTimeoutID&&clearTimeout(this.justFinishedTimeoutID)}render(){const e=this.props.apiOptions.satStyling,t=this.props.apiOptions.isMobile,{radioStyleVersion:n}=this.props.apiOptions.styling,r=void 0!==n&&"final"===n,i=(0,l.default)(this.props.className,"checkbox-label",(0,o.css)(C.label,t&&c.default.disableTextSelection,!e&&C.responsiveLabel,e&&C.satLabel)),p=(0,l.default)((0,o.css)(this.state.isInputFocused&&C.satDescriptionInputFocused,this.state.isInputActive&&C.satDescriptionInputActive)),d=this.props.showCorrectness&&!this.props.correct,f=this.props.checked&&!d,g={type:this.props.type,name:this.props.groupName,id:`${this.props.groupName}-choice-${this.props.pos}`,checked:f,disabled:this.props.disabled,onFocus:this.onInputFocus,onBlur:this.onInputBlur,className:(0,o.css)(!r&&c.default.perseusInteractive,!r&&C.input,!r&&c.default.responsiveInput,!r&&!e&&c.default.responsiveRadioInput,!r&&!e&&this.state.isInputActive&&c.default.responsiveRadioInputActive,r&&c.default.perseusSrOnly,e&&c.default.perseusSrOnly,e&&this.props.reviewMode&&C.satReviewInput)};let v=null;v="radio"===this.props.type?a.createElement(h.default,(0,s.default)({onChecked:e=>this._setChecked(e),goToPrevChoice:this.props.goToPrevChoice,goToNextChoice:this.props.goToNextChoice,inputRef:this.inputRef},g)):a.createElement("input",(0,s.default)({onChange:e=>this._setChecked(e.target.checked),ref:this.inputRef},g));const{reviewMode:y,correct:b,checked:w}=this.props,x=e&&y&&b,E=e&&y&&!b&&w,k=(0,l.default)("description",x&&"sat-correct",E&&"sat-incorrect",(0,o.css)(!e&&C.description,e&&C.satDescription,x&&C.satDescriptionCorrect,x&&w&&C.satDescriptionCorrectChecked,E&&C.satDescriptionIncorrectChecked)),O=(0,l.default)("checkbox",(0,o.css)(c.default.perseusInteractive,!e&&C.choiceIconWrapper,e&&C.satCheckboxOptionContent)),M=(0,l.default)("checkbox-and-option",(0,o.css)(!e&&C.intermediateResponsiveCheckbox,!e&&y&&C.intermediateResponsiveCheckboxReview)),P=(0,l.default)("perseus-radio-rationale-content",(0,o.css)(C.rationale,!e&&C.nonSatRationale,e&&C.satReviewRationale)),_=this.props.editMode?"div":"label",S=this.props.apiOptions.crossOutEnabled&&!this.props.showCorrectness,T=!e&&!y&&this.props.apiOptions.readOnly||S&&this.props.crossedOut;return a.createElement("div",{className:e?p:void 0},a.createElement(m.default,{enabled:S,pos:this.props.pos,primaryProductColor:this.props.apiOptions.styling.primaryProductColor,crossedOut:this.props.crossedOut,onCrossedOutChange:this._setCrossedOut,isSatProduct:e},a.createElement(_,{htmlFor:this.props.editMode?void 0:g.id,className:i,style:{opacity:T?.5:1}},a.createElement("div",{className:k,onMouseDown:this.onInputMouseDown,onMouseUp:this.onInputMouseUp,onMouseOut:this.onInputMouseOut,onTouchStart:this.onInputMouseDown,onTouchEnd:this.onInputMouseUp},a.createElement("div",{className:M},a.createElement("span",{className:O},v,this.renderChoiceIcon()),a.createElement("span",{className:(0,l.default)(u.ClassNames.RADIO.OPTION_CONTENT,u.ClassNames.INTERACTIVE,(0,o.css)(e&&C.satRadioOptionContent,e&&y&&C.satReviewRadioOptionContent)),style:{cursor:"default"}},a.createElement("div",{className:(0,o.css)(C.optionStatusContainer)},this.renderOptionStatus()),a.createElement("div",null,this.props.content))),this.props.showRationale&&a.createElement("div",{className:P,"data-test-id":`perseus-radio-rationale-content-${this.props.pos}`},this.props.rationale)))))}}E.propTypes={apiOptions:i.default.shape({satStyling:i.default.bool,isMobile:i.default.bool,styling:i.default.shape({radioStyleVersion:i.default.oneOf(["intermediate","final"]),primaryProductColor:i.default.string}),readOnly:i.default.bool}),checked:i.default.bool,className:i.default.string,rationale:i.default.node,content:i.default.node,correct:i.default.bool,deselectEnabled:i.default.bool,disabled:i.default.bool,editMode:i.default.bool,groupName:i.default.string,isLastChoice:i.default.bool,pos:i.default.number,reviewMode:i.default.bool,showRationale:i.default.bool,showCorrectness:i.default.bool,type:i.default.string,crossedOut:i.default.bool,previouslyAnswered:i.default.bool,onChange:i.default.func,goToPrevChoice:i.default.func.isRequired,goToNextChoice:i.default.func.isRequired},E.defaultProps={apiOptions:{styling:{}},checked:!1,classSet:{},correct:!1,disabled:!1,editMode:!1,onChange:function(){},showRationale:!1,type:"radio",pos:0,previouslyAnswered:!1};const C=o.StyleSheet.create({description:{display:"inline-block",width:"100%"},satDescription:{display:"block",position:"relative",boxSizing:"border-box",cursor:"pointer",marginLeft:0,padding:"17px 14px"},satDescriptionInputFocused:(0,s.default)({},b,{display:"block"}),satDescriptionInputActive:(0,s.default)({},b,{backgroundColor:p.satActiveBackgroundColor}),satDescriptionCorrect:{color:p.satCorrectColor},satDescriptionCorrectChecked:{backgroundColor:p.satCorrectBackgroundColor},satDescriptionIncorrectChecked:{color:p.satIncorrectColor,backgroundColor:p.satIncorrectBackgroundColor},input:{display:"inline-block",width:20,margin:3,marginLeft:-20,marginRight:0,float:"none"},satReviewInput:{pointerEvents:"none"},satRadioOptionContent:{userSelect:"text",display:"block",marginLeft:45,cursor:"inherit"},satReviewRadioOptionContent:{fontWeight:"bold"},satCheckboxOptionContent:{position:"absolute",display:"block",top:"50%",margin:"-16px 0 0 0",width:"auto"},choiceIconWrapper:{display:"flex",marginRight:12,flexShrink:0},optionStatusContainer:{display:"block"},rationale:{display:"block"},nonSatRationale:{padding:w,paddingTop:0,marginLeft:44,[d.default.smOrSmaller]:{padding:x,paddingTop:0}},satReviewRationale:{marginTop:13,marginLeft:45},label:{display:"block",transition:"opacity 0.2s ease-out"},responsiveLabel:{WebkitTapHighlightColor:"transparent",display:"flex",alignItems:"stretch"},satLabel:{cursor:"pointer"},intermediateResponsiveCheckbox:{display:"flex",alignItems:"center",padding:w,[d.default.smOrSmaller]:{padding:x}},intermediateResponsiveCheckboxReview:{alignItems:"flex-start"}});var k=E;t.default=k},NT9k:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("2BsJ"));n("4vmB");var o=s.default;t.default=o},NUXr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInteractiveBoxFromSizeClass=t.getClassFromWidth=t.containerSizeClass=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("UcaO"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const{interactiveSizes:o}=r,a={SMALL:"small",MEDIUM:"medium",LARGE:"large",XLARGE:"xlarge"};t.containerSizeClass=a;t.getClassFromWidth=e=>e?e<=512?a.SMALL:e<=688?a.MEDIUM:a.LARGE:a.MEDIUM;t.getInteractiveBoxFromSizeClass=e=>e===a.SMALL?[o.defaultBoxSizeSmall,o.defaultBoxSizeSmall]:[o.defaultBoxSize,o.defaultBoxSize]},"OJf/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMapper=function(){return new s(a,a,a)};var r=n("4PhQ");class s{constructor(e,t,n){this.content=e,this.hint=t,this.tags=n,this.array=a}setContentMapper(e){return new s(e,this.hint,this.tags)}setHintMapper(e){return new s(this.content,e,this.tags)}setTagsMapper(e){return new s(this.content,this.hint,e)}setArrayMapper(e){return new o(this.content,this.hint,this.tags,e)}mapTree(e,t){return i(e,t,[],this)}}class o{constructor(e,t,n,r){this.content=e,this.hint=t,this.tags=n,this.array=r}setArrayMapper(e){return new o(this.content,this.hint,this.tags,e)}mapTree(e,t){return i(e,t,[],this)}}function a(e){return e}function i(e,t,n,s){if("content"===t.type){const r=e;return s.content(r,t,n)}if("hint"===t.type){const r=e;return s.hint(r,t,n)}if("tags"===t.type){const r=e;return s.tags(r,t,n)}if("array"===t.type){const o=e;if(!Array.isArray(o))throw new r.KAError(`Invalid object of type "${typeof o}" found at path ${["<root>"].concat(n).join(".")}. Expected array.`,r.Errors.Internal);const a=t.elementShape,l=o.map(((e,t)=>i(e,a,n.concat(t),s)));return s.array(l,o,t,n)}if("object"===t.type){const o=e;if(o&&"object"!=typeof o)throw new r.KAError(`Invalid object of type "${typeof o}" found at path ${["<root>"].concat(n).join(".")}. Expected "object" type.`,r.Errors.Internal);const a=t.shape;if(!a)throw new r.KAError(`Unexpected shape ${JSON.stringify(t)} at path ${["<root>"].concat(n).join(".")}.`,r.Errors.Internal);const l={};return Object.keys(a).forEach((e=>{if(!(e in o))throw new r.KAError(`Key "${e}" is missing from shape at path ${["<root>"].concat(n).join(".")}.`,r.Errors.Internal);l[e]=i(o[e],a[e],n.concat(e),s)})),l}throw new r.KAError(`unexpected shape type ${t.type}`,r.Errors.Internal)}},ONox:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("fhzG")),i=r(n("5pch")),l=n("4PhQ");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var c=(0,a.default)({displayName:"PropCheckBox",propTypes:{labelAlignment:o.default.oneOf(["left","right"])},DEFAULT_PROPS:{label:null,onChange:null,labelAlignment:"left"},getDefaultProps:function(){return this.DEFAULT_PROPS},propName:function(){const e=i.default.find(i.default.keys(this.props),(function(e){return!i.default.has(this.DEFAULT_PROPS,e)}),this);if(!e)throw new l.KAError("Attempted to create a PropCheckBox with no prop!",l.Errors.Internal);return e},_labelAlignLeft:function(){return"left"===this.props.labelAlignment},render:function(){const e=this.propName();return s.createElement("label",null,this._labelAlignLeft()&&this.props.label,s.createElement("input",{type:"checkbox",checked:this.props[e],onChange:this.toggle}),!this._labelAlignLeft()&&this.props.label)},toggle:function(){const e=this.propName(),t={};t[e]=!this.props[e],this.props.onChange(t)}});t.default=c},OgJR:function(e,t,n){"use strict";function r(e,t,n,r){let s;return s="start"===t&&"start"===r?Range.START_TO_START:"start"===t&&"end"===r?Range.END_TO_START:"end"===t&&"start"===r?Range.START_TO_END:Range.END_TO_END,e.compareBoundaryPoints(s,n)}function s(e,t){const n=e.cloneRange();return n.setEnd(t.endContainer,t.endOffset),n}function o(e,t){return!(r(e,"end",t,"start")<0||r(t,"end",e,"start")<0)}function a(e,t,n,s,o){let a=-1,i=s,l=o,u=0;for(;i<=l;){if(u++,u>2*t.length)throw new Error(`Assertion error: Binary search isn't terminating? lower=${i}, upper=${l}`);const s=Math.floor((i+l)/2);if("first"===n){r(t[s],"end",e,"start")<=0?i=s+1:(a=s,l=s-1)}else{r(t[s],"start",e,"end")>=0?l=s-1:(a=s,i=s+1)}}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.findFirstAndLastWordIndexes=function(e,t){const n=a(e,t,"first",0,t.length-1);if(n<0)return null;const r=a(e,t,"last",n,t.length-1);if(r<0)return null;return[n,r]},t.intersectRanges=function(e,t){if(!o(e,t))return null;const n=r(e,"start",t,"start")>0?e:t,a=r(e,"end",t,"end")<0?e:t;return s(n,a)},t.rangeIncludes=function(e,t){return r(e,"start",t,"start")<=0&&r(e,"end",t,"end")>=0},t.rangesOverlap=o,t.spanRanges=s,t.unionRanges=function(e,t){if(!o(e,t))return null;const n=r(e,"start",t,"start")<0?e:t,a=r(e,"end",t,"end")>0?e:t;return s(n,a)}},Ogi5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={apiVersion:{major:11,minor:0},itemDataVersion:{major:0,minor:1}}},Ojcu:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=g(n("+jAD")),u=r(n("cxY9")),c=r(n("qoj5")),p=r(n("M++g")),d=r(n("ONox")),h=r(n("1SF4"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const m={url:null,top:0,left:0};class v extends o.Component{constructor(...e){super(...e),this.className="perseus-widget-measurer",this.change=(...e)=>l.change.apply(this,e),this._changeUrl=e=>{this._changeImage("url",e.target.value)},this._changeTop=e=>{this._changeImage("top",e)},this._changeLeft=e=>{this._changeImage("left",e)},this._changeImage=(e,t)=>{const n=i.default.clone(this.props.image);n[e]=t,this.change("image",n)},this.renderLabelChoices=e=>i.default.map(e,(function(e){const[t,n]=e;return o.createElement("option",{key:n,value:n},t)})),this.serialize=()=>u.default.serialize.call(this)}render(){const e=i.default.extend({},m,this.props.image);return o.createElement("div",{className:"perseus-widget-measurer"},o.createElement("div",null,"Image displayed under protractor and/or ruler:"),o.createElement("div",null,"URL:"," ",o.createElement("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:e.url,onChange:this._changeUrl}),o.createElement(c.default,null,o.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.'))),e.url&&o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",{className:"perseus-widget-left-col"},"Pixels from top:"," ",o.createElement(p.default,{placeholder:0,onChange:this._changeTop,value:e.top,useArrowKeys:!0})),o.createElement("label",{className:"perseus-widget-right-col"},"Pixels from left:"," ",o.createElement(p.default,{placeholder:0,onChange:this._changeLeft,value:e.left,useArrowKeys:!0}))),o.createElement("div",null,"Containing area [width, height]:"," ",o.createElement(h.default,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})),o.createElement("div",{className:"perseus-widget-row"},o.createElement("div",{className:"perseus-widget-left-col"},o.createElement(d.default,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.props.onChange})),o.createElement("div",{className:"perseus-widget-right-col"},o.createElement(d.default,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.props.onChange}))),this.props.showRuler&&o.createElement("div",null,o.createElement("div",null,o.createElement("label",null," ","Ruler label:"," ",o.createElement("select",{onChange:e=>this.change("rulerLabel",e.target.value),value:this.props.rulerLabel},o.createElement("option",{value:""},"None"),o.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),o.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),o.createElement("div",null,o.createElement("label",null," ","Ruler ticks:"," ",o.createElement("select",{onChange:e=>this.change("rulerTicks",+e.target.value),value:this.props.rulerTicks},i.default.map([1,2,4,8,10,16],(function(e){return o.createElement("option",{key:e,value:e},e)}))))),o.createElement("div",null,o.createElement("label",null,"Ruler pixels per unit:"," ",o.createElement(p.default,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0}))),o.createElement("div",null,o.createElement("label",null,"Ruler length in units:"," ",o.createElement(p.default,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})))))}}v.widgetName="measurer",v.propTypes=(0,s.default)({},l.propTypes,{box:a.default.arrayOf(a.default.number),image:a.default.shape({url:a.default.string,top:a.default.number,left:a.default.number}),showProtractor:a.default.bool,showRuler:a.default.bool,rulerLabel:a.default.string,rulerTicks:a.default.number,rulerPixels:a.default.number,rulerLength:a.default.number}),v.defaultProps={box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10};var y=v;t.default=y},"P++F":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=r(n("Pwnf")),l=n("JimW"),u=r(n("gE8/")),c=r(n("6RhW")),p=n("j8wP"),d=r(n("Atlv"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}class f extends s.Component{componentDidMount(){this.props.trackInteraction()}render(){return s.createElement(l.View,{style:m.tooltipBody},s.createElement(d.default,{apiOptions:this.props.apiOptions,content:this.props.content,widgets:this.props.widgets}))}}f.propTypes={apiOptions:p.ApiOptions.propTypes,content:o.default.string,trackInteraction:o.default.func.isRequired,widgets:o.default.objectOf(o.default.any)};class g extends s.Component{constructor(...e){super(...e),this.getUserInput=()=>({}),this.simpleValidate=e=>g.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const e=s.createElement(f,{apiOptions:this.props.apiOptions,content:this.props.definition,key:this.props.definition,trackInteraction:this.props.trackInteraction,widgets:this.props.widgets});return s.createElement(c.default,{content:e,placement:"top"},s.createElement("span",{className:"perseus-widget-definition"},s.createElement(l.View,{style:m.definitionLink},this.props.togglePrompt)))}}g.defaultProps={togglePrompt:"define me",definition:"definition goes here"};const m={tooltipBody:{color:i.default.offBlack,display:"block",fontSize:20,fontWeight:500,lineHeight:"30px",margin:u.default.xSmall_8},definitionLink:{borderBottom:`dashed 1px ${i.default.blue}`,color:i.default.blue,cursor:"pointer",display:"inline-block",textDecoration:"none"}};var v={name:"definition",displayName:"Definition",accessible:!0,defaultAlignment:"inline",widget:g,transform:a.default.identity};t.default=v},P6VF:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=u(n("q1tI")),a=u(n("+jAD")),i=r(n("cxY9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const c=r(n("tDnH")).default.widget;class p extends o.Component{constructor(...e){super(...e),this.change=(...e)=>a.change.apply(this,e),this.handleChange=e=>{e.coord&&this.change({correct:e.coord})},this.serialize=()=>i.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement(c,{graph:this.props.graph,coord:this.props.correct,onChange:this.handleChange,apiOptions:this.props.apiOptions}))}}p.propTypes=(0,s.default)({},a.propTypes),p.widgetName="example-graphie-widget",p.defaultProps={correct:[4,4],graph:{box:[340,340],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}};var d=p;t.default=d},P76s:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=v(n("q1tI")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("96rG")),u=r(n("XDp7")),c=r(n("o0j1")),p=r(n("Atlv")),d=r(n("+lle")),h=n("dbvv"),f=n("zahm"),g=v(n("HEOz"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class y extends o.Component{measureLineHeight(){return"number"!=typeof this._cachedLineHeight&&this.forceMeasureLineHeight(),this._cachedLineHeight}forceMeasureLineHeight(){this.$body.text(" "),this._cachedLineHeight=(0,h.getLineHeightForNode)(this.$body,this.$end),this.$body.text("")}render(){return o.createElement("div",{className:(0,s.css)(b.measurer)},o.createElement("div",null,o.createElement("div",{ref:e=>this.$body=(0,l.default)(e),className:"paragraph"}),o.createElement("div",{ref:e=>this.$end=(0,l.default)(e)})))}}const b=s.StyleSheet.create({measurer:{position:"absolute",width:"100%",top:0,left:0}});class w extends o.Component{constructor(...e){super(...e),this.state={nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1},this._handleSerializedHighlightsUpdate=e=>{this.props.onChange({highlights:e})}}componentDidMount(){this._updateState(),this._onResize=i.default.throttle((()=>{this.shouldRenderJipt()||(this._lineHeightMeasurer.forceMeasureLineHeight(),this._updateState())}),500),window.addEventListener("resize",this._onResize),this._stylesAppiedTimer=window.setTimeout((()=>{this.setState({stylesAreApplied:!0})}),0)}shouldComponentUpdate(e,t){return!i.default.isEqual(this.props,e)||!i.default.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize),clearTimeout(this._stylesAppiedTimer)}_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){const e=(0,l.default)(a.default.findDOMNode(this.refs.content)).height(),t=this._getLineHeight();return Math.round(e/t)}_getInitialLineNumber(){let e=!0;return this.props.findWidgets(((t,n)=>"passage"===n.type&&(t===this.props.widgetId&&(e=!1),e))).map((e=>e.getLineCount())).reduce(((e,t)=>e+t),0)}_getLineHeight(){return this._lineHeightMeasurer.measureLineHeight()}getLineCount(){return null!=this.state.nLines?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){const t=d.default.START_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const r=(0,l.default)(a.default.findDOMNode(n));let s=r.next();0===s.length&&(s=r);const o=s.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(o)}_getEndRefLineNumber(e){const t=d.default.END_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const r=(0,l.default)(a.default.findDOMNode(n));let s=r.prev();0===s.length&&(s=r);const o=s.height(),i=s.offset().top;let u=this._convertPosToLineNumber(i+o);return 0===o&&(u+=1),this.state.startLineNumbersAfter+u}_convertPosToLineNumber(e){const t=e-(0,l.default)(a.default.findDOMNode(this.refs.content)).offset().top,n=this._getLineHeight();return Math.round(t/n)}_getRefContent(e){const t=d.default.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null}getReference(e){const t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(null==t||null==n)return null;return{startLine:t,endLine:n,content:this._getRefContent(e)}}getUserInput(){return null}simpleValidate(e){return w.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}_renderInstructions(e){const t=e.firstQuestionRef,n=e.firstSentenceRef;let r="";t&&(r+=g._("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),n&&(r+=g._(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"}));const s=d.default.parse(r);return o.createElement("div",{className:"perseus-widget-passage-instructions"},d.default.output(s))}shouldRenderJipt(){return u.default.useJIPT&&-1!==this.props.passageText.indexOf("crwdns")}_renderContent(e){const t=this.state.stylesAreApplied,n=!this.props.reviewModeRubric;return o.createElement(c.default,{editable:n,enabled:t,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.props.highlights},o.createElement("div",{ref:"content"},o.createElement(y,{ref:e=>this._lineHeightMeasurer=e}),d.default.output(e)))}_hasFootnotes(){const e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){const e=this.props.footnotes,t=d.default.parse(e);return d.default.output(t)}render(){let e;const t=this.state.nLines;this.props.showLineNumbers&&t&&(e=i.default.range(1,t+1).map((e=>{const t=e+this.state.startLineNumbersAfter;if(4===t){const e=g._("Line ");return o.createElement("span",{key:"line-marker",className:"line-marker"},e)}return o.createElement("span",{key:e},t)})));const n={firstSentenceRef:null,firstQuestionRef:null},r=this.props.passageText.replace(/("{1})([^"]*)("{1})/g,"“$2”"),s=d.default.parse(r,n),a=/\S/.test(this.props.passageTitle);return o.createElement("div",null,o.createElement("div",{className:"perseus-widget-passage-container"},this._renderInstructions(n),o.createElement("div",{className:"perseus-widget-passage"},a&&o.createElement("h3",{className:"passage-title"},o.createElement(p.default,{content:this.props.passageTitle,linterContext:this.props.linterContext})),e&&o.createElement("div",{className:"line-numbers","aria-hidden":!0},e),!a&&o.createElement("h3",{className:"perseus-sr-only"},g._("Beginning of reading passage.")),o.createElement("div",{className:"passage-text"},this.shouldRenderJipt()?o.createElement(p.default,{content:this.props.passageText}):this._renderContent(s)),this._hasFootnotes()&&[o.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},g._("Beginning of reading passage footnotes.")),o.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],o.createElement("div",{className:"perseus-sr-only"},g._("End of reading passage.")))))}}w.defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,highlights:{},linterContext:f.linterContextDefault};var x={name:"passage",displayName:"Passage (SAT only)",widget:w,transform:e=>i.default.pick(e,"passageTitle","passageText","footnotes","showLineNumbers"),isLintable:!0};t.default=x},P9IM:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=n("reBI"),l=r(n("Xb39"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const{Keypad:c}=i.components;var p={propTypes:{apiOptions:o.default.shape({customKeypad:o.default.bool,nativeKeypadProxy:o.default.func}),keypadStyle:o.default.any},getInitialState(){const e=this;let t=null;return e.props.apiOptions&&e.props.apiOptions.customKeypad&&e.props.apiOptions.nativeKeypadProxy&&(t=e.props.apiOptions.nativeKeypadProxy((()=>e.blur&&e.blur()))),{keypadElement:t}},componentDidMount(){const e=this;var t;e.props.apiOptions&&e.props.apiOptions.customKeypad&&!e.props.apiOptions.nativeKeypadProxy&&(e._keypadContainer=document.createElement("div"),null==(t=document.body)||t.appendChild(e._keypadContainer),(0,l.default)(s.createElement(c,{onElementMounted:t=>{e.setState({keypadElement:t})},onDismiss:()=>{e.blur&&e.blur()},style:e.props.keypadStyle}),e._keypadContainer))},componentWillUnmount(){const e=this;e._keypadContainer&&(a.default.unmountComponentAtNode(e._keypadContainer),e._keypadContainer.parentNode&&e._keypadContainer.parentNode.removeChild(e._keypadContainer),e._keypadContainer=null)},keypadElement(){return this.state.keypadElement}};t.default=p},PYx6:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"table-missing-cells",severity:s.default.Severity.WARNING,selector:"table",lint:function(e,t,n,r){const s=n[0],o=s.header.length,a=s.cells.map((e=>e.length));for(let e=0;e<a.length;e++)if(a[e]!==o)return`Table rows don't match header:\nThe table header has ${o} cells, but\nRow ${e+1} has ${a[e]} cells.`}});t.default=o},Pnbu:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("4Zwh")),o=r(n("Hpzc")),a=r(n("bxxM"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var l=function(e){s.registerWidgets(o.default),s.registerWidgets(a.default);return e.skipMathJax?Promise.resolve():new Promise(((e,t)=>{MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:"none","HTML-CSS":{availableFonts:["TeX"],imageFont:null,scale:100,showMathMenu:!1}}),MathJax.Hub.Configured(),MathJax.Hub.Queue(e)}))};t.default=l},Pqam:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=h(n("+jAD")),u=r(n("cxY9")),c=r(n("lQTD")),p=r(n("G6Ta"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){return o.createElement("div",{className:"perseus-widget-definition-editor"},o.createElement("a",{href:"https://docs.google.com/document/d/1udaPef4imOfTMhmLDlWq4SM0mxL0r3YHFZE-5J1uGfo",target:"_blank"},"Definition style guide"),o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Word to be defined:"," ",o.createElement(p.default,{value:this.props.togglePrompt,onChange:this.change("togglePrompt"),placeholder:"define me"}))),o.createElement("div",{className:"perseus-widget-row"},o.createElement(c.default,{apiOptions:this.props.apiOptions,content:this.props.definition,widgetEnabled:!1,placeholder:"definition goes here",onChange:e=>{const t={};i.default.has(e,"content")&&(t.definition=e.content),this.change(t)}})))}}f.propTypes=(0,s.default)({},l.propTypes,{togglePrompt:a.default.string,definition:a.default.string,apiOptions:a.default.any}),f.widgetName="definition",f.defaultProps={togglePrompt:"",definition:""};var g=f;t.default=g},"Q+eB":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=x(n("q1tI")),a=r(n("fhzG")),i=r(n("5pch")),l=x(n("+jAD")),u=r(n("cxY9")),c=r(n("ydm1")),p=r(n("lQTD")),d=n("/4Qb"),h=r(n("qoj5")),f=r(n("APgo")),g=r(n("KOBE")),m=r(n("M++g")),v=r(n("ONox")),y=r(n("G6Ta")),b=r(n("uBl0"));function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{firstNumericalParse:E}=b.default,C=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],k=e=>({value:null,status:e,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null});var O=(0,a.default)({displayName:"NumericInputEditor",propTypes:(0,s.default)({},l.propTypes),statics:{widgetName:"numeric-input"},getDefaultProps:function(){return{answers:[k("correct")],size:"normal",coefficient:!1,labelText:"",multipleNumberInput:!1,rightAlign:!1}},getInitialState:function(){return{lastStatus:"wrong",showOptions:i.default.map(this.props.answers,(()=>!1))}},render:function(){const e=this.props.answers,t=t=>o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Unsimplified answers are"),o.createElement(c.default,{value:e[t].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:this.updateAnswer(t,"simplify")}),o.createElement(h.default,null,o.createElement("p",null,'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'),o.createElement("p",null,'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),o.createElement("p",null,'Select "wrong" ',o.createElement("em",null,"only")," if we are specifically assessing the ability to simplify."))),n=t=>o.createElement("div",null,o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Choose the suggested answer formats"),o.createElement(g.default,{buttons:C,values:e[t].answerForms,onChange:this.updateAnswer(t,"answerForms")}),o.createElement(h.default,null,o.createElement("p",null,'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'),o.createElement("p",null,"To restrict the answer to ",o.createElement("em",null,"only"),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',o.createElement("b",null,"will not")," ","accept 1.75 as an answer."," "),o.createElement("p",null,"Unless you are testing that specific skill, please do not restrict the answer format."))),o.createElement("div",{className:"perseus-widget-row"},o.createElement(v.default,{label:"Strictly match only these formats",strict:e[t].strict,onChange:this.updateAnswer.bind(this,t)}))),r=t=>o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Max error"," ",o.createElement(m.default,{className:"max-error",value:e[t].maxError,onChange:this.updateAnswer(t,"maxError"),placeholder:"0"}))),s=o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Width: "),o.createElement(c.default,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),o.createElement(h.default,null,o.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))),a=o.createElement("div",{className:"perseus-widget-row"},o.createElement(v.default,{label:"Right alignment",rightAlign:this.props.rightAlign,onChange:this.props.onChange})),l=o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Label text:"," ",o.createElement(y.default,{value:this.props.labelText,onChange:this.change("labelText")})),o.createElement(h.default,null,o.createElement("p",null,"Text to describe this input. This will be shown to users using screenreaders."))),u=o.createElement("div",null,o.createElement("div",{className:"perseus-widget-row"},o.createElement(v.default,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),o.createElement(h.default,null,o.createElement("p",null,"A coefficient style number allows the student to use - for -1 and an empty string to mean 1.")))),b=o.createElement("div",null,o.createElement("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:()=>this.addAnswer(),onKeyDown:e=>this.onSpace(e,this.addAnswer)},o.createElement("span",null,"Add new answer"))),w={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"};return o.createElement("div",{className:"perseus-input-number-editor"},o.createElement("div",{ref:e=>this.multInputOption=e},o.createElement("select",{onChange:this.onMultipleInputChange},o.createElement("option",{value:"simple-numeric-input"},"Ask for one correct solution"),o.createElement("option",{value:"multiple-numeric-input"},"Ask for all correct solutions"))),o.createElement("div",{className:"ui-title"},"User input"),o.createElement("div",{className:"msg-title"},"Message shown to user on attempt"),(()=>e.map(((s,a)=>{const l=o.createElement(p.default,{apiOptions:this.props.apiOptions,content:s.message||"",placeholder:"Why is this answer "+s.status+"?\t"+w[s.status],widgetEnabled:!1,onChange:e=>{"content"in e&&this.updateAnswer(a,{message:e.content})}});return o.createElement("div",{className:"perseus-widget-row",key:a},o.createElement("div",{className:"input-answer-editor-value-container"+(s.maxError?" with-max-error":"")},o.createElement(m.default,{value:s.value,className:"numeric-input-value",placeholder:"answer",format:i.default.last(s.answerForms),onFormatChange:(e,t)=>{let n;"pi"===t?n=["pi"]:"mixed"===t?n=["proper","mixed"]:"proper"!==t&&"improper"!==t||(n=["proper","improper"]),this.updateAnswer(a,{value:E(e),answerForms:n})},onChange:e=>{this.updateAnswer(a,{value:E(e)})}}),s.strict&&o.createElement("div",{className:"is-strict-indicator",title:"strictly equivalent to"},"≡"),"required"!==s.simplify&&"correct"===s.status&&o.createElement("div",{className:"simplify-indicator "+s.simplify,title:"accepts unsimplified answers"},"‰"),s.maxError?o.createElement("div",{className:"max-error-container"},o.createElement("div",{className:"max-error-plusmn"},"±"),o.createElement(m.default,{placeholder:0,value:e[a].maxError,format:i.default.last(s.answerForms),onChange:this.updateAnswer(a,"maxError")})):null,o.createElement("div",{className:"value-divider"}),o.createElement("a",{href:"javascript:void(0)",className:"answer-status "+s.status,onClick:()=>this.onStatusChange(a),onKeyDown:e=>this.onSpace(e,this.onStatusChange,a)},s.status),o.createElement("a",{href:"javascript:void(0)",className:"answer-trash",onClick:()=>this.onTrashAnswer(a),onKeyDown:e=>this.onSpace(e,this.onTrashAnswer,a)},o.createElement(f.default,d.iconTrash)),o.createElement("a",{href:"javascript:void(0)",className:"options-toggle",onClick:()=>this.onToggleOptions(a),onKeyDown:e=>this.onSpace(e,this.onToggleOptions,a)},o.createElement(f.default,d.iconGear))),o.createElement("div",{className:"input-answer-editor-message"},l),this.state.showOptions[a]&&o.createElement("div",{className:"options-container"},r(a),"correct"===s.status&&t(a),n(a)))})))(),b,s,a,u,l)},change(...e){return l.change.apply(this,e)},onToggleOptions:function(e){const t=this.state.showOptions.slice();t[e]=!t[e],this.setState({showOptions:t})},onTrashAnswer:function(e){if(e>=0&&e<this.props.answers.length){const t=this.props.answers.slice(0);t.splice(e,1),this.props.onChange({answers:t})}},onSpace:function(e,t){if(" "===e.key){e.preventDefault();const n=i.default.toArray(arguments).slice(2);t.apply(this,n)}},onStatusChange:function(e){const t=["wrong","ungraded","correct"],n=this.props.answers,r=t[(i.default.indexOf(t,n[e].status)+1)%t.length];this.updateAnswer(e,{status:r,simplify:"correct"===r?"required":"accepted"})},onMultipleInputChange:function(e){"multiple-numeric-input"===e.target.value?this.props.onChange({multipleNumberInput:!0}):this.props.onChange({multipleNumberInput:!1})},updateAnswer:function(e,t){if(!i.default.isObject(t))return i.default.partial(((e,t,n)=>{const r={};r[t]=n,this.updateAnswer(e,r)}),e,t);let n=i.default.clone(this.props.answers);if(e===n.length){const e=k(this.state.lastStatus);n=n.concat(e)}n[e]=i.default.extend({},n[e],t),this.props.onChange({answers:n})},addAnswer:function(){const e=k(this.state.lastStatus),t=this.props.answers.concat(e);this.props.onChange({answers:t})},getSaveWarnings:function(){const e=[];return i.default.contains(i.default.pluck(this.props.answers,"value"),"")&&e.push("One or more answers is empty"),this.props.answers.forEach(((t,n)=>{t.strict&&(!t.answerForms||0===t.answerForms.length)&&e.push(`Answer ${n+1} is set to string format matching, but no format was selected`)})),e},serialize(){return u.default.serialize.call(this)}});t.default=O},Q08l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r={type:"hint"},s=e=>({type:"array",elementShape:e});var o={content:{type:"content"},hint:r,hints:s(r),tags:{type:"tags"},arrayOf:s,shape:e=>({type:"object",shape:e})};t.default=o},Q7r6:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=f(n("+jAD")),u=r(n("cxY9")),c=r(n("M++g")),p=r(n("ONox")),d=r(n("qoj5"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const g={display:"table",tableLayout:"fixed"},m={display:"table-row"},v={display:"table-cell",padding:5},y={borderRadius:10,cursor:"pointer"},b={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":e=>e%2?b.x():b.plus()},w=function(e,t,n){return e=Math.floor(e),e=Math.max(e,t),e=Math.min(e,n)};class x extends o.Component{constructor(...e){super(...e),this._flip=()=>{this.props.onChange(!this.props.value)}}render(){const e=this.props.value?"#55dd55":"#115511",t=i.default.extend({},y,{width:this.props.size,height:this.props.size,backgroundColor:e});return o.createElement("div",{style:t,onClick:this._flip})}}x.propTypes={value:a.default.bool.isRequired,size:a.default.number.isRequired};class E extends o.Component{render(){return o.createElement("div",{style:g,className:"no-select"},i.default.map(this.props.cells,((e,t)=>o.createElement("div",{key:t,style:m},i.default.map(e,((e,n)=>o.createElement("div",{key:n,style:v},o.createElement(x,{value:e,size:this.props.size,onChange:i.default.partial(this.props.onChange,t,n)}))))))))}}E.propTypes={cells:a.default.arrayOf(a.default.arrayOf(a.default.bool)).isRequired,size:a.default.number.isRequired};class C extends o.Component{constructor(...e){super(...e),this._height=()=>this.props.startCells.length,this._width=()=>0!==this.props.startCells.length?this.props.startCells[0].length:0,this.change=(...e)=>l.change.apply(this,e),this._handlePatternChange=e=>{this.change("flipPattern",e.target.value)},this._changeWidth=e=>{e=w(e,1,8),this._truncateCells(e,this._height())},this._changeHeight=e=>{e=w(e,1,8),this._truncateCells(this._width(),e)},this._truncateCells=(e,t)=>{const n=i.default.times(t,(t=>i.default.times(e,(e=>!(!this.props.startCells[t]||!this.props.startCells[t][e])))));this.change({startCells:n})},this._switchTile=(e,t)=>{const n=(r=this.props.startCells,s=(n,r)=>n===e&&r===t,i.default.map(r,((e,t)=>i.default.map(e,((e,n)=>s(t,n)?!e:e)))));var r,s;this.change({startCells:n})},this.serialize=()=>u.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("div",null,"Width:",o.createElement(c.default,{value:this._width(),placeholder:5,onChange:this._changeWidth}),", ","Height:",o.createElement(c.default,{value:this._height(),placeholder:5,onChange:this._changeHeight})),o.createElement("div",null,"Flip pattern:",o.createElement("select",{value:this.props.flipPattern,onChange:this._handlePatternChange},i.default.map(i.default.keys(b),((e,t)=>o.createElement("option",{value:e,key:t},e))))),o.createElement("div",null,"Grade incomplete puzzles as wrong:"," ",o.createElement(p.default,{gradeIncompleteAsWrong:this.props.gradeIncompleteAsWrong,onChange:this.props.onChange}),o.createElement(d.default,null,"By default, incomplete puzzles are graded as empty.")),o.createElement("div",null,"Starting configuration:"),o.createElement("div",{style:{overflowX:"auto"}},o.createElement(E,{cells:this.props.startCells,size:50,onChange:this._switchTile})))}}C.propTypes=(0,s.default)({},l.propTypes,{startCells:a.default.arrayOf(a.default.arrayOf(a.default.bool)),flipPattern:a.default.string.isRequired,gradeIncompleteAsWrong:a.default.bool.isRequired}),C.widgetName="lights-puzzle",C.defaultProps={startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",gradeIncompleteAsWrong:!1};var k=C;t.default=k},QESs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setDependencies=t.getDependencies=void 0;let r=null;t.setDependencies=e=>{r=e};t.getDependencies=()=>{if(r)return r;throw new Error(["Perseus has not been provided required dependencies.","setDependencies(dependencies) must be called first.","Make sure Perseus is being imported from javascript/perseus/perseus.js."].join("\n"))}},QVWj:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("5pch")),a=n("4PhQ"),i=n("eAf/");function l(e,t){return e+":"+t}const u={_fireEvent:function(e,t,n){o.default.invoke(e,"call",this,t,n)},_applyConstraints:function(e,t,n){let r=!1;return o.default.reduce(this.state.constraints,((e,o)=>{if(!1===e)return!1;if(r)return e;const l=o.call(this,e,t,(0,s.default)({onSkipRemaining:()=>{r=!0}},n));if(!1===l)return!1;if(i.point.is(l,2))return l;if(!0===l||null==l)return e;throw new a.KAError("Constraint returned invalid result: "+l,a.Errors.Internal)}),e,this)},draw:function(){const e=this.cloneState();u._fireEvent.call(this,this.state.draw,e,this.prevState),this.prevState=e},listen:function(e,t,n){this._listenerMap=this._listenerMap||{};const r=l(e,t),s=this._listenerMap[r]=this._listenerMap[r]||this.state[e].length;this.state[e][s]=n},unlisten:function(e,t){this._listenerMap=this._listenerMap||{};const n=l(e,t),r=this._listenerMap[n];if(void 0!==r){this.state[e].splice(r,1),delete this._listenerMap[n];const t=o.default.keys(this._listenerMap);o.default.each(t,(function(t){(function(e){return e.split(":")[0]})(t)===e&&this._listenerMap[t]>r&&this._listenerMap[t]--}),this)}}};var c=u;t.default=c},QqUF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("4PhQ");class s{static parse(e){return new o(e).parse()}match(e){throw new r.KAError("Selector subclasses must implement match()",r.Errors.Internal)}toString(){return"Unknown selector class"}}t.default=s;class o{constructor(e){e=e.trim().replace(/\s+/g," "),this.tokens=e.match(o.TOKENS)||[],this.tokenIndex=0}nextToken(){return this.tokens[this.tokenIndex]||""}consume(){this.tokenIndex++}isIdentifier(){const e=this.tokens[this.tokenIndex][0];return e>="a"&&e<="z"||e>="A"&&e<="Z"}skipSpace(){for(;" "===this.nextToken();)this.consume()}parse(){const e=this.parseTreeSelector();let t=this.nextToken();if(!t)return e;const n=[e];for(;t;){if(","!==t)throw new a("Expected comma");this.consume(),n.push(this.parseTreeSelector()),t=this.nextToken()}return new i(n)}parseTreeSelector(){this.skipSpace();let e=this.parseNodeSelector();for(;;){const t=this.nextToken();if(!t||","===t)break;if(" "===t)this.consume(),e=new p(e,this.parseNodeSelector());else if(">"===t)this.consume(),e=new d(e,this.parseNodeSelector());else if("+"===t)this.consume(),e=new h(e,this.parseNodeSelector());else{if("~"!==t)throw new a("Unexpected token: "+t);this.consume(),e=new f(e,this.parseNodeSelector())}}return e}parseNodeSelector(){this.skipSpace();const e=this.nextToken();if("*"===e)return this.consume(),new l;if(this.isIdentifier())return this.consume(),new u(e);throw new a("Expected node type")}}o.TOKENS=/([a-zA-Z][\w-]*)|(\d+)|[^\s]|(\s(?=[a-zA-Z\*]))/g;class a extends Error{constructor(e){super(e)}}class i extends s{constructor(e){super(),this.selectors=e}match(e){for(let t=0;t<this.selectors.length;t++){const n=this.selectors[t].match(e);if(n)return n}return null}toString(){let e="";for(let t=0;t<this.selectors.length;t++)e+=t>0?", ":"",e+=this.selectors[t].toString();return e}}class l extends s{match(e){return[e.currentNode()]}toString(){return"*"}}class u extends s{constructor(e){super(),this.type=e}match(e){const t=e.currentNode();return t.type===this.type?[t]:null}toString(){return this.type}}class c extends s{constructor(e,t){super(),this.left=e,this.right=t}}class p extends c{constructor(e,t){super(e,t)}match(e){const t=this.right.match(e);if(t)for(e=e.clone();e.hasParent();){e.goToParent();const n=this.left.match(e);if(n)return n.concat(t)}return null}toString(){return this.left.toString()+" "+this.right.toString()}}class d extends c{constructor(e,t){super(e,t)}match(e){const t=this.right.match(e);if(t&&e.hasParent()){(e=e.clone()).goToParent();const n=this.left.match(e);if(n)return n.concat(t)}return null}toString(){return this.left.toString()+" > "+this.right.toString()}}class h extends c{constructor(e,t){super(e,t)}match(e){const t=this.right.match(e);if(t&&e.hasPreviousSibling()){(e=e.clone()).goToPreviousSibling();const n=this.left.match(e);if(n)return n.concat(t)}return null}toString(){return this.left.toString()+" + "+this.right.toString()}}class f extends c{constructor(e,t){super(e,t)}match(e){const t=this.right.match(e);if(t)for(e=e.clone();e.hasPreviousSibling();){e.goToPreviousSibling();const n=this.left.match(e);if(n)return n.concat(t)}return null}toString(){return this.left.toString()+" ~ "+this.right.toString()}}},R6Bf:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=r(n("5pch")),i=f(n("HEOz")),l=r(n("Atlv")),u=r(n("z875")),c=r(n("uBl0")),p=r(n("DUcE")),d=n("zahm");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class g extends o.Component{constructor(...e){super(...e),this._renderRenderer=e=>{let t=1;const n={},r=(e=e||"").replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,((e,r,s,o)=>{const a="passage-ref "+t;return t++,n[a]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(r),referenceNumber:parseInt(s),summaryText:o},version:u.default.version},"[["+c.default.snowman+" "+a+"]]"}));return o.createElement(l.default,{key:"choiceContentRenderer",content:r,widgets:n,findExternalWidgets:this.props.findWidgets,alwaysUpdate:!0,linterContext:(0,s.default)({},this.props.linterContext,{blockHighlight:!0})})},this.focus=e=>this.refs.baseRadio.focus(e),this.updateChoices=e=>{const{choiceStates:t,choices:n}=this.props;let r;r=t?t.map((e=>(0,s.default)({},e))):n.map((()=>({selected:!1,crossedOut:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}))),r.forEach(((t,n)=>{t.selected=e.checked[n],t.crossedOut=e.crossedOut[n]})),this.props.onChange({choiceStates:r}),this.props.trackInteraction()},this.getUserInput=()=>g.getUserInputFromProps(this.props),this.simpleValidate=e=>g.validate(this.getUserInput(),e),this.showRationalesForCurrentlySelectedChoices=e=>{const{choiceStates:t}=this.props;if(t){const n=this.simpleValidate(e),r="points"===n.type&&n.total===n.earned,o=t.map((e=>(0,s.default)({},e,{highlighted:e.selected,rationaleShown:e.selected||e.rationaleShown||r,readOnly:e.selected||e.readOnly||r,correctnessShown:e.selected||e.correctnessShown,previouslyAnswered:e.previouslyAnswered||e.selected})));this.props.onChange({choiceStates:o},null,!0)}},this.deselectIncorrectSelectedChoices=()=>{if(this.props.choiceStates){const e=this.props.choiceStates.map(((e,t)=>(0,s.default)({},e,{selected:e.selected&&!!this.props.choices[t].correct,highlighted:!1})));this.props.onChange({choiceStates:e},null,!1)}}}render(){let e,t=this.props.choices;return e=this.props.static?a.default.map(t,(e=>({selected:e.correct,crossedOut:e.crossedOut,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1}))):this.props.choiceStates?this.props.choiceStates:this.props.values?a.default.map(this.props.values,(e=>({selected:e,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}))):a.default.map(t,(()=>({selected:!1,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}))),t=a.default.map(t,((t,n)=>{const r=t.isNoneOfTheAbove&&!t.content?i._("None of the above"):t.content,{selected:s,crossedOut:o,rationaleShown:a,correctnessShown:l,readOnly:u,highlighted:c,previouslyAnswered:p}=e[n],d=this.props.reviewModeRubric&&this.props.reviewModeRubric.choices[n];return{content:this._renderRenderer(r),checked:s,correct:void 0===t.correct?!!d&&d.correct:t.correct,disabled:u,hasRationale:!!t.clue,rationale:this._renderRenderer(t.clue),showRationale:a,showCorrectness:l,isNoneOfTheAbove:t.isNoneOfTheAbove,revealNoneOfTheAbove:this.props.questionCompleted&&s,crossedOut:o,highlighted:c,previouslyAnswered:p}})),o.createElement(p.default,{ref:"baseRadio",labelWrap:!0,multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:this.props.numCorrect,choices:t,onChange:this.updateChoices,reviewModeRubric:this.props.reviewModeRubric,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions,isLastUsedWidget:this.props.isLastUsedWidget})}static validate(e,t){const n=a.default.reduce(e.choicesSelected,((e,t)=>e+(t?1:0)),0);if(0===n)return{type:"invalid",message:null};if(e.numCorrect>1&&n!==e.numCorrect)return{type:"invalid",message:i._("Please choose the correct number of answers.")};if(e.noneOfTheAboveSelected&&n>1)return{type:"invalid",message:i._("'None of the above' may not be selected when other answers are selected.")};return{type:"points",earned:a.default.all(e.choicesSelected,((n,r)=>{let s;return s=e.noneOfTheAboveIndex===r?a.default.all(t.choices,((e,t)=>r===t||!e.correct)):!!t.choices[r].correct,s===n}))?1:0,total:1,message:null}}static getUserInputFromProps(e){if(e.choiceStates){let t=null,n=!1;const r=e.choiceStates,s=r.map((()=>!1)),o=e.countChoices,a=e.numCorrect;for(let o=0;o<s.length;o++){const a=e.choices[o].originalIndex;s[a]=r[o].selected,e.choices[o].isNoneOfTheAbove&&(t=a,s[o]&&(n=!0))}return{countChoices:o,choicesSelected:s,numCorrect:a,noneOfTheAboveIndex:t,noneOfTheAboveSelected:n}}if(e.values){let t=null,n=!1;const r=e.values.slice(),s=e.countChoices,o=e.numCorrect;for(let s=0;s<e.values.length;s++){const o=e.choices[s].originalIndex;r[o]=e.values[s],e.choices[s].isNoneOfTheAbove&&(t=o,r[s]&&(n=!0))}return{choicesSelected:r,noneOfTheAboveIndex:t,noneOfTheAboveSelected:n,countChoices:s,numCorrect:o}}return{choicesSelected:a.default.map(e.choices,(()=>!1))}}}g.defaultProps={choices:[{}],displayCount:null,multipleSelect:!1,countChoices:!1,deselectEnabled:!1,linterContext:d.linterContextDefault};var m=g;t.default=m},R7eo:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=h(n("+jAD")),l=r(n("cxY9")),u=r(n("qoj5")),c=r(n("M++g")),p=r(n("G6Ta"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.serialize=()=>l.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("div",null,o.createElement("label",null,"Passage Number: ",o.createElement(c.default,{value:this.props.passageNumber,onChange:this.change("passageNumber")}))),o.createElement("div",null,o.createElement("label",null,"Reference Number: ",o.createElement(c.default,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")}))),o.createElement("div",null,o.createElement("label",null,"Summary Text: ",o.createElement(p.default,{value:this.props.summaryText,onChange:this.change("summaryText")}),o.createElement(u.default,null,o.createElement("p",null,"Short summary of the referenced section. This will be included in parentheses and quotes automatically."),o.createElement("p",null,"Ex: The start ... the end")))))}}f.propTypes=(0,s.default)({},i.propTypes,{passageNumber:a.default.number,referenceNumber:a.default.number,summaryText:a.default.string}),f.widgetName="passage-ref",f.defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};var g=f;t.default=g},RY23:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=h(n("+jAD")),u=r(n("fUCW")),c=r(n("Atlv")),p=n("zahm");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>u.default.getUserInput.call(this),this.change=(...e)=>l.change.apply(this,e),this.simpleValidate=e=>f.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){return o.createElement(c.default,{content:this.props.content,inline:!0,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})}}f.propTypes=(0,s.default)({},l.propTypes,{content:a.default.string,linterContext:p.linterContextProps}),f.defaultProps={content:"",linterContext:p.linterContextDefault};var g={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:f,hidden:!0,transform:e=>i.default.pick(e,"content"),version:{major:0,minor:0},isLintable:!0};t.default=g},RZS3:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-font-size",severity:s.default.Severity.GUIDELINE,selector:"math, blockMath",pattern:/\\(tiny|Tiny|small|large|Large|LARGE|huge|Huge|scriptsize|normalsize)\s*{/,message:"Math font size:\nDon't change the default font size with \\Large{} or similar commands"});t.default=o},RZvK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusWithChromeStickyFocusBugWorkaround=function(e){e.focus({preventScroll:!0})}},Rwhr:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"long-paragraph",severity:s.default.Severity.GUIDELINE,selector:"paragraph",pattern:/^.{501,}/,lint:function(e,t,n,r){return`Paragraph too long:\nThis paragraph is ${t.length} characters long.\nShorten it to 500 characters or fewer.`}});t.default=o},S3VJ:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("wk+a"));const o={fence:{match:s.default.defaultRules.fence.match,order:1,parse:(e,t,n)=>e[3]},paragraph:{match:s.default.defaultRules.paragraph.match,order:2,parse:(e,t,n)=>e[1]}},a=s.default.parserFor(o);var i={parseToArray:e=>{const t=e.replace(/^\n\s*\n/,"")+"\n\n";return a(t,{inline:!1})},joinFromArray:e=>e.join("\n\n")};t.default=i},SIs7:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"double-spacing-after-terminal",severity:s.default.Severity.BULK_WARNING,selector:"paragraph",pattern:/[.!\?] {2}/i,message:"Use a single space after a sentence-ending period, or\nany other kind of terminal punctuation."});t.default=o},SNGj:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VIDEO_BY_YOUTUBE_ID_QUERY=t.VIDEO_BY_READABLE_ID_QUERY=void 0;var s=v(n("q1tI")),o=r(n("lTCR")),a=n("8r+/"),i=r(n("HAtO")),l=n("mR6N"),u=n("JimW"),c=n("JasB"),p=r(n("SGU3")),d=v(n("HEOz"));let h,f,g=e=>e;function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const y=/^https?:\/\//,b=(0,a.gqlOp)((0,o.default)(h||(h=g`
    query videoByReadableId($videoId: String!) {
        video(id: $videoId) {
            id
            title
            youtubeId
            contentId
        }
    }
`)));t.VIDEO_BY_READABLE_ID_QUERY=b;const w=(0,a.gqlOp)((0,o.default)(f||(f=g`
    query videoDataYoutubeId($videoId: String!) {
        video: videoByYoutubeId(youtubeId: $videoId) {
            id
            title
            youtubeId
            contentId
        }
    }
`)));t.VIDEO_BY_YOUTUBE_ID_QUERY=w;const x=l.StyleSheet.create({transcriptLink:{flexDirection:"row",width:"100%",justifyContent:"center"}});var E=e=>{const t=e.location;if(!t)return s.createElement("div",null);let n,r="";return y.test(t)&&(n=t,r=(e=>{const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:"videoNotFound"})(n)),s.createElement(i.default,{query:r?w:b,variables:r?{videoId:r}:{videoId:t},fetchPolicy:"cache-and-network"},(e=>{var t;const n=null==(t=e.data)?void 0:t.video;return s.createElement(u.View,{style:x.transcriptLink},s.createElement(u.Text,null,null==n?void 0:n.title),s.createElement(c.Strut,{size:10}),s.createElement(p.default,{href:"/transcript/"+((null==n?void 0:n.contentId)||"videoNotFound"),target:"_blank",className:"visited-no-recolor"},d._("See video transcript")))}))};t.default=E},SmNe:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("TSYQ")),a=h(n("q1tI")),i=r(n("i8i4")),l=n("UcaO"),u=h(n("4Zwh")),c=n("NUXr"),p=n("zahm");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends a.Component{constructor(...e){super(...e),this.state={sizeClass:c.containerSizeClass.MEDIUM,widgetProps:this.props.initialProps},this.getWidget=()=>this.refs.widget,this.replaceWidgetProps=e=>{this.setState({widgetProps:e})}}componentDidMount(){if(this.state.widgetProps.apiOptions.isMobile){const e=i.default.findDOMNode(this).offsetWidth;this.setState({sizeClass:(0,c.getClassFromWidth)(e)})}}render(){let e=(0,o.default)({"perseus-widget-container":!0,"widget-highlight":this.props.shouldHighlight,"widget-nohighlight":!this.props.shouldHighlight});const t=this.props.type,n=u.getWidget(t);if(null==n)return console.warn(`Widget type '${t}' not found!`),a.createElement("div",{className:e});let r=this.state.widgetProps.alignment;"default"===r&&(r=u.getDefaultAlignment(t)),e+=" widget-"+r;const i=this.state.widgetProps.apiOptions,c=this.state.widgetProps.static||i.readOnly,p={width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:l.zIndexInteractiveComponent},d=u.isLintable(t)?this.props.linterContext:(0,s.default)({},this.props.linterContext,{highlightLint:!1});return a.createElement("div",{className:e,style:c?{position:"relative",overflow:"visible"}:{}},a.createElement(n,(0,s.default)({},this.state.widgetProps,{linterContext:d,containerSizeClass:this.state.sizeClass,ref:"widget"})),c&&a.createElement("div",{style:p}))}UNSAFE_componentWillReceiveProps(e){if(this.props.type!==e.type)throw new Error("WidgetContainer can't change widget type; set a different key instead to recreate the container.")}shouldComponentUpdate(e,t){return this.props.shouldHighlight!==e.shouldHighlight||this.props.type!==e.type||this.state.widgetProps!==t.widgetProps||this.state.sizeClass!==t.sizeClass}}f.defaultProps={linterContext:p.linterContextDefault};var g=f;t.default=g},SoFn:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.buildEmptyItemForShape=function(e){return c(i(e))},t.buildEmptyItemTreeForShape=i,t.findContentNodesInItem=function(e,t,n){const r=u(e);(0,o.buildMapper)().setContentMapper(n).mapTree(r,t)},t.findHintNodesInItem=function(e,t,n){const r=u(e);(0,o.buildMapper)().setHintMapper(n).mapTree(r,t)},t.inferItemShape=function(e){return l(u(e))},t.itemToTree=u,t.treeToItem=c;var s=n("4PhQ"),o=n("OJf/"),a=r(n("Q08l"));function i(e){if("content"===e.type)return{__type:"content",content:"",images:{},widgets:{}};if("hint"===e.type)return{__type:"hint",replace:!1,content:"",images:{},widgets:{}};if("tags"===e.type)return[];if("array"===e.type)return[];if("object"===e.type){const t=e.shape,n={};return Object.keys(t).forEach((e=>{n[e]=i(t[e])})),n}throw new s.KAError(`unexpected shape type ${e.type}`,s.Errors.Internal)}function l(e){if(Array.isArray(e))return e.length?"string"==typeof e[0]?a.default.tags:a.default.arrayOf(l(e[0])):a.default.arrayOf(a.default.content);if("object"==typeof e&&("content"===e.__type||"item"===e.__type))return a.default.content;if("object"==typeof e&&"hint"===e.__type)return a.default.hint;if("object"==typeof e){const t={};return Object.keys(e).forEach((n=>{t[n]=l(e[n])})),a.default.shape(t)}throw new s.KAError(`unexpected multi-item node ${JSON.stringify(e)}`,s.Errors.Internal)}function u(e){return e._multi}function c(e){return{_multi:e}}},SrcR:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=d(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=d(n("HEOz")),u=d(n("+jAD")),c=r(n("fUCW"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const h={display:"table",tableLayout:"fixed"},f={display:"table-row"},g={display:"table-cell",padding:5},m={borderRadius:10,cursor:"pointer"},v={padding:5,display:"inline-block"},y={float:"right",paddingRight:5},b={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":e=>e%2?b.x():b.plus()};class w extends o.Component{constructor(...e){super(...e),this._flip=()=>{this.props.onChange(!this.props.value)}}render(){const e=this.props.value?"#55dd55":"#115511",t=i.default.extend({},m,{width:this.props.size,height:this.props.size,backgroundColor:e});return o.createElement("div",{style:t,onClick:this._flip})}}w.propTypes={value:a.default.bool.isRequired,size:a.default.number.isRequired};class x extends o.Component{render(){return o.createElement("div",{style:h,className:"no-select"},i.default.map(this.props.cells,((e,t)=>o.createElement("div",{key:t,style:f},i.default.map(e,((e,n)=>o.createElement("div",{key:n,style:g},o.createElement(w,{value:e,size:this.props.size,onChange:i.default.partial(this.props.onChange,t,n)}))))))))}}x.propTypes={cells:a.default.arrayOf(a.default.arrayOf(a.default.bool)).isRequired,size:a.default.number.isRequired};const E=(e,t,n,r)=>((e,t)=>i.default.map(e,((e,n)=>i.default.map(e,((e,r)=>t(n,r)?!e:e)))))(e,((e,s)=>{const o=e-t,a=s-n;return Math.abs(o)<=1&&Math.abs(a)<=1&&r[o+1][a+1]}));class C extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>c.default.getUserInput.call(this),this.change=(...e)=>u.change.apply(this,e),this._width=()=>0!==this.props.cells.length?this.props.cells[0].length:0,this._initNextPatterns=()=>{this._currPattern=b[this.props.flipPattern](0),this._nextPattern=b[this.props.flipPattern](1),this._patternIndex=2},this._shiftPatterns=()=>{this._currPattern=this._nextPattern,this._nextPattern=b[this.props.flipPattern](this._patternIndex),this._patternIndex++},this._flipTile=(e,t)=>{const n=E(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:n,moveCount:this.props.moveCount+1})},this._reset=()=>{this.change({cells:this.props.startCells,moveCount:0})},this.simpleValidate=e=>k(e,this.getUserInput())}render(){const e=60*this._width();return o.createElement("div",null,o.createElement(x,{cells:this.props.cells,size:50,onChange:this._flipTile}),o.createElement("div",{style:{width:e}},o.createElement("div",{style:v},l.ngettext("Moves: %(num)s","Moves: %(num)s",this.props.moveCount)),o.createElement("div",{style:y},o.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),o.createElement("div",{className:"clearfix"}))}componentDidMount(){this._initNextPatterns()}componentDidUpdate(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()}}C.propTypes=(0,s.default)({},u.propTypes,{cells:a.default.arrayOf(a.default.arrayOf(a.default.bool)),startCells:a.default.arrayOf(a.default.arrayOf(a.default.bool)),flipPattern:a.default.string.isRequired,moveCount:a.default.number.isRequired}),C.defaultProps={cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0};const k=function(e,t){if(i.default.all(t.cells,((t,n)=>i.default.all(t,((t,r)=>t===e.startCells[n][r])))))return{type:"invalid",message:l._("Click on the tiles to change the lights.")};return i.default.all(t.cells,(e=>i.default.all(e,(e=>e))))?{type:"points",earned:1,total:1,message:null}:e.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:l._("You must turn on all of the lights to continue.")}};var O={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:!0,widget:C,transform:function(e){return{cells:e.startCells,startCells:e.startCells,flipPattern:e.flipPattern}}};t.default=O},T2HF:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("p8fL")),a=r(n("xc4a")),i=n("eAf/"),l=r(n("XwLL"));const u={thickness:2,mouselayer:!1},c=function(e,t,n,r){r=s.default.extend({},u,r);const o=[e.range[0][0],0],a=[e.range[0][1],0];s.default.extend(this,e.fixedLine(o,a,r.thickness)),r.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",r.interactiveKindForTesting),this.visibleShape.attr(r.normalStyle),s.default.extend(this,{graphie:e,initialPoint:e.scalePoint(o),initialLength:i.point.distanceToPoint(e.scalePoint(o),e.scalePoint(a))}),r.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),this.moveTo(t,n)};s.default.extend(c.prototype,a.default,{getMouseTarget:function(){return this.wrapper},moveTo:function(e,t){const n=this.graphie.scalePoint(e),r=this.graphie.scalePoint(t),s=i.vector.polarDegFromCart(i.vector.subtract(r,n)),a=s[0],u=l.default.bound(s[1]),c=i.vector.subtract(n,this.initialPoint),p=l.default.bound(a/this.initialLength),d=o.default.getCanUse3dTransform(),h="translateX("+c[0]+"px) translateY("+c[1]+"px) "+(d?" translateZ(0)":"")+"rotate("+u+"deg) scaleX("+p+") scaleY(1)";this.transform(h)}});var p=c;t.default=p},TBZ3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("UcaO"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const{pureXsMax:o,pureSmMin:a,pureSmMax:i,pureMdMin:l,pureMdMax:u,pureLgMin:c,pureLgMax:p,pureXlMin:d}=r;var h={xs:`@media screen and (max-width: ${o})`,sm:`@media screen and (min-width: ${a}) and (max-width: ${i})`,md:`@media screen and (min-width: ${l}) and (max-width: ${u})`,lg:`@media screen and (min-width: ${c}) and (max-width: ${p})`,xl:`@media screen and (min-width: ${d})`,smOrSmaller:`@media screen and (max-width: ${i})`,mdOrSmaller:`@media screen and (max-width: ${u})`,lgOrSmaller:`@media screen and (max-width: ${p})`,smOrLarger:`@media screen and (min-width: ${a})`,mdOrLarger:`@media screen and (min-width: ${l})`,lgOrLarger:`@media screen and (min-width: ${c})`};t.default=h},TOec:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n("q1tI")),s=n("mR6N"),o=l(n("HEOz")),a=l(n("UcaO"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}function l(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class u extends r.Component{_renderText(){const{checked:e,correct:t,crossedOut:n}=this.props;return t?e?o._("Correct (selected)"):n?o._("Correct (but you crossed it out)"):o._("Correct"):e?o._("Incorrect (selected)"):o._("Incorrect")}render(){const{checked:e,correct:t,previouslyAnswered:n}=this.props;let o;return o=t?c.correct:e||n?c.incorrectAnswered:c.incorrect,r.createElement("div",{className:(0,s.css)(c.text,o)},this._renderText())}}const c=s.StyleSheet.create({text:{alignItems:"center",display:"flex",fontSize:12,height:32,textTransform:"uppercase"},correct:{color:a.kaGreen},incorrectAnswered:{color:a.warning1},incorrect:{color:a.gray68}});var p=u;t.default=p},UCPD:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-without-dollars",severity:s.default.Severity.GUIDELINE,pattern:/\\\w+{[^}]*}|{|}/,message:"This looks like LaTeX:\ndid you mean to put it inside dollar signs?"});t.default=o},UDUP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(n("q1tI")),o=u(n("HEOz")),a=r(n("iUos")),i=r(n("fQFx"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class c extends s.PureComponent{constructor(...e){super(...e),this.state={hoveredHighlightKey:null,hoveringTooltipFor:null},this._highlightRenderers={},this._handleMouseMove=e=>{const t={left:e.clientX,top:e.clientY},n=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:n})}}componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),null==this.state.hoveredHighlightKey||this.state.hoveredHighlightKey in e.highlights||this.setState({hoveredHighlightKey:null}),null==this.state.hoveringTooltipFor||this.state.hoveringTooltipFor in e.highlights||this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_getHoveredHighlightKey(e){const{hoveringTooltipFor:t}=this.state;if("string"==typeof t)return t;return Object.keys(this.props.highlights).find((t=>{const n=this._highlightRenderers[t];return n&&n.isHovered(e)}))}_renderTooltip(){const{hoveredHighlightKey:e}=this.state;if(null==e)return null;const t=this.props.highlights[e];return s.createElement(i.default,{label:o._("Remove highlight"),focusNode:t.domRange.endContainer,focusOffset:t.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(e),onMouseEnter:()=>this.setState({hoveringTooltipFor:e}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return s.createElement("div",null,Object.keys(this.props.highlights).map((e=>s.createElement(a.default,{ref:t=>{t?this._highlightRenderers[e]=t:delete this._highlightRenderers[e]},key:e,highlight:this.props.highlights[e],highlightKey:e,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes}))),this.props.editable&&this._renderTooltip())}}var p=c;t.default=p},"UW/U":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DefaultPropValues=void 0;var s=h(n("q1tI")),o=r(n("17x9")),a=n("mR6N"),i=h(n("4PhQ")),l=n("6OHE"),u=r(n("Q8Wn")),c=r(n("fIvv")),p=n("Vs7G");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const f=Object.freeze({side:"top",offset:0,offsetFrom:"bubble",tooltipMargin:0,noPadding:!1,color:l.colors.gray17,inverted:!1,dismissOnClickClose:!1,toggleOnHover:!0,showOnMount:!1});t.DefaultPropValues=f;class g extends s.PureComponent{constructor(e){super(e),this._handleVisibilityChange=e=>{this.setState({targetElementIsVisible:e})},this._handleMouseEnter=()=>{this.setState({hovered:!0})},this._handleMouseLeave=()=>{this.setState({hovered:!1})},this._handleDismiss=()=>{null==this.props.dismissed&&this.setState({dismissed:!0}),this.props.onDismiss&&this.props.onDismiss()},this._isMounted=!1,this.state={dismissed:null!=e.dismissed&&e.dismissed,hovered:!1,targetElementIsVisible:!1}}componentDidMount(){this._isMounted=!0,this._registerVisibilityObserver()}UNSAFE_componentWillReceiveProps(e){null!=e.dismissed&&this.setState({dismissed:e.dismissed})}UNSAFE_componentWillUpdate(){this._registerVisibilityObserver()}componentWillUnmount(){this._isMounted=!1,this._targetElementMountTimeout&&clearTimeout(this._targetElementMountTimeout),this._visibilityObserver.disconnect()}_findRootElement(){return this.context.modalContainerElement||document.getElementById("mission-task-container")||document.getElementById("outer-wrapper")||document.body}_registerVisibilityObserver(){const e=this._findRootElement();if(!e)throw new i.KAError("Failed to mount NewTooltip: we need a #outer-wrapper or document.body element.",i.Errors.Internal);if(e===this._rootElement)return;this._rootElement=e,this._visibilityObserver&&this._visibilityObserver.disconnect(),this._visibilityObserver=(0,p.createVisibilityObserver)(e,this._handleVisibilityChange);const t=this._wrapper;if(!t)throw new i.KAError("NewTooltip expected a wrapper element after mount",i.Errors.Internal);let n=t;for(;n.hasAttribute("data-tooltip-wrapper");)if(n=n.childNodes[0],!n)throw new i.KAError("NewTooltip expected wrapper element to have a child",i.Errors.Internal);this._targetElement=n,this._targetElementMountTimeout=setTimeout((()=>{const e=this._targetElement;if(!e)throw new i.KAError("NewTooltip should have a target element after mounting.",i.Errors.Internal);u.default.IS_DEV_SERVER&&"inline"===getComputedStyle(e).display&&(i.default.error("Warning: The children of a NewTooltip element must be block-like, but this element seems to have `display: inline`. This could break position tracking.",i.Errors.Internal),i.default.log("NewTooltip Target Element:",null,e)),this._visibilityObserver.setTargetElement(e),this.forceUpdate()}),0)}_shouldShowTooltip(){const{toggleOnHover:e,showOnMount:t}=this.props,{dismissed:n,targetElementIsVisible:r}=this.state;return!1!==r&&(!n&&(!!t||!(!e||!this.state.hovered)))}remeasure(){this._tooltipPortal&&this._tooltipPortal.remeasure()}render(){const{children:e,toggleOnHover:t}=this.props;return 1!==s.Children.count(e)&&(i.default.error(`NewTooltip's \`children\` prop must receive exactly one element, but ${s.Children.count(e)} were provided.`,i.Errors.Internal),i.default.log("NewTooltip Children",null,e)),s.createElement("div",{className:(0,a.css)(m.targetElement),onMouseEnter:t?this._handleMouseEnter:void 0,onMouseLeave:t?this._handleMouseLeave:void 0,ref:e=>this._wrapper=e,"data-tooltip-wrapper":!0,"data-test-id":"question-id"},e,this._targetElement&&this._shouldShowTooltip()&&s.createElement(c.default,{tooltipProps:this.props,dismiss:this._handleDismiss,rootElement:this._rootElement,targetElement:this._targetElement,isAboveModal:!!this.context.modalContainerElement,ref:e=>this._tooltipPortal=e}))}}g.defaultProps=f,g.contextTypes={modalContainerElement:o.default.instanceOf(HTMLElement)};const m=a.StyleSheet.create({targetElement:{display:"inline"}});var v=g;t.default=v},UcaO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zIndexScratchPad=t.zIndexInteractiveComponent=t.zIndexCurrentlyDragging=t.zIndexCalculator=t.zIndexAboveScratchpad=t.white=t.warningColorHover=t.warningColorActive=t.warningColor=t.warning3=t.warning1=t.tableBackgroundAccent=t.satSelectedBackgroundColor=t.satIncorrectColor=t.satIncorrectBorderColor=t.satIncorrectBackgroundColor=t.satCorrectColor=t.satCorrectBorderColor=t.satCorrectBackgroundColor=t.satBlue=t.satActiveBackgroundColor=t.red=t.radioMarginWidth=t.radioBorderColor=t.pureXsMax=t.pureXlMin=t.pureSmMin=t.pureSmMax=t.pureMdMin=t.pureMdMax=t.pureLgMin=t.pureLgMax=t.publishBlockingErrorColor=t.phoneMargin=t.negativePhoneMargin=t.learnstormBlue=t.kaGreen=t.interactiveSizes=t.hintBorderWidth=t.gtpIncorrectColor=t.gtpCorrectColor=t.gtpBlue=t.green=t.grayLighter=t.grayLight=t.gray98=t.gray97=t.gray95=t.gray90=t.gray85=t.gray76=t.gray68=t.gray41=t.gray25=t.gray17=t.gray=t.circleSize=t.checkedColor=t.boldFontFamily=t.blue=t.black=t.baseUnitPx=t.baseFontFamily=void 0;t.baseFontFamily="'Proxima Nova',sans-serif";t.boldFontFamily="'Proxima Nova Semibold',sans-serif";t.green="#76A005";t.kaGreen="#71B307";t.blue="#1C758A";t.gray="#AAAAAA";t.red="#FFBABA";t.grayLight="#AAAAAA";t.grayLighter="#DDDDDD";t.learnstormBlue="#4898FC";t.white="#FFFFFF";t.gray98="#FAFAFA";t.gray97="#F6F7F7";t.gray95="#F0F1F2";t.gray90="#E3E5E6";t.gray85="#D6D8DA";t.gray76="#BABEC2";t.gray68="#888D93";t.gray41="#626569";t.gray25="#3B3e40";t.gray17="#21242c";t.black="#000000";t.warning1="#F86700";t.warning3="#C75300";t.pureSmMin="568px";t.pureMdMin="768px";t.pureLgMin="1024px";t.pureXlMin="1280px";t.pureXsMax="567px";t.pureSmMax="767px";t.pureMdMax="1023px";t.pureLgMax="1279px";t.tableBackgroundAccent="#F9F9F9";t.gtpBlue="#4c00ff";t.gtpIncorrectColor="#babec2";t.gtpCorrectColor="#ffbe26";t.satBlue="#0084CE";t.satSelectedBackgroundColor="#E4F3F9";t.satActiveBackgroundColor="#D0EDF4";t.satCorrectColor="#009900";t.satCorrectBorderColor="#00CC00";t.satCorrectBackgroundColor="#E4F7E4";t.satIncorrectColor="#990000";t.satIncorrectBorderColor="#CC5252";t.satIncorrectBackgroundColor="#F2EBEB";t.zIndexScratchPad=1;t.zIndexAboveScratchpad=2;t.zIndexInteractiveComponent=3;t.zIndexCurrentlyDragging=4;t.zIndexCalculator=5;t.phoneMargin=16;t.negativePhoneMargin=-16;t.hintBorderWidth=4;t.baseUnitPx=16;t.interactiveSizes={defaultBoxSize:400,defaultBoxSizeSmall:288};t.circleSize=24;t.radioMarginWidth=2;t.warningColor="#f86700";t.warningColorHover="#df5c00";t.warningColorActive="#c75300";t.publishBlockingErrorColor="#be2612";t.radioBorderColor="#BABEC2";t.checkedColor="#71B307"},Ue85:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-adjacent",severity:s.default.Severity.WARNING,selector:"blockMath+blockMath",message:"Adjacent math blocks:\ncombine the blocks between \\begin{align} and \\end{align}"});t.default=o},VMUI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addHighlight=function(e,t){const n={};let s=t.domRange,o=t.firstWordIndex,a=t.lastWordIndex;for(const t of Object.keys(e)){const i=e[t],l=(0,r.unionRanges)(i.domRange,s);l?(s=l,o=Math.min(i.firstWordIndex,o),a=Math.max(i.lastWordIndex,a)):n[t]=i}const i={firstWordIndex:o,lastWordIndex:a,domRange:s},l=function(e){const t=`${(new Date).getTime()}`;if(!e.includes(t))return t;let n,r=0;do{n=`${t}-${r}`,r++}while(e.includes(n));return n}(Object.keys(n));return n[l]=i,n},t.buildHighlight=function(e,t,n){for(const t of Object.keys(e)){const s=e[t].domRange;if((0,r.rangeIncludes)(s,n))return null}const s=(0,r.findFirstAndLastWordIndexes)(n,t);if(!s)return null;const[o,a]=s,i=t[o],l=t[a];return{firstWordIndex:o,lastWordIndex:a,domRange:(0,r.spanRanges)(i,l)}},t.deserializeHighlight=function(e,t){const{firstWordIndex:n,lastWordIndex:o}=e.range,a=t[n];if(!a)throw new s.KAError(`first word index ${a} is out of bounds: must be 0–${t.length-1} inclusive`,s.Errors.Internal);const i=t[o];if(!i)throw new s.KAError(`last word index ${i} is out of bounds: must be 0–${t.length-1} inclusive`,s.Errors.Internal);return{firstWordIndex:n,lastWordIndex:o,domRange:(0,r.spanRanges)(a,i)}},t.serializeHighlight=function(e){const{firstWordIndex:t,lastWordIndex:n}=e;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:n}}};var r=n("OgJR"),s=n("4PhQ")},VO3A:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=n("mR6N"),i=r(n("XDp7")),l=f(n("+jAD")),u=r(n("fYWP")),c=n("UcaO"),p=n("zahm"),d=f(n("HEOz"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const g=u.default.widget;class m extends o.Component{render(){const e=[];for(let t=0;t<this.props.numGroups;t++)e.push(o.createElement("div",{role:"button","aria-label":d._("Skip to %(title)s",{title:this.props.groupTitles[t]}),key:t,className:(0,a.css)(b.indicator,t===this.props.currentGroup&&b.selectedIndicator),onClick:()=>this.props.onChangeCurrentGroup(t)}));return o.createElement("div",{className:(0,a.css)(b.indicatorContainer)},e)}}class v extends o.Component{constructor(...e){super(...e),this.state={currentGroup:0},this.change=(...e)=>l.change.apply(this,e),this.getInputPaths=()=>this._childGroup.getInputPaths(),this.setInputValue=(e,t,n)=>this._childGroup.setInputValue(e,t,n),this.focus=()=>this._childGroup.focus(),this.focusInputPath=e=>{this._childGroup.focusInputPath(e)},this.blurInputPath=e=>{this._childGroup.blurInputPath(e)},this.handleNextQuestion=()=>{const{currentGroup:e}=this.state;e<this.props.gradedGroups.length-1&&this.setState({currentGroup:e+1})}}shouldComponentUpdate(e,t){return e.gradedGroups,e!==this.props||t!==this.state}render(){if(i.default.useJIPT&&this.props.gradedGroups.length>1)return o.createElement("div",{className:(0,a.css)(b.container)},this.props.gradedGroups.map(((e,t)=>o.createElement(g,(0,s.default)({key:t},this.props,e,{inGradedGroupSet:!1,linterContext:this.props.linterContext})))));const e=this.props.gradedGroups[this.state.currentGroup];if(!e)return o.createElement("span",null,d.doNotTranslate("No current group..."));const t=this.props.gradedGroups.length,n=this.state.currentGroup<t-1?this.handleNextQuestion:null;return o.createElement("div",{className:(0,a.css)(b.container)},o.createElement("div",{className:(0,a.css)(b.top)},o.createElement("div",{className:(0,a.css)(b.title)},e.title),o.createElement("div",{className:(0,a.css)(b.spacer)}),o.createElement(m,{numGroups:t,currentGroup:this.state.currentGroup,groupTitles:this.props.gradedGroups.map((e=>e.title)),onChangeCurrentGroup:e=>this.setState({currentGroup:e})})),o.createElement(g,(0,s.default)({key:this.state.currentGroup,ref:e=>this._childGroup=e},this.props,e,{inGradedGroupSet:!0,title:null,onNextQuestion:n,linterContext:this.props.linterContext})))}}v.defaultProps={gradedGroups:[],linterContext:p.linterContextDefault};var y={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:v,traverseChildWidgets:function(e,t){return{groups:e.gradedGroups.map(t)}},hidden:!1,tracking:"all",isLintable:!0};t.default=y;const b=a.StyleSheet.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:c.gray76,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:c.grayLight,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:c.kaGreen},container:{borderTop:`1px solid ${c.gray76}`,borderBottom:`1px solid ${c.gray76}`,backgroundColor:c.tableBackgroundAccent,marginLeft:c.negativePhoneMargin,marginRight:c.negativePhoneMargin,paddingBottom:c.phoneMargin,paddingLeft:c.phoneMargin,paddingRight:c.phoneMargin,paddingTop:10,width:"auto"}})},VWbw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=w(n("q1tI")),a=r(n("5pch")),i=r(n("96rG")),l=r(n("eAf/")),u=r(n("9/5/")),c=n("4PhQ"),p=r(n("jH0K")),d=r(n("bHYm")),h=r(n("uBl0")),f=r(n("yfnS")),g=r(n("NT9k")),m=n("NUXr"),v=r(n("T2HF")),y=w(n("HEOz"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{number:x,point:E}=l.default,{DeprecationMixin:C}=h.default,k=h.default.eq,O=h.default.deepEq,M="unlimited";function P(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function _(e,t,n){return k(P(e,t,n),0)}function S(e){return k(e,0)?0:e>0?1:-1}function T(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function I(e,t){const n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],r=a.default.map(n,(function(e){return S(P.apply(void 0,e))}));if(r[0]!==r[1]&&r[2]!==r[3])return!0;for(let e=0;e<4;e++)if(0===r[e]&&T.apply(void 0,n[e]))return!0;return!1}function N(e,t){return a.default.map(a.default.zip(e,t),(function(e){return e[0]-e[1]}))}function R(e){return Math.sqrt(a.default.reduce(e,(function(e,t){return e+Math.pow(t,2)}),0))}function A(e){return a.default.zip(e,F(e)).map((function(e){return R(N.apply(void 0,e))}))}function j(e){const t=a.default.zip(F(e,-1),e,F(e,1)),n=a.default.map(t,(function(e){const t=N(e[1],e[0]),n=N(e[2],e[1]),r=Math.acos((s=t,o=n,a.default.reduce(a.default.zip(s,o),(function(e,t){return e+t[0]*t[1]}),0)/(R(t)*R(n))));var s,o;return S(P.apply(void 0,e))>0?r:-r})),r=a.default.reduce(n,(function(e,t){return e+t}),0);return a.default.map(n,(function(e){return r>0?Math.PI-e:Math.PI+e}))}function D(e,t,n){if(e.length!==t.length)return!1;const r=e.length,s=j(e),o=j(t),i=A(e),l=A(t);for(let e=0;e<2*r;e++){let t=o.slice(),u=l.slice();if(e>=r&&(t.reverse(),u.reverse(),u=F(u,1)),t=F(t,e),u=F(u,e),O(s,t)){const e=a.default.zip(i,u),t=a.default.map(e,(function(e){return e[0]/e[1]})),r=a.default.all(t,(function(e){return k(t[0],e)})),s=a.default.all(e,(function(e){return x.equal(e[0],e[1],n)}));if(r&&s)return!0}}return!1}function W(e,t){return e<t||k(e,t)}function L([e,t,n,r]){e<0&&(e*=-1,t*=-1,n*=-1);const s=2*Math.PI;for(t<0&&(t*=-1,n*=-1,n+=s/2);n>0;)n-=s;for(;n<0;)n+=s;return[e,t,n,r]}function F(e,t){return t=void 0===t?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function q(e){return e.replace(/(?:^|-)(.)/g,(function(e,t){return t.toUpperCase()}))}function z(e,t){if(k(e[0],t[0]))return"x = "+e[0].toFixed(3);const n=(t[1]-e[1])/(t[0]-e[0]),r=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}const B={showGraph:function(e){return{markings:e.showGraph?"graph":"none"}}},U=e=>H(e)&&(null==e.graph.coords||0===e.graph.coords.length),H=e=>"point"===e.graph.type&&e.graph.numPoints===M||"polygon"===e.graph.type&&e.graph.numSides===M,V=(e,t)=>new c.KAError(`${e} called but current graph type is not a '${t}'`,c.Errors.Internal,{sentryData:{contexts:{extras:{graphType:t}}}});class G extends o.Component{constructor(...e){super(...e),this.state={shouldShowInstructions:U(this.props)},this._getShouldShowInstructions=e=>(e=e||this.props,this.isClickToAddPoints(e)&&(null==e.graph.coords||0===e.graph.coords.length)),this.deprecatedProps=B,this.setGraphie=e=>{this.graphie=e,this.setupGraphie()},this.handleAddPointsMouseDown=e=>{if(!this.isClickToAddPoints())throw new c.KAError("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false",c.Errors.Internal);if(!this.isCoordInTrash(e)){let n;if("point"===this.props.graph.type){if(n=this.createPointForPointsType(e,this.points.length),!n.constrain())return void n.remove();this.points.push(n);const t=this.points.length-1;this.points[t].grab(e),this.updateCoordsFromPoints()}else if("polygon"===this.props.graph.type){var t;if(null!=(t=this.polygon)&&t.closed())return;n=this.createPointForPolygonType(e,this.points.length),this.points.push(n);const r=this.points.length-1;this.points[r].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}},this.resetGraphie=()=>{this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()},this.setupGraphie=()=>{var e,t;(this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile)&&(this.horizHairline=new v.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:f.default.INTERACTIVE}),null==(e=this.horizHairline)||e.hide(),this.vertHairline=new v.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:f.default.INTERACTIVE}),null==(t=this.vertHairline)||t.hide());this["add"+q(this.props.graph.type)+"Controls"]()},this.showHairlines=e=>{var t,n,r,s;this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(null==(t=this.horizHairline)||t.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),null==(n=this.horizHairline)||n.show(),null==(r=this.vertHairline)||r.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),null==(s=this.vertHairline)||s.show())},this.hideHairlines=()=>{var e,t;this.props.apiOptions.isMobile&&(null==(e=this.horizHairline)||e.hide(),null==(t=this.vertHairline)||t.hide())},this.setTrashCanVisibility=e=>{const t=this.graphie;if(x.equal(e,0))this.trashCan&&(this.trashCan.remove(),this.trashCan=null);else if(!this.props.apiOptions.isMobile){var n,r;if(!this.trashCan)this.trashCan=null==t||null==(r=t.raphael)?void 0:r.image("https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",t.xpixels-40,t.ypixels-40,40,40);null==(n=this.trashCan)||n.attr({opacity:e})}},this.isClickToAddPoints=e=>(e=e||this.props,H(e)),this._lineStroke=()=>this.props.isMobile?{"stroke-width":3}:{},this.addLine=e=>{const t=this,n=t.graphie,r=G.getLineCoords(t.props.graph,t.props),o=t.points=a.default.map(r,(e=>d.default.addMaybeMobileMovablePoint(this,{coord:e,constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap()],onMove:()=>{const e=a.default.extend({},t.props.graph,{coords:a.default.invoke(o,"coord")});t.onChange({graph:e})}}))),i={points:o,static:!0,normalStyle:(0,s.default)({stroke:this.props.apiOptions.isMobile?f.default.BLUE_C:f.default.INTERACTIVE},this._lineStroke())};"line"===e?i.extendLine=!0:"ray"===e&&(i.extendRay=!0),t.line=d.default.addMovableLine(n,i),o[0].listen("constraints","isLine",(e=>!E.equal(e,o[1].coord()))),o[1].listen("constraints","isLine",(e=>!E.equal(e,o[0].coord())))},this.removeLine=()=>{var e;a.default.invoke(this.points,"remove"),null==(e=this.line)||e.remove()},this.addLinearControls=()=>{this.addLine("line")},this.removeLinearControls=()=>{this.removeLine()},this.addQuadraticControls=()=>{if("quadratic"!==this.props.graph.type)throw V("addQuadraticControls","quadratic");let e=this.props.graph.coords;e||(e=G.defaultQuadraticCoords(this.props));const t=()=>{const e=a.default.extend({},this.props.graph,{coords:[n.coord(),r.coord(),s.coord()]});this.onChange({graph:e}),this.updateQuadratic()};let n=null;n=this.pointA=d.default.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==r.coord()[0]&&e[0]!==s.coord()[0]],onMove:t});let r=null;r=this.pointB=d.default.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>!r||e[0]!==n.coord()[0]&&e[0]!==s.coord()[0]],onMove:t});let s=null;s=this.pointC=d.default.addMaybeMobileMovablePoint(this,{coord:e[2],constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>!s||e[0]!==n.coord()[0]&&e[0]!==r.coord()[0]],onMove:t}),this.updateQuadratic()},this.updateQuadratic=()=>{const e=G.getCurrentQuadraticCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],r=e[2];if(this.parabola){var o,a;const e=null==(o=this.graphie)?void 0:o.svgParabolaPath(t,n,r);null==(a=this.parabola)||a.attr({path:e})}else{var i,l,u;this.parabola=null==(i=this.graphie)?void 0:i.parabola(t,n,r),null==(l=this.parabola)||l.attr((0,s.default)({stroke:this.props.apiOptions.isMobile?f.default.BLUE_C:f.default.DYNAMIC},this._lineStroke())),null==(u=this.parabola)||u.toBack()}},this.removeQuadraticControls=()=>{var e,t,n;null==(e=this.pointA)||e.remove(),null==(t=this.pointB)||t.remove(),null==(n=this.pointC)||n.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)},this.addSinusoidControls=()=>{if("sinusoid"!==this.props.graph.type)throw V("addSinusoidControls","sinusoid");let e=this.props.graph.coords;e||(e=G.defaultSinusoidCoords(this.props));const t=()=>{const e=a.default.extend({},this.props.graph,{coords:[n.coord(),r.coord()]});this.onChange({graph:e}),this.updateSinusoid()};let n=null;n=this.pointA=d.default.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==r.coord()[0]],onMove:t});const r=this.pointB=d.default.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>!n||e[0]!==n.coord()[0]],onMove:t});this.updateSinusoid()},this.updateSinusoid=()=>{const e=G.getCurrentSinusoidCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],r=e[2],o=e[3];if(this.sinusoid){var a,i;const e=null==(a=this.graphie)?void 0:a.svgSinusoidPath(t,n,r,o);null==(i=this.sinusoid)||i.attr({path:e})}else{var l,u,c;this.sinusoid=null==(l=this.graphie)?void 0:l.sinusoid(t,n,r,o),null==(u=this.sinusoid)||u.attr((0,s.default)({stroke:this.props.apiOptions.isMobile?f.default.BLUE_C:f.default.DYNAMIC},this._lineStroke())),null==(c=this.sinusoid)||c.toBack()}},this.removeSinusoidControls=()=>{var e,t;null==(e=this.pointA)||e.remove(),null==(t=this.pointB)||t.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)},this.addCircleControls=()=>{const e=this.graphie,t=a.default.min(e.snap),n=this.circle=null==e?void 0:e.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||a.default.min(this.props.step),snapX:e.snap[0],snapY:e.snap[1],minRadius:t,snapRadius:t});(0,i.default)(n).on("move",(()=>{const e=a.default.extend({},this.props.graph,{center:n.center,radius:n.radius});this.onChange({graph:e})}))},this.removeCircleControls=()=>{var e;null==(e=this.circle)||e.remove()},this.addLinearSystemControls=()=>{const e=this.graphie,t=G.getLinearSystemCoords(this.props.graph,this.props),n=[f.default.INTERACTIVE,f.default.GREEN],r=this.points=a.default.map(t,((e,t)=>{const r=[];for(let s=0;s<e.length;s+=1){const o=e[s];r.push(d.default.addMaybeMobileMovablePoint(this,{coord:o,constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),e=>{const t=r[1-s];if(t)return!E.equal(e,t.coord())}],onMove:()=>{const e=a.default.extend({},this.props.graph,{coords:a.default.map(this.points,(e=>a.default.invoke(e,"coord")))});this.onChange({graph:e})},normalStyle:{fill:n[t]},highlightStyle:{fill:n[t]}}))}return r}));this.lines=a.default.map(r,((t,r)=>d.default.addMovableLine(e,{points:t,static:!0,extendLine:!0,normalStyle:{stroke:n[r]}})))},this.removeLinearSystemControls=()=>{a.default.invoke(this.lines,"remove"),a.default.map(this.points,(e=>a.default.invoke(e,"remove")))},this.isCoordInTrash=e=>{if(this.props.apiOptions.isMobile)return!1;const t=this.graphie,n=null==t?void 0:t.scalePoint(e);return n[0]>=t.xpixels-40&&n[1]>=t.ypixels-40},this.createPointForPointsType=(e,t)=>{const n=this,r=()=>{n.points=a.default.filter(n.points,(function(e){return e!==o})),n.updateCoordsFromPoints(),setTimeout(o.remove.bind(o),0)};let o=null;return o=d.default.addMaybeMobileMovablePoint(this,(0,s.default)({coord:e,constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),function(e){return a.default.all(n.points,(function(t){return o===t||!E.equal(e,t.coord())}))}],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:n.updateCoordsFromPoints,onMoveEnd:function(e){n.isClickToAddPoints()&&(n.isCoordInTrash(e)&&r(),n.setTrashCanVisibility(.5))}},this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:r}:{})),o},this.removePoint=e=>{let t=null;return this.points=a.default.filter(this.points,(function(n,r){return n!==e||(t=r,!1)})),t},this.createPointForPolygonType=(e,t)=>{if("polygon"!==this.props.graph.type)throw V("createPointForPolygonType","polygon");const n=!a.default.contains(["angles","sides"],this.props.graph.snapTo),r=e=>(t+e+this.points.length)%this.points.length,o=()=>{var e;const t=this.removePoint(l);var n;null!=(e=this.polygon)&&e.closed()&&(this.points=F(this.points,t),null==(n=this.polygon)||n.update({closed:!1}));this.updatePolygon(),this.clearCoords(),setTimeout(l.remove.bind(l),0)},i=(0,u.default)(((e,t)=>{e.state.isInitialMove=t}),1e3),l=d.default.addMaybeMobileMovablePoint(this,(0,s.default)({coord:e,constraints:[d.default.MovablePoint.constraints.bound(),n?d.default.MovablePoint.constraints.snap():null,e=>{if(null==this.points||0===this.points.length)return!0;const n=a.default.invoke(this.points,"coord");if(n[t]=e,!this.isClickToAddPoints()){if(_(n[r(-2)],n[r(-1)],n[t])||_(n[r(-1)],n[t],n[r(1)])||_(n[t],n[r(1)],n[r(2)]))return!1;const e=a.default.zip(n,F(n));if(this.points.length>3)for(let t=-1;t<=0;t++){const n=e[r(t)],s=a.default.without(e,n,e[r(t-1)],e[r(t+1)]);for(let e=0;e<s.length;e++){if(I(n,s[e]))return!1}}}if("angles"===this.props.graph.snapTo&&this.points.length>2){var s,o;const e=a.default.map(j(n),(function(e){return 180*e/Math.PI}));a.default.each([-1,1],(function(t){e[r(t)]=Math.round(e[r(t)])}));const i=function(e,t,s){return(g.default.findAngle(n[r(e)],n[r(s)],n[r(t)])+360)%360},l=[e[r(-1)]-i(-2,-1,1),e[r(1)]-i(-1,1,2)];if(l[2]=180-(l[0]+l[1]),a.default.any(l,(function(e){return W(e,1)})))return!1;const u=R(N(n[r(-1)],n[r(1)])),c=1===S(P(n[r(-1)],n[r(1)],n[t])),p=Math.sin(l[1]*Math.PI/180)/Math.sin(l[2]*Math.PI/180)*u,d=g.default.findAngle(n[r(1)],n[r(-1)]),h=null==(s=this.graphie)?void 0:s.polar(p,d+(c?1:-1)*l[0]);return null==(o=this.graphie)?void 0:o.addPoints(n[r(-1)],h)}if("sides"===this.props.graph.snapTo&&this.points.length>1){var i,l;const e=a.default.map([[n[r(-1)],n[t]],[n[t],n[r(1)]],[n[r(-1)],n[r(1)]]],(function(e){return R(N.apply(void 0,e))}));if(a.default.each([0,1],(function(t){e[t]=Math.round(e[t])})),W(e[1]+e[2],e[0])||W(e[0]+e[2],e[1])||W(e[0]+e[1],e[2]))return!1;const s=(u=e[0],c=e[2],p=e[1],180*Math.acos((u*u+c*c-p*p)/(2*u*c))/Math.PI),o=g.default.findAngle(n[r(1)],n[r(-1)]),d=1===S(P(n[r(-1)],n[r(1)],n[t])),h=null==(i=this.graphie)?void 0:i.polar(e[0],o+(d?1:-1)*s);return null==(l=this.graphie)?void 0:l.addPoints(n[r(-1)],h)}var u,c,p;return!0}],onMoveStart:()=>{this.isClickToAddPoints()&&this.setTrashCanVisibility(1)},onMove:()=>{var e;null!=(e=this.polygon)&&e.closed()&&this.updateCoordsFromPoints()},onMoveEnd:e=>{const t=this.points.length>1&&(l===this.points[0]&&E.equal(e,a.default.last(this.points).coord())||l===a.default.last(this.points)&&E.equal(e,this.points[0].coord()));if(this.isClickToAddPoints()){if(this.isCoordInTrash(e))o();else if(t){const e=this.points.pop();var n,r;if(this.points.length>2)null==(n=this.polygon)||n.update({closed:!0}),this.updateCoordsFromPoints();else null==(r=this.polygon)||r.update({closed:!1}),this.clearCoords();this.updatePolygon(),setTimeout(e.remove.bind(e),0)}else{if(a.default.any(this.points,(function(t){return t!==l&&E.equal(t.coord(),e)}))){var s,u;if(this.removePoint(l),this.points.length<3)null==(u=this.polygon)||u.update({closed:!1}),this.clearCoords();else null!=(s=this.polygon)&&s.closed()&&this.updateCoordsFromPoints();this.updatePolygon(),setTimeout(l.remove.bind(l),0)}else{var c;const e=l===a.default.head(this.points)||l===a.default.last(this.points),t=!l.hasMoved(),n=!l.state.isInitialMove,r=!(null!=(c=this.polygon)&&c.closed()),s=this.points.length>2;var p;if(e&&t&&n&&r&&s)null==(p=this.polygon)||p.update({closed:!0}),this.updatePolygon(),this.updateCoordsFromPoints()}}this.setTrashCanVisibility(.5)}i(l,!1)}},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:o}:{}));return l.state.isInitialMove=!0,l},this.updateCoordsFromPoints=()=>{const e=a.default.extend({},this.props.graph,{coords:a.default.map(this.points,(function(e){return a.default.result(e,"coord")}))});this.onChange({graph:e})},this.clearCoords=()=>{const e=a.default.extend({},this.props.graph,{coords:null});this.onChange({graph:e})},this.onChange=e=>{this.props.onChange(e),this.props.trackInteraction()},this.addPointControls=()=>{if("point"!==this.props.graph.type)throw V("addPointControls","point");const e=G.getPointCoords(this.props.graph,this.props);this.points=[],this.points=a.default.map(e,this.createPointForPointsType,this)},this.removePointControls=()=>{a.default.invoke(this.points,"remove")},this.addSegmentControls=()=>{if("segment"!==this.props.graph.type)throw V("addSegmentControls","segment");const e=this,t=this.graphie,n=G.getSegmentCoords(this.props.graph,this.props),r=e=>d.default.addMaybeMobileMovablePoint(this,e);this.points=[],this.lines=a.default.map(n,(function(n,o){const i=function(){const t=a.default.extend({},e.props.graph,{coords:a.default.invoke(e.lines,"coords")});e.onChange({graph:t})},l=[];for(let e=0;e<n.length;e+=1){const t=n[e];l.push(r({coord:t,constraints:[d.default.MovablePoint.constraints.bound(),d.default.MovablePoint.constraints.snap(),t=>{const n=l[1-e];return!!n&&!E.equal(t,n.coord())}],onMove:i}))}e.points=e.points.concat(l);const u=d.default.addMovableLine(t,{points:l,static:!1,constraints:[d.default.MovableLine.constraints.bound(),d.default.MovableLine.constraints.snap()],onMove:[d.default.MovableLine.onMove.updatePoints,i],normalStyle:(0,s.default)({stroke:this.props.apiOptions.isMobile?f.default.BLUE_C:f.default.INTERACTIVE},this._lineStroke()),highlightStyle:(0,s.default)({stroke:this.props.apiOptions.isMobile?f.default.BLUE_C:f.default.INTERACTING},this._lineStroke())});return a.default.invoke(l,"toFront"),u}),this)},this.removeSegmentControls=()=>{a.default.invoke(this.points,"remove"),a.default.invoke(this.lines,"remove")},this.addRayControls=()=>{this.addLine("ray")},this.removeRayControls=()=>{this.removeLine()},this.addPolygonControls=()=>{this.polygon=null;const e=G.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=a.default.map(e,this.createPointForPolygonType,this),this.updatePolygon()},this.updatePolygon=()=>{if("polygon"!==this.props.graph.type)throw V("updatePolygon","polygon");let e;e=this.polygon?this.polygon.closed():this.points.length>=3;const t=this.graphie,n=this.points.length,r=!a.default.contains(["angles","sides"],this.props.graph.snapTo),o=a.default.times(n,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?"angles"===this.props.graph.snapTo?"$deg0":"$deg1":""}),this),i=a.default.times(n,(function(t){return e||0!==t&&t!==n-1}),this),l=a.default.times(n,(function(t){return this.props.graph.showAngles&&(e||0!==t&&t!==n-1)?1:0}),this),u=a.default.times(n,(function(t){return!this.props.graph.showSides||!e&&t===n-1?"":"sides"===this.props.graph.snapTo?"$len0":"$len1"}),this);if(null==this.polygon){const n=this;n.polygon=d.default.addMovablePolygon(t,{constraints:[d.default.MovablePolygon.constraints.bound(),r?d.default.MovablePolygon.constraints.snap():null],closed:e,points:n.points,angleLabels:o,showRightAngleMarkers:i,numArcs:l,sideLabels:u,onMove:[d.default.MovablePolygon.onMove.updatePoints,function(){this.closed()&&n.updateCoordsFromPoints()}],normalStyle:(0,s.default)({stroke:this.props.apiOptions.isMobile?f.default.BLUE_C:f.default.INTERACTIVE},this._lineStroke())})}else this.polygon.update({closed:e,points:this.points,angleLabels:o,showRightAngleMarkers:i,numArcs:l,sideLabels:u})},this.removePolygonControls=()=>{var e;a.default.invoke(this.points,"remove"),null==(e=this.polygon)||e.remove()},this.addAngleControls=()=>{if("angle"!==this.props.graph.type)throw V("addAngleControls","angle");const e=this.props.graph,t=this.graphie,n=G.getAngleCoords(this.props.graph,this.props);var r,o;this.points=n.map((function(e,n){return null==t?void 0:t.addMovablePoint(a.default.extend({coord:e,normalStyle:{stroke:f.default.INTERACTIVE,fill:f.default.INTERACTIVE}},1===n?{snapX:t.snap[0],snapY:t.snap[1]}:{}))})),this.angle=null==t?void 0:t.addMovableAngle({points:this.points,snapDegrees:e.snapDegrees||1,snapOffsetDeg:e.angleOffsetDeg||0,angleLabel:e.showAngles?"$deg0":"",pushOut:2,allowReflex:(r=e.allowReflexAngles,o=!0,null==r?o:r)}),(0,i.default)(this.angle).on("move",(()=>{var t;this.onChange({graph:(0,s.default)({},e,{coords:null==(t=this.angle)?void 0:t.getClockwiseCoords()})})}))},this.removeAngleControls=()=>{var e;a.default.invoke(this.points,"remove"),null==(e=this.angle)||e.remove()},this.toggleShowAngles=()=>{if("polygon"!==this.props.graph.type)throw V("toggleShowAngles","polygon");const e=a.default.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:e})},this.toggleShowSides=()=>{if("polygon"!==this.props.graph.type)throw V("toggleShowSides","polygon");const e=a.default.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})},this.getUserInput=()=>G.getUserInputFromProps(this.props),this.simpleValidate=e=>G.validate(this.getUserInput(),e,this),this.focus=i.default.noop}UNSAFE_componentWillMount(){C.UNSAFE_componentWillMount.call(this)}componentDidMount(){this.setGraphie(this.refs.graph.graphie())}UNSAFE_componentWillReceiveProps(e){var t,n;this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:U(e)})),(null==(t=this.props.backgroundImage)?void 0:t.url)===(null==(n=e.backgroundImage)?void 0:n.url)&&this.props.backgroundImage===e.backgroundImage&&this.props.containerSizeClass===e.containerSizeClass||(this.shouldResetGraphie=!0)}componentDidUpdate(e,t){const n=e.graph.type,r=this.props.graph.type;(n!==r||"angle"===e.graph.type&&"angle"===this.props.graph.type&&this.areAngleGraphsEqual(e.graph,this.props.graph)||"point"===e.graph.type&&"point"===this.props.graph.type&&this.arePointGraphsEqual(e.graph,this.props.graph)||"polygon"===e.graph.type&&"polygon"===this.props.graph.type&&this.arePolygonGraphsEqual(e.graph,this.props.graph)||"segment"===e.graph.type&&"segment"===this.props.graph.type&&this.areSegmentGraphsEqual(e.graph,this.props.graph))&&(this["remove"+q(n)+"Controls"](),this["add"+q(r)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()}areAngleGraphsEqual(e,t){return e.allowReflexAngles!==t.allowReflexAngles||e.angleOffsetDeg!==t.angleOffsetDeg||e.snapDegrees!==t.snapDegrees}arePointGraphsEqual(e,t){return e.numPoints!==t.numPoints}arePolygonGraphsEqual(e,t){return e.numSides!==t.numSides||e.showAngles!==t.showAngles||e.showSides!==t.showSides||e.snapTo!==t.snapTo}areSegmentGraphsEqual(e,t){return e.numSegments!==t.numSegments}render(){const e=(0,m.getInteractiveBoxFromSizeClass)(this.props.containerSizeClass);let t;this.isClickToAddPoints()&&this.state.shouldShowInstructions?"point"===this.props.graph.type?t=y._("Click to add points"):"polygon"===this.props.graph.type&&(t=y._("Click to add vertices")):t=void 0;const n=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null,r=this.props.gridStep||h.default.getGridStep(this.props.range,this.props.step,e[0]),s=this.props.snapStep||h.default.snapStepFromGridStep(r),a=this.props.apiOptions.isMobile;return o.createElement("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:e[0],height:e[1]}},o.createElement(p.default,{instructions:t,ref:"graph",box:e,labels:this.props.labels,range:this.props.range,step:a?h.default.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:r,snapStep:s,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:n,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:a}))}static getQuadraticCoefficients(e){const t=e[0],n=e[1],r=e[2],s=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(0===s)return;return[(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/s,(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/s,(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/s]}static getSinusoidCoefficients(e){const t=e[0],n=e[1],r=n[1]-t[1],s=Math.PI/(2*(n[0]-t[0]));return[r,s,t[0]*s,t[1]]}static getLineCoords(e,t){return e.coords||G.pointsFromNormalized(t,[[.25,.75],[.75,.75]])}static getPointCoords(e,t){const n=e.numPoints||1;let r=e.coords;if(r)return r;switch(n){case 1:r=[e.coord||[0,0]];break;case 2:r=[[-5,0],[5,0]];break;case 3:r=[[-5,0],[0,0],[5,0]];break;case 4:r=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:r=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:r=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case M:r=[]}const s=G.normalizeCoords(r,[[-10,10],[-10,10]]);return G.pointsFromNormalized(t,s)}static getLinearSystemCoords(e,t){return e.coords||a.default.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],(e=>G.pointsFromNormalized(t,e)))}static getPolygonCoords(e,t){if("polygon"!==e.type)throw V("toggleShowSides","polygon");let n=e.coords;if(n)return n;const r=e.numSides||3;if(r===M)n=[];else{const t=2*Math.PI/r,s=(1/r-.5)*Math.PI,o="sides"===e.snapTo?Math.sqrt(3)/3*7:4;n=a.default.times(r,(function(e){return[o*Math.cos(e*t+s),o*Math.sin(e*t+s)]}))}n=G.normalizeCoords(n,[[-10,10],[-10,10]]);const s=!a.default.contains(["angles","sides"],e.snapTo);return n=G.pointsFromNormalized(t,n,!s),n}static getSegmentCoords(e,t){const n=e.coords;if(n)return n;const r=e.numSegments||1,s=[[-10,10],[-10,10]];return{1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[r].map((function(e){let n=[[-5,e],[5,e]];return n=G.normalizeCoords(n,s),n=G.pointsFromNormalized(t,n),n}))}static getAngleCoords(e,t){let n=e.coords;if(n)return n;const r=e.snapDegrees||1;let s=r;for(;s<20;)s+=r;s=s*Math.PI/180;const o=(e.angleOffsetDeg||0)*Math.PI/180;n=G.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);const a=R(N.apply(void 0,n));return n[0]=[n[1][0]+a*Math.cos(o),n[1][1]+a*Math.sin(o)],n[2]=[n[1][0]+a*Math.cos(s+o),n[1][1]+a*Math.sin(s+o)],n}static normalizeCoords(e,t){return a.default.map(e,(function(e){return a.default.map(e,(function(e,n){const r=t[n][1]-t[n][0];return(e+t[n][1])/r}))}))}static getEquationString(e){const t="get"+q(e.graph.type)+"EquationString";return G[t](e)}static pointsFromNormalized(e,t,n){return a.default.map(t,(function(t){return a.default.map(t,(function(t,r){const s=e.range[r];if(n)return s[0]+(s[1]-s[0])*t;const o=e.step[r],a=function(e,t){return Math.floor((e[1]-e[0])/t)}(s,o),i=Math.round(t*a);return s[0]+o*i}))}))}static getLinearEquationString(e){const t=G.getLineCoords(e.graph,e);if(k(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);const n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),r=t[0][1]-n*t[0][0];return k(n,0)?"y = "+r.toFixed(3):"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}static getCurrentQuadraticCoefficients(e){const t=e.graph.coords||G.defaultQuadraticCoords(e);return G.getQuadraticCoefficients(t)}static defaultQuadraticCoords(e){return G.pointsFromNormalized(e,[[.25,.75],[.5,.25],[.75,.75]])}static getQuadraticEquationString(e){const t=G.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)}static getCurrentSinusoidCoefficients(e){const t=e.graph.coords||G.defaultSinusoidCoords(e);return G.getSinusoidCoefficients(t)}static defaultSinusoidCoords(e){return G.pointsFromNormalized(e,[[.5,.5],[.65,.6]])}static getSinusoidEquationString(e){const t=G.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)}static getCircleEquationString(e){const t=e.graph,n=t.center||[0,0],r=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+r}static getLinearSystemEquationString(e){const t=G.getLinearSystemCoords(e.graph,e);return"\n"+z(t[0][0],t[0][1])+"\n"+z(t[1][0],t[1][1])+"\n"+function(e,t){const n=e[0][0],r=e[0][1],s=e[1][0],o=e[1][1],a=t[0][0],i=t[0][1],l=t[1][0],u=t[1][1],c=(n-s)*(i-u)-(r-o)*(a-l);if(Math.abs(c)<1e-9)return"Lines are parallel";const p=((n*o-r*s)*(i-u)-(r-o)*(a*u-i*l))/c;return"Intersection: ("+(((n*o-r*s)*(a-l)-(n-s)*(a*u-i*l))/c).toFixed(3)+", "+p.toFixed(3)+")"}(t[0],t[1])}static getPointEquationString(e){if("point"!==e.graph.type)throw V("getPointEquationString","point");return G.getPointCoords(e.graph,e).map((function(e){return"("+e[0]+", "+e[1]+")"})).join(", ")}static getSegmentEquationString(e){if("segment"!==e.graph.type)throw V("getSegmentEquationString","segment");const t=G.getSegmentCoords(e.graph,e);return a.default.map(t,(function(e){return"["+a.default.map(e,(function(e){return"("+e.join(", ")+")"})).join(" ")+"]"})).join(" ")}static getRayEquationString(e){if("ray"!==e.graph.type)throw V("createPointForPolygonType","ray");const t=G.getLineCoords(e.graph,e),n=t[0],r=t[1];let s=G.getLinearEquationString(e);return n[0]>r[0]?s+=" (for x <= "+n[0].toFixed(3)+")":n[0]<r[0]?s+=" (for x >= "+n[0].toFixed(3)+")":n[1]>r[1]?s+=" (for y <= "+n[1].toFixed(3)+")":s+=" (for y >= "+n[1].toFixed(3)+")",s}static getPolygonEquationString(e){if("polygon"!==e.graph.type)throw V("getPolygonEquationString","polygon");const t=G.getPolygonCoords(e.graph,e);return a.default.map(t,(function(e){return"("+e.join(", ")+")"})).join(" ")}static getAngleEquationString(e){if("angle"!==e.graph.type)throw V("getAngleEquationString","angle");const t=G.getAngleCoords(e.graph,e);return g.default.findAngle(t[2],t[0],t[1]).toFixed(0)+"° angle at ("+t[1].join(", ")+")"}static validate(e,t,n){const r=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&r)if("linear"===e.type&&"linear"===t.correct.type&&null!=e.coords){const n=e.coords,r=t.correct.coords;if(_(r[0],r[1],n[0])&&_(r[0],r[1],n[1]))return{type:"points",earned:1,total:1,message:null}}else if("linear-system"===e.type&&"linear-system"===t.correct.type&&null!=e.coords){const n=e.coords,r=t.correct.coords;if(_(r[0][0],r[0][1],n[0][0])&&_(r[0][0],r[0][1],n[0][1])&&_(r[1][0],r[1][1],n[1][0])&&_(r[1][0],r[1][1],n[1][1])||_(r[0][0],r[0][1],n[1][0])&&_(r[0][0],r[0][1],n[1][1])&&_(r[1][0],r[1][1],n[0][0])&&_(r[1][0],r[1][1],n[0][1]))return{type:"points",earned:1,total:1,message:null}}else if("quadratic"===e.type&&"quadratic"===t.correct.type&&null!=e.coords){const n=this.getQuadraticCoefficients(e.coords),r=this.getQuadraticCoefficients(t.correct.coords);if(O(n,r))return{type:"points",earned:1,total:1,message:null}}else if("sinusoid"===e.type&&"sinusoid"===t.correct.type&&null!=e.coords){const n=this.getSinusoidCoefficients(e.coords),r=this.getSinusoidCoefficients(t.correct.coords),s=L(n),o=L(r);if(O(s,o))return{type:"points",earned:1,total:1,message:null}}else if("circle"===e.type&&"circle"===t.correct.type){if(O(e.center,t.correct.center)&&k(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if("point"===e.type&&"point"===t.correct.type&&null!=e.coords){var s;let r=G.getPointCoords(t.correct,n);const o=null==(s=e.coords)?void 0:s.slice();if(r=r.slice(),null==o||o.sort(),r.sort(),O(o,r))return{type:"points",earned:1,total:1,message:null}}else if("polygon"===e.type&&"polygon"===t.correct.type&&null!=e.coords){var o,i;const n=null==(o=e.coords)?void 0:o.slice(),r=null==(i=t.correct.coords)?void 0:i.slice();let s;if("similar"===t.correct.match?s=D(n,r,Number.POSITIVE_INFINITY):"congruent"===t.correct.match?s=D(n,r,x.DEFAULT_TOLERANCE):"approx"===t.correct.match?s=D(n,r,.1):(n.sort(),r.sort(),s=O(n,r)),s)return{type:"points",earned:1,total:1,message:null}}else if("segment"===e.type&&"segment"===t.correct.type&&null!=e.coords){var l;let n=e.coords.slice(),r=null==(l=t.correct.coords)?void 0:l.slice();if(n=a.default.invoke(n,"sort").sort(),r=a.default.invoke(r,"sort").sort(),O(n,r))return{type:"points",earned:1,total:1,message:null}}else if("ray"===e.type&&"ray"===t.correct.type&&null!=e.coords){const n=e.coords,r=t.correct.coords;if(O(n[0],r[0])&&_(r[0],r[1],n[1]))return{type:"points",earned:1,total:1,message:null}}else if("angle"===e.type&&"angle"===t.correct.type){const n=e.coords,r=t.correct.coords;let s;if("congruent"===t.correct.match){const e=a.default.map([n,r],(function(e){return(g.default.findAngle(e[2],e[0],e[1])+360)%360}));s=k.apply(void 0,e)}else s=O(n[1],r[1])&&_(r[1],r[0],n[0])&&_(r[1],r[2],n[2]);if(s)return{type:"points",earned:1,total:1,message:null}}return!r||a.default.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}static getUserInputFromProps(e){return e.graph}}G.defaultProps={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:{url:null},markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}};var Y={name:"interactive-graph",displayName:"Interactive graph",widget:G};t.default=Y},Voua:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=n("eAf/"),u=r(n("mbWs")),c=f(n("+jAD")),p=r(n("Giaf")),d=r(n("uBl0"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const g=p.default.Label,m=p.default.Line,v=p.default.MovablePoint,y=p.default.MovableLine,b=p.default.Plot,w=p.default.PlotParametric,x=p.default.Point,E=p.default.Rect,{unescapeMathMode:C}=d.default,k=(e,t)=>{let n=e+"||"+(t=t||{}).decimal_separator+"||";const r=t.functions,s=r?r.length:0;for(let e=0;e<s;e++)n+=r[e]+"|";return n},O=Object.create(null),M=(e,t)=>{const n=k(e,t);let r=O[n];return r||(r=u.default.parse(e,t),O[n]=r,r)},P=Object.create(null),_=(e,t)=>{const n=k(e,t);let r=P[n];if(r)return r;const s=u.default.parse(e,t).expr;return r=s?s.compile():function(){return 0},P[n]=r,r};class S extends o.Component{constructor(...e){super(...e),this.state={variables:T(this.props.elements),functions:I(this.props.elements)},this._setupGraphie=(e,t)=>{e.graphInit(i.default.extend({},t,{grid:i.default.contains(["graph","grid"],this.props.graph.markings),axes:i.default.contains(["graph"],this.props.graph.markings),ticks:i.default.contains(["graph"],this.props.graph.markings),labels:i.default.contains(["graph"],this.props.graph.markings),labelFormat:function(e){return"\\small{"+e+"}"},axisArrows:"<->",unityLabels:!1}))},this._updatePointLocation=(e,t)=>{const n=i.default.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()},this._updateLineLocation=(e,t)=>{const n=this._eval("("+e.endX+")-("+e.startX+")"),r=this._eval("("+e.endY+")-("+e.startY+")"),s=l.vector.add(t,[n,r]),o=i.default.clone(this.state.variables);o["x_"+e.startSubscript]=t[0],o["y_"+e.startSubscript]=t[1],o["x_"+e.endSubscript]=s[0],o["y_"+e.endSubscript]=s[1],this.setState({variables:o}),this.props.trackInteraction()},this._eval=(e,t)=>{const n=_(e,{functions:this.state.functions}),r=i.default.extend({},this.state.variables,t);return i.default.each(i.default.keys(r),(e=>{if(i.default.isString(r[e])){const t=_(r[e],{functions:this.state.functions});r[e]=function(e){return t(i.default.extend({},r,{x:e}))}}})),n(r)||0},this._extractVars=e=>{if(null==e)return[];let t=[];return i.default.each(e.args(),(function(e){e&&"Expr"===e.constructor.name&&(t=t.concat(this._extractVars(e)))}),this),"Var"===e.name()&&t.push(e.prettyPrint()),t},this.change=(...e)=>c.change.apply(this,e),this.getUserInput=()=>({}),this.simpleValidate=e=>S.validate(this.getUserInput(),e)}UNSAFE_componentWillReceiveProps(e){i.default.isEqual(this.props.elements,e.elements)||this.setState({variables:T(e.elements),functions:I(e.elements)})}render(){const e=this.props.graph.range;let t=this.props.graph.labels;return"graph"===this.props.graph.markings&&(t=this.props.graph.labels.map((e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e))),o.createElement(p.default,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},"graph"===this.props.graph.markings&&o.createElement(g,{coord:[0,e[1][1]],text:t[1],direction:"above"}),"graph"===this.props.graph.markings&&o.createElement(g,{coord:[e[0][1],0],text:t[0],direction:"right"}),i.default.map(this.props.elements,(function(e,t){if("point"===e.type)return o.createElement(x,{key:e.key,coord:[this._eval(e.options.coordX),this._eval(e.options.coordY)],color:e.options.color});if("line"===e.type){const t=[this._eval(e.options.startX),this._eval(e.options.startY)],n=[this._eval(e.options.endX),this._eval(e.options.endY)];return o.createElement(m,{key:e.key,start:t,end:n,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,arrows:e.options.arrows}})}if("movable-point"===e.type){const t=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];return"snap"===e.options.constraint?t.push(v.constraints.snap(e.options.snap)):"x"===e.options.constraint?t.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&t.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})])),o.createElement(v,{key:e.key,coord:[this.state.variables["x_"+e.options.varSubscript],this.state.variables["y_"+e.options.varSubscript]],constraints:t,foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap,onMove:i.default.partial(this._updatePointLocation,e.options.varSubscript)})}if("movable-line"===e.type){const t=[t=>[Math.max(this._eval(e.options.constraintXMin),Math.min(this._eval(e.options.constraintXMax),t[0])),Math.max(this._eval(e.options.constraintYMin),Math.min(this._eval(e.options.constraintYMax),t[1]))]];"snap"===e.options.constraint?t.push(v.constraints.snap(e.options.snap)):"x"===e.options.constraint?t.push((t=>[this._eval(e.options.constraintFn,{y:t[1]}),t[1]])):"y"===e.options.constraint&&t.push((t=>[t[0],this._eval(e.options.constraintFn,{x:t[0]})]));const n=[this.state.variables["x_"+e.options.startSubscript],this.state.variables["y_"+e.options.startSubscript]],r=[this.state.variables["x_"+e.options.endSubscript],this.state.variables["y_"+e.options.endSubscript]];return o.createElement(y,{key:e.key,constraints:t,onMove:i.default.bind(this._updateLineLocation,this,e.options),foo_x:e.options.constraint,foo_y:e.options.constraintFn,foo_z:e.options.snap},o.createElement(v,{coord:n,static:!0,normalStyle:{stroke:"none",fill:"none"}}),o.createElement(v,{coord:r,static:!0,normalStyle:{stroke:"none",fill:"none"}}))}if("function"===e.type){const t=t=>this._eval(e.options.value,{x:t}),n=i.default.without(this._extractVars(M(e.options.value).expr),"x"),r=i.default.object(n,i.default.map(n,(e=>this.state.variables[e]))),s=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return o.createElement(b,{key:e.key,fn:t,foo_fn:e.options.value,foo_varvalues:r,range:s,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("parametric"===e.type){const t=t=>[this._eval(e.options.x,{t}),this._eval(e.options.y,{t})],n=i.default.without(this._extractVars(M(e.options.x).expr).concat(this._extractVars(M(e.options.y).expr)),"t"),r=i.default.object(n,i.default.map(n,(e=>this.state.variables[e]))),s=[this._eval(e.options.rangeMin,this.state.variables),this._eval(e.options.rangeMax,this.state.variables)];return o.createElement(w,{key:e.key,fn:t,foo_fnx:e.options.x,foo_fny:e.options.y,foo_varvalues:r,range:s,style:{stroke:e.options.color,strokeWidth:e.options.strokeWidth,strokeDasharray:e.options.strokeDasharray,plotPoints:100}})}if("label"===e.type){const n=[this._eval(e.options.coordX),this._eval(e.options.coordY)];return o.createElement(g,{key:t+1,coord:n,text:C(e.options.label),style:{color:e.options.color}})}return"rectangle"===e.type?o.createElement(E,{key:t+1,x:this._eval(e.options.coordX),y:this._eval(e.options.coordY),width:i.default.max([this._eval(e.options.width),0]),height:i.default.max([this._eval(e.options.height),0]),style:{stroke:"none",fill:e.options.color}}):void 0}),this))}}S.propTypes=(0,s.default)({},c.propTypes,{graph:a.default.object,elements:a.default.arrayOf(a.default.object)}),S.defaultProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},i.default.extend(S,{validate:function(e,t){return{type:"points",earned:0,total:0,message:null}}});const T=e=>{const t={};return i.default.each(i.default.where(e,{type:"movable-point"}),(e=>{const n=e.options.varSubscript,r=M(e.options.startX||"0").expr,s=M(e.options.startY||"0").expr;let o=0,a=0;r&&(o=r.eval({})||0),s&&(a=s.eval({})||0),t["x_"+n]=o,t["y_"+n]=a})),i.default.each(i.default.where(e,{type:"movable-line"}),(e=>{const n=e.options.startSubscript,r=e.options.endSubscript,s=M(e.options.startX||"0").expr,o=M(e.options.startY||"0").expr,a=M(e.options.endX||"0").expr,i=M(e.options.endY||"0").expr;let l=0,u=0,c=0,p=0;s&&(l=s.eval({})||0),o&&(u=o.eval({})||0),a&&(c=a.eval({})||0),i&&(p=i.eval({})||0),t["x_"+n]=l,t["y_"+n]=u,t["x_"+r]=c,t["y_"+r]=p})),i.default.each(i.default.where(e,{type:"function"}),(e=>{t[e.options.funcName]=e.options.value})),t},I=e=>i.default.map(i.default.where(e,{type:"function"}),(e=>e.options.funcName));var N={name:"interaction",displayName:"Interaction",widget:S,transform:i.default.identity,hidden:!0};t.default=N},Vs7G:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVisibilityObserver=function(e,t,n){return new r(e,t,n)},n("Wr5T");class r{constructor(e,t,n){this._handleIntersection=e=>{for(const t of e)this._onVisibilityChange(t.isIntersecting,t.rootBounds)},this._intersectionObserver=new IntersectionObserver(this._handleIntersection,{root:e,threshold:Number.EPSILON,rootMargin:n}),this._onVisibilityChange=t}setTargetElement(e){this._intersectionObserver.disconnect(),this._intersectionObserver.observe(e)}disconnect(){this._intersectionObserver.disconnect()}}},VwFC:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("DUX9"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const l=[];class u extends s.Component{render(){return s.createElement("div",null,this.props.showTitle&&s.createElement("div",{style:{fontSize:14}},"Tags:"),s.createElement(a.default,{options:this.props.value||l,layout:"vertical",onChange:this.props.onChange}))}}u.propTypes={value:o.default.arrayOf(o.default.string),onChange:o.default.func.isRequired,showTitle:o.default.bool.isRequired},u.defaultProps={value:l,showTitle:!0};var c=u;t.default=c},"WCF/":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("TSYQ")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("fhzG")),l=n("UcaO");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var c=(0,i.default)({displayName:"FixedToResponsive",propTypes:{width:a.default.number.isRequired,height:a.default.number.isRequired,className:a.default.string,constrainHeight:a.default.bool,allowFullBleed:a.default.bool},getDefaultProps:function(){return{className:"",constrainHeight:!1,allowFullBleed:!1}},getInitialState:function(){return{viewportHeight:null,viewportWidth:null}},componentDidMount:function(){this._isMounted=!0,window.innerHeight<480?setTimeout(this._cacheViewportSize,800):this._cacheViewportSize()},componentWillUnmount:function(){this._isMounted=!1},_cacheViewportSize:function(){this._isMounted&&this.setState({viewportHeight:Math.max(480,window.innerHeight),viewportWidth:window.innerWidth})},render:function(){const e=this.props.width/this.props.height,t=o.createElement("div",{style:{paddingBottom:100*(1/e).toFixed(4)+"%"}});let{width:n,height:r}=this.props;if(this.props.constrainHeight&&this.state.viewportHeight){const t=2/3*this.state.viewportHeight;this.props.height>=t&&(r=t,n=t*e)}const a={maxWidth:n,maxHeight:r},i=(0,s.default)("fixed-to-responsive",this.props.className),u=o.createElement("div",{className:i,style:a},t,this.props.children);return this.props.allowFullBleed&&this.state.viewportWidth&&n>=this.state.viewportWidth?o.createElement("div",{style:{marginLeft:l.negativePhoneMargin,marginRight:l.negativePhoneMargin}},u):u}});t.default=c},WZBl:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=u(n("HEOz"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class c extends s.Component{render(){const e=a.default.uniq(this.props.answers),t=a.default.map(e,(e=>s.createElement("dd",{key:e},e)));return s.createElement("dl",{className:"perseus-possible-answers"},s.createElement("dt",null,i.doNotTranslate("Correct Answer")),t)}}c.propTypes={answers:o.default.arrayOf(o.default.string)};var p=c;t.default=p},WvRD:function(e,t,n){"use strict";function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var s={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(s,a,i):s[a]=e[a]}s.default=e,n&&n.set(e,s);return s}(n("q1tI")).createContext({setKeypadElement:e=>{},keypadElement:null,setRenderer:e=>{},renderer:null,setScrollableElement:e=>{},scrollableElement:null});t.default=s},WxXo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTooltipColors=function(e){const{color:t,inverted:n}=e;if(n)return{backgroundColor:t,textColor:r.colors.white};return{backgroundColor:r.colors.white,textColor:t}};var r=n("6OHE")},Wy19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=["key","ref","containerSizeClass","widgetId","onChange","problemNum","apiOptions","questionCompleted","findWidgets","onRemove","id","onBlur","onFocus","trackInteraction","keypadElement"]},XwLL:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("96rG")),a=n("eAf/");const i={cleanMath:function(e){return"string"==typeof e?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return 0===e?e:e<0?-i.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*i.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){const t=[].slice.call(arguments,1);return i.getGCD(e,i.getGCD.apply(i,t))}let n;for(e=Math.abs(e),t=Math.abs(t);t;)n=e%t,e=t,t=n;return e},getLCM:function(e,t){if(arguments.length>2){const t=[].slice.call(arguments,1);return i.getLCM(e,i.getLCM.apply(i,t))}return Math.abs(e*t)/i.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!o.default.grep(i.primes,(function(t,n){return Math.abs(t-e)<=.5})).length;if(e<=1||e>2&&e%2==0)return!1;for(let t=3,n=Math.sqrt(e);t<=n;t+=2)if(e%t==0)return!1;return!0},getPrimeFactorization:function(e){if(1===e)return[];if(i.isPrime(e))return[e];const t=Math.sqrt(e);for(let n=2;n<=t;n++)if(e%n==0)return o.default.merge(i.getPrimeFactorization(n),i.getPrimeFactorization(e/n))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){const n=Math.pow(10,e).toFixed(5);return Math.round((t*n).toFixed(5))/n},toFixedApprox:function(e,t){const n=e.toFixed(t);return a.number.equal(+n,e)?n:"\\approx "+n},roundToApprox:function(e,t){const n=i.roundTo(t,e);return a.number.equal(n,e)?String(n):i.toFixedApprox(e,t)},toFraction:function(e,t){if(null==t&&(t=Math.pow(2,-46)),e<0||e>1){let n=e%1;n+=n<0?1:0;const r=i.toFraction(n,t);return r[0]+=Math.round(e-n)*r[1],r}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];let n=0,r=1,s=1,o=1,a=1,l=2;for(;;){if(Math.abs(Number(a/l)-e)<=t)return[a,l];a/l<e?(n=a,r=l):(s=a,o=l),a=n+s,l=r+o}},getNumericFormat:function(e){if((e=(e=o.default.trim(e)).replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1")).match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(null==e)return"";if(0===e)return"0";if("percent"===t)return 100*e+"%";if("pi"===t){const t=a.number.toFraction(e/Math.PI),n=Math.abs(t[0]),r=t[1];if(a.number.isInteger(n)){return(e<0?"-":"")+(1===n?"":n)+"π"+(1===r?"":"/"+r)}}if((0,s.default)(["proper","improper","mixed","fraction"]).contains(t)){const n=a.number.toFraction(e),r=Math.abs(n[0]),s=n[1],o=e<0?"-":"";if(1===s)return o+r;if("mixed"===t){const e=r%s,t=(r-e)/s;return o+(t?t+" ":"")+e+"/"+s}return o+r+"/"+s}return String(e)}};var l=i;t.default=l},Y1i7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TraversalState=void 0;var r=n("4PhQ");class s{constructor(e){this.root=e}static isNode(e){return e&&"object"==typeof e&&"string"==typeof e.type}static isTextNode(e){return s.isNode(e)&&"text"===e.type&&"string"==typeof e.content}traverse(e){this._traverse(this.root,new o(this.root),e)}_traverse(e,t,n){let r="";if(s.isNode(e)){const s=e;t._containers.push(s),t._ancestors.push(s),"string"==typeof s.content&&(r=s.content);Object.keys(s).forEach((e=>{if("type"===e)return;const o=s[e];o&&"object"==typeof o&&(t._indexes.push(e),r+=this._traverse(o,t,n),t._indexes.pop())})),t._currentNode=t._ancestors.pop(),t._containers.pop(),n(s,t,r)}else if(Array.isArray(e)){const s=e;t._containers.push(s);let o=0;for(;o<s.length;)t._indexes.push(o),r+=this._traverse(s[o],t,n),o=t._indexes.pop()+1;t._containers.pop()}return r}}t.default=s;class o{constructor(e){this.root=e,this._currentNode=null,this._containers=new a,this._indexes=new a,this._ancestors=new a}currentNode(){return this._currentNode||this.root}parent(){return this._ancestors.top()}ancestors(){return this._ancestors.values()}nextSibling(){const e=this._containers.top();if(!e||!Array.isArray(e))return null;const t=this._indexes.top();return e.length>t+1?e[t+1]:null}previousSibling(){const e=this._containers.top();if(!e||!Array.isArray(e))return null;const t=this._indexes.top();return t>0?e[t-1]:null}removeNextSibling(){const e=this._containers.top();if(e&&Array.isArray(e)){const t=this._indexes.top();if(e.length>t+1)return e.splice(t+1,1)[0]}return null}replace(...e){const t=this._containers.top();if(!t)throw new r.KAError("Can't replace the root of the tree",r.Errors.Internal);if(Array.isArray(t)){const n=this._indexes.top();t.splice.apply(t,[n,1].concat(e)),this._indexes.pop(),this._indexes.push(n+e.length-1)}else{const n=this._indexes.top();0===e.length?delete t[n]:1===e.length?t[n]=e[0]:t[n]=e}}hasPreviousSibling(){return Array.isArray(this._containers.top())&&this._indexes.top()>0}goToPreviousSibling(){if(!this.hasPreviousSibling())throw new r.KAError("goToPreviousSibling(): node has no previous sibling",r.Errors.Internal);this._currentNode=this.previousSibling();const e=this._indexes.pop();this._indexes.push(e-1)}hasParent(){return 0!==this._ancestors.size()}goToParent(){if(!this.hasParent())throw new r.KAError("goToParent(): node has no ancestor",r.Errors.Internal);for(this._currentNode=this._ancestors.pop();this._containers.size()&&this._containers.top()[this._indexes.top()]!==this._currentNode;)this._containers.pop(),this._indexes.pop()}clone(){const e=new o(this.root);return e._currentNode=this._currentNode,e._containers=this._containers.clone(),e._indexes=this._indexes.clone(),e._ancestors=this._ancestors.clone(),e}equals(e){return this.root===e.root&&this._currentNode===e._currentNode&&this._containers.equals(e._containers)&&this._indexes.equals(e._indexes)&&this._ancestors.equals(e._ancestors)}}t.TraversalState=o;class a{constructor(e){this.stack=e?e.slice(0):[]}push(e){this.stack.push(e)}pop(){return this.stack.pop()}top(){return this.stack[this.stack.length-1]}values(){return this.stack.slice(0)}size(){return this.stack.length}toString(){return this.stack.toString()}clone(){return new a(this.stack)}equals(e){if(!e||!e.stack||e.stack.length!==this.stack.length)return!1;for(let t=0;t<this.stack.length;t++)if(this.stack[t]!==e.stack[t])return!1;return!0}}},YH1v:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=w(n("q1tI")),a=r(n("i8i4")),i=n("mR6N"),l=r(n("TSYQ")),u=r(n("5pch")),c=w(n("HEOz")),p=n("j8wP"),d=r(n("hzUw")),h=r(n("uBl0")),f=r(n("TBZ3")),g=r(n("MG0i")),m=n("UcaO"),v=r(n("Boyy")),y=n("zahm");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class x extends o.Component{constructor(...e){super(...e),this.state={isFinalHelpPage:!1},this._hintsVisible=()=>null==this.props.hintsVisible||-1===this.props.hintsVisible?this.props.hints.length:this.props.hintsVisible,this._cacheImagesInHint=e=>{u.default.each(e.images,((e,t)=>{(new Image).src=h.default.getRealImageUrl(t)}))},this._cacheHintImages=()=>{this._hintsVisible()>0?u.default.each(this.props.hints,this._cacheImagesInHint):this.props.hints.length>0&&this._cacheImagesInHint(this.props.hints[0])},this.getApiOptions=()=>(0,s.default)({},p.ApiOptions.defaults,this.props.apiOptions,{readOnly:!1}),this.getSerializedState=()=>u.default.times(this._hintsVisible(),(e=>this.refs["hintRenderer"+e].getSerializedState())),this.restoreSerializedState=(e,t)=>{let n=1;const r=()=>{--n,t&&0===n&&t()};u.default.each(e,((e,t)=>{const s=this.refs["hintRenderer"+t];s&&(++n,s.restoreSerializedState(e,r))})),r()}}componentDidMount(){this._cacheHintImages()}UNSAFE_componentWillReceiveProps(e){e.hintsVisible-this.props.hintsVisible>1&&this.setState({isFinalHelpPage:!0})}componentDidUpdate(e,t){if(u.default.isEqual(e.hints,this.props.hints)&&e.hintsVisible===this.props.hintsVisible||this._cacheHintImages(),e.hintsVisible<this.props.hintsVisible){const e=this.props.hintsVisible-1;a.default.findDOMNode(this.refs["hintRenderer"+e]).focus()}}render(){const e=this.getApiOptions(),t=this._hintsVisible(),n=[],r=this.state.isFinalHelpPage;this.props.hints.slice(0,t).forEach(((s,a)=>{const i=a===this.props.hints.length-1&&!/\*\*/.test(s.content),l=a===t-1,u=o.createElement(d.default,{lastHint:i,lastRendered:l,hint:s,pos:a,totalHints:this.props.hints.length,ref:"hintRenderer"+a,key:"hintRenderer"+a,apiOptions:e,findExternalWidgets:this.props.findExternalWidgets,linterContext:v.default.pushContextStack(this.props.linterContext,"hints["+a+"]")});r?n.push(u):s.replace&&n.length>0?n[n.length-1]=u:n.push(u)}));const{getAnotherHint:s}=e,a=s&&t>0&&t<this.props.hints.length,u=`(${t}/${this.props.hints.length})`,p=(0,l.default)(this.props.className,e.isMobile&&t>0&&(0,i.css)(C.mobileHintStylesHintsRenderer));return o.createElement("div",{className:p},e.isMobile&&t>0&&o.createElement("div",{className:(0,i.css)(C.mobileHintStylesHintTitle,g.default.responsiveLabel)},c._("Hints")),n,a&&o.createElement("button",{rel:"button",className:(0,i.css)(C.linkButton,C.getAnotherHintButton,e.isMobile&&C.mobileHintStylesGetAnotherHintButton),onClick:e=>{e.preventDefault(),e.stopPropagation(),s&&s()}},o.createElement("span",{className:(0,i.css)(C.plusText,e.isMobile&&C.mobileHintStylesPlusText)},"+"),o.createElement("span",{className:(0,i.css)(C.getAnotherHintText)},c._("Get another hint")," ",u)))}}x.defaultProps={linterContext:y.linterContextDefault};const E=m.baseUnitPx+m.hintBorderWidth,C=i.StyleSheet.create({rendererMargins:{marginTop:m.baseUnitPx},linkButton:{cursor:"pointer",border:"none",backgroundColor:"transparent",fontSize:"100%",fontFamily:"inherit",fontWeight:"bold",color:m.kaGreen,padding:0,position:"relative"},plusText:{fontSize:20,position:"absolute",top:-3,left:0},getAnotherHintText:{marginLeft:16},mobileHintStylesHintsRenderer:{marginTop:4*m.baseUnitPx,border:`solid ${m.gray85}`,borderWidth:"1px 0 0 0",position:"relative",":before":{content:'""',display:"table",clear:"both"},":after":{content:'""',display:"table",clear:"both"}},mobileHintStylesHintTitle:{fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",color:m.gray17,paddingTop:m.baseUnitPx,paddingBottom:1.5*m.baseUnitPx,[f.default.lgOrSmaller]:{paddingLeft:0},[f.default.smOrSmaller]:{paddingLeft:E}},getAnotherHintButton:{marginTop:1.5*m.baseUnitPx},mobileHintStylesGetAnotherHintButton:{[f.default.lgOrSmaller]:{paddingLeft:0},[f.default.smOrSmaller]:{paddingLeft:E}},mobileHintStylesPlusText:{[f.default.lgOrSmaller]:{left:0},[f.default.smOrSmaller]:{left:E}}});var k=x;t.default=k},YPQm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.perseusFrameBorderWidth=t.lintGutterWidth=t.devices=void 0;t.devices={PHONE:"phone",TABLET:"tablet",DESKTOP:"desktop"};t.lintGutterWidth=36;t.perseusFrameBorderWidth=1},YXfq:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=u(n("q1tI")),o=r(n("17x9")),a=u(n("HEOz")),i=n("1I17");function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class c extends s.Component{constructor(...e){super(...e),this.arrowLength=100,this.drawArrow=()=>{const e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);const n=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";n.moveTo(5,e.height/2),n.lineTo(e.width-5,e.height/2),n.moveTo(e.width-10,e.height/2-5),n.lineTo(e.width-5,e.height/2),n.moveTo(e.width-10,e.height/2+5),n.lineTo(e.width-5,e.height/2),t.stroke(n)}}componentDidMount(){this.drawArrow()}componentDidUpdate(){this.drawArrow()}render(){return s.createElement("div",{className:"arrow-container"},s.createElement("div",{className:"above-text"},this.props.data.topText),s.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},a._("Reaction arrow pointing to the right.")),s.createElement("div",{className:"below-text"},this.props.data.bottomText))}}c.propTypes={data:o.default.any,index:o.default.number};class p extends s.Component{constructor(...e){super(...e),this.simpleValidate=()=>({type:"points",earned:0,total:0,message:null}),this.getUserInput=()=>[],this.validate=(e,t)=>({type:"points",earned:0,total:0,message:null}),this.focus=()=>!0}render(){return s.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(((e,t)=>{const n=this.props.widgetId+"-"+t;return s.createElement("div",{key:n,className:"molecule-container"},s.createElement(i.Molecule,{id:n,rotationAngle:this.props.rotationAngle[t],smiles:e}),t===this.props.smiles.length-1?null:s.createElement(c,{data:this.props.separators[t],index:t}))})))}}p.propTypes={rotationAngle:o.default.arrayOf(o.default.number),separators:o.default.arrayOf(o.default.object),smiles:o.default.arrayOf(o.default.string),widgetId:o.default.string},p.defaultProps={smiles:[],rotationAngle:[],separators:[]};var d={name:"reaction-diagram",displayName:"Chemical reaction",hidden:!0,widget:p};t.default=d},YqAk:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=b(n("q1tI")),a=b(n("i8i4")),i=r(n("5pch")),l=r(n("96rG")),u=r(n("Xb39")),c=n("j8wP"),p=r(n("YH1v")),d=r(n("Atlv")),h=r(n("P9IM")),f=r(n("uBl0")),g=r(n("vNny")),m=r(n("Boyy")),v=n("zahm");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{mapObject:w}=g.default;class x extends o.Component{constructor(e){super(e),this._handleFocusChange=(e,t)=>{null!=e?this._setCurrentFocus(e):this._onRendererBlur(t)},this.handleInteractWithWidget=e=>{const t=i.default.difference(this.state.questionHighlightedWidgets,[e]);this.setState({questionCompleted:!1,questionHighlightedWidgets:t}),this.props.apiOptions.interactionCallback&&this.props.apiOptions.interactionCallback()},this.state=(0,s.default)({},h.default.getInitialState.call(this),{hintsVisible:e.initialHintsVisible||0,questionCompleted:!1,questionHighlightedWidgets:[]})}componentDidMount(){h.default.componentDidMount.call(this),this.props.controlPeripherals&&this.props.apiOptions.setDrawingAreaAvailable&&this.props.apiOptions.setDrawingAreaAvailable(!0),this._currentFocus=null,this.update()}UNSAFE_componentWillReceiveProps(e){this.setState({questionHighlightedWidgets:[]})}componentDidUpdate(){this.update()}componentWillUnmount(){h.default.componentWillUnmount.call(this);const e=document.querySelector(this.props.workAreaSelector);null!=e&&a.unmountComponentAtNode(e);const t=document.querySelector(this.props.hintsAreaSelector);if(null!=t&&a.unmountComponentAtNode(t),this.props.controlPeripherals){const e=this.props.item.answerArea||{};e.calculator&&(0,l.default)("#calculator").hide(),e.periodicTable&&(0,l.default)(".periodic-table-info-box").hide(),e.zTable&&(0,l.default)(".z-table-info-box").hide(),e.tTable&&(0,l.default)(".t-table-info-box").hide(),e.chi2Table&&(0,l.default)(".chi2-table-info-box").hide()}}keypadElement(){return h.default.keypadElement.call(this)}update(){const e=(0,s.default)({},c.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:this._handleFocusChange}),t=document.querySelector(this.props.workAreaSelector),n=document.querySelector(this.props.hintsAreaSelector);if(!t||!n)return;(0,u.default)(o.createElement(d.default,(0,s.default)({ref:t=>{if(!t)return;this.questionRenderer=t;const{answerableCallback:n}=e;if(n){n(0===this.questionRenderer.emptyWidgets().length)}},keypadElement:this.keypadElement(),problemNum:this.props.problemNum,onInteractWithWidget:this.handleInteractWithWidget,highlightedWidgets:this.state.questionHighlightedWidgets,apiOptions:e,questionCompleted:this.state.questionCompleted,reviewMode:this.props.reviewMode,savedState:this.props.savedState,linterContext:m.default.pushContextStack(this.props.linterContext,"question")},this.props.item.question,{legacyPerseusLint:this.props.legacyPerseusLint})),t),(0,u.default)(o.createElement(p.default,{ref:e=>this.hintsRenderer=e,hints:this.props.item.hints,hintsVisible:this.state.hintsVisible,apiOptions:e,linterContext:m.default.pushContextStack(this.props.linterContext,"hints")}),n);const r=this.props.item.answerArea||{};this.props.controlPeripherals?((0,l.default)("#calculator").toggle(r.calculator||!1),(0,l.default)(".periodic-table-info-box").toggle(r.periodicTable||!1),(0,l.default)(".z-table-info-box").toggle(r.zTable||!1),(0,l.default)(".t-table-info-box").toggle(r.tTable||!1),(0,l.default)(".chi2-table-info-box").toggle(r.chi2Table||!1)):(r.calculator&&this.props.onShowCalculator&&this.props.onShowCalculator(),r.periodicTable&&this.props.onShowPeriodicTable&&this.props.onShowPeriodicTable(),r.zTable&&this.props.onShowZTable&&this.props.onShowZTable(),r.tTable&&this.props.onShowTTable&&this.props.onShowTTable(),r.chi2Table&&this.props.onShowChi2Table&&this.props.onShowChi2Table())}_setCurrentFocus(e){const t=this.keypadElement(),n=this._currentFocus;this._currentFocus=e;const r=this.getInputPaths(),s=this._currentFocus&&r.some((e=>f.default.inputPathsEqual(e,this._currentFocus)));null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,n,s&&t&&t.getDOMNode()),t&&(s?t.activate():t.dismiss())}_onRendererBlur(e){const t=this._currentFocus;f.default.inputPathsEqual(e,t)&&setTimeout((()=>{f.default.inputPathsEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}))}_setWidgetProps(e,t,n){this.questionRenderer._setWidgetProps(e,t,n)}setInputValue(e,t,n){return this.questionRenderer.setInputValue(e,t,n)}focusPath(e){return this.questionRenderer.focusPath(e)}blurPath(e){return this.questionRenderer.blurPath(e)}getDOMNodeForPath(e){return this.questionRenderer.getDOMNodeForPath(e)}getGrammarTypeForPath(e){return this.questionRenderer.getGrammarTypeForPath(e)}getInputPaths(){return this.questionRenderer.getInputPaths()}focus(){return this.questionRenderer.focus()}blur(){this._currentFocus&&this.blurPath(this._currentFocus)}showHint(){this.state.hintsVisible<this.getNumHints()&&this.setState({hintsVisible:this.state.hintsVisible+1})}getNumHints(){return this.props.item.hints.length}scoreInput(){const e=this.questionRenderer.guessAndScore(),t=e[0],n=e[1],r=[t,[]],s=f.default.keScoreFromPerseusScore(n,r,this.questionRenderer.getSerializedState()),o=this.questionRenderer.emptyWidgets();return this.setState({questionCompleted:s.correct,questionHighlightedWidgets:o}),s}getWidgetIds(){return this.questionRenderer.getWidgetIds()}scoreWidgets(){const e=this.questionRenderer.scoreWidgets(),t=this.questionRenderer.getUserInputForWidgets(),n=this.questionRenderer.getSerializedState();return w(e,((e,r)=>f.default.keScoreFromPerseusScore(e,t[r],n[r])))}getSerializedState(){var e;return{question:this.questionRenderer.getSerializedState(),hints:null==(e=this.hintsRenderer)?void 0:e.getSerializedState()}}restoreSerializedState(e,t){var n;let r=2;const s=()=>{--r,t&&0===r&&t()};this.questionRenderer.restoreSerializedState(e.question,s),null==(n=this.hintsRenderer)||n.restoreSerializedState(e.hints,s)}showRationalesForCurrentlySelectedChoices(){this.questionRenderer.showRationalesForCurrentlySelectedChoices()}deselectIncorrectSelectedChoices(){this.questionRenderer.deselectIncorrectSelectedChoices()}render(){return o.createElement("div",null)}}x.defaultProps={apiOptions:c.ApiOptions.defaults,controlPeripherals:!0,hintsAreaSelector:"#hintsarea",initialHintsVisible:0,workAreaSelector:"#workarea",reviewMode:!1,linterContext:v.linterContextDefault};var E=x;t.default=E},Yw3Q:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("i8i4")),a=r(n("fhzG")),i=r(n("17x9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=(0,a.default)({displayName:"Triangle",propTypes:{color:i.default.string.isRequired,left:i.default.number.isRequired,top:i.default.number.isRequired,width:i.default.number.isRequired,height:i.default.number.isRequired,horizontalDirection:i.default.oneOf(["left","right"]).isRequired,verticalDirection:i.default.oneOf(["top","bottom"]).isRequired},render:function(){let e,t,n,r;const o=`${this.props.width}px solid transparent`;"right"===this.props.horizontalDirection?e=o:t=o;const a=`${this.props.height}px solid ${this.props.color}`;return"top"===this.props.verticalDirection?n=a:r=a,s.createElement("div",{style:{display:"block",height:0,width:0,position:"absolute",left:this.props.left,top:this.props.top,borderLeft:e,borderRight:t,borderTop:n,borderBottom:r}})}}),c=(0,a.default)({displayName:"TooltipArrow",propTypes:{position:i.default.string,visibility:i.default.string,left:i.default.number,top:i.default.number,color:i.default.string.isRequired,border:i.default.string.isRequired,width:i.default.number.isRequired,height:i.default.number.isRequired,horizontalDirection:i.default.oneOf(["left","right"]).isRequired,verticalDirection:i.default.oneOf(["top","bottom"]).isRequired},getDefaultProps:function(){return{position:"relative",visibility:"visible",left:0,top:0}},render:function(){const e="top"===this.props.verticalDirection,t=e?0:1,n=e?0:-1;return s.createElement("div",{style:{display:"block",position:this.props.position,visibility:this.props.visibility,left:this.props.left,top:this.props.top,width:this.props.width+2,height:this.props.height+1,marginTop:-1,marginBottom:-2,zIndex:10}},s.createElement(u,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.border,left:0,top:n,width:this.props.width+2,height:this.props.height+2}),s.createElement(u,{horizontalDirection:this.props.horizontalDirection,verticalDirection:this.props.verticalDirection,color:this.props.color,left:1,top:t,width:this.props.width,height:this.props.height}))}}),p={top:{top:"-100%"},bottom:{top:0}},d={left:{targetLeft:0},right:{targetLeft:"100%"}},h={left:{tooltipLeft:0,arrowLeft:e=>0},right:{tooltipLeft:"-100%",arrowLeft:e=>-e-2}};var f=(0,a.default)({displayName:"Tooltip",propTypes:{show:i.default.bool.isRequired,className:i.default.string,arrowSize:i.default.number,borderColor:i.default.string,verticalPosition:i.default.oneOf(Object.keys(p)),horizontalPosition:i.default.oneOf(Object.keys(d)),horizontalAlign:i.default.oneOf(Object.keys(h)),children:i.default.arrayOf(i.default.element).isRequired,targetContainerStyle:i.default.any},getDefaultProps:function(){return{className:"",arrowSize:10,borderColor:"#ccc",verticalPosition:"bottom",horizontalPosition:"left",horizontalAlign:"left",targetContainerStyle:{}}},getInitialState:function(){return{height:null}},componentDidMount:function(){this._updateHeight()},UNSAFE_componentWillReceiveProps:function(){this.setState({height:null})},componentDidUpdate:function(){this._updateHeight()},_renderToolTipDiv:function(e){const t=Object.assign({},d[this.props.horizontalPosition],h[this.props.horizontalAlign],p[this.props.verticalPosition]);let n,r;return e?(n=s.createElement(c,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,position:"absolute",color:"white",border:this.props.borderColor,left:t.arrowLeft(this.props.arrowSize),top:2-this.props.arrowSize,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10}),r=s.createElement(c,{verticalDirection:"top",horizontalDirection:this.props.horizontalAlign,visibility:"hidden",color:"white",border:this.props.borderColor,left:t.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10})):(n=s.createElement(c,{verticalDirection:"bottom",horizontalDirection:this.props.horizontalAlign,color:"white",border:this.props.borderColor,left:t.arrowLeft(this.props.arrowSize),top:-1,width:this.props.arrowSize,height:this.props.arrowSize,zIndex:10}),r=null),s.createElement("div",{style:{position:"relative",height:0,display:this.props.show?"block":"none"}},s.createElement("div",{ref:"tooltipContainer",className:"tooltipContainer",style:{position:"absolute",height:this.state.height||void 0,left:t.targetLeft}},n,s.createElement("div",{className:this.props.className,ref:"tooltipContent",style:{position:"relative",top:t.top,left:t.tooltipLeft,border:"1px solid "+this.props.borderColor,WebkitBoxShadow:"0 1px 3px "+this.props.borderColor,MozBoxShadow:"0 1px 3px "+this.props.borderColor,boxShadow:"0 1px 3px "+this.props.borderColor,zIndex:9}},this.props.children.slice(1)),r))},_updateHeight:function(){const e=o.default.findDOMNode(this.refs.tooltipContainer).offsetHeight;e!==this.state.height&&this.setState({height:e})},render:function(){const e="top"===this.props.verticalPosition;return s.createElement("span",null,e&&this._renderToolTipDiv(e),s.createElement("div",{style:this.props.targetContainerStyle},this.props.children[0]),!e&&this._renderToolTipDiv())}});t.default=f},YyJt:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("i8i4")),a=r(n("fhzG"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const l=r(n("17x9")).default,u=(0,a.default)({displayName:"SortableArea",propTypes:{className:l.string,components:l.arrayOf(l.node).isRequired,onReorder:l.func.isRequired,style:l.any,verify:l.func},getDefaultProps:function(){return{verify:()=>!0}},getInitialState:function(){return{dragging:null,components:this.props.components}},componentDidMount:function(){this._setDragEvents()},UNSAFE_componentWillReceiveProps:function(e){this.setState({components:e.components})},componentDidUpdate:function(){this._setDragEvents()},onDragStart:function(e){this.setState({dragging:e})},onDrop:function(){this.setState({dragging:null}),this.props.onReorder(this.state.components)},onDragEnter:function(e){if(this.state.dragging===e)return;const t=this.state.components.slice(),n=t.splice(this.state.dragging,1);t.splice(e,0,n[0]);const r=this.props.verify(t);return r&&this.setState({dragging:e,components:t}),r},_listenEvent:function(e){e.dataTransfer.setData("hackhackhack","because browsers!")},_cancelEvent:function(e){e.preventDefault()},_setDragEvents:function(){this._dragItems=this._dragItems||[];const e=o.default.findDOMNode(this).querySelectorAll("[draggable=true]"),t=[],n=[];for(let n=0;n<this._dragItems.length;n++){const r=this._dragItems[n];e.indexOf(r)<0&&t.push(r)}for(let t=0;t<e.length;t++){const r=e[t];this._dragItems.indexOf(r)<0&&n.push(r)}for(let e=0;e<n.length;e++){const t=n[e];t.addEventListener("dragstart",this._listenEvent),t.addEventListener("drop",this._cancelEvent)}for(let e=0;e<t.length;e++){const n=t[e];n.removeEventListener("dragstart",this._listenEvent),n.removeEventListener("drop",this._cancelEvent)}},render:function(){const e=this.state.components.map(((e,t)=>s.createElement(c,{index:t,component:e,area:this,key:e.key,draggable:e.props.draggable,dragging:t===this.state.dragging})));return s.createElement("ol",{className:this.props.className,style:this.props.style},e)}}),c=(0,a.default)({displayName:"SortableItem",propTypes:{area:l.shape({onDragEnter:l.func.isRequired,onDragStart:l.func.isRequired,onDrop:l.func.isRequired}),component:l.node.isRequired,dragging:l.bool.isRequired,draggable:l.bool.isRequired,index:l.number.isRequired},handleDragStart:function(e){e.nativeEvent.dataTransfer.effectAllowed="move",this.props.area.onDragStart(this.props.index)},handleDrop:function(){this.props.area.onDrop(this.props.index)},handleDragEnter:function(e){const t=this.props.area.onDragEnter(this.props.index);e.nativeEvent.dataTransfer.effectAllowed=t?"move":"none"},handleDragOver:function(e){e.preventDefault()},render:function(){let e="sortable-disabled";return this.props.dragging?e="sortable-dragging":this.props.draggable&&(e="sortable-enabled"),s.createElement("li",{draggable:this.props.draggable,className:e,onDragStart:this.handleDragStart,onDrop:this.handleDrop,onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver},this.props.component)}});var p=u;t.default=p},ZEBz:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=h(n("+jAD")),u=r(n("cxY9")),c=r(n("lQTD")),p=r(n("G6Ta"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.state={},this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){return o.createElement("div",{className:"perseus-widget-explanation-editor"},o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Prompt to show explanation:"," ",o.createElement(p.default,{value:this.props.showPrompt,onChange:this.change("showPrompt")}))),o.createElement("div",{className:"perseus-widget-row"},o.createElement("label",null,"Prompt to hide explanation:"," ",o.createElement(p.default,{value:this.props.hidePrompt,onChange:this.change("hidePrompt")}))),o.createElement("div",{className:"perseus-widget-row"},o.createElement(c.default,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,widgetEnabled:!0,immutableWidgets:!1,onChange:e=>{const t={};i.default.has(e,"content")&&(t.explanation=e.content),i.default.has(e,"widgets")&&(t.widgets=e.widgets),this.change(t)}})))}}f.propTypes=(0,s.default)({},l.propTypes,{showPrompt:a.default.string,hidePrompt:a.default.string,explanation:a.default.string,widgets:a.default.object,apiOptions:a.default.any}),f.widgetName="explanation",f.defaultProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{}};var g=f;t.default=g},"ZM/w":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("TSYQ")),l=r(n("uBl0")),u=n("j8wP"),c=r(n("Atlv")),p=r(n("P9IM")),d=r(n("Boyy")),h=n("zahm");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const g=a.default.shape({content:a.default.string,widgets:a.default.objectOf(a.default.any),images:a.default.objectOf(a.default.any)});class m extends o.Component{constructor(e){super(e),this.keypadElement=()=>p.default.keypadElement.call(this),this._handleFocusChange=(e,t)=>{e?this._setCurrentFocus(e):this._onRendererBlur(t)},this._setCurrentFocus=e=>{const t=this.keypadElement(),n=this._currentFocus;this._currentFocus=e;let r=!1;if(this._currentFocus){const[e,...t]=this._currentFocus;r=this.refs[e].getInputPaths().some((e=>l.default.inputPathsEqual(e,t)))}null!=this.props.apiOptions.onFocusChange&&this.props.apiOptions.onFocusChange(this._currentFocus,n,r&&t&&t.getDOMNode()),t&&(r?t.activate():t.dismiss())},this._onRendererBlur=e=>{const t=this._currentFocus;l.default.inputPathsEqual(e,t)&&setTimeout((()=>{l.default.inputPathsEqual(this._currentFocus,t)&&this._setCurrentFocus(null)}))},this.blur=()=>{if(this._currentFocus){const[e,...t]=this._currentFocus;this.refs[e].blurPath(t)}},this._sections=()=>Array.isArray(this.props.json)?this.props.json:[this.props.json],this.state=p.default.getInitialState.call(this)}componentDidMount(){p.default.componentDidMount.call(this),this._currentFocus=null}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}componentWillUnmount(){p.default.componentWillUnmount.call(this)}render(){const e=(0,s.default)({},u.ApiOptions.defaults,this.props.apiOptions,{isArticle:!0}),t=(0,i.default)({"framework-perseus":!0,"perseus-article":!0,"bibliotron-article":this.props.useNewStyles,[u.ClassNames.MOBILE]:e.isMobile}),n=this._sections().map(((t,n)=>{const r=`section-${n}`;return o.createElement("div",{key:n,className:"clearfix"},o.createElement(c.default,(0,s.default)({},t,{ref:r,key:n,key_:n,keypadElement:this.keypadElement(),apiOptions:(0,s.default)({},e,{onFocusChange:(e,t)=>{this._handleFocusChange(e&&[r].concat(e),t&&[r].concat(t))}}),linterContext:d.default.pushContextStack(this.props.linterContext,"article"),legacyPerseusLint:this.props.legacyPerseusLint})))}));return o.createElement("div",{className:t},n)}}m.propTypes=(0,s.default)({},p.default.propTypes,{apiOptions:a.default.shape({onFocusChange:a.default.func,isMobile:a.default.bool}),json:a.default.oneOfType([g,a.default.arrayOf(g)]).isRequired,useNewStyles:a.default.bool,linterContext:h.linterContextProps,legacyPerseusLint:a.default.arrayOf(a.default.string)}),m.defaultProps={apiOptions:{},useNewStyles:!1,linterContext:h.linterContextDefault};var v=m;t.default=v},ZWnV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={button:n("mR6N").StyleSheet.create({buttonStyle:{backgroundColor:"white",border:"1px solid #ccc",borderLeft:"0",cursor:"pointer",margin:"0",padding:"5px 10px",position:"relative",":first-child":{borderLeft:"1px solid #ccc",borderTopLeftRadius:"3px",borderBottomLeftRadius:"3px"},":last-child":{borderRight:"1px solid #ccc",borderTopRightRadius:"3px",borderBottomRightRadius:"3px"},":hover":{backgroundColor:"#ccc"},":focus":{zIndex:"2"}},selectedStyle:{backgroundColor:"#ddd"}})};t.default=r},aMbl:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=n("6OHE"),l=r(n("6wxr")),u=r(n("QCGh")),c=r(n("LEdJ"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const d={path:"M11 11V7a1 1 0 0 1 2 0v4h4a1 1 0 0 1 0 2h-4v4a1 1 0 0 1-2 0v-4H7a1 1 0 0 1 0-2h4zm1 13C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm0-2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",width:24,height:24},h={path:"M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm0-2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zm-5-9a1 1 0 0 1 0-2h10a1 1 0 0 1 0 2H7z",width:24,height:24},f=()=>a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16"},a.createElement("filter",{id:"draggable-grip-shadow",width:"112.5%",height:"116.7%",x:"-6.2%",y:"-8.3%",filterUnits:"objectBoundingBox"},a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:".5",result:"shadowBlurInner"}),a.createElement("feOffset",{in:"shadowBlurInner",dy:"1",result:"shadowOffsetInner"}),a.createElement("feComposite",{in:"shadowOffsetInner",in2:"SourceAlpha",k2:"-1",k3:"1",operator:"arithmetic",result:"shadowInnerInner"}),a.createElement("feColorMatrix",{in:"shadowInnerInner",values:"0 0 0 0 0.129411765 0 0 0 0 0.141176471 0 0 0 0 0.17254902 0 0 0 0.2 0"})),a.createElement("path",{d:"M1 4a1 1 0 1 1 0-2h14a1 1 0 0 1 0 2H1zm0 10a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2H1zm0-5a1 1 0 1 1 0-2h14a1 1 0 0 1 0 2H1z",fill:i.colors.gray17,filter:"url(#draggable-grip-shadow)"})),g=({onClick:e})=>a.createElement(u.default,{className:(0,o.css)(v.addAnswer,y.addAnswer),onClick:e},a.createElement(l.default,{icon:d,size:24}),a.createElement("div",{className:(0,o.css)(v.spacer)}),"Add an answer choice"),m=({answer:e,onChange:t,onRemove:n})=>a.createElement("li",{className:(0,o.css)(v.answer)},a.createElement(u.default,{onClick:n},a.createElement(l.default,{icon:h,size:24,color:"#D92916"})),a.createElement("div",{className:(0,o.css)(v.spacer)}),a.createElement(c.default,{grow:1,onChange:e=>t(e.target.value),value:e}),a.createElement("div",{className:(0,o.css)(v.spacer)}),a.createElement(u.default,{style:[v.disabled],title:"Answer reordering is not implemented."},a.createElement(f,null))),v=o.StyleSheet.create({title:(0,s.default)({},i.typography.bodyXsmallBold,{marginBottom:6,color:i.colors.gray17}),answers:{marginTop:12,marginBottom:12},answer:{display:"flex",flexDirection:"row",alignItems:"center",":not(:first-child)":{marginTop:12}},addAnswer:(0,s.default)({},i.typography.bodyXsmallBold,{display:"flex",flexDirection:"row",alignItems:"center",color:"#1865f2"}),spacer:{width:16},disabled:{cursor:"not-allowed"}}),y=o.StyleSheet.create({addAnswer:{":link":{color:"#1865f2"}}});var b=({choices:e,onChange:t})=>a.createElement("div",null,a.createElement("div",{className:(0,o.css)(v.title)},"Answer Choices"),a.createElement("ul",{className:(0,o.css)(v.answers)},e.map(((n,r)=>a.createElement(m,{answer:n,key:r,onChange:n=>t([].concat(e.slice(0,r),[n],e.slice(r+1))),onRemove:()=>t([].concat(e.slice(0,r),e.slice(r+1)))})))),a.createElement(g,{onClick:()=>t([].concat(e,[""]))}));t.default=b},aWaW:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=n("mR6N"),a=n("4PhQ"),i=n("ytpR"),l=r(n("H5xB")),u=r(n("+AYZ")),c=r(n("ly0L")),p=n("hDgO");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}class h extends s.PureComponent{constructor(...e){super(...e),this.state={targetElementClientRect:null,rootElementClientRect:null},this._handleScroll=e=>{const{rootElement:t,targetElement:n}=this.props,r=e.target;t.contains(r)&&r.contains(n)&&this.remeasure()},this.remeasure=()=>{const{targetElement:e,rootElement:t}=this.props;this.setState({targetElementClientRect:e.getBoundingClientRect(),rootElementClientRect:t.getBoundingClientRect()})}}componentDidMount(){this._mountRemeasureTimeout=setTimeout(this.remeasure,0),window.addEventListener("resize",this.remeasure),window.addEventListener("scroll",this._handleScroll,!0)}componentWillUnmount(){this._mountRemeasureTimeout&&clearTimeout(this._mountRemeasureTimeout),window.removeEventListener("resize",this.remeasure),window.removeEventListener("scroll",this._handleScroll,!0)}_computeTargetPointOffsets(e,t){const{offset:n,offsetFrom:r,side:s}=this.props.tooltipProps,o=e,l=t;let u,c=n;if("arrow"===r&&(c+=i.arrowHeight),"top"===s)u={left:o.left+o.width/2,top:o.top-c};else if("bottom"===s)u={left:o.left+o.width/2,top:o.bottom+c};else if("left"===s)u={left:o.left-c,top:o.top+o.height/2};else{if("right"!==s)throw new a.KAError(`unexpected side ${s}`,a.Errors.Internal);u={left:o.right+c,top:o.top+o.height/2}}return{pxFromTop:u.top-l.top,pxFromBottom:l.bottom-u.top,pxFromLeft:u.left-l.left,pxFromRight:l.right-u.left}}_renderBubble(e){const{isAboveModal:t}=this.props,{side:n,tooltipMargin:r}=this.props.tooltipProps;let i;const u={},p={},d={};if("top"===n||"bottom"===n)i=f.tooltipBubblePositionerTopBottom,p.direction="horizontal",p.pxFromStart=e.pxFromLeft,p.pxFromEnd=e.pxFromRight,d.marginLeft=r,d.marginRight=r;else{if("left"!==n&&"right"!==n)throw new a.KAError(`unexpected side ${n}`,a.Errors.Internal);i=f.tooltipBubblePositionerLeftRight,p.direction="vertical",p.pxFromStart=e.pxFromTop,p.pxFromEnd=e.pxFromBottom,d.marginTop=r,d.marginBottom=r}if("top"===n)u.bottom=e.pxFromBottom;else if("bottom"===n)u.top=e.pxFromTop;else if("left"===n)u.right=e.pxFromRight;else{if("right"!==n)throw new a.KAError(`unexpected side ${n}`,a.Errors.Internal);u.left=e.pxFromLeft}return s.createElement("div",{className:(0,o.css)(f.tooltipBubblePositioner,i,t&&f.tooltipAboveModal),style:u},s.createElement(l.default,p,s.createElement("div",{className:(0,o.css)(f.tooltipBubbleWrapper),style:d},s.createElement(c.default,{tooltipProps:this.props.tooltipProps,dismiss:this.props.dismiss}))))}_renderArrow(e,t){const{isAboveModal:n}=this.props,{side:r,tooltipMargin:l}=this.props.tooltipProps,c={};if("top"===r)c.bottom=e.pxFromBottom-i.arrowHeight+1;else if("bottom"===r)c.top=e.pxFromTop-i.arrowHeight+1;else if("left"===r)c.right=e.pxFromRight-i.arrowHeight+1;else{if("right"!==r)throw new a.KAError(`unexpected side ${r}`,a.Errors.Internal);c.left=e.pxFromLeft-i.arrowHeight+1}const p=l+i.bubbleBorderRadius;if("top"===r||"bottom"===r){const n=p,r=t.width-i.arrowWidth-p;c.left=e.pxFromLeft-i.arrowWidth/2,c.left=Math.min(c.left,r),c.left=Math.max(c.left,n)}else{if("left"!==r&&"right"!==r)throw new a.KAError(`unexpected side ${r}`,a.Errors.Internal);{const n=p,r=t.height-i.arrowWidth-p;c.top=e.pxFromTop-i.arrowWidth/2,c.top=Math.min(c.top,r),c.top=Math.max(c.top,n)}}return s.createElement("div",{className:(0,o.css)(f.tooltipArrowPositioner,n&&f.tooltipAboveModal),style:c},s.createElement(u.default,{tooltipProps:this.props.tooltipProps}))}_buildMediaFilterStyle(){const{media:e}=this.props.tooltipProps;if(!e)return null;return o.StyleSheet.create({mediaFilter:{display:"none",[e]:{display:"block"}}}).mediaFilter}render(){const{targetElementClientRect:e,rootElementClientRect:t}=this.state;if(!e||!t)return null;const n=this._computeTargetPointOffsets(e,t);return s.createElement("div",{className:(0,o.css)(this._buildMediaFilterStyle())},this._renderBubble(n),this._renderArrow(n,t))}}t.default=h;const f=o.StyleSheet.create({tooltipBubblePositioner:{position:"absolute",zIndex:p.zindexTooltip,pointerEvents:"none"},tooltipAboveModal:{zIndex:p.zindexAboveModal},tooltipBubblePositionerTopBottom:{left:0,width:"100%"},tooltipBubblePositionerLeftRight:{top:0,height:"100%"},tooltipBubbleWrapper:{pointerEvents:"auto"},tooltipArrowPositioner:{position:"absolute",zIndex:p.zindexTooltip,pointerEvents:"none"}})},aeDP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("fhzG")),i=r(n("17x9")),l=r(n("wINb"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const c="#aaa",p="#ccc",d="#fff",h={borderBottom:"9px solid transparent",borderTop:"9px solid transparent",content:'" "',height:"0",position:"absolute",top:"0",width:"0"},f=s.StyleSheet.create({infoTip:{display:"inline-block",marginLeft:"5px",position:"relative"},infoTipContainer:{position:"absolute",top:"-12px",left:"22px",zIndex:1e3},infoTipTriangle:{height:"10px",left:"0",position:"absolute",top:"8px",width:"0",zIndex:1,":before":Object.assign({},h,{borderRight:"9px solid #bbb",right:"0"}),":after":Object.assign({},h,{borderRight:`9px solid ${d}`,right:"-1px"})},verticalShadow:{border:`1px solid ${p}`,boxShadow:`0 1px 3px ${p}`,borderBottom:`1px solid ${c}`},infoTipContentContainer:{background:d,padding:"5px 10px",width:"240px"}});var g=(0,a.default)({displayName:"InfoTip",propTypes:{children:i.default.node},getInitialState:function(){return{hover:!1}},handleMouseEnter:function(){this.setState({hover:!0})},handleMouseLeave:function(){this.setState({hover:!1})},render:function(){return o.createElement("div",{className:(0,s.css)(f.infoTip)},o.createElement("img",{alt:"",width:10,height:10,src:(0,l.default)("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3NpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2N2M3NTAxYS04YmVlLTQ0M2MtYmRiNS04OGM2N2IxN2NhYzEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUJCRTk4Qjc4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUJCRTk4QjY4NjAwMTFFMzg3QUJDNEI4Mzk2QTRGQkQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NGE5ZDI0OTMtODk1NC00OGFkLTlhMTgtZDAwM2MwYWNjNDJlIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY3Yzc1MDFhLThiZWUtNDQzYy1iZGI1LTg4YzY3YjE3Y2FjMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pqm89uYAAADMSURBVHjaXJA9DoJAEIUH1M4TUHIFsCMGen9OwCGw1YRGW2ntKel0exsojHIBC0ouQAyUviFDstmXfNmZeS+zm7XSNCXRFiRgJf0bXIHixpbhGdxBBJYC1w/xaA424MhNEATkui71fU9KqfEU78UbD9PdbJRlOdae55GmhIP+1NV1TcMwkOM41DSNHvRtMhTHMRVFQW3b6mOLgx99kue5GRp/gIOZuZGvNpTNwjD8oliANU+qqqKu6/TQBdymN57AHjzBT+B6Jx79BRgAvc49kQA4yxgAAAAASUVORK5CYII="),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),o.createElement("div",{className:(0,s.css)(f.infoTipContainer),style:{display:this.state.hover?"block":"none"}},o.createElement("div",{className:(0,s.css)(f.infoTipTriangle)}),o.createElement("div",{className:(0,s.css)(f.verticalShadow,f.infoTipContentContainer)},this.props.children)))}});t.default=g},b5JB:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("HEOz")),a=r(n("uBl0")),i=r(n("R6Bf"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const{shuffle:u,random:c}=a.default,p=[[o._("False"),o._("True")],[o._("No"),o._("Yes")]],d=(e,t)=>{const n=((e,t)=>{let n=e.choices.slice();return n=s.default.map(n,((e,t)=>s.default.extend({},e,{originalIndex:t,correct:Boolean(e.correct)}))),function(e){let t=null;const n=s.default.reject(e,(function(e,n){if(e.isNoneOfTheAbove)return t=e,!0}));return t&&n.push(t),n}((e=>{const t=e.map((e=>e.content));return p.some((e=>s.default.isEqual(t,e)))?[e[1],e[0]]:e})(function(n){const r=void 0===t?c:t;return e.randomize?u(n,null!=r?r:0):n}(n)))})(e,t),r=s.default.reduce(e.choices,(function(e,t){return t.correct?e+1:e}),0),{hasNoneOfTheAbove:o,multipleSelect:a,countChoices:i,deselectEnabled:l}=e;return{numCorrect:r,hasNoneOfTheAbove:o,multipleSelect:a,countChoices:i,deselectEnabled:l,choices:n,selectedChoices:s.default.pluck(n,"correct")}},h={1:e=>{let t,n;if(e.noneOfTheAbove)throw new Error("radio widget v0 no longer supports auto noneOfTheAbove");return t=e.choices,n=!1,s.default.extend(s.default.omit(e,"noneOfTheAbove"),{choices:t,hasNoneOfTheAbove:n})}};var f={name:"radio",displayName:"Multiple choice",accessible:!0,widget:i.default,transform:d,staticTransform:d,version:{major:1,minor:0},propUpgrades:h,isLintable:!0};t.default=f},bGTE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChoiceLetter=function(e){const t=r._("A B C D E F G H I J K L M N O P Q R S T U V W X Y Z").split(" ");if(e<t.length)return t[e];return" "};var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("HEOz"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}},bHYm:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("FVCV")),a=r(n("p6EO")),i=r(n("uN08")),l=r(n("+vEw")),u=r(n("yfnS"));const c={MovablePoint:a.default,addMovablePoint:function(e,t){const n=new o.default(e,{});return new a.default(e,n,t)},MovableLine:i.default,addMovableLine:function(e,t){const n=new o.default(e,{});return new i.default(e,n,t)},MovablePolygon:l.default,addMovablePolygon:function(e,t){const n=new o.default(e,{});return new l.default(e,n,t)},addMaybeMobileMovablePoint:function(e,t){const n=e.props.apiOptions.isMobile,r=n?{stroke:"#ffffff","stroke-width":3,fill:u.default.INTERACTIVE}:{stroke:u.default.INTERACTIVE,fill:u.default.INTERACTIVE},o=Object.assign(r,t.normalStyle),a=Object.assign(n?(0,s.default)({},r,{"stroke-width":0,scale:.75}):{},t.highlightStyle),i=Object.assign({normalStyle:o,highlightStyle:a,shadow:n,tooltip:n&&e.props.showTooltips,showHairlines:e.showHairlines,hideHairlines:e.hideHairlines},n?{pointSize:7}:{});return c.addMovablePoint(e.graphie,Object.assign(t,i))}};var p=c;t.default=p},bRUr:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("4PhQ"),o=r(n("QqUF"));class a{constructor(e,t,n,r,o,i){if(!n&&!r)throw new s.KAError("Lint rules must have a selector or pattern",s.Errors.Internal);this.name=e||"unnamed rule",this.severity=t||a.Severity.BULK_WARNING,this.selector=n||a.DEFAULT_SELECTOR,this.pattern=r||null,"function"==typeof o?(this.lint=o,this.message=null):(this.lint=(...e)=>this._defaultLintFunction.apply(this,e),this.message=o),this.applies=i||function(){return!0}}static makeRule(e){return new a(e.name,e.severity,e.selector?o.default.parse(e.selector):null,a.makePattern(e.pattern),e.lint||e.message,e.applies)}check(e,t,n,r){const s=this.selector.match(t);if(!s)return null;let o;if(o=this.pattern?n.match(this.pattern):a.FakePatternMatch(n,n,0),!o)return null;try{const e=this.lint(t,n,s,o,r);return e?"string"==typeof e?{rule:this.name,severity:this.severity,message:e,start:0,end:n.length}:{rule:this.name,severity:this.severity,message:e.message,start:e.start,end:e.end}:null}catch(e){return{rule:"lint-rule-failure",message:`Exception in rule ${this.name}: ${e.message}\nStack trace:\n${e.stack}`,start:0,end:n.length}}}_defaultLintFunction(e,t,n,r,s){return{message:this.message||"",start:r.index,end:r.index+r[0].length}}static makePattern(e){if(!e)return null;if(e instanceof RegExp)return e;if("/"===e[0]){const t=e.lastIndexOf("/"),n=e.substring(1,t),r=e.substring(t+1);return new RegExp(n,r)}return new RegExp(e)}static FakePatternMatch(e,t,n){const r=[t];return r.index=n,r.input=e,r}}t.default=a,a.Severity={ERROR:1,WARNING:2,GUIDELINE:3,BULK_WARNING:4},a.DEFAULT_SELECTOR=o.default.parse("text")},bTcU:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=r(n("TSYQ")),i=b(n("q1tI")),l=r(n("i8i4")),u=n("K7le"),c=n("6OHE"),p=r(n("uEGL")),d=r(n("Atlv")),h=r(n("yPu2")),f=r(n("4s5V")),g=r(n("oaDE")),m=r(n("9cGa")),v=b(n("HEOz"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class w extends i.Component{static gradeMarker(e){const t={hasAnswers:!1,isCorrect:!1};return e.selected&&e.selected.length>0&&(t.hasAnswers=!0),e.answers.length>0?e.selected&&e.selected.length===e.answers.length&&(t.isCorrect=e.selected.every((t=>e.answers.includes(t)))):e.selected&&0!==e.selected.length||(t.isCorrect=!0),t}static validate(e,t){let n=0,r=0;for(const t of e.markers){const e=w.gradeMarker(t);e.hasAnswers&&n++,e.isCorrect&&r++}return n!==e.markers.length?{type:"invalid",message:null}:{type:"points",earned:r===e.markers.length?1:0,total:1,message:null}}static pointInTriangle(e,t,n,r){const s=(e,t,n)=>(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y),o=s(e,t,n)<0,a=s(e,n,r)<0,i=s(e,r,t)<0;return o===a&&a===i}static imageSideForMarkerPosition(e,t){if(e<20)return"left";if(e>80)return"right";const n={x:20,y:0},r={x:80,y:0},s={x:80,y:100},o={x:20,y:100},a={x:50,y:50},i={top:[n,r,a],right:[a,r,s],bottom:[o,a,s],left:[n,a,o]},l={x:e,y:t};for(const e of Object.keys(i)){const t=i[e];if(w.pointInTriangle.apply(w,[l].concat(t)))return e}return"center"}static navigateToMarkerIndex(e,t,n){const r=t[n],s=t.map(((e,t)=>{const n=e.x-r.x,s=e.y-r.y,o=Math.sqrt(n**2+s**2);return{index:t,dist:o,dir:{x:0!==o?n/o:0,y:0!==o?s/o:0}}})).filter((e=>e.index!==n&&"correct"!==t[e.index].showCorrectness)).sort(((t,n)=>{const r=Math.round(t.dist*(e.x*t.dir.x+e.y*t.dir.y)),s=Math.round(n.dist*(e.x*n.dir.x+e.y*n.dir.y));let o,a;return e.x>0?(o=t.dir.x>0&&0!==r,a=n.dir.x>0&&0!==s):e.x<0?(o=t.dir.x<0&&0!==r,a=n.dir.x<0&&0!==s):e.y>0?(o=t.dir.y>0&&0!==r,a=n.dir.y>0&&0!==s):e.y<0&&(o=t.dir.y<0&&0!==r,a=n.dir.y<0&&0!==s),o!==a?o?-1:1:r-s}));return s.length>0?s[0].index:n}constructor(e){super(e),this.handleDocumentClick=e=>{if(this._selectedMarkerPopup&&this._answerChoices){const t=l.default.findDOMNode(this._answerChoices),n=e.target,r=(e,t=3)=>e&&(e.contains(n)||t>0&&r(e.parentElement,t-1));r(t)||this.dismissMarkerPopup()}},this.handleDocumentKeyDown=e=>{this._selectedMarkerPopup&&27===e.keyCode&&(e.stopPropagation(),this.dismissMarkerPopup())},this._markers=[],this.state={selectedMarkerIndex:-1,markersInteracted:!1}}componentDidMount(){document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("keydown",this.handleDocumentKeyDown,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("keydown",this.handleDocumentKeyDown,!0)}simpleValidate(e){return w.validate(this.getUserInput(),e)}getUserInput(){const{markers:e}=this.props;return{markers:e}}showRationalesForCurrentlySelectedChoices(e){const{markers:t}=this.props,{onChange:n}=this.props;n({markers:t.map((e=>{const t=w.gradeMarker(e);return(0,s.default)({},e,{showCorrectness:t.hasAnswers?t.isCorrect?"correct":"incorrect":void 0})}))},null,!0)}dismissMarkerPopup(){const{selectedMarkerIndex:e}=this.state;-1!==e&&this.setState({selectedMarkerIndex:-1},(()=>{const t=this._markers[e];t&&l.default.findDOMNode(t).focus()}))}handleMarkerChange(e,t){const{markers:n,onChange:r}=this.props;r({markers:[].concat(n.slice(0,e),[(0,s.default)({},t,{showCorrectness:void 0})],n.slice(e+1))})}handleMarkerClick(e,t){const{selectedMarkerIndex:n}=this.state;t.preventDefault(),n!==e?this.setState({selectedMarkerIndex:e,markersInteracted:!0},(()=>{setTimeout((()=>{this._answerChoices&&this._answerChoices.focusAnswer()}),100)})):this.dismissMarkerPopup()}handleMarkerKeyDown(e,t){const{markers:n}=this.props;if(n.length<2)return;const r={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}}[t.key];if(!r)return;t.preventDefault();const s=this._markers[w.navigateToMarkerIndex(r,n,e)];s&&l.default.findDOMNode(s).focus()}handleAnswerChoicesChangeForMarker(e,t){const{choices:n,markers:r,multipleAnswers:o}=this.props,a=n.filter(((e,n)=>t[n]));this.handleMarkerChange(e,(0,s.default)({},r[e],{selected:a})),o||this.dismissMarkerPopup()}renderAnswerChoicesForMarker(e,t){const{choices:n,multipleAnswers:r}=this.props,s=t.selected;return i.createElement("div",{className:(0,a.default)("perseus-label-image-widget-answer-choices",(0,o.css)(x.scrollableChoices))},i.createElement(f.default,{choices:n.map((e=>({content:e,checked:!!s&&s.includes(e)}))),multipleSelect:r,onChange:t=>this.handleAnswerChoicesChangeForMarker(e,t),ref:e=>this._answerChoices=e}))}renderMarkers(){const{markers:e,questionCompleted:t}=this.props,{selectedMarkerIndex:n,markersInteracted:r}=this.state;return e.map(((e,o)=>{const a=w.gradeMarker(e),l=i.createElement(g.default,(0,s.default)({},e,{showCorrectness:t&&a.hasAnswers&&a.isCorrect?"correct":e.showCorrectness,showSelected:o===n,showPulsate:!r,key:`${e.x}.${e.y}`,onClick:e=>this.handleMarkerClick(o,e),onKeyDown:e=>this.handleMarkerKeyDown(o,e),ref:e=>this._markers[o]=e}));if(o!==n)return l;let c;return c=window.matchMedia(p.default.xsOrSmaller.replace("@media ","")).matches?e.y>50?"top":"bottom":{left:"right",top:"bottom",right:"left",bottom:"top",center:"top"}[w.imageSideForMarkerPosition(e.x,e.y)],i.createElement(u.Popover,{content:()=>i.createElement(u.PopoverContentCore,{style:x.choicesPopover},this.renderAnswerChoicesForMarker(o,e)),placement:c,opened:!0,key:`${e.x}.${e.y}`,ref:e=>this._selectedMarkerPopup=e},l)}))}renderInstructions(){const{apiOptions:{isMobile:e},choices:t,multipleAnswers:n,hideChoicesFromInstructions:r}=this.props,s=e?n?v._("Tap each dot on the image to select all answers that apply."):v._("Tap each dot on the image to select an answer."):n?v._("Click each dot on the image to select all answers that apply."):v._("Click each dot on the image to select an answer."),l=v._("Choices:");return i.createElement("div",{className:(0,a.default)("perseus-label-image-widget-instructions",(0,o.css)(x.instructions))},i.createElement("div",{className:(0,o.css)(x.instructionsCaption)},s," ",!r&&l),!r&&i.createElement("div",{className:(0,o.css)(x.instructionsChoices)},t.map(((e,t)=>i.createElement("div",{className:(0,o.css)(x.instructionsChoice),key:t},i.createElement(d.default,{content:e}))))))}render(){const{imageAlt:e,imageUrl:t,imageWidth:n,imageHeight:r}=this.props,{selectedMarkerIndex:s}=this.state;return i.createElement("div",null,this.renderInstructions(),i.createElement("div",{className:(0,o.css)(x.markersCanvas),style:{maxWidth:n,maxHeight:r}},i.createElement("div",{className:(0,o.css)(x.imageContainer,-1!==s&&x.imageInteractionDisabled)},i.createElement(m.default.Consumer,null,(({setAssetStatus:s})=>i.createElement(h.default,{alt:e,src:t,width:n,height:r,setAssetStatus:s})))),this.renderMarkers()))}}const x=o.StyleSheet.create({instructions:{paddingBottom:16},instructionsCaption:(0,s.default)({},c.typography.bodyXsmallBold,{paddingBottom:16}),instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"},scrollableChoices:{paddingTop:8,paddingBottom:8,[p.default.xsOrSmaller]:{maxHeight:250,overflowY:"auto"}},choicesPopover:{padding:0}});var E={name:"label-image",displayName:"Label Image",widget:w,accessible:!0,isLintable:!0};t.default=E},bjk2:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("i8i4")),a=r(n("5pch")),i=n("j8wP"),l=n("vwLt");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class c extends s.Component{constructor(...e){super(...e),this.focus=()=>(o.default.findDOMNode(this).focus(),!0),this._handleChangeEvent=e=>{this._handleChange(parseInt(e.target.value))},this._handleChange=e=>{this.props.trackInteraction(),this.props.onChange({selected:e})},this.getUserInput=()=>({value:this.props.selected}),this.simpleValidate=e=>c.validate(this.getUserInput(),e)}static validate(e,t){const n=e.value;if(0===n)return{type:"invalid",message:null};return{type:"points",earned:t.choices[n-1].correct?1:0,total:1,message:null}}render(){const e=[s.createElement(l.OptionItem,{key:"placeholder",value:"0",disabled:!0,label:this.props.placeholder})].concat(this.props.choices.map(((e,t)=>s.createElement(l.OptionItem,{key:String(t+1),value:String(t+1),label:e}))));return s.createElement("div",{onClick:e=>{e.stopPropagation()},onTouchStart:e=>{e.stopPropagation()}},s.createElement(l.SingleSelect,{onChange:e=>this._handleChange(parseInt(e)),selectedValue:String(this.props.selected),disabled:this.props.apiOptions.readOnly},e))}}c.defaultProps={choices:[],selected:0,placeholder:"",apiOptions:i.ApiOptions.defaults};var p={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:c,transform:e=>({placeholder:e.placeholder,choices:a.default.map(e.choices,(e=>e.content))})};t.default=p},brIp:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("i8i4")),a=n("JimW"),i=r(n("aip7")),l=n("yBUS"),u=n("Lp/H"),c=r(n("uYZq")),p=r(n("FCtg")),d=r(n("4PhQ"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}let f=[],g=[],m=!1;const v=e=>{"undefined"!=typeof MathJax?e():Promise.resolve().then(n.t.bind(null,"IR3g",7)).then((e=>e.default())).then(e).catch((()=>{}))},y=()=>{v((()=>{MathJax.Hub.Queue((function(){const e=MathJax.Hub.elementScripts;MathJax.Hub.elementScripts=e=>f;try{return MathJax.Hub.Process(null,(()=>{for(const e of g)e();f=[],g=[],m=!1}))}catch(e){throw e}finally{MathJax.Hub.elementScripts=e}}))}))},b={border:0,clip:"rect(0,0,0,0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px"};class w extends s.Component{constructor(...e){super(...e),this.state={katex:void 0,katexA11y:void 0,katexHtml:null,katexA11yHtml:null,mounted:!1},this._root=void 0,this._unmounted=!1,this.hasProcessed=!1,this.script=void 0}componentDidMount(){this._root=o.default.findDOMNode(this),this.setState({mounted:!0}),(0,l.getKaTeX)().then((e=>{this._unmounted||this.setState({katex:e})})),(0,l.getRenderA11yString)().then((e=>{this._unmounted||this.setState({katexA11y:e})}))}shouldComponentUpdate(e,t){return!(0,i.default)(this.props,e)||!(0,i.default)(this.state,t)}componentDidUpdate(e,t){const{children:n,onRender:r,katexOptions:s}=this.props,{katex:o,katexA11y:a}=this.state;if(!o||!a||o===t.katex&&a===t.katexA11y&&n===e.children&&JSON.stringify(s)===JSON.stringify(e.katexOptions))return;const i=this.getKatexHtml(),l=i?this.getKatexA11yHtml():null;this.setState({katexHtml:i,katexA11yHtml:l}),i?(this.maybeUnprocess(),this.script&&(d.default.log("Rendering KaTeX after MathJax.",null,{tex:n}),v((()=>{const e=MathJax.Hub.getJaxFor(this.script);e&&e.Remove()}))),r&&r()):this.script?v((()=>{MathJax.Hub.Queue((()=>{const e=MathJax.Hub.getJaxFor(this.script);if(e)return e.Text(n,r);this.setScriptText(n),this.process(r)}))})):(this.setScriptText(n),this.process(r))}componentWillUnmount(){this._unmounted=!0,this.maybeUnprocess(),this.script&&v((()=>{const e=MathJax.Hub.getJaxFor(this.script);e&&e.Remove()}))}getKatexHtml(){const{children:e,katexOptions:t}=this.props,{katex:n}=this.state;if(!n)return"";try{return n.renderToString(e,t||{})}catch(t){return(0,u.logKaTeXError)(e,t),null}}getKatexA11yHtml(){const{children:e}=this.props,{katexA11y:t}=this.state;try{return t?t(e):""}catch(t){(0,u.logKaTeXError)(e,t)}return null}process(e){this.hasProcessed=!1,((e,t)=>{if(p.default.isServerSide())return t();f.push(e),g.push(t),m||(m=!0,setTimeout(y,0))})(this.script,(()=>{this.hasProcessed=!0,e&&e()}))}maybeUnprocess(){this.script&&!this.hasProcessed&&(e=>{const t=f.indexOf(e);f.splice(t,1),g.splice(t,1)})(this.script)}setScriptText(e){this.script||(this.script=document.createElement("script"),this.script.type="math/tex",this.mathjaxRef&&this.mathjaxRef.appendChild(this.script)),"text"in this.script?this.script.text=e:this.script.textContent=e}render(){const{katexHtml:e,katexA11yHtml:t}=this.state;return s.createElement(a.UniqueIDProvider,{mockOnFirstRender:!0},(n=>{let r;return t&&this.state.mounted&&(r=`katex-${n.get("described-by-id")}`),s.createElement(c.default,null,s.createElement("span",{style:this.props.style,onClick:this.props.onClick},s.createElement("span",{ref:e=>this.mathjaxRef=e}),s.createElement("span",{ref:e=>this.katexRef=e,style:{whiteSpace:"nowrap"},dangerouslySetInnerHTML:{__html:e},"aria-hidden":!!t,"aria-describedby":r}),s.createElement("span",{dangerouslySetInnerHTML:{__html:t},id:r,style:b})))}))}}w.defaultProps={katexOptions:{colorIsTextColor:!0},onRender:function(){}};var x=w;t.default=x},bxIm:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"unescaped-dollar",severity:s.default.Severity.ERROR,selector:"unescapedDollar",message:"Unescaped dollar sign:\nDollar signs must appear in pairs or be escaped as \\$"});t.default=o},bxxM:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("h1Z3")),o=r(n("Jxul")),a=r(n("bjk2")),i=r(n("vUnj")),l=r(n("P++F")),u=r(n("GbkG")),c=r(n("fYWP")),p=r(n("VO3A")),d=r(n("/Qgg")),h=r(n("zyiX")),f=r(n("y1hP")),g=r(n("Voua")),m=r(n("VWbw")),v=r(n("bTcU")),y=r(n("SrcR")),b=r(n("k1y+")),w=r(n("j+Ew")),x=r(n("w4kA")),E=r(n("1I17")),C=r(n("qRYE")),k=r(n("h/tm")),O=r(n("P76s")),M=r(n("z875")),P=r(n("RY23")),_=r(n("ipxt")),S=r(n("YXfq")),T=r(n("BCuI")),I=r(n("7O7Y")),N=r(n("jDkz")),R=r(n("eCzM")),A=r(n("FGwj")),j=r(n("K/mI")),D=r(n("dWq9")),W=[s.default,o.default,a.default,i.default,l.default,u.default,c.default,p.default,d.default,h.default,f.default,g.default,m.default,v.default,y.default,b.default,w.default,x.default,E.default,C.default,k.default,O.default,M.default,P.default,_.default,S.default,T.default,I.default,N.default,R.default,A.default,j.default,D.default];t.default=W},"c+Oy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("q1tI"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}class o extends r.Component{render(){const e=this.props.className?"paragraph "+this.props.className:"paragraph";return r.createElement("div",{className:e,"data-perseus-component-index":this.props.translationIndex,"data-perseus-paragraph-index":this.props.paragraphIndex},this.props.children)}}var a=o;t.default=a},cCIU:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")).default.makeRule({name:"extra-content-spacing",selector:"paragraph",pattern:/\s+$/,applies:function(e){return"article"===e.contentType},message:"No extra whitespace at the end of content blocks."});t.default=s},cxY9:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("Wy19"));var a={serialize:function(){return s.default.omit(this.props,o.default)}};t.default=a},czma:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("q1tI"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}class o extends r.PureComponent{constructor(...e){super(...e),this.state={mouseState:"up",trackedSelection:null},this._handleSelectionChange=()=>{this._updateTrackedSelection(this.props.buildHighlight),"down"===this.state.mouseState&&this.setState({mouseState:"down-and-selecting"})},this._handleMouseDown=()=>{this.setState({mouseState:"down"})},this._handleMouseUp=()=>{this.setState({mouseState:"up"})}}componentDidMount(){this._updateListeners(!1,this.props.enabled)}UNSAFE_componentWillReceiveProps(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(e.buildHighlight),this._updateListeners(this.props.enabled,e.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){const e=document.getSelection();if(!e||0===e.rangeCount)return null;const t=e.getRangeAt(0);if(t.collapsed)return null;return{focusNode:e.focusNode,focusOffset:e.focusOffset,range:t}}_computeTrackedSelection(e){const t=this._computeFocusAndRange();if(!t)return null;const{focusNode:n,focusOffset:r,range:s}=t,o=e(s);return o?{focusNode:n,focusOffset:r,proposedHighlight:o}:null}_updateTrackedSelection(e){const t=this._computeTrackedSelection(e);this.setState({trackedSelection:t})}render(){const{mouseState:e,trackedSelection:t}=this.state,n="down-and-selecting"===e;return this.props.children?r.createElement("div",null,this.props.children(t,n)):null}}var a=o;t.default=a},d773:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("xc4a")),a=r(n("p8fL")),i=n("eAf/");const l={maxScale:1,mouselayer:!1,shadow:!1,disableMouseEventsOnWrapper:!1},u=function(e,t,n,r){r=s.default.extend({},l,r);const o=e.fixedEllipse(t,n,r.maxScale,r.padding);if(s.default.extend(this,o,{graphie:e,initialPoint:t}),r.interactiveKindForTesting&&this.wrapper.setAttribute("data-interactive-kind-for-testing",r.interactiveKindForTesting),r.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper),r.shadow){const e="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))",t=this.wrapper;t.style.webkitFilter=e,t.style.filter=e,this.moveTo=function(e){const t=i.vector.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=a.default.getCanUse3dTransform(),r="translateX("+Math.round(t[0])+"px) translateY("+Math.round(t[1])+"px)"+(n?" translateZ(0)":"");this.transform(r)}}r.disableMouseEventsOnWrapper&&(this.wrapper.style.pointerEvents="none",this.visibleShape.node.style.pointerEvents="auto")};s.default.extend(u.prototype,o.default);var c=u;t.default=c},dRoQ:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("fhzG")),a=r(n("17x9"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var l=(0,o.default)({displayName:"BlurInput",propTypes:{className:a.default.string,style:a.default.any,value:a.default.string.isRequired,onChange:a.default.func.isRequired},getInitialState:function(){return{value:this.props.value}},UNSAFE_componentWillReceiveProps:function(e){this.setState({value:e.value})},handleChange:function(e){this.setState({value:e.target.value})},handleBlur:function(e){this.props.onChange(e.target.value)},render:function(){return s.createElement("input",{className:this.props.className,style:this.props.style,type:"text",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur})}});t.default=l},dWq9:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=h(n("q1tI")),o=(r(n("5pch")),n("JimW")),a=r(n("8Kom")),i=h(n("+jAD")),l=r(n("WCF/")),u=r(n("qRKg")),c=r(n("SNGj")),p=h(n("HEOz"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const f="{host}/embed_video?slug={slug}&internal_video_only=1",g=/^https?:\/\//,m=/(khanacademy\.org|localhost)/;class v extends s.Component{constructor(...e){super(...e),this.getUserInput=()=>null,this.simpleValidate=e=>v.validate(null,e),this.change=(...e)=>i.change.apply(this,e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const e=this.props.location;if(!e)return s.createElement("div",null);let t;if(g.test(e))t=e;else{t=f.replace("{slug}",e);let n="https://www.khanacademy.org";m.test(a.default.host)&&(n=a.default.origin),t=t.replace("{host}",n)}return s.createElement(o.View,null,s.createElement(l.default,{width:1280,height:720,key:e+this.props.alignment},s.createElement(o.View,{style:u.default.srOnly},p._("Khan Academy video wrapper")),s.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:1280,height:720,src:t,allowFullScreen:!0})),s.createElement(c.default,{location:e}))}}var y={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:v};t.default=y},dbvv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLineHeightForNode=void 0;t.getLineHeightForNode=(e,t)=>t.offset().top-e.offset().top},"e04/":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.unionAnswerForms=t.maybeParsePercentInput=t.default=t.NumericInput=void 0;var s=r(n("TSYQ")),o=v(n("q1tI")),a=r(n("5pch")),i=r(n("l+pH")),l=r(n("eMwK")),u=r(n("7gXX")),c=r(n("WZBl")),p=n("j8wP"),d=r(n("7BBF")),h=r(n("XwLL")),f=n("zahm"),g=v(n("HEOz"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const y=u.default.parseTex,b=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],w={integer:()=>g._("an integer, like $6$"),proper:e=>"optional"===e.simplify?g._("a *proper* fraction, like $1/2$ or $6/10$"):g._("a *simplified proper* fraction, like $3/5$"),improper:e=>"optional"===e.simplify?g._("an *improper* fraction, like $10/7$ or $14/8$"):g._("a *simplified improper* fraction, like $7/4$"),mixed:()=>g._("a mixed number, like $1\\ 3/4$"),decimal:()=>g._("an *exact* decimal, like $0.75$"),pi:()=>g._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")};class x extends o.Component{constructor(...e){super(...e),this.state={previousValues:[""]},this.getAnswerBlurb=e=>{let t,n;if(this.props.apiOptions.satStyling&&e){const r=this.simpleValidate(e);if(t="points"===r.type&&r.earned===r.total,!t){const t=a.default.filter(e.answers,(e=>"correct"===e.status)),r=a.default.map(t,(e=>{let t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);let n=h.default.toNumericString(e.value,t);return e.maxError&&(n+=" ± "+h.default.toNumericString(e.maxError,t)),n}));n=o.createElement(c.default,{answers:r})}}return[n,!!t]},this.getClasses=(e,t)=>{const n={};return n["perseus-input-size-"+this.props.size]=!0,n["perseus-input-right-align"]=this.props.rightAlign,n[p.ClassNames.CORRECT]=t&&e&&this.props.currentValue,n[p.ClassNames.INCORRECT]=t&&!e&&this.props.currentValue,n[p.ClassNames.UNANSWERED]=t&&!this.props.currentValue,n},this.examples=()=>{var e;const t=0!==(null==(e=this.props.answerForms)?void 0:e.length)?this.props.answerForms:a.default.map(a.default.keys(w),(e=>({name:e,simplify:"required"})));let n=a.default.map(t,(e=>w[e.name](e)));return n=a.default.uniq(n),[g._("**Your answer should be** ")].concat(n)},this.shouldShowExamples=()=>{var e,t;const n=0===(null==(e=this.props.answerForms)?void 0:e.length),r=a.default.uniq(null==(t=this.props.answerForms)?void 0:t.map((e=>e.name))).length>=a.default.size(w);return!n&&!r},this.simpleValidate=e=>x.validate(this.getUserInput(),e),this.focus=()=>(this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{this.props.onChange({currentValue:t},n)},this.getUserInput=()=>x.getUserInputFromProps(this.props),this.handleChange=(e,t)=>{this.props.onChange({currentValue:e},t),this.props.trackInteraction()},this._getInputType=()=>this.props.apiOptions.staticRender?"tex":"text",this._handleFocus=()=>{this.props.onFocus([]);const{interactionCallback:e}=this.props.apiOptions;e&&e()},this._handleBlur=()=>{this.props.onBlur([])}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){const t=a.default.filter(e.answers,(e=>"correct"===e.status)),n=a.default.map(t,(e=>{let t="decimal";e.answerForms&&e.answerForms[0]&&(t=e.answerForms[0]);let n=h.default.toNumericString(e.value,t);return e.maxError&&(n+=" ± "+h.default.toNumericString(e.maxError,t)),n}));if(0!==n.length)return n[0]}static validate(e,t){const n=a.default.pluck(b,"value"),r=e=>d.default.number.createValidatorFunctional(e.value,{message:e.message,simplify:"correct"===e.status?e.simplify:"optional",inexact:!0,maxError:e.maxError,forms:e.strict&&e.answerForms&&0!==e.answerForms.length?e.answerForms:n}),s=y(e.currentValue),o=a.default.where(t.answers,{status:"correct"}),i=o.every((e=>Math.abs(e.value)<=1));let l=a.default.find(a.default.map(o,(e=>{let n=s;t.coefficient&&(n?"-"===n&&(n=-1):n=1);return r(e)(C(n,i))})),(e=>e.correct||e.empty));if(!l){const e=[].concat(a.default.where(t.answers,{status:"ungraded"}),a.default.where(t.answers,{status:"wrong"})),n=a.default.find(e,(e=>r(e)(C(s,i)).correct));l={empty:!!n&&"ungraded"===n.status,correct:!!n&&"correct"===n.status,message:n?n.message:null,guess:s}}return l.empty?{type:"invalid",message:l.message}:{type:"points",earned:l.correct?1:0,total:1,message:l.message}}render(){const e=this.props.reviewModeRubric,t=this.getAnswerBlurb(e),n=t[0],r=t[1],a=this.getClasses(r,e);let u=this.props.labelText;null!=u&&""!==u||(u=g._("Your answer:"));const c=e=>this.props.rightAlign?o.createElement("div",{className:"perseus-input-right-align"},e):e;if(this.props.apiOptions.customKeypad)return c(o.createElement(l.default,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur}));const p=o.createElement(i.default,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:(0,s.default)(a),labelText:u,type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,highlightLint:this.props.highlightLint});return n?o.createElement("span",{className:"perseus-input-with-answer-blurb"},p,n):this.props.apiOptions.satStyling?o.createElement("label",{className:"perseus-input-with-label"},o.createElement("span",{className:"perseus-input-label","aria-hidden":"true"},g.doNotTranslate("Answer:")),p):o.createElement("div",null,p)}}t.NumericInput=x,x.defaultProps={currentValue:"",size:"normal",rightAlign:!1,apiOptions:p.ApiOptions.defaults,coefficient:!1,answerForms:[],labelText:"",linterContext:f.linterContextDefault,multipleNumberInput:!1};const E=function(e){const t=a.default.flatten(e),n=(r=t,s=a.default.isEqual,a.default.reduce(r,((e,t)=>a.default.find(e,s.bind(null,t))?e:e.concat([t])),[]));var r,s;return a.default.sortBy(n,(e=>a.default.keys(w).indexOf(e.name)))};t.unionAnswerForms=E;const C=(e,t)=>{if("string"!=typeof e||!e.endsWith("%"))return e;const n=parseFloat(e.slice(0,-1));return isNaN(n)?e:t?n/100:n};t.maybeParsePercentInput=C;var k={name:"numeric-input",displayName:"Number text box",defaultAlignment:"inline-block",accessible:!0,widget:x,transform:function(e){return a.default.extend(a.default.omit(e,"answers"),{answerForms:E(a.default.map(e.answers,(e=>a.default.map(e.answerForms,(t=>({simplify:e.simplify,name:t}))))))})},isLintable:!0};t.default=k},e1hl:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=n("eAf/");function a(e){const t=s.default.zip(e,e.slice(1).concat(e.slice(0,1))),n=s.default.map(t,(function(e){const t=e[0],n=e[1];return(n[0]-t[0])*(n[1]+t[1])}));return r=n,s.default.reduce(r,(function(e,t){return e+t}),0)>0;var r}const i={constrain:function(){this.constrain()},pointsToFront:function(e){s.default.invoke(e.points,"toFront")}};i.standard=[i.constrain,i.pointsToFront];const l={draw:function(){this.draw()}};l.standard=[l.draw];const u={basic:function(e,t){const n=this.graphie,r=this.path(e);this.state.visibleShape||(this.state.visibleShape=n.raphael.path(r),this.state.visibleShape.attr(this.normalStyle())),e.normalStyle===t.normalStyle||s.default.isEqual(e.normalStyle,t.normalStyle)||this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.attr({path:r}),this.mouseTarget()&&this.mouseTarget().attr({path:r})},labels:function(e,t){const n=this.graphie,r=this,o=s.default.invoke(e.points,"coord"),i=a(o),l=o.length;null!=r.state._labelCache&&s.default.invoke(r.state._labelCache,"remove"),r.state._labelCache=[],(e.angleLabels.length||e.showRightAngleMarkers.length)&&(null==r.state._labeledAngles&&(r.state._labeledAngles=s.default.times(Math.max(e.angleLabels.length,e.showRightAngleMarkers.length),(function(){return n.label([0,0],"","center",e.labelStyle)}))),s.default.each(r.state._labeledAngles,(function(t,s){r.state._labelCache.push(n.labelAngle({point1:o[(s-1+l)%l],vertex:o[s],point3:o[(s+1)%l],label:t,text:e.angleLabels[s],showRightAngleMarker:e.showRightAngleMarkers[s],numArcs:e.numArcs[s],clockwise:i,style:e.labelStyle}))}))),e.sideLabels.length&&(null==r.state._labeledSides&&(r.state._labeledSides=s.default.map(e.sideLabels,(function(t){return n.label([0,0],"","center",e.labelStyle)}))),s.default.each(r.state._labeledSides,(function(t,s){r.state._labelCache.push(n.labelSide({point1:o[s],point2:o[(s+1)%l],label:t,text:e.sideLabels[s],numArrows:e.numArrows[s],numTicks:e.numTicks[s],clockwise:i,style:e.labelStyle}))}))),e.vertexLabels.length&&(null==r.state._labeledVertices&&(r.state._labeledVertices=s.default.map(e.vertexLabels,(function(t){return n.label([0,0],"","center",e.labelStyle)}))),s.default.each(r.state._labeledVertices,(function(t,s){r.state._labelCache.push(n.labelVertex({point1:o[(s-1+l)%l],vertex:o[s],point3:o[(s+1)%l],label:t,text:e.vertexLabels[s],clockwise:i,style:e.labelStyle}))}))),r.state._labelCache=s.default.flatten(r.state._labelCache)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(this.highlightStyle(),50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(this.normalStyle(),50)}};u.standard=[u.basic,u.labels,u.highlight];const c={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},labels:function(){const e=[this.state._labeledSides,this.state._labeledVertices,this.state._labeledAngles,this.state._labelCache];s.default.each(e,(function(e){null!=e&&e.length&&s.default.invoke(e,"remove")}))}};c.standard=[c.basic,c.labels];const p={fixed:function(){return function(){return!1}},snap:function(e){return function(t){return null===e||(e=e||this.graphie.snap,o.point.roundTo(t,e))}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(r,a){const i=this.graphie,l=o.vector.subtract(r,a);e=e||i.range,void 0===t&&(t=i.snap);let u=i.unscalePoint([n,i.ypixels-n]),c=i.unscalePoint([i.xpixels-n,n]);t&&(u=o.point.ceilTo(u,t),c=o.point.floorTo(c,t));const p=s.default.map(this.coords(),(function(e,t){const n=o.vector.subtract(c,e);return[o.vector.subtract(u,e),n]})),d=s.default.reduce(p,(function(e,t){const n=t[0],r=t[1];return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]}),l);return o.vector.add(a,d)}},standard:null},d={updatePoints:function(e,t){const n=o.vector.subtract(e,t);s.default.each(this.state.points,(function(e){e.setCoord(o.vector.add(e.coord(),n))}))},standard:null};var h={add:i,modify:l,draw:u,remove:c,onMoveStart:{standard:null},constraints:p,onMove:d,onMoveEnd:{standard:null},onClick:{standard:null}};t.default=h},e46u:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("wa3X")),i=r(n("Pwnf")),l=h(n("HEOz")),u=r(n("APgo")),c=n("/4Qb"),p=n("UcaO");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{render(){const{apiOptions:e,answerBarState:t,onCheckAnswer:n,onNextQuestion:r}=this.props,p=(0,s.default)({},g.answerBar,{backgroundColor:"CORRECT"===t?i.default.offWhite:"white",justifyContent:"CORRECT"!==t||r?"space-between":"center"}),d="INCORRECT"===t?o.createElement("span",{style:g.text},o.createElement("span",{style:g.tryAgainIcon},o.createElement(u.default,c.iconTryAgain)),o.createElement("span",{style:{marginLeft:8}},l._("Keep trying"))):o.createElement("span",null);if("CORRECT"!==t){const r="INCORRECT"===t?l._("Try again"):l._("Check");return o.createElement("div",{style:p},d,o.createElement(a.default,{disabled:e.readOnly||"ACTIVE"!==t,onClick:n},r))}return o.createElement("div",{style:p},o.createElement("span",{style:g.text},o.createElement("span",{style:{fontSize:28,color:i.default.green}},o.createElement(u.default,(0,s.default)({},c.iconStar,{style:{marginBottom:5}}))),o.createElement("span",{role:"alert","aria-label":l._("Correct!"),style:{marginLeft:8}},l._("Correct!"))),r&&o.createElement(a.default,{onClick:r},l._("Next question")))}}const g={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:p.negativePhoneMargin,marginRight:p.negativePhoneMargin,marginBottom:p.negativePhoneMargin,marginTop:p.phoneMargin,paddingLeft:p.phoneMargin,paddingRight:10,borderTop:`1px solid ${i.default.offBlack50}`},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:17}};var m=f;t.default=m},eCzM:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("i8i4")),l=r(n("5pch")),u=n("reBI"),c=r(n("7xiW")),p=r(n("eMwK")),d=r(n("Atlv")),h=r(n("uBl0")),f=n("j8wP"),g=r(n("7BBF")),m=n("zahm"),v=r(n("p8fL"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}const{assert:b}=v.default,{keypadElementPropType:w}=u.propTypes,x=function(e,t){return[""+e,""+t]},E=function(e){return b(l.default.isArray(e)&&2===e.length),+e[0]},C=function(e){return b(l.default.isArray(e)&&2===e.length),+e[1]},k=function(e){return"answer"+E(e)+","+C(e)};class O extends o.Component{constructor(...e){super(...e),this._getRows=()=>this.props.answers.length,this._getColumns=()=>this.props.answers[0].length,this.getUserInput=()=>l.default.map(this.props.answers,l.default.clone),this.onValueChange=(e,t,n)=>{const r=l.default.map(this.props.answers,l.default.clone);r[e][t]=n.target?n.target.value:n,this.props.onChange({answers:r}),this.props.trackInteraction()},this.onHeaderChange=(e,t)=>{const n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})},this.simpleValidate=e=>O.validate(this.getUserInput(),e),this._handleFocus=e=>{this.props.onFocus(e)},this._handleBlur=e=>{this.props.onBlur(e)},this.focus=()=>(this.focusInputPath(x(0,0)),!0),this.focusInputPath=e=>{const t=k(e),n=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?n.focus():i.default.findDOMNode(n).focus()},this.blurInputPath=e=>{const t=k(e),n=this.refs[t];this.props.apiOptions.customKeypad||this.props.apiOptions.staticRender?n.blur():i.default.findDOMNode(n).blur()},this.getDOMNodeForPath=e=>{const t=k(e);return i.default.findDOMNode(this.refs[t])},this.getInputPaths=()=>{const e=this._getRows(),t=this._getColumns(),n=[];return(0,l.default)(e).times((e=>{(0,l.default)(t).times((t=>{const r=x(e,t);n.push(r)}))})),n},this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{const r=E(e),s=C(e),o=l.default.map(this.props.answers,l.default.clone);o[r][s]=t,this.props.onChange({answers:o},n)}}render(){const e=this._getRows(),t=this._getColumns(),n=this.props.headers;let r,a;const i={};return this.props.apiOptions.customKeypad?(r=p.default,a={width:80},i.keypadElement=this.props.keypadElement):this.props.apiOptions.staticRender?(r=c.default,a={}):(r="input",a={}),o.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},o.createElement("thead",null,o.createElement("tr",null,l.default.map(n,((e,t)=>this.props.editableHeaders?o.createElement("th",{key:t},o.createElement(this.props.Editor,{ref:"columnHeader"+t,apiOptions:this.props.apiOptions,content:e,widgetEnabled:!1,onChange:l.default.partial(this.onHeaderChange,t)})):o.createElement("th",{key:t},o.createElement(d.default,{content:e,linterContext:this.props.linterContext})))))),o.createElement("tbody",null,(0,l.default)(e).times((e=>o.createElement("tr",{key:e},(0,l.default)(t).times((t=>o.createElement("td",{key:t},o.createElement(r,(0,s.default)({ref:k(x(e,t)),type:"text",value:this.props.answers[e][t],disabled:this.props.apiOptions.readOnly,onFocus:l.default.partial(this._handleFocus,x(e,t)),onBlur:l.default.partial(this._handleBlur,x(e,t)),onChange:l.default.partial(this.onValueChange,e,t),style:a},i))))))))))}}O.propTypes={answers:a.default.arrayOf(a.default.arrayOf(a.default.string)),editableHeaders:a.default.bool,Editor:a.default.func,headers:a.default.arrayOf(a.default.string),keypadElement:w,trackInteraction:a.default.func.isRequired,linterContext:m.linterContextProps},O.defaultProps=function(){const e=(0,l.default)(4).times((function(){return h.default.stringArrayOfSize(1)}));return{apiOptions:f.ApiOptions.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,answers:e,linterContext:m.linterContextDefault}}(),l.default.extend(O,{validate:function(e,t){const n=function(e){return l.default.filter(e,(function(e){return l.default.some(e,l.default.identity)}))},r=n(t.answers),s=n(e);if(l.default.some(s,(function(e){return l.default.some(e,(function(e){return""===e}))}))||!s.length)return{type:"invalid",message:null};if(s.length!==r.length)return{type:"points",earned:0,total:1,message:null};const o=g.default.number.createValidatorFunctional;let a=null;return{type:"points",earned:l.default.every(r,(function(e){let t;for(t=0;t<s.length;t++){const n=s[t];if(l.default.every(n,(function(t,n){const r=e[n],s=o(r,{simplify:!0})(t);return s.message&&(a=s.message),s.correct})))return s.splice(t,1),!0}return!1}))?1:0,total:1,message:a}}});var M={name:"table",displayName:"Table of values",accessible:!0,widget:O,transform:e=>{const t=e.answers.length,n=e.answers[0].length,r=(0,l.default)(t).times((function(){return h.default.stringArrayOfSize(n)}));return l.default.extend({},e,{answers:r})},hidden:!0,isLintable:!0};t.default=M},eMwK:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("8OQS")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=r(n("17x9")),l=r(n("fhzG")),u=n("reBI");const c=["keypadElement","onFocus","value"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const{KeypadInput:d}=u.components,{KeypadTypes:h}=u.consts,{keypadElementPropType:f}=u.propTypes;var g=(0,l.default)({displayName:"SimpleKeypadInput",propTypes:{keypadElement:f,onFocus:i.default.func,value:i.default.oneOfType([i.default.string,i.default.number])},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},focus(){this.refs.input.focus()},blur(){this.refs.input.blur()},getValue:function(){return this.props.value},render(){const e=this,t=e.props,{keypadElement:n,onFocus:r,value:i}=t,l=(0,o.default)(t,c);return a.createElement(d,(0,s.default)({ref:"input",keypadElement:n,onFocus:()=>{n?n.configure({keypadType:h.FRACTION},(()=>{e._isMounted&&r&&r()})):r&&r()},value:null==i?"":""+i},l))}});t.default=g},edqz:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("rYEP")),o=r(n("r6B3")),a=r(n("Pqam")),i=r(n("tT4s")),l=r(n("P6VF")),u=r(n("L6Cw")),c=r(n("ZEBz")),p=r(n("35EU")),d=r(n("HdDY")),h=r(n("0PLK")),f=r(n("EsmD")),g=r(n("qsUq")),m=r(n("yFMX")),v=r(n("w2H5")),y=r(n("4z3f")),b=r(n("/PAl")),w=r(n("IUub")),x=r(n("janz")),E=r(n("Q7r6")),C=r(n("lLyr")),k=r(n("GFV9")),O=r(n("Ojcu")),M=r(n("/p7U")),P=r(n("27QP")),_=r(n("Q+eB")),S=r(n("2faI")),T=r(n("vp7M")),I=r(n("R7eo")),N=r(n("IGe5")),R=r(n("2vff")),A=r(n("A5Oa")),j=r(n("y1iu")),D=r(n("vjHw")),W=r(n("JTPa")),L=r(n("FW0l")),F=r(n("pYKe")),q=r(n("1Ovf")),z=r(n("AHSQ")),B=r(n("8lwC")),U=r(n("/VnI")),H=[s.default,o.default,a.default,i.default,l.default,u.default,c.default,p.default,d.default,h.default,f.default,g.default,m.default,v.default,y.default,b.default,w.default,x.default,E.default,C.default,k.default,O.default,M.default,P.default,_.default,S.default,T.default,I.default,N.default,R.default,A.default,j.default,D.default,W.default,L.default,F.default,q.default,z.default,B.default,U.default];t.default=H},emyO:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=u(n("q1tI")),a=r(n("17x9")),i=u(n("+jAD"));r(n("5pch"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class c extends o.Component{constructor(...e){super(...e),this.focus=()=>(this.refs.input.focus(),!0),this.changeValue=e=>{this.props.onChange(e.target.value)}}render(){return o.createElement("input",{ref:"input",value:this.props.value||"",onChange:this.changeValue})}}class p extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.getUserInput=()=>this.props.value,this.focus=()=>(this.refs.input.focus(),!0),this.simpleValidate=e=>p.validate(this.getUserInput(),e)}static validate(e,t){return""===e?{type:"invalid",message:"It looks like you haven't answered all of the question yet."}:e===t.correct?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}render(){return o.createElement(c,{ref:"input",value:this.props.value,onChange:this.change("value")})}}p.propTypes=(0,s.default)({},i.propTypes,{value:a.default.string}),p.defaultProps={value:""};var d={name:"example-widget",displayName:"Example Widget",defaultAlignment:"inline-block",hidden:!0,widget:p};t.default=d},f3EM:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("xc4a"));const a={center:null,createPath:null,mouselayer:!1},i=function(e,t,n){n=s.default.extend({},a,n),s.default.extend(this,e.fixedPath(t,n.center,n.createPath)),s.default.extend(this,{graphie:e,initialPoint:e.scalePoint(s.default.head(t))}),n.mouselayer?(this.wrapper.style.touchAction="none",this.graphie.addToMouseLayerWrapper(this.wrapper)):this.graphie.addToVisibleLayerWrapper(this.wrapper)};s.default.extend(i.prototype,o.default);var l=i;t.default=l},fIvv:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("i8i4")),a=r(n("aWaW")),i=r(n("Xb39"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}class u extends s.Component{componentDidMount(){const e=document.createElement("div");this._mountNode=e,this.props.rootElement.appendChild(e),this._renderInMountNode(e)}componentDidUpdate(){const e=this._mountNode;e&&this._renderInMountNode(e)}componentWillUnmount(){const e=this._mountNode;e&&(o.default.unmountComponentAtNode(e),this.props.rootElement.removeChild(e))}remeasure(){this._tooltipPositioner&&this._tooltipPositioner.remeasure()}_renderInMountNode(e){const{tooltipProps:t,dismiss:n,rootElement:r,targetElement:o,isAboveModal:l}=this.props;(0,i.default)(s.createElement(a.default,{tooltipProps:t,dismiss:n,rootElement:r,targetElement:o,isAboveModal:l,ref:e=>this._tooltipPositioner=e}),e)}render(){return null}}t.default=u},fQFx:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=n("mR6N"),a=r(n("4PhQ")),i=n("6OHE"),l=n("La43"),u=r(n("UW/U"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}class p extends s.PureComponent{componentDidUpdate(e){var t;this.props.focusNode===e.focusNode&&this.props.focusOffset===e.focusOffset&&this.props.offsetParent===e.offsetParent||(null==(t=this._tooltip)||t.remeasure())}_getFocusRect(){const{focusNode:e,focusOffset:t,offsetParent:n}=this.props,r=document.createRange();r.setStart(e,t),r.setEnd(e,t);const s=r.getClientRects()[0];if(!s)return a.default.log('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;const{left:o,top:i}=n.getBoundingClientRect();return(0,l.getRelativeRect)({left:s.left,top:s.top,width:s.width,height:s.height},{left:o,top:i})}render(){const e=this._getFocusRect();if(!e)return null;const t=s.createElement("div",{className:(0,o.css)(d.tooltipLabel)},this.props.label);return s.createElement(u.default,{content:t,color:i.colors.kaBlue,inverted:!0,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,toggleOnHover:!1,showOnMount:!0,ref:e=>this._tooltip=e},s.createElement("div",{style:{position:"absolute",left:e.left,top:e.top,height:e.height}}))}}const d=o.StyleSheet.create({tooltipLabel:{userSelect:"none"}});var h=p;t.default=h},fUCW:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("Wy19")),o=r(n("5pch"));var a={getUserInput:function(){return o.default.omit(this.props,s.default)},getUserInputFromProps:function(e){return o.default.omit(e,s.default)}};t.default=a},fYWP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("TSYQ")),a=x(n("q1tI")),i=r(n("5pch")),l=r(n("wa3X")),u=x(n("HEOz")),c=r(n("qRKg")),p=n("j8wP"),d=x(n("+jAD")),h=n("/4Qb"),f=r(n("APgo")),g=r(n("Atlv")),m=r(n("e46u")),v=n("UcaO"),y=n("mR6N"),b=n("zahm");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const E="ungraded",C="correct",k="incorrect",O="invalid",M=(e,t)=>{switch(e){case"HIDDEN":return t?"ACTIVE":e;case"ACTIVE":return t?e:"INACTIVE";case"INACTIVE":return t?"ACTIVE":e;case"INCORRECT":return t?"ACTIVE":"INACTIVE";default:return e}},P=u._("We couldn't grade your answer."),_=u._("It looks like you left something blank or ")+u._("entered in an invalid answer.");class S extends a.Component{constructor(...e){super(...e),this.state={status:E,showHint:!1,message:"",answerBarState:"HIDDEN"},this.change=(...e)=>d.change.apply(this,e),this._onInteractWithWidget=e=>{if(this.setState({status:E,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);const e=0===this.refs.renderer.emptyWidgets().length,t=this.state.answerBarState;this.setState({answerBarState:M(t,e)})}},this._checkAnswer=()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices();const e=this.refs.renderer.score(),t="points"===e.type?e.total===e.earned?C:k:O,n="points"===e.type?e.message||"":e.message?`${P} ${e.message}`:`${P} ${_}`;this.setState({status:t,message:n,answerBarState:"correct"===t?"CORRECT":"INCORRECT"}),this.props.trackInteraction({status:t})},this.getInputPaths=()=>this.refs.renderer.getInputPaths(),this.setInputValue=(e,t,n)=>this.refs.renderer.setInputValue(e,t,n),this.focus=()=>this.refs.renderer.focus(),this.focusInputPath=e=>{this.refs.renderer.focusPath(e)},this.blurInputPath=e=>{this.refs.renderer.blurPath(e)}}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=i.default.extend({},p.ApiOptions.defaults,this.props.apiOptions,{onFocusChange:(e,t)=>{t&&this.props.onBlur(t),e&&this.props.onFocus(e)}});let t=null,n=null;this.state.status===C?(n=a.createElement(f.default,(0,s.default)({},h.iconOk,{style:{color:"#526f03"}})),t=u._("Correct")):this.state.status===k&&(n=a.createElement(f.default,(0,s.default)({},h.iconRemove,{style:{color:"#ff5454"}})),t=u._("Incorrect"));const r=this.props.inGradedGroupSet?(0,y.css)(T.gradedGroupInSet):(0,y.css)(T.gradedGroup),d=(0,o.default)({[r]:e.isMobile,"perseus-graded-group":!0,"answer-correct":!e.isMobile&&this.state.status===C,"answer-incorrect":!e.isMobile&&this.state.status===k}),{answerBarState:v}=this.state,b="CORRECT"===v,w=e.readOnly||e.isMobile&&b;return a.createElement("div",{className:d},!!this.props.title&&a.createElement("div",{className:(0,y.css)(T.title)},this.props.title),a.createElement(g.default,(0,s.default)({},this.props,{ref:"renderer",apiOptions:(0,s.default)({},e,{readOnly:w}),onInteractWithWidget:this._onInteractWithWidget,linterContext:this.props.linterContext})),!e.isMobile&&n&&a.createElement("div",{className:"group-icon"},n),!e.isMobile&&t&&a.createElement("div",{className:(0,y.css)(c.default.srOnly),role:"alert","aria-label":t},t),!e.isMobile&&a.createElement("p",null,this.state.message),!e.isMobile&&a.createElement(l.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer},u._("Check")),!e.isMobile&&b&&this.props.onNextQuestion&&a.createElement(l.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5}},u._("Next question")),this.props.hint&&this.props.hint.content&&(this.state.showHint?a.createElement("div",null,a.createElement("button",{tabIndex:"0",className:(0,y.css)(T.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!1})}},u._("Hide explanation")),a.createElement(g.default,(0,s.default)({},this.props.hint,{ref:"hints-renderer",apiOptions:e,linterContext:this.props.linterContext}))):a.createElement("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:e=>{e.preventDefault(),this.setState({showHint:!0})},className:(0,y.css)(T.showHintLink)},u._("Explain"))),e.isMobile&&"HIDDEN"!==v&&a.createElement(m.default,{apiOptions:e,answerBarState:v,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion}))}}S.defaultProps={title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:b.linterContextDefault};const T=y.StyleSheet.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:`1px solid ${v.gray76}`,borderBottom:`1px solid ${v.gray76}`,backgroundColor:v.tableBackgroundAccent,marginLeft:v.negativePhoneMargin,marginRight:v.negativePhoneMargin,paddingBottom:v.phoneMargin,paddingLeft:v.phoneMargin,paddingRight:v.phoneMargin,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:v.kaGreen,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:v.kaGreen,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:v.gray76,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}});var I={name:"graded-group",displayName:"Graded group (articles only)",widget:S,traverseChildWidgets:function(e,t){return i.default.extend({},e,t(e))},hidden:!1,tracking:"all",isLintable:!0};t.default=I},fiwv:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("SoFn"),o=r(n("sGBi")),a=n("rVh6"),i=r(n("Q08l")),l={MultiRenderer:o.default,shapes:i.default,buildPropTypeForShape:a.buildPropTypeForShape,buildEmptyItemForShape:s.buildEmptyItemForShape,findContentNodesInItem:s.findContentNodesInItem,findHintNodesInItem:s.findHintNodesInItem,inferItemShape:s.inferItemShape};t.default=l},g8jB:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL"));function o(){}var a=class{constructor(e,t,n,r){this._track=e=>{this._tracked&&!this.setting||(this._tracked=!0,this.trackApi((0,s.default)({type:this.widgetType,id:this.widgetID},e)))},e?(this._tracked=!1,this.trackApi=e,this.widgetType=t,this.widgetID=n,this.setting=r,this.track=this._track):this.track=o}};t.default=a},gP8R:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),s=n("mR6N"),o=i(n("UcaO"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class l extends r.Component{render(){const e={borderColor:this.props.visible?this.props.color:"transparent"};return r.createElement("span",{className:(0,s.css)(u.ring),style:e},this.props.children)}}l.defaultProps={visible:!0,color:o.kaGreen};const u=s.StyleSheet.create({ring:{margin:"auto",display:"inline-block",borderRadius:"50%",borderWidth:2,padding:2,borderStyle:"solid"}});var c=l;t.default=c},gmVs:function(e,t,n){"use strict";var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){var n=function(e){return e===Object(e)},r=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];if(n)for(var r in n)e[r]=n[r]}return e};e.exports={isObject:n,merge:r,clone:function(e){return n(e)?Array.isArray(e)?e.slice():r(e):e}}},function(e,t,n){var r=n(0),s=r.clone,o=r.isObject,a=r.merge,i=n(2),l=n(3),u=n(4),c=function(e){return Array.isArray(e)?i:o(e)?l:"string"==typeof e?u:void 0},p=function e(t){if(t instanceof e)return t;if(!(this instanceof e))return new e(t);var n=c(t);this._wrapped=n.thaw?n.thaw(t):t};p.prototype.freeze=function(){var e=this._wrapped,t=c(e);return t.freeze?t.freeze(e):e},p.prototype.zoom=function(e){return void 0===this._zoomStack&&(this._zoomStack=[]),this._zoomStack.push({zoom:e,wrapped:this._wrapped}),this._wrapped=p(this._wrapped).get(e),this},p.prototype.deZoom=function(){var e=this._zoomStack.pop();return this._wrapped=p(e.wrapped).set(e.zoom,this._wrapped).freeze(),this},p.prototype.get=function(e){for(var t=this._wrapped,n=0;n<e.length;n++)t=c(t).get(t,e[n]);return t},p.prototype.mod=function(e,t){var n=this._wrapped,r=s(n),o=c(n);if(0===e.length)this._wrapped=t(this._wrapped);else if(1===e.length)this._wrapped=o.mod(r,e[0],t);else{var a=e[0],i=e.slice(1);r[a]=p(n[a]).mod(i,t).freeze(),this._wrapped=r}return this},p.prototype.merge=function(e,t){return this._wrapped=p(this._wrapped).mod(e,(function(e){return a(e,t)})).freeze(),this},p.prototype.del=function(e){var t=this._wrapped,n=c(t);if(1===e.length)this._wrapped=n.del(t,e[0]);else{var r=e[0],o=e.slice(1),a=s(t);a[r]=p(t[r]).del(o).freeze(),this._wrapped=a}return this},p.prototype.set=function(e,t){return this.mod(e,(function(){return t}))},e.exports=p},function(e,t){e.exports={get:function(e,t){return e[t]},set:function(e,t,n){var r=e.splice();return r[t]=n,r},mod:function(e,t,n){var r=e.slice();return r[t]=n(e[t]),r},del:function(e,t){var n=e.slice();return n.splice(t,1),n}}},function(e,t,n){var r=n(0).clone;e.exports={get:function(e,t){return e[t]},set:function(e,t,n){var s=r(e);return s[t]=n,s},mod:function(e,t,n){var s=r(e);return s[t]=n(e[t]),s},del:function(e,t){var n=r(e);return delete n[t],n}}},function(e,t){e.exports={get:function(e,t){return e[t]},set:function(e,t,n){var r=e.splice();return r[t]=n,r},mod:function(e,t,n){var r=e.splice();return r[t]=n(e[t]),r},del:function(e,t){var n=e.slice();return n.splice(t),n}}}])},e.exports=r()},"h/OD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),s=n("4PhQ");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}class a extends r.PureComponent{componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){const e=this._container;if(!e)throw new s.KAError("invariant violation: `this._container` is not defined, but this method is only called after mount/update",s.Errors.Internal);const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(()=>NodeFilter.FILTER_ACCEPT),!1),n=[];let r=null;for(;t.nextNode();){const e=t.currentNode;if(e.nodeType===Node.ELEMENT_NODE){"inline"!==getComputedStyle(e).display&&(r=null)}else if(e.nodeType===Node.TEXT_NODE){const t=e.nodeValue,s=/\S+/g;let o,a=null;for(;null!==(o=s.exec(t));){const s=o.index,i=o.index+o[0].length;let l;0===s&&r?(l=r,l.setEnd(e,i)):(l=e.ownerDocument.createRange(),l.setStart(e,s),l.setEnd(e,i),n.push(l)),i===t.length&&(a=l)}r=a}}return n}render(){return r.createElement("div",{ref:e=>this._container=e},this.props.children)}}var i=a;t.default=i},"h/tm":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=m(n("q1tI")),a=m(n("17x9")),i=r(n("i8i4")),l=r(n("5pch")),u=r(n("96rG")),c=m(n("4PhQ")),p=r(n("Atlv")),d=r(n("uBl0")),h=n("j8wP"),f=n("zahm");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class v extends o.Component{render(){return o.createElement("div",{className:"card-wrap "+h.ClassNames.INTERACTIVE,style:{width:this.props.width}},o.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}v.propTypes={width:a.default.number.isRequired,height:a.default.number.isRequired};class y extends o.Component{render(){return o.createElement("div",{className:"card-wrap "+h.ClassNames.INTERACTIVE},o.createElement("div",{className:"card drag-hint"}))}}const b=a.default.shape({left:a.default.number,top:a.default.number});class w extends o.Component{constructor(...e){super(...e),this.state={dragging:!1},this.bindMouseMoveUp=()=>{this.mouseMoveUpBound=!0,(0,u.default)(document).on("mousemove",this.onMouseMove),(0,u.default)(document).on("mouseup",this.onMouseUp)},this.unbindMouseMoveUp=()=>{this.mouseMoveUpBound=!1,(0,u.default)(document).off("mousemove",this.onMouseMove),(0,u.default)(document).off("mouseup",this.onMouseUp)},this.onMouseDown=e=>{e.preventDefault();const t=d.default.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))},this.onMouseMove=e=>{if(!this.state.dragging)return;e.preventDefault();const t=d.default.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)},this.onMouseUp=e=>{e.preventDefault();const t=d.default.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}}render(){let e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);const t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);const n=l.default.pick(this.props,"content"),r=this.props.animating?u.default.noop:this.onMouseDown;return o.createElement("div",{className:"card-wrap "+h.ClassNames.INTERACTIVE,style:e,onMouseDown:r,onTouchStart:r,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},o.createElement("div",{className:t.join(" ")},o.createElement(p.default,(0,s.default)({},n,{linterContext:this.props.linterContext}))))}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!d.default.supportsPassiveEvents()&&{passive:!1})}componentDidUpdate(e,t){if(this.props.animating&&!e.animating){const e=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));(0,u.default)(i.default.findDOMNode(this)).animate(this.props.animateTo,Math.max(e,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(c.default.error("Removing an element with bound event handlers.",c.Errors.Internal),this.unbindMouseMoveUp(),d.default.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}}w.propTypes={floating:a.default.bool.isRequired,animating:a.default.bool,width:a.default.number,stack:a.default.bool,onMouseDown:a.default.func,onMouseMove:a.default.func,onMouseUp:a.default.func,startMouse:b,startOffset:b,animateTo:b,onAnimationEnd:a.default.func,linterContext:f.linterContextProps},w.defaultProps={stack:!1,animating:!1,linterContext:f.linterContextDefault};const x="horizontal";class E extends o.Component{constructor(...e){super(...e),this.state={current:[],dragging:!1,placeholderIndex:null,dragKey:null,animating:!1,dragContent:null,dragWidth:null,dragHeight:null,offsetPos:null,animateTo:null,grabPos:null},this.onClick=(e,t,n,r)=>{const s=(0,u.default)(i.default.findDOMNode(r)),o=this.state.current.slice();let a,l=null;"current"===e?(o.splice(t,1),a=this.state.current[t],l=t):"bank"===e&&(a=this.props.options[t]),this.setState({current:o,dragging:!0,placeholderIndex:l,dragKey:a.key,dragContent:a.content,dragWidth:s.width(),dragHeight:s.height(),grabPos:n,mousePos:n,offsetPos:s.position()})},this.onRelease=e=>{const t=this.refs.dragging;if(null==t)return;const n=this.isCardInBank(t),r=this.state.placeholderIndex||0,s=()=>{const e=this.state.current.slice();if(!n){const t={content:this.state.dragContent,key:l.default.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};e.splice(r,0,t)}this.props.onChange({current:e}),this.setState({current:e,dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},o=(0,u.default)(i.default.findDOMNode(t)).position();let a=null;n?l.default.each(this.props.options,(function(e,t){if(e.content===this.state.dragContent){const e=i.default.findDOMNode(this.refs["bank"+t]);a=(0,u.default)(e).position()}}),this):null!=this.refs.placeholder&&(a=(0,u.default)(i.default.findDOMNode(this.refs.placeholder)).position()),null==a?s():this.setState({offsetPos:o,animateTo:a,onAnimationEnd:s,animating:!0,dragging:!1})},this.onMouseMove=e=>{const t=this.refs.dragging;if(null==t)return;let n;n=this.isCardInBank(t)?null:this.findCorrectIndex(t,this.state.current),this.setState({mousePos:e,placeholderIndex:n})},this.findCorrectIndex=(e,t)=>{const n=this.props.layout===x,r=(0,u.default)(i.default.findDOMNode(this.refs.dragList)),s=r.offset().left,o=r.offset().top,a=(0,u.default)(i.default.findDOMNode(e)).offset().left-s,c=(0,u.default)(i.default.findDOMNode(e)).offset().top-o;let p=0,d=0,h=0;return n?l.default.each(t,(function(e,t){const n=i.default.findDOMNode(this.refs["sortable"+t]),r=(0,u.default)(n).outerWidth(!0);a>d+r/2&&(p+=1),d+=r}),this):l.default.each(t,(function(e,t){const n=i.default.findDOMNode(this.refs["sortable"+t]),r=(0,u.default)(n).outerHeight(!0);c>h+r/2&&(p+=1),h+=r}),this),p},this.isCardInBank=e=>{if(null==e)return!1;const t=this.props.layout===x,n=(0,u.default)(i.default.findDOMNode(e)),r=(0,u.default)(i.default.findDOMNode(this.refs.bank)),s=n.offset(),o=r.offset(),a=n.outerHeight(!0),l=r.outerHeight(!0),c=r.outerWidth(!0),p=i.default.findDOMNode(this.refs.dragList),d=((0,u.default)(p).width(),n.outerWidth(!0));return t?s.top+a/2<o.top+l:s.left+d/2<o.left+c},this.setListValues=e=>{const t=e.map((e=>({content:e})));this.props.onChange({current:t}),this.setState({current:t})},this.getUserInput=()=>({current:l.default.map(this.props.current,(function(e){return e.content}))}),this.simpleValidate=e=>E.validate(this.getUserInput(),e)}UNSAFE_componentWillReceiveProps(e){l.default.isEqual(this.props.current,e.current)||this.setState({current:e.current})}render(){const e=this.state.dragging&&o.createElement(w,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),t=this.state.animating&&o.createElement(w,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext}),n=l.default.map(this.state.current,(function(e,t){return o.createElement(w,{key:`sortableCard${t}`,ref:"sortable"+t,fakeRef:"sortable"+t,floating:!1,content:e.content,width:e.width,linterContext:this.props.linterContext,onMouseDown:this.state.animating?u.default.noop:this.onClick.bind(null,"current",t)})}),this);if(null!=this.state.placeholderIndex){const e=o.createElement(v,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});n.splice(this.state.placeholderIndex,0,e)}const r=n.length>0;n.push(e,t);const s=o.createElement("div",{className:"perseus-clearfix draggable-box"},!r&&o.createElement(y,null),o.createElement("div",{ref:"dragList"},n)),a=o.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},l.default.map(this.props.options,((e,t)=>o.createElement(w,{ref:"bank"+t,floating:!1,content:e.content,stack:!0,key:t,linterContext:this.props.linterContext,onMouseDown:this.state.animating?u.default.noop:this.onClick.bind(null,"bank",t),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease})),this));return o.createElement("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+h.ClassNames.INTERACTIVE,ref:"orderer"},a,s)}}E.defaultProps={current:[],options:[],correctOptions:[],height:"normal",layout:x,linterContext:f.linterContextDefault},l.default.extend(E,{validate:function(e,t){if(0===e.current.length)return{type:"invalid",message:null};return{type:"points",earned:l.default.isEqual(e.current,l.default.pluck(t.correctOptions,"content"))?1:0,total:1,message:null}}});var C={name:"orderer",displayName:"Orderer",widget:E,isLintable:!0};t.default=C},h1Z3:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Categorizer=void 0;var s=n("mR6N"),o=w(n("q1tI")),a=r(n("TSYQ")),i=r(n("5pch")),l=w(n("+jAD")),u=r(n("fUCW")),c=w(n("HEOz")),p=n("j8wP"),d=n("/4Qb"),h=r(n("APgo")),f=r(n("Atlv")),g=r(n("uBl0")),m=r(n("TBZ3")),v=r(n("MG0i")),y=n("zahm");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class x extends o.Component{constructor(...e){super(...e),this.state={uniqueId:i.default.uniqueId("perseus_radio_")},this.change=(...e)=>l.change.apply(this,e),this.getUserInput=()=>x.getUserInputFromProps(this.props),this.onChange=(e,t)=>{const n=[].concat(this.props.values);n[e]=t,this.change("values",n),this.props.trackInteraction()},this.simpleValidate=e=>x.validate(this.getUserInput(),e)}render(){const e=this,t=this.props.apiOptions.isMobile;let n=this.props.items.map(((e,t)=>[e,t]));this.props.randomizeItems&&(n=g.default.shuffle(n,this.props.problemNum));const r=o.createElement("table",{className:"categorizer-table "+(0,s.css)(E.mobileTable)},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null," "),this.props.categories.map(((e,t)=>o.createElement("th",{className:(0,s.css)(E.header),key:t},o.createElement(f.default,{content:e,linterContext:this.props.linterContext})))))),o.createElement("tbody",null,n.map((n=>{const r=n[0],a=n[1],i=e.state.uniqueId+"_"+a;return o.createElement("tr",{key:a},o.createElement("td",null,o.createElement(f.default,{content:r,linterContext:this.props.linterContext})),e.props.categories.map(((n,r)=>{const l=e.props.values[a]===r;return o.createElement("td",{className:"category "+(0,s.css)(E.cell),key:r},o.createElement("div",{className:p.ClassNames.INTERACTIVE,role:"button","aria-label":n,onClick:this.onChange.bind(this,a,r)},t&&o.createElement("input",{type:"radio",name:i,className:(0,s.css)(v.default.responsiveInput,v.default.responsiveRadioInput),checked:l,onChange:this.onChange.bind(this,a,r),onClick:e=>e.stopPropagation()}),!t&&o.createElement("span",{className:(0,s.css)(E.radioSpan,l&&E.checkedRadioSpan,this.props.static&&l&&E.staticCheckedRadioSpan)},l?o.createElement(h.default,d.iconCircle):o.createElement(h.default,d.iconCircleThin))))})))})))),i=(0,a.default)({"categorizer-container":!0,"static-mode":this.props.static}),l=this.props.apiOptions.isMobile?[E.fullBleedContainer]:[];return o.createElement("div",{className:i+" "+s.css.apply(void 0,l)},r)}static validate(e,t){let n=!0,r=!0;return i.default.each(t.values,(function(t,s){null==e.values[s]&&(n=!1),e.values[s]!==t&&(r=!1)})),n?{type:"points",earned:r?1:0,total:1,message:null}:{type:"invalid",message:c._("Make sure you select something for every row.")}}static getUserInputFromProps(e){return u.default.getUserInputFromProps(e)}}t.Categorizer=x,x.defaultProps={items:[],categories:[],values:[],linterContext:y.linterContextDefault};const E=s.StyleSheet.create({mobileTable:{[m.default.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[m.default.mdOrSmaller]:{marginLeft:-16,marginRight:-16,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});var C={name:"categorizer",displayName:"Categorizer",widget:x,transform:e=>i.default.pick(e,"items","categories","randomizeItems"),staticTransform:e=>i.default.pick(e,"items","categories","values","randomizeItems"),isLintable:!0};t.default=C},hxS7:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("TSYQ")),o=m(n("q1tI")),a=r(n("5pch")),i=m(n("HEOz")),l=r(n("l+pH")),u=r(n("eMwK")),c=r(n("7gXX")),p=r(n("WZBl")),d=r(n("7BBF")),h=n("zahm"),f=n("j8wP");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const v=c.default.parseTex,y={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},b={integer:function(e){return i._("an integer, like $6$")},proper:function(e){return"optional"===e.simplify?i._("a *proper* fraction, like $1/2$ or $6/10$"):i._("a *simplified proper* fraction, like $3/5$")},improper:function(e){return"optional"===e.simplify?i._("an *improper* fraction, like $10/7$ or $14/8$"):i._("a *simplified improper* fraction, like $7/4$")},mixed:function(e){return i._("a mixed number, like $1\\ 3/4$")},decimal:function(e){return i._("an *exact* decimal, like $0.75$")},percent:function(e){return i._("a percent, like $12.34\\%$")},pi:function(e){return i._("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}};class w extends o.Component{constructor(...e){super(...e),this.shouldShowExamples=()=>"number"!==this.props.answerType&&!this.props.apiOptions.staticRender,this.handleChange=(e,t)=>{this.props.onChange({currentValue:e},t)},this._getInputType=()=>this.props.apiOptions.staticRender?"tex":"text",this._handleFocus=()=>{this.props.onFocus([]);const{interactionCallback:e}=this.props.apiOptions;e&&e()},this._handleBlur=()=>{this.props.onBlur([])},this.focus=()=>(this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{this.props.onChange({currentValue:t},n)},this.getUserInput=()=>w.getUserInputFromProps(this.props),this.simpleValidate=(e,t)=>(t=t||function(){},w.validate(this.getUserInput(),e,t)),this.examples=()=>{const e=this.props.answerType,t=y[e].forms.split(/\s*,\s*/),n=a.default.map(t,(function(e){return b[e](this.props)}),this);return[i._("**Your answer should be** ")].concat(n)}}render(){if(this.props.apiOptions.customKeypad){const e=o.createElement(u.default,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});return this.props.rightAlign?o.createElement("div",{className:"perseus-input-right-align"},e):e}const e=this.props.reviewModeRubric;let t=null,n=null;if(this.props.apiOptions.satStyling&&e){const r=this.simpleValidate(e);if(t="points"===r.type&&r.earned===r.total,!t){let t=String(e.value);e.inexact&&e.maxError&&(t+=" ± "+e.maxError);const r=[t];n=o.createElement(p.default,{answers:r})}}const r={};r["perseus-input-size-"+this.props.size]=!0,r["perseus-input-right-align"]=this.props.rightAlign,r[f.ClassNames.CORRECT]=e&&t&&this.props.currentValue,r[f.ClassNames.INCORRECT]=e&&!t&&this.props.currentValue,r[f.ClassNames.UNANSWERED]=e&&!this.props.currentValue;const a=o.createElement(l.default,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,className:(0,s.default)(r),type:this._getInputType(),examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,linterContext:this.props.linterContext});return n?o.createElement("span",{className:"perseus-input-with-answer-blurb"},a,n):a}static validate(e,t,n=(()=>{})){null==t.answerType&&(t.answerType="number");const r=d.default.number.createValidatorFunctional(t.value,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:y[t.answerType].forms})(v(e.currentValue));if(r.empty){return{type:"invalid",message:!1===(null==n?void 0:n(null,e.currentValue,r.message))?null:r.message}}return{type:"points",earned:r.correct?1:0,total:1,message:r.message}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){if(null==e.value)return;let t=String(e.value);return e.inexact&&e.maxError&&(t+=" ± "+e.maxError),t}}w.defaultProps={currentValue:"",size:"normal",answerType:"number",rightAlign:!1,apiOptions:f.ApiOptions.defaults,linterContext:h.linterContextDefault};var x={name:"input-number",displayName:"Number text box (old)",defaultAlignment:"inline-block",hidden:!0,widget:w,transform:e=>{const{simplify:t,size:n,answerType:r,rightAlign:s}=e;return{simplify:t,size:n,answerType:r,rightAlign:s}},isLintable:!0};t.default=x},hzUw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=n("mR6N"),i=r(n("TSYQ")),l=g(n("HEOz")),u=r(n("Atlv")),c=r(n("TBZ3")),p=n("UcaO"),d=r(n("Boyy")),h=n("zahm");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class m extends o.Component{constructor(...e){super(...e),this.getSerializedState=()=>this.refs.renderer.getSerializedState(),this.restoreSerializedState=(e,t)=>{this.refs.renderer.restoreSerializedState(e,t)}}render(){const{apiOptions:e,className:t,hint:n,lastHint:r,lastRendered:c,pos:p,totalHints:h}=this.props,{isMobile:f}=e,g=(0,i.default)(!f&&"perseus-hint-renderer",f&&(0,a.css)(v.newHint),f&&c&&(0,a.css)(v.lastRenderedNewHint),r&&"last-hint",c&&"last-rendered",t),m=(0,s.default)({},e,{customKeypad:!1,staticRender:!1});return o.createElement("div",{className:g,tabIndex:"-1"},!e.isMobile&&o.createElement("span",{className:"perseus-sr-only"},l._("Hint #%(pos)s",{pos:p+1})),!e.isMobile&&!e.satStyling&&h&&null!=p&&o.createElement("span",{className:"perseus-hint-label",style:{display:"block",color:e.hintProgressColor}},`${p+1} / ${h}`),o.createElement(u.default,{ref:"renderer",widgets:n.widgets,content:n.content||"",images:n.images,apiOptions:m,findExternalWidgets:this.props.findExternalWidgets,linterContext:d.default.pushContextStack(this.props.linterContext,"hint")}))}}m.defaultProps={linterContext:h.linterContextDefault};const v=a.StyleSheet.create({newHint:{marginBottom:1.5*p.baseUnitPx,borderLeftColor:p.gray97,borderLeftStyle:"solid",borderLeftWidth:p.hintBorderWidth,[c.default.lgOrSmaller]:{paddingLeft:p.baseUnitPx},[c.default.smOrSmaller]:{paddingLeft:0},":focus":{outline:"none"}},lastRenderedNewHint:{marginBottom:0,borderLeftColor:p.kaGreen}});var y=m;t.default=y},i3no:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("mR6N"),s=n("6OHE"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("hDgO"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var i=r.StyleSheet.create({dropdownBody:{position:"absolute",border:"solid 1px rgba(0, 0, 0, 0.1)",zIndex:o.zindexDropdown,color:s.colors.gray17,backgroundColor:s.colors.gray98,borderRadius:s.borderRadius,maxHeight:320,cursor:"pointer"}});t.default=i},iF1x:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("tDnH")),o=r(n("emyO")),a=r(n("w3aw")),i=[s.default,o.default,a.default];t.default=i},iNas:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-nested",severity:s.default.Severity.ERROR,selector:"math, blockMath",pattern:/\\text{[^$}]*\$[^$}]*\$[^}]*}/,message:"Nested math:\nDon't nest math expressions inside \\text{} blocks"});t.default=o},iUos:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),s=n("mR6N"),o=n("La43");function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}class i extends r.PureComponent{constructor(...e){super(...e),this.state={cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1}}UNSAFE_componentWillReceiveProps(e){this.props.highlight===e.highlight&&this.props.offsetParent===e.offsetParent||this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){const{highlight:t,offsetParent:n}=e,r=(0,o.getClientRectsForTextInRange)(t.domRange),{left:s,top:a}=n.getBoundingClientRect();return r.map((e=>(0,o.getRelativeRect)(e,{left:s,top:a})))}_rectIsHovered(e,t){const n=(0,o.getRelativePosition)(t,{left:e.left,top:e.top});return 0<=n.left&&n.left<e.width&&0<=n.top&&n.top<e.height}isHovered(e){if(!e)return!1;const{offsetParent:t}=this.props,{cachedHighlightRects:n}=this.state,{left:r,top:s}=t.getBoundingClientRect(),a=(0,o.getRelativePosition)(e,{left:r,top:s});return n.some((e=>this._rectIsHovered(e,a)))}render(){const e=this.state.cachedHighlightRects;return r.createElement("div",null,e.map(((e,t)=>r.createElement("div",{key:t,className:(0,s.css)(l.highlightRect),style:{position:"absolute",width:e.width,height:e.height,top:e.top,left:e.left,zIndex:this.props.zIndexes.belowContent}}))))}}const l=s.StyleSheet.create({highlightRect:{background:"#fffabe"}});var u=i;t.default=u},ipxt:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=y(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("96rG")),u=n("j8wP"),c=r(n("uBl0")),p=r(n("XwLL")),d=r(n("yfnS")),h=r(n("NT9k")),f=y(n("HEOz")),g=r(n("bHYm")),m=r(n("T2HF"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{deepEq:b}=c.default,w="bar",x="line",E="pic",C="histogram",k="dotplot";o.default.oneOf([w,x,E,C,k]),o.default.arrayOf(o.default.string),o.default.arrayOf(o.default.oneOfType([o.default.number,o.default.string])),o.default.number,o.default.number,o.default.number,o.default.number,o.default.number,o.default.string,o.default.arrayOf(o.default.number),o.default.number,o.default.arrayOf(o.default.number),o.default.bool;class O extends s.Component{constructor(...e){super(...e),this._isMounted=!1,this.state={values:this.props.starting||[1],categoryHeights:{}},this.DOT_PLOT_POINT_SIZE=()=>this.props.apiOptions.isMobile?6:4,this.DOT_PLOT_POINT_PADDING=()=>8,this.DOT_TICK_POINT_SIZE=()=>2,this.setupGraphie=e=>{const t=this;t.shouldSetupGraphie=!1;const n=a.default.findDOMNode(t.refs.graphieDiv);(0,l.default)(n).empty();const r=h.default.createGraphie(n);t.graphie=r,t.graphie.pics=[],t.graphie.dotTicks=[];const s=t.props.type===w,o=t.props.type===x,u=t.props.type===E,c=t.props.type===C,g=t.props.type===k,v=u||g,y={},b=y,O=this.props.apiOptions.isMobile;b.graph={lines:[],bars:[],points:[],dividers:[]},b.scaleY=t.props.scaleY,b.dimX=t.props.categories.length;const M=O?[288,336]:t.props.plotDimensions;if(o)b.dimX+=O?-.2:1;else if(c)b.barPad=0,b.barWidth=1;else if(s)b.barPad=O?.08:.15,b.barWidth=1-2*b.barPad,b.dimX+=(O?-2:2)*b.barPad;else if(v){b.picBoxHeight=t.props.picBoxHeight,b.picBoxWidthPx=M[0]/t.props.categories.length;const e=M[0]-b.dimX*b.picBoxWidthPx;b.picPad=e/(2*b.dimX+2);const n=b.picBoxWidthPx+2*b.picPad;b.picPad=b.picPad/n,b.picBoxWidth=b.picBoxWidthPx/n,b.dimX+=2*b.picPad}g&&(b.picBoxHeight=2*this.DOT_PLOT_POINT_SIZE()+this.DOT_PLOT_POINT_PADDING()),b.dimY=Math.ceil(t.props.maxY/b.scaleY)*b.scaleY;let P=25;(s||o)&&O&&(P=0!==t.props.labels[1].length?17:11),g&&(P/=2),O&&v&&0===t.props.labels[1].length&&(P=0);let _=25,S=75;if(O&&(s||v)){const e=Math.max.apply(Math,[0].concat(Object.values(t.state.categoryHeights)));if(e){let t=25;v&&(t+=10),S=t+e}}if(b.scale=O?[(M[0]-4*P)/b.dimX,(M[1]-(_+S))/b.dimY]:i.default.map([b.dimX,b.dimY],(function(e,t){return M[t]/e})),v&&(b.scale[1]=b.picBoxHeight/b.scaleY),P/=b.scale[0],_/=b.scale[1],S/=b.scale[1],r.init({range:[[-3*P,b.dimX+P],[-S,b.dimY+_]],scale:b.scale,isMobile:this.props.apiOptions.isMobile}),r.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!v){for(let e=O?b.scaleY:0;e<=b.dimY;e+=b.scaleY)r.label([0,e],p.default.roundToApprox(e,2),"left",!0),r.style({stroke:O?"#e9ebec":"#000",strokeWidth:1,opacity:O?1:.3},(function(){r.line([0,e],[b.dimX,e])}))}(s||o)&&O&&(t.graphie.dragPrompt=r.label([b.dimX/2,b.dimY/2],f._("Drag handles to make graph"),"center",!1).css("font-weight","bold").css("color",d.default.KA_GREEN).css("display","none")),t.setupCategories(y),v&&O&&(t.graphie.dotPrompt=r.label([b.dimX/2,b.dimY/2],f._("Tap to add points"),"center",!1).css("font-weight","bold").css("color",d.default.KA_GREEN).css("display","none")),v&&t.drawPicHeights(t.state.values,e.values),r.style({stroke:"#000",strokeWidth:2,opacity:1},(function(){v?g?r.style({stroke:O?d.default.GRAY_G:"#000",strokeWidth:O?1:2},(()=>r.line([O?0:.5,0],[b.dimX-(O?0:.5),0]))):(r.line([0,0],[b.dimX,0]),0===t.props.labels[1].length&&O||r.style({stroke:O?d.default.GRAY_G:"#000",strokeWidth:O?1:2},(()=>r.line([0,0],[0,b.dimY])))):(r.style({stroke:O?d.default.GRAY_G:"#000",strokeWidth:O?1:2},(()=>r.line([O?3*-P:0,0],[b.dimX+(O?P:0),0]))),(s||o)&&O||r.style({stroke:O?d.default.GRAY_G:"#000",strokeWidth:O?1:2},(()=>r.line([0,0],[0,b.dimY]))))})),r.label([b.dimX/2,O?-S:-35/b.scale[1]],t.props.labels[0],O?"above":"below",!1).css("font-weight","bold").css("color",O&&d.default.GRAY_F),r.label([(O?-35:-60)/b.scale[0],b.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",O&&d.default.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new m.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:d.default.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,b.dimX],[0,b.dimY]])},this.showHairlines=e=>{this.props.apiOptions.isMobile&&"none"!==this.props.markings&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())},this.hideHairlines=()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()},this.labelCategory=(e,t)=>{const n=this.props.apiOptions.isMobile,r=this.graphie;let s=!1;const o=(t+="").match(/^\$(.*)\$$/);o&&(t=o[1],s=!0);const a=Math.PI/180*45,i=n&&!o;return new Promise((o=>{r.style({color:n?d.default.GRAY_G:"inherit",transform:i?"translateX(-50%) translateX(5px) translateY(-50%) rotate(-45deg)":"none",transformOrigin:"100%"},(()=>{const l=r.label([e,n?-.5:0],t,"below",s),u=14+(i?Math.round(l.height()*Math.cos(a)+(l.width()+5)*Math.sin(a)):l.height());o({category:t,height:u})}))}))},this.setupCategories=e=>{const t=this,n=e,r=t.graphie,s=this.props.apiOptions.isMobile,o=[];t.props.type===C?(i.default.times(t.props.categories.length-1,(function(n){t.setupBar({index:n,startHeight:t.state.values[n],config:e,isHistogram:!0})})),i.default.each(t.props.categories,(function(e,a){const i=.5+a*n.barWidth;o.push(t.labelCategory(i,e));const l=6/n.scale[1];r.style({stroke:"#000",strokeWidth:s?1:2,opacity:1},(function(){r.line([i,-l],[i,0])}))}))):i.default.each(t.props.categories,(function(a,i){const l=t.state.values[i];let u;t.props.type===w?u=t.setupBar({index:i,startHeight:l,config:e,isHistogram:!1}):t.props.type===x?u=t.setupLine(i,l,e):t.props.type===E?u=t.setupPic(i,e):t.props.type===k&&(u=t.setupDotplot(i,e));let c=0,p=-6/n.scale[1];t.props.type!==k||s||(c=-p),t.props.type===k?i%t.props.labelInterval!=0&&i!==t.props.categories.length-1||(o.push(t.labelCategory(u,a)),c*=1.5,p*=1.5):o.push(t.labelCategory(u,a)),r.style({stroke:s?d.default.GRAY_G:"#000",strokeWidth:s?1:2,opacity:1},(function(){r.line([u,c],[u,p])}))})),Promise.all(o).then((e=>{if(t._isMounted){const n={};e.forEach((({category:e,height:t})=>n[e]=t)),t.setState({categoryHeights:n})}}))},this._clampValue=(e,t,n)=>Math.max(Math.min(e,n),t),this._maybeShowDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="inline")},this._maybeHideDragPrompt=()=>{null!=this.graphie.dragPrompt&&(this.graphie.dragPrompt[0].style.display="none")},this.setupBar=e=>{const t=this.props.apiOptions.isMobile,n=e.index,r=e.startHeight,s=e.config,o=e.isHistogram,a=this,l=a.graphie,u=s.barWidth/2;let c;c=o?.5+n*s.barWidth+u:(t?u:.5+s.barPad)+n;const p=function(e,n){const r=l.scalePoint(0);if(s.graph.bars[e].scale(1,Math.max(t?.2:.01,n/s.scaleY),r[0],r[1]),o){const t=s.graph.dividers[e-1],o=s.graph.dividers[e];if(t){const o=Math.min(a.state.values[e-1],n);t.scale(1,Math.max(.01,o/s.scaleY),r[0],r[1])}if(o){const t=Math.min(a.state.values[e+1],n);o.scale(1,Math.max(.01,t/s.scaleY),r[0],r[1])}}};if(l.style({stroke:"none",fill:t?d.default.BLUE_C:d.default.LIGHT_BLUE,opacity:1},(function(){s.graph.bars[n]=l.path([[c-u,0],[c-u,s.scaleY],[c+u,s.scaleY],[c+u,0],[c-u,0]])})),o&&n>0&&l.style({stroke:"#000",strokeWidth:1,opacity:.3},(function(){s.graph.dividers.push(l.path([[c-u,0],[c-u,s.scaleY]]))})),t){const e=s.scaleY/a.props.snapsPerLine;s.graph.lines[n]=g.default.addMaybeMobileMovablePoint(this,{coord:[c,r],constraints:[(t,n,r)=>[c,this._clampValue(Math.round(t[1]/e)*e,0,s.dimY)]],onMoveStart:function(){s.graph.bars[n].attr({fill:d.default.INTERACTIVE})},onMove:function(){const e=s.graph.lines[n].coord()[1],t=i.default.clone(a.state.values);t[n]=e,a.setState({values:t}),a.changeAndTrack({values:t}),a._maybeHideDragPrompt(),p(n,e)},onMoveEnd:function(){s.graph.bars[n].attr({fill:d.default.BLUE_C})}}),s.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",a._maybeShowDragPrompt()}else s.graph.lines[n]=l.addMovableLineSegment({coordA:[c-u,r],coordZ:[c+u,r],snapY:s.scaleY/a.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:d.default.INTERACTIVE,"stroke-width":this.props.static?0:4}}),s.graph.lines[n].onMove=function(e,t){let r=this.coordA[1];(r<0||r>s.dimY)&&(r=Math.min(Math.max(r,0),s.dimY),this.coordA[1]=this.coordZ[1]=r,this.transform());const o=i.default.clone(a.state.values);o[n]=r,a.setState({values:o}),a.changeAndTrack({values:o}),p(n,r)};return p(n,r),c},this.setupLine=(e,t,n)=>{const r=this.props.apiOptions.isMobile,s=this,o=n,a=s.graphie,l=e+(r?.4:1);if(r){const r=n.scaleY/s.props.snapsPerLine;o.graph.points[e]=g.default.addMaybeMobileMovablePoint(this,{coord:[l,t],constraints:[(e,t,s)=>[l,this._clampValue(Math.round(e[1]/r)*r,0,n.dimY)]],onMove:function(){const t=o.graph.points[e].coord()[1],n=i.default.clone(s.state.values);n[e]=t,s.setState({values:n}),s.changeAndTrack({values:n}),s._maybeHideDragPrompt()}}),s._maybeShowDragPrompt(),e>0&&(o.graph.lines[e]=g.default.addMovableLine(a,{points:[o.graph.points[e-1],o.graph.points[e]],constraints:g.default.MovablePoint.constraints.fixed(),normalStyle:{stroke:d.default.BLUE_C,"stroke-width":2},highlightStyle:{stroke:d.default.BLUE_C,"stroke-width":2}}))}else o.graph.points[e]=a.addMovablePoint({coord:[l,t],constraints:{constrainX:!0},normalStyle:{fill:d.default.INTERACTIVE,stroke:d.default.INTERACTIVE},snapY:o.scaleY/s.props.snapsPerLine}),o.graph.points[e].onMove=function(t,n){n=Math.min(Math.max(n,0),o.dimY);const r=i.default.clone(s.state.values);return r[e]=n,s.setState({values:r}),s.changeAndTrack({values:r}),[t,n]},e>0&&(o.graph.lines[e]=a.addMovableLineSegment({pointA:o.graph.points[e-1],pointZ:o.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return l},this.setupDotplot=(e,t)=>{const n=this.graphie,r=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,r?.5:1,t,((e,t)=>n.ellipse([e,t],[this.DOT_PLOT_POINT_SIZE()/n.scale[0],this.DOT_PLOT_POINT_SIZE()/n.scale[1]],{fill:d.default.INTERACTIVE,stroke:d.default.INTERACTIVE})))},this.setupPic=(e,t)=>{const n=this.graphie;return this.setupTiledPlot(e,0,t,((e,t)=>{const r=n.scalePoint([e,t]),s=this.props.picSize;return n.raphael.image(this.props.picUrl,r[0]-s/2,r[1]-s/2,s,s)}))},this.setupTiledPlot=(e,t,n,r)=>{const s=this,o=n,a=s.graphie,u=a.pics,c=a.dotTicks,p=e+.5+o.picPad;a.mouselayer.canvas.style.touchAction="none",u[e]=[],c[e]=[];const d=Math.round(o.dimY/o.scaleY)+1;return(0,i.default)(d).times((function(n){const i=((n-=1)+.5)*o.scaleY,d=p-o.picBoxWidth/2,h=i+.5*o.scaleY,f=a.scalePoint([d,h+t]),g=a.mouselayer.rect(f[0],f[1],o.picBoxWidthPx,o.picBoxHeight);(0,l.default)(g[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",(function(n){n.preventDefault(),s.whichPicClicked=e,s.setPicHeight(e,h),(0,l.default)(document).on("vmouseup.plotTile",(function(e){(0,l.default)(document).unbind(".plotTile")})),(0,l.default)(document).on("vmousemove.plotTile",(function(e){e.preventDefault();const n=a.getMouseCoord(e)[1],r=Math.floor(n-t),i=(Math.max(-1,Math.floor(r/o.scaleY))+.5)*o.scaleY,l=Math.min(i+.5*o.scaleY,o.dimY);s.setPicHeight(s.whichPicClicked,l)}))})),n<0||(u[e][n]=r(p,i+t),c[e][n]=a.ellipse([p,i+t],[s.DOT_TICK_POINT_SIZE()/a.scale[0],s.DOT_TICK_POINT_SIZE()/a.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))})),p},this.setPicHeight=(e,t)=>{const n=i.default.clone(this.state.values);n[e]=t,this.drawPicHeights(n,this.state.values),this.setState({values:n}),this.changeAndTrack({values:n})},this.changeAndTrack=e=>{this.props.onChange(e),this.props.trackInteraction()},this.drawPicHeights=(e,t)=>{const n=this,r=n.graphie,s=r.pics,o=this.props.apiOptions.isMobile;if(o){const t=e.every((e=>0===e));r.dotPrompt[0].style.display=t?"inline":"none"}i.default.each(s,(function(s,a){i.default.each(s,(function(s,i){const u=(i+1)*n.props.scaleY,c=u<=e[a];if(n.props.type===k){const e=u<=t[a];c&&!e&&s.animate({"stroke-width":8},75,(()=>s.animate({"stroke-width":2},75)))}(0,l.default)(s[0]).css({display:c?"inline":"none"}),r.dotTicks[a][i][0].style.display=c||!o?"none":"inline"}))}))},this.getUserInput=()=>this.state.values,this.simpleValidate=e=>O.validate(this.getUserInput(),e)}render(){const e={marginBottom:this.props.labels[0]?75:0};return s.createElement("div",{className:"perseus-widget-plotter graphie "+u.ClassNames.INTERACTIVE,ref:"graphieDiv",style:e})}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!i.default.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(t)}componentDidMount(){this._isMounted=!0,this.setupGraphie(this.state)}UNSAFE_componentWillReceiveProps(e){this.shouldSetupGraphie=i.default.any(["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"],(function(t){return!i.default.isEqual(this.props[t],e[t])}),this),i.default.isEqual(this.props.starting,e.starting)||i.default.isEqual(this.state.values,e.starting)||(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))}componentWillUnmount(){this._isMounted=!1}}O.propTypes={onChange:o.default.func.isRequired,trackInteraction:o.default.func.isRequired},O.defaultProps={type:w,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1},i.default.extend(O,{validate:function(e,t){return b(e,t.starting)?{type:"invalid",message:null}:{type:"points",earned:b(e,t.correct)?1:0,total:1,message:null}}});const M=i.default.identity;var P={name:"plotter",displayName:"Plotter",widget:O,staticTransform:M};t.default=P},"j+Ew":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=n("mR6N"),i=r(n("5pch")),l=n("yhei"),u=n("QESs"),c=r(n("Atlv")),p=r(n("oBkO")),d=n("j8wP"),h=r(n("uBl0")),f=n("zahm");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}const{shuffle:m,seededRNG:v}=h.default;class y extends s.Component{constructor(...e){super(...e),this.state={leftHeight:0,rightHeight:0,katex:null},this.changeAndTrack=e=>{this.props.onChange(e),this.props.trackInteraction()},this.onMeasureLeft=e=>{const t=i.default.max(e.heights);this.setState({leftHeight:t})},this.onMeasureRight=e=>{const t=i.default.max(e.heights);this.setState({rightHeight:t})},this.getUserInput=()=>this.state.katex?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]},this.moveLeftOptionToIndex=(e,t)=>{this.refs.left.moveOptionToIndex(e,t)},this.moveRightOptionToIndex=(e,t)=>{this.refs.right.moveOptionToIndex(e,t)},this.simpleValidate=e=>y.validate(this.getUserInput(),e)}componentDidMount(){(0,u.getDependencies)().getKaTeX().then((e=>this.setState({katex:e})))}render(){if(!this.state.katex)return s.createElement(l.CircularSpinner,null);const e=v(this.props.problemNum);let t;t=this.props.orderMatters?m(this.props.left,e,!0):this.props.left;const n=m(this.props.right,e,!0),r=i.default.any(this.props.labels),o={height:i.default.max([this.state.leftHeight,this.state.rightHeight])},u=this.props.apiOptions.isMobile?8:5;return s.createElement("table",{className:(0,a.css)(w.widget)+" perseus-widget-matcher"},s.createElement("tbody",null,r&&s.createElement("tr",{className:(0,a.css)(w.row)},s.createElement("th",{className:(0,a.css)(w.column,w.columnLabel)},s.createElement(c.default,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext})),s.createElement("th",{className:(0,a.css)(w.column,w.columnRight,w.columnLabel)},s.createElement(c.default,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext}))),s.createElement("tr",{className:(0,a.css)(w.row)},s.createElement("td",{className:(0,a.css)(w.column)},s.createElement(p.default,{options:t,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:o,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:u,linterContext:this.props.linterContext,ref:"left"})),s.createElement("td",{className:(0,a.css)(w.column,w.columnRight)},s.createElement(p.default,{options:n,layout:"vertical",padding:this.props.padding,constraints:o,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:u,linterContext:this.props.linterContext,ref:"right"})))))}}y.propTypes={apiOptions:d.ApiOptions.propTypes,labels:o.default.array,left:o.default.array,onChange:o.default.func,orderMatters:o.default.bool,padding:o.default.bool,problemNum:o.default.number,right:o.default.array,trackInteraction:o.default.func.isRequired,linterContext:f.linterContextProps},y.defaultProps={left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:f.linterContextDefault},i.default.extend(y,{validate:function(e,t){return{type:"points",earned:i.default.isEqual(e.left,t.left)&&i.default.isEqual(e.right,t.right)?1:0,total:1,message:null}}});const b="1px solid #444",w=a.StyleSheet.create({widget:{paddingTop:5,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:b},columnLabel:{fontWeight:"inherit",borderBottom:b,padding:"0 5px 5px 5px",textAlign:"center"}});var x={name:"matcher",displayName:"Two column matcher",widget:y,isLintable:!0};t.default=x},j2dX:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.registerAllWidgetsAndEditorsForTesting=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("4Zwh")),o=r(n("CtR3")),a=r(n("edqz"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}t.registerAllWidgetsAndEditorsForTesting=()=>{s.registerWidgets(o.default),s.registerEditors(a.default)}},j8wP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ClassNames=t.ApiOptions=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("VwFC"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}const l={propTypes:o.default.shape({isArticle:o.default.bool.isRequired,satStyling:o.default.bool.isRequired,onInputError:o.default.func.isRequired,onFocusChange:o.default.func.isRequired,staticRender:o.default.bool.isRequired,GroupMetadataEditor:o.default.func.isRequired,showAlignmentOptions:o.default.bool.isRequired,readOnly:o.default.bool.isRequired,answerableCallback:o.default.func,getAnotherHint:o.default.func,interactionCallback:o.default.func,groupAnnotator:o.default.func.isRequired,imagePlaceholder:o.default.node,widgetPlaceholder:o.default.node,baseElements:o.default.shape({Link:o.default.func}),imagePreloader:o.default.func,trackInteraction:o.default.func,customKeypad:o.default.bool,nativeKeypadProxy:o.default.func,isMobile:o.default.bool,setDrawingAreaAvailable:o.default.func,useDraftEditor:o.default.bool,styling:o.default.shape({radioStyleVersion:o.default.oneOf(["intermediate","final"])}),hintProgressColor:o.default.string,canScrollPage:o.default.bool,inModal:o.default.bool,crossOutEnabled:o.default.bool,editorChangeDelay:o.default.number}).isRequired,defaults:{isArticle:!1,isMobile:!1,satStyling:!1,onInputError:function(){},onFocusChange:function(){},staticRender:!1,GroupMetadataEditor:a.default,showAlignmentOptions:!1,readOnly:!1,groupAnnotator:function(){return null},baseElements:{Link:e=>s.createElement("a",e)},setDrawingAreaAvailable:function(){},useDraftEditor:!1,styling:{radioStyleVersion:"final"},canScrollPage:!1,inModal:!1,crossOutEnabled:!1,editorChangeDelay:0}};t.ApiOptions=l;t.ClassNames={RENDERER:"perseus-renderer",TWO_COLUMN_RENDERER:"perseus-renderer-two-columns",RESPONSIVE_RENDERER:"perseus-renderer-responsive",INPUT:"perseus-input",FOCUSED:"perseus-focused",RADIO:{OPTION:"perseus-radio-option",SELECTED:"perseus-radio-selected",OPTION_CONTENT:"perseus-radio-option-content"},INTERACTIVE:"perseus-interactive",CORRECT:"perseus-correct",INCORRECT:"perseus-incorrect",UNANSWERED:"perseus-unanswered",MOBILE:"perseus-mobile"}},jDkz:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=r(n("oBkO")),l=n("j8wP"),u=r(n("uBl0")),c=n("zahm");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}const{shuffle:d}=u.default,h="horizontal";class f extends s.Component{constructor(...e){super(...e),this.state={changed:!1},this.handleChange=e=>{this._isMounted&&this.setState({changed:!0},(()=>{setTimeout((()=>{this.props.onChange(e),this.props.trackInteraction()}),0)}))},this.getUserInput=()=>({options:this.refs.sortable.getOptions()}),this.moveOptionToIndex=(e,t)=>{this.refs.sortable.moveOptionToIndex(e,t)},this.simpleValidate=e=>this.state.changed?f.validate(this.getUserInput(),e):{type:"invalid",message:null}}static validate(e,t){return{type:"points",earned:a.default.isEqual(e.options,t.correct)?1:0,total:1,message:null}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const e=d(this.props.correct,this.props.problemNum,!0),{apiOptions:t}=this.props,n=t.isMobile?8:5;return s.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},s.createElement(i.default,{options:e,layout:this.props.layout,margin:n,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"}))}}f.propTypes={apiOptions:l.ApiOptions.propTypes,correct:o.default.array,layout:o.default.oneOf([h,"vertical"]),onChange:o.default.func,padding:o.default.bool,problemNum:o.default.number,trackInteraction:o.default.func.isRequired,linterContext:c.linterContextProps},f.defaultProps={correct:[],layout:h,padding:!0,problemNum:0,onChange:function(){},linterContext:c.linterContextDefault};var g={name:"sorter",displayName:"Sorter",widget:f,isLintable:!0};t.default=g},jH0K:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("96rG")),u=r(n("uBl0")),c=r(n("NT9k")),p=n("UcaO"),d=r(n("yPu2"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const f={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"},g={position:"relative",top:"25%"};class m extends s.Component{constructor(...e){super(...e),this.reset=()=>{this._setupGraphie(!1)},this.graphie=()=>this._graphie,this.pointsFromNormalized=(e,t)=>{const n=this;return i.default.map(e,(function(e){return i.default.map(e,(function(e,r){const s=n.props.range[r];if(t)return s[0]+(s[1]-s[0])*e;const o=n.props.step[r],a=function(e,t){return Math.floor((e[1]-e[0])/t)}(s,o),i=Math.round(e*a);return s[0]+o*i}))}))},this._setupGraphie=e=>{if(this._hasSetupGraphieThisUpdate)return;const t=a.default.findDOMNode(this.refs.graphieDiv);(0,l.default)(t).empty();const n=this.props.labels.map((e=>u.default.unescapeMathMode(e))),r=this.props.range,s=this._graphie=c.default.createGraphie(t),o=this._getGridConfig();s.snap=this.props.snapStep,"graph"===this.props.markings?(s.graphInit({range:r,scale:i.default.pluck(o,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:this.props.gridStep,tickStep:i.default.pluck(o,"tickStep"),labelStep:1,unityLabels:i.default.pluck(o,"unityLabel"),isMobile:this.props.isMobile}),s.label([0,r[1][1]],n[1],this.props.isMobile?"below right":"above"),s.label([r[0][1],0],n[0],this.props.isMobile?"above left":"right")):"grid"===this.props.markings?s.graphInit({range:r,scale:i.default.pluck(o,"scale"),gridStep:this.props.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:this.props.isMobile}):"none"===this.props.markings&&s.init({range:r,scale:i.default.pluck(o,"scale"),isMobile:this.props.isMobile});let p;if(this.props.instructions){p=(0,l.default)("<div/>"),i.default.each(f,(function(e,t){p.css(t,e)})),p.css("opacity",.5);const e=(0,l.default)("<span/>",{text:this.props.instructions});i.default.each(g,(function(t,n){e.css(n,t)})),p.append(e),(0,l.default)(t).append(p)}else p=void 0;const d=p||this.props.onMouseDown?i.default.bind((function(e){p&&(p.remove(),p=null),this.props.onMouseDown(e)}),this):null,h=p?function(){p&&p.css("opacity",0)}:null,m=p?function(){p&&p.css("opacity",.5)}:null;s.addMouseLayer({onClick:this.props.onClick,onMouseDown:d,onMouseOver:h,onMouseOut:m,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,allowScratchpad:!0,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this._updateProtractor(),this._updateRuler(),this._hasSetupGraphieThisUpdate=!0,!e&&this.props.onGraphieUpdated&&this.props.onGraphieUpdated(s)},this._getGridConfig=()=>{const e=this;return i.default.map(e.props.step,(function(t,n){return u.default.gridDimensionConfig(t,e.props.range[n],e.props.box[n],e.props.gridStep[n])}))},this._updateProtractor=()=>{if(this.protractor&&this.protractor.remove(),this.props.showProtractor){const e=this.pointsFromNormalized([[.5,.05]])[0];this.protractor=this._graphie.protractor(e)}},this._updateRuler=()=>{if(this.ruler&&this.ruler.remove(),this.props.showRuler){const e=this.pointsFromNormalized([[.5,.25]])[0],t=this._graphie.range[0][1]-this._graphie.range[0][0];this.ruler=this._graphie.ruler({center:e,label:this.props.rulerLabel,pixelsPerUnit:this._graphie.scale[0],ticksPerUnit:this.props.rulerTicks,units:Math.round(.8*t)})}},this.toJSON=()=>i.default.pick(this.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep")}render(){let e;const t=this.props.backgroundImage;if(t.url){const n=this.props.box[0]/p.interactiveSizes.defaultBoxSize;e=s.createElement(d.default,{src:t.url,width:t.width,height:t.height,scale:n,responsive:!1})}else e=null;return s.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},e,s.createElement("div",{className:"graphie",ref:"graphieDiv"}))}componentDidMount(){this._setupGraphie(!0)}componentDidUpdate(){this._hasSetupGraphieThisUpdate=!1,this._shouldSetupGraphie&&(this._setupGraphie(!1),this._shouldSetupGraphie=!1)}UNSAFE_componentWillReceiveProps(e){const t=this;i.default.each(["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"],(function(n){i.default.isEqual(t.props[n],e[n])||(t._shouldSetupGraphie=!0)}))}}m.propTypes={box:o.default.array.isRequired,labels:o.default.arrayOf(o.default.string),range:o.default.arrayOf(o.default.arrayOf(o.default.number)),step:o.default.arrayOf(o.default.number),gridStep:o.default.arrayOf(o.default.number),snapStep:o.default.arrayOf(o.default.number),markings:o.default.string,backgroundImage:o.default.shape({url:o.default.string}),showProtractor:o.default.bool,showRuler:o.default.bool,rulerLabel:o.default.string,rulerTicks:o.default.number,onGraphieUpdated:o.default.func,instructions:o.default.string,onClick:o.default.func,setDrawingAreaAvailable:o.default.func,isMobile:o.default.bool},m.defaultProps={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:{url:null},showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:!1};var v=m;t.default=v},jJak:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-text-empty",severity:s.default.Severity.WARNING,selector:"math, blockMath",pattern:/\\text{\s*}/,message:"Empty \\text{} block in math expression"});t.default=o},jPXw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"nested-lists",severity:s.default.Severity.WARNING,selector:"list list",message:"Nested lists:\nnested lists are hard to read on mobile devices;\ndo not use additional indentation."});t.default=o},janz:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("LEdJ")),i=r(n("cxY9")),l=r(n("uBl0")),u=r(n("aMbl")),c=r(n("zX2T")),p=r(n("Ls3g")),d=r(n("N0Hx"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}class f extends o.Component{constructor(...e){super(...e),this.getSaveWarnings=()=>{const{choices:e,imageAlt:t,imageUrl:n,markers:r}=this.props,s=[];if(e.length<2&&s.push("Question requires at least two answer choices"),n?t||s.push("Question image has no alt text"):s.push("Image is not specified for question"),r.length){let e=0,t=0;for(const n of r)n.answers.length||e++,n.label||t++;e&&s.push(`Question has ${e} markers with no answers selected`),t&&s.push(`Question has ${t} markers with no ARIA label`)}else s.push("Question has no markers, to label answers on image");return s},this.handleImageChange=e=>{this.props.onChange({imageUrl:e,imageWidth:0,imageHeight:0}),e&&l.default.getImageSize(e,((e,t)=>{this.props.onChange({imageWidth:e,imageHeight:t})}))},this.handleAltChange=e=>{this.props.onChange({imageAlt:e})},this.handleChoicesChange=e=>{this.props.onChange({choices:e})},this.handleMarkersChange=e=>{this.props.onChange({markers:e})},this.handleBehaviorChange=e=>{this.props.onChange(e)}}componentDidUpdate(e){const t={};e.markers.forEach((e=>t[`${e.x}.${e.y}`]=e));const n=this.props.markers.map(((e,n)=>t.hasOwnProperty(`${e.x}.${e.y}`)?-1:n)).filter((e=>-1!==e));n.length&&this._questionMarkers&&this._questionMarkers.openDropdownForMarkerIndices(n)}serialize(){return i.default.serialize.call(this)}render(){const{choices:e,imageAlt:t,imageUrl:n,imageWidth:r,imageHeight:i,markers:l,multipleAnswers:h,hideChoicesFromInstructions:f}=this.props,m=n&&r>0&&i>0;return o.createElement("div",null,o.createElement(d.default,{onChange:this.handleImageChange,url:n}),o.createElement("div",{className:(0,s.css)(g.smallSpacer)}),m&&o.createElement(a.default,{placeholder:"Alt text (for screen readers)",onChange:e=>this.handleAltChange(e.target.value),value:t,width:"100%"}),o.createElement("div",{className:(0,s.css)(g.largeSpacer)}),o.createElement(p.default,{choices:e,imageUrl:m?n:"",imageWidth:r,imageHeight:i,markers:l,onChange:this.handleMarkersChange,ref:e=>this._questionMarkers=e}),o.createElement("div",{className:(0,s.css)(g.largeSpacer)}),o.createElement(u.default,{choices:e,onChange:this.handleChoicesChange}),o.createElement("div",{className:(0,s.css)(g.largeSpacer)}),o.createElement(c.default,{multipleAnswers:h,hideChoicesFromInstructions:f,onChange:this.handleBehaviorChange}))}}f.defaultProps={choices:[],imageAlt:"",imageUrl:"",imageWidth:0,imageHeight:0,markers:[],multipleAnswers:!1,hideChoicesFromInstructions:!1},f.widgetName="label-image";const g=s.StyleSheet.create({largeSpacer:{height:32},smallSpacer:{height:16}});var m=f;t.default=m},jskG:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=c(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=n("QESs"),l=c(n("HEOz"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const p={fontSize:"150%"},d={fontSize:"120%"},h={fontSize:"130%"},f=[()=>[s.createElement("span",{key:"plus",style:d},"+"),"+"],()=>[s.createElement("span",{key:"minus",style:p},"-"),"-"],e=>{const{TeX:t}=(0,i.getDependencies)();return e.convertDotToTimes?[s.createElement(t,{key:"times",style:p},l.doNotTranslate("\\times")),"\\times"]:[s.createElement(t,{key:"times",style:p},l.doNotTranslate("\\cdot")),"\\cdot"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"frac",style:p},l.doNotTranslate("\\frac{x}{y}")),e=>{const t=e.latex();e.typedText("/"),e.latex()===t&&e.cmd("\\frac")}]}],g={basic:f,"basic+div":f.concat([()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"div"},l.doNotTranslate("\\div")),"\\div"]}]),trig:[()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"sin"},l.doNotTranslate("\\sin")),"\\sin"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"cos"},l.doNotTranslate("\\cos")),"\\cos"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"tan"},l.doNotTranslate("\\tan")),"\\tan"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"theta",style:h},l.doNotTranslate("\\theta")),"\\theta"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement("span",{key:"phi"},s.createElement("span",{className:"perseus-sr-only"},l.doNotTranslate("phi")),s.createElement(e,{key:"pi",style:h},l.doNotTranslate("\\phi"))),"\\phi"]}],prealgebra:[()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"sqrt"},l.doNotTranslate("\\sqrt{x}")),"\\sqrt"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"nthroot"},l.doNotTranslate("\\sqrt[3]{x}")),e=>{e.typedText("nthroot3"),e.keystroke("Right")}]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"pow",style:d},l.doNotTranslate("a^b")),e=>{const t=e.latex();e.typedText("^"),e.latex()===t&&e.typedText("a^b")}]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"pi",style:d},l.doNotTranslate("\\pi")),"\\pi"]}],logarithms:[()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"log"},l.doNotTranslate("\\log")),"\\log"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"ln"},l.doNotTranslate("\\ln")),"\\ln"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"log_b"},l.doNotTranslate("\\log_b")),e=>{e.typedText("log_"),e.keystroke("Right"),e.typedText("("),e.keystroke("Left"),e.keystroke("Left")}]}],"basic relations":[()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"eq"},"="),"="]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"lt"},l.doNotTranslate("\\lt")),"\\lt"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"gt"},l.doNotTranslate("\\gt")),"\\gt"]}],"advanced relations":[()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"neq"},l.doNotTranslate("\\neq")),"\\neq"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"leq"},l.doNotTranslate("\\leq")),"\\leq"]},()=>{const{TeX:e}=(0,i.getDependencies)();return[s.createElement(e,{key:"geq"},l.doNotTranslate("\\geq")),"\\geq"]}]},m=o.default.arrayOf(o.default.oneOf((0,a.default)(g).keys()));class v extends s.Component{render(){const e=a.default.sortBy(this.props.sets,(e=>a.default.keys(g).indexOf(e))),t=(0,a.default)(e).map((e=>g[e])),n=(0,a.default)(t).map((e=>e.map((e=>{const t=e(this.props);return s.createElement("button",{onClick:()=>this.props.onInsert(t[1]),className:"tex-button",key:t[0].key,type:"button"},t[0])})))),r=(0,a.default)(n).map(((e,t)=>s.createElement("div",{className:"clearfix tex-button-row",key:this.props.sets[t]},e)));return s.createElement("div",{className:`${this.props.className||""} preview-measure`},r)}}v.propTypes={sets:m.isRequired,onInsert:o.default.func.isRequired,className:o.default.string},v.buttonSets=g,v.buttonSetsType=m;var y=v;t.default=y},jufq:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("ydm1")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("5pch")),i=r(n("yfnS"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=[i.default.BLACK,i.default.BLUE,i.default.GREEN,i.default.PINK,i.default.PURPLE,i.default.RED,i.default.GRAY],c=[i.default.LIGHT_BLUE,i.default.LIGHT_ORANGE,i.default.LIGHT_PINK,i.default.LIGHT_GREEN,i.default.LIGHT_PURPLE,i.default.LIGHT_RED,"#fff"];class p extends o.Component{render(){const e=this.props.lightColors?c:u;return o.createElement(s.default,{value:this.props.value,allowEmpty:!1,buttons:a.default.map(e,(e=>({value:e,content:o.createElement("span",null,o.createElement("span",{className:"colorpicker-circle",style:{background:e}})," ")}))),onChange:this.props.onChange})}}p.defaultProps={value:i.default.BLACK,lightColors:!1};var d=p;t.default=d},"k+ms":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"image-in-table",severity:s.default.Severity.BULK_WARNING,selector:"table image",message:"Image in table:\ndo not put images inside of tables."});t.default=o},"k1y+":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("TSYQ")),a=x(n("q1tI")),i=r(n("i8i4")),l=r(n("5pch")),u=x(n("HEOz")),c=r(n("M++g")),p=r(n("Atlv")),d=r(n("G6Ta")),h=r(n("7xiW")),f=r(n("eMwK")),g=n("j8wP"),m=r(n("7BBF")),v=r(n("p8fL")),y=r(n("uBl0")),b=n("zahm");function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(w=function(e){return e?n:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{assert:E}=v.default,{stringArrayOfSize:C}=y.default,k={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82},O={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},M={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64};function P(e,t){return[""+e,""+t]}const _=function(){return P(0,0)},S=function(e){return E(l.default.isArray(e)&&2===e.length),+e[0]},T=function(e){return E(l.default.isArray(e)&&2===e.length),+e[1]},I=function(e){return"answer"+S(e)+","+T(e)},N=function(e){const t=[1,1];return(0,l.default)(e).each(((e,n)=>{let r=0;(0,l.default)(e).each(((e,t)=>{null!=e&&e.toString().length&&(r=t+1)})),t[1]=Math.max(t[1],r),r>0&&(t[0]=Math.max(t[0],n+1))})),t};class R extends a.Component{constructor(...e){super(...e),this.state={enterTheMatrix:0},this.getInputPaths=()=>{const e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];return(0,l.default)(t).times((t=>{(0,l.default)(n).times((n=>{const r=P(t,n);e.push(r)}))})),e},this.getGrammarTypeForPath=e=>"number",this._handleFocus=(e,t)=>{this.props.onFocus(P(e,t))},this._handleBlur=(e,t)=>{this.props.onBlur(P(e,t))},this.focus=()=>(this.focusInputPath(_()),!0),this.focusInputPath=e=>{const t=I(e);this.refs[t].focus()},this.blurInputPath=e=>{0===e.length&&(e=_());const t=I(e);this.refs[t].blur()},this.getDOMNodeForPath=e=>{const t=I(e);return i.default.findDOMNode(this.refs[t])},this.setInputValue=(e,t,n)=>{const r=S(e),s=T(e);this.onValueChange(r,s,t,n)},this.handleKeyDown=(e,t,n)=>{const r=this.props.matrixBoardSize[0],s=this.props.matrixBoardSize[1];let o=null;const a=this.refs[I(P(e,t))],i=a.getStringValue(),l=a.getSelectionStart(),u=a.getSelectionEnd();let c=null;if("ArrowUp"===n.key&&e>0?c=P(e-1,t):"ArrowDown"===n.key&&e+1<r?c=P(e+1,t):"ArrowLeft"===n.key&&t>0?0===l&&0===u&&(c=P(e,t-1)):"ArrowRight"===n.key&&t+1<s?l===i.length&&(c=P(e,t+1)):"Enter"===n.key?o=this.state.enterTheMatrix+1:"Escape"===n.key&&(o=0),c){n.preventDefault();const e=this.refs[I(c)],t=2*e.getStringValue().length;e.focus(),"ArrowRight"===n.key?e.setSelectionRange(0,0):e.setSelectionRange(t,t)}null!=o&&this.setState({enterTheMatrix:o})},this.onValueChange=(e,t,n,r)=>{const s=l.default.map(this.props.answers,l.default.clone);s[e]||(s[e]=[]),s[e][t]=n,this.props.onChange({answers:s},r),this.props.trackInteraction()},this.getUserInput=()=>({answers:this.props.answers}),this.simpleValidate=e=>R.validate(this.getUserInput(),e)}componentDidMount(){this.cursorPosition=[0,0]}render(){let e;e=this.props.apiOptions.customKeypad?M:this.props.apiOptions.staticRender?k:O;const{INPUT_MARGIN:t,INPUT_HEIGHT:n,INPUT_WIDTH:r}=e,i=N(this.props.answers),u=this.props.matrixBoardSize[0],g=this.props.matrixBoardSize[1],m=this.props.cursorPosition[0],v=this.props.cursorPosition[1],y=Math.max(m,i[0]-1),b=Math.max(v,i[1]-1),w=(y+1)*(n+2*t),x=(b+1)*(r+2*t),E=(0,o.default)({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return a.createElement("div",{className:E},this.props.prefix&&a.createElement("div",{className:"matrix-prefix"},a.createElement(p.default,{content:this.props.prefix,linterContext:this.props.linterContext})),a.createElement("div",{className:"matrix-input"},a.createElement("div",{className:"matrix-bracket bracket-left",style:{height:w}}),a.createElement("div",{className:"matrix-bracket bracket-right",style:{height:w,left:x}}),(0,l.default)(u).times((e=>{const o=this.props.answers[e];return a.createElement("div",{className:"matrix-row",key:e},(0,l.default)(g).times((i=>{const l=e>y||i>b,u={className:l?"outside":"inside",ref:I(P(e,i)),value:o?o[i]:null,style:{height:n,width:r,margin:t},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[e,i],this.props.onChange({cursorPosition:[e,i]},(()=>!1)),this._handleFocus(e,i)},onBlur:()=>{e===this.cursorPosition[0]&&i===this.cursorPosition[1]&&this.props.onChange({cursorPosition:[0,0]},(()=>!1)),this._handleBlur(e,i)},onKeyDown:t=>{this.handleKeyDown(e,i,t)},onChange:(t,n)=>{this.onValueChange(e,i,t,n)}};let p;if(this.props.apiOptions.customKeypad){const e={margin:t,minWidth:r,minHeight:n,boxSizing:"border-box",backgroundColor:l?"#f3f3f3":"#fff"};p=a.createElement(f.default,(0,s.default)({},u,{style:e,scrollable:!0,keypadElement:this.props.keypadElement}))}else p=this.props.apiOptions.staticRender?a.createElement(h.default,u):this.props.numericInput?a.createElement(c.default,u):a.createElement(d.default,u);return a.createElement("span",{key:i,className:"matrix-input-field"},p)})))}))),this.props.suffix&&a.createElement("div",{className:"matrix-suffix"},a.createElement(p.default,{content:this.props.suffix,linterContext:this.props.linterContext})))}}R.defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:g.ApiOptions.defaults,linterContext:b.linterContextDefault},l.default.extend(R,{validate:function(e,t){const n=t.answers,r=e.answers,s=N(n),o=N(r),a=s[0]!==o[0]||s[1]!==o[1],i=m.default.number.createValidatorFunctional;let c=null,p=!1,d=!1;return(0,l.default)(o[0]).times((e=>{(0,l.default)(o[1]).times((t=>{if(null!=r[e][t]&&0!==r[e][t].toString().length||(p=!0),!a){const s=i(n[e][t],{simplify:!0})(r[e][t]);s.message&&(c=s.message),s.correct||(d=!0)}}))})),p?{type:"invalid",message:u._("Make sure you fill in all cells in the matrix.")}:a?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:d?0:1,total:1,message:c}}});var A={name:"matrix",displayName:"Matrix",widget:R,transform:e=>{const t=(0,l.default)(e.matrixBoardSize[0]).times((function(){return C(e.matrixBoardSize[1])}));return e=l.default.pick(e,"matrixBoardSize","prefix","suffix"),l.default.extend(e,{answers:t})},staticTransform:e=>{const t=l.default.pick(e,"matrixBoardSize","prefix","suffix");return t.answers=l.default.map(e.answers,(e=>l.default.map(e,(e=>null!=e?String(e):"")))),t},isLintable:!0};t.default=A},kPsx:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("96rG")),a=r(n("5pch")),i=r(n("XDp7")),l=r(n("7kT3")),u=r(n("bHYm")),c=r(n("yfnS")),p=r(n("s9bZ"));const{maybeUnescape:d}=p.default,h=l.default.createClass({displayName:"MovablePoint",movableProps:["children"],_getProps:function(){if(this.props.isMobile){const e=this.props.isMobile,t=e?{stroke:"#ffffff","stroke-width":3,fill:c.default.INTERACTIVE}:{stroke:c.default.INTERACTIVE,fill:c.default.INTERACTIVE},n=e?Object.assign(t,this.props.mobileStyleOverride||{}):Object.assign(t,this.props.normalStyle),r=e?(0,s.default)({},t,{"stroke-width":0,scale:.75}):this.props.highlightStyle,o=Object.assign({normalStyle:n,highlightStyle:r,shadow:e,tooltip:e&&this.props.showTooltips},e?{pointSize:7}:{});return Object.assign(this.props,o)}return this.props},add:function(e){this.point=u.default.addMovablePoint(e,this._getProps())},modify:function(){this.point.modify(this._getProps())},remove:function(){this.point.remove()},toFront:function(){this.point.toFront()},grab:function(e){this.point.grab(e)}});a.default.extend(h,u.default.MovablePoint);const f=l.default.createClass({displayName:"MovableLine",movableProps:["children"],add:function(e){const t=a.default.pluck(this.props.children,"point"),n=a.default.extend({},this.props,{points:t});this.line=u.default.addMovableLine(e,n)},modify:function(){const e=a.default.pluck(this.props.children,"point"),t=a.default.extend({},this.props,{points:e});this.line.modify(t)},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}});a.default.extend(f,u.default.MovableLine);const g=[];i.default.useJIPT&&i.default.domInsertChecks.push((function(e,t,n){const r=(0,o.default)(t).data("jipt-label-movables-index");if(t&&void 0!==r){const{label:t,useMath:n}=g[r];if(t.text(""),e=d(e),"undefined"===n||n){const n=/^\$(.*)\$$/,r=e.match(n),s=r?r[1]:"\\color{red}{\\text{Invalid Math}}";t.processMath(s,!0)}else t.processText(e);return!1}return e}));const m=l.default.createSimpleClass(((e,t)=>{let n=t.coord;t.unscaled&&(n=e.unscalePoint(n));let r=null;return i.default.useJIPT?(r=e.label(n,t.text,t.direction,!1,t.style),(0,o.default)(r).data("jipt-label-movables-index",g.length),g.push({label:r,useMath:t.tex})):r=e.label(n,t.text,t.direction,t.tex,t.style),r})),v=l.default.createClass({displayName:"Line",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.line=this.graphie.line(t.start,t.end,t.style)},modify:function(){const e=this.props,t=this.graphie.svgPath([e.start,e.end]);this.line.attr(a.default.extend({},e.style,{path:t}))},remove:function(){this.line.remove()},toFront:function(){this.line.toFront()}}),y=l.default.createClass({displayName:"Parabola",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.parabola=this.graphie.parabola(t.a,t.b,t.c,t.style)},modify:function(){const e=this.props,t=this.graphie.svgParabolaPath(e.a,e.b,e.c);this.parabola.attr(a.default.extend({},e.style,{path:t}))},remove:function(){this.parabola.remove()},toFront:function(){this.parabola.toFront()}}),b=l.default.createClass({displayName:"Sinusoid",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.sinusoid=this.graphie.sinusoid(t.a,t.b,t.c,t.d,t.style)},modify:function(){const e=this.props,t=this.graphie.svgSinusoidPath(e.a,e.b,e.c,e.d);this.sinusoid.attr(a.default.extend({},e.style,{path:t}))},remove:function(){this.sinusoid.remove()},toFront:function(){this.sinusoid.toFront()}}),w=l.default.createSimpleClass(((e,t)=>e.plot(t.fn,t.range,t.style))),x=l.default.createSimpleClass(((e,t)=>e.plotParametric(t.fn,t.range,t.style))),E=l.default.createSimpleClass(((e,t)=>e.ellipse(t.coord,e.unscaleVector([4,4]),{fill:t.color||c.default.BLACK,stroke:t.color||c.default.BLACK}))),C=l.default.createClass({displayName:"Path",movableProps:["children"],add:function(e){const t=this.props;this.graphie=e,this.path=this.graphie.path(t.coords,t.style)},modify:function(){const e=this.props,t=this.graphie.svgPath(e.coords);this.path.attr({path:t})},remove:function(){this.path.remove()},toFront:function(){this.path.toFront()}});var k={Arc:l.default.createSimpleClass(((e,t)=>{let n=t.center,r=t.radius;return t.unscaled&&(n=e.unscalePoint(n),r=e.unscaleVector(r)),e.arc(n,r,t.startAngle,t.endAngle,t.sector,t.style)})),Circle:l.default.createSimpleClass(((e,t)=>e.circle(t.center,t.radius,t.style))),Label:m,Line:v,MovableLine:f,MovablePoint:h,Parabola:y,Path:C,Plot:w,PlotParametric:x,Point:E,Sinusoid:b,Rect:l.default.createSimpleClass(((e,t)=>e.rect(t.x,t.y,t.width,t.height,t.style)))};t.default=k},kzgE:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.webappDependencies=void 0;var s=n("yBUS"),o=n("Lp/H"),a=r(n("uYZq")),i=r(n("brIp")),l=r(n("IR3g"));const u={getKaTeX:s.getKaTeX,getRenderA11yString:s.getRenderA11yString,loadMathjax:l.default,logKaTeXError:o.logKaTeXError,KatexProvider:a.default,shouldUseFutureKaTeX:s.shouldUseFutureKaTeX,TeX:i.default};t.webappDependencies=u},"l+pH":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("Yw3Q")),i=r(n("5pch")),l=n("j8wP"),u=r(n("16F6")),c=r(n("Atlv")),p=r(n("G6Ta")),d=r(n("7xiW")),h=r(n("Boyy")),f=n("zahm"),g=r(n("uBl0"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}const{captureScratchpadTouchStart:v}=g.default,y="math",b="text",w="tex";class x extends s.Component{constructor(...e){super(...e),this.state={focused:!1,showExamples:!1},this._getUniqueId=()=>`input-with-examples-${btoa(this.props.id).replace(/=/g,"")}`,this._getInputClassName=()=>{if(this.props.type===w)return this.props.className;let e=l.ClassNames.INPUT+" "+l.ClassNames.INTERACTIVE;return this.state.focused&&(e+=" "+l.ClassNames.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},this._getPropsForInputType=()=>{const e={"aria-describedby":this._getUniqueId(),ref:"input",className:this._getInputClassName(),labelText:this.props.labelText,value:this.props.value,onFocus:this._handleFocus,onBlur:this._handleBlur,disabled:this.props.disabled};return this.props.type===w?e:(i.default.extend(e,{onChange:this.props.onChange,onTouchStart:v}),this.props.type===y?i.default.extend({buttonSet:this.props.buttonSet,buttonsVisible:this.props.buttonsVisible,convertDotToTimes:this.props.convertDotToTimes},e):this.props.type===b?i.default.extend({autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"},e):void 0)},this._getComponentForInputType=()=>{switch(this.props.type){case w:return d.default;case y:return u.default;case b:return p.default;default:return null}},this._renderInput=()=>{const e=this._getPropsForInputType(),t=this._getComponentForInputType();return s.createElement(t,e)},this._handleFocus=()=>{this.props.onFocus(),this.setState({focused:!0,showExamples:!0})},this.show=()=>{this.setState({showExamples:!0})},this.hide=()=>{this.setState({showExamples:!1})},this._handleBlur=()=>{this.props.onBlur(),this.setState({focused:!1,showExamples:!1})},this.focus=()=>{this.refs.input.focus()},this.blur=()=>{this.refs.input.blur()},this.handleChange=e=>{this.props.onChange(e.target.value)}}render(){const e=this._renderInput();if(this.props.type===w)return e;const t=i.default.map(this.props.examples,(e=>"- "+e)).join("\n"),n=this.props.shouldShowExamples&&this.state.showExamples;return s.createElement(a.default,{ref:"tooltip",className:"perseus-formats-tooltip preview-measure",horizontalPosition:"left",horizontalAlign:"left",verticalPosition:"bottom",arrowSize:10,borderColor:"#ccc",show:n},e,s.createElement("div",{id:this._getUniqueId()},s.createElement(c.default,{content:t,linterContext:h.default.pushContextStack(this.props.linterContext,"input-with-examples")})))}}x.propTypes={type:o.default.oneOf([y,b,w]),value:o.default.string,onChange:o.default.func.isRequired,className:o.default.string,examples:o.default.arrayOf(o.default.string).isRequired,shouldShowExamples:o.default.bool,convertDotToTimes:o.default.bool,buttonSet:o.default.string,buttonsVisible:o.default.oneOf(["always","never","focused"]),labelText:o.default.string,onFocus:o.default.func,onBlur:o.default.func,disabled:o.default.bool,id:o.default.string.isRequired,linterContext:f.linterContextProps},x.defaultProps={type:b,shouldShowExamples:!0,onFocus:function(){},onBlur:function(){},disabled:!1,linterContext:f.linterContextDefault};var E=x;t.default=E},lCk0:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=n("mR6N"),i=r(n("Pwnf")),l=g(n("HEOz")),u=r(n("6wxr")),c=r(n("TBZ3")),p=r(n("Bkj0")),d=r(n("G4Rg")),h=n("bGTE");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const m={path:"M27.218 6.82l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836zm36.27 0l0 13.578q0 2.852-1.984 4.836t-4.836 1.984l-13.578 0q-2.852 0-4.836-1.984t-1.984-4.836l0-13.578q0-2.852 1.984-4.836t4.836-1.984l13.578 0q2.852 0 4.836 1.984t1.984 4.836z",width:100,height:27.284};class v extends o.PureComponent{constructor(...e){super(...e),this.state={hovered:!1,opened:!1,slidePanelCovered:!0,usingKeyboardFocus:!1,wasCrossedOutOnLastOpen:!1},this._openMenu=()=>{const e=null!=this._menu&&this._menu.contains(document.activeElement);this.setState({opened:!0,usingKeyboardFocus:e,wasCrossedOutOnLastOpen:this.props.crossedOut})},this._closeMenu=()=>{this._crossOutButtonIsFocused&&this._menuButton&&this._menuButton.focus(),this.setState({opened:!1,slidePanelCovered:!0})},this._handleMenuClick=(e,t)=>{t?this._openMenu():this._closeMenu(),e.preventDefault()},this._handleCrossedOutButtonClick=e=>{this.props.onCrossedOutChange(e),this._closeMenu()},this._handleSlideTransitionEnd=()=>{this.state.opened&&this.setState({slidePanelCovered:!1})}}UNSAFE_componentWillReceiveProps(e){e.enabled||this._closeMenu()}_getButtonProps(e){const t=this.state.wasCrossedOutOnLastOpen;return{onClick:()=>{this._handleCrossedOutButtonClick(!t)},onFocus:()=>{this._crossOutButtonIsFocused=!0},onBlur:()=>{this._crossOutButtonIsFocused=!1},crossedOut:t,pos:this.props.pos,primaryProductColor:this.props.primaryProductColor,usingKeyboardFocus:this.state.usingKeyboardFocus,theme:e}}_getMenuIconColor(){return this.state.opened?this.props.primaryProductColor:this.state.hovered?i.default.offBlack:i.default.offBlack50}_renderMenu(){const{pos:e,isSatProduct:t}=this.props,{opened:n}=this.state,r=(0,a.css)(y.menu,t&&y.spacing);return o.createElement("div",{ref:e=>this._menu=e,className:r,onClick:e=>this._handleMenuClick(e,!n),onMouseEnter:()=>this.setState({hovered:!0}),onMouseLeave:()=>this.setState({hovered:!1})},o.createElement(d.default,{dismissed:!this.state.opened,onDismiss:this._closeMenu,buttonProps:this._getButtonProps("day")},o.createElement("button",{type:"button","aria-label":l._("Open menu for Choice %(letter)s",{letter:(0,h.getChoiceLetter)(e)}),className:(0,a.css)([y.menuButton]),onClick:e=>this._handleMenuClick(e,!n),onMouseDown:e=>e.preventDefault(),ref:e=>this._menuButton=e},o.createElement(u.default,{className:(0,a.css)(y.menuIcon),icon:m,size:3,color:this._getMenuIconColor()}))))}_renderSlidePanel(){const e=this._getButtonProps("night"),{slidePanelCovered:t}=this.state;return o.createElement("div",{className:(0,a.css)(y.slidePanel,t&&y.slidePanelCovered),onClick:e.onClick,"aria-hidden":t},o.createElement(p.default,(0,s.default)({},e,{disabled:t,tabFocusable:!t})))}render(){const{enabled:e}=this.props,{opened:t}=this.state;return o.createElement("div",{className:(0,a.css)(y.wrapper)},o.createElement("div",{className:(0,a.css)(y.slidingContent,e&&y.slidingContentEnabled,t&&y.slidingContentOpen),onTransitionEnd:this._handleSlideTransitionEnd},o.createElement("div",{className:(0,a.css)(y.content)},this.props.children),e&&this._renderMenu()),e&&this._renderSlidePanel())}}t.default=v;const y=a.StyleSheet.create({wrapper:{display:"block",position:"relative"},slidingContent:{display:"flex",flexDirection:"row",alignItems:"stretch"},slidingContentEnabled:{[c.default.smOrSmaller]:{transition:"transform 0.2s ease-out",backgroundColor:i.default.white}},slidingContentOpen:{[c.default.smOrSmaller]:{transform:"translateX(-96px)"}},content:{display:"block",flex:"1 1 0"},menu:{cursor:"pointer",boxSizing:"border-box",width:32,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",[c.default.smOrSmaller]:{paddingRight:8}},menuButton:{background:"none",border:"none",font:"inherit",padding:0,textAlign:"inherit",cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",height:16},menuIcon:{display:"block"},slidePanel:{position:"absolute",top:0,right:0,boxSizing:"border-box",width:96,height:"100%",paddingLeft:8,paddingRight:8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",background:i.default.offBlack50,cursor:"pointer",[c.default.mdOrLarger]:{display:"none"}},spacing:{paddingRight:12},slidePanelCovered:{zIndex:-1}})},lLyr:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=r(n("qoj5")),l=r(n("ONox")),u=r(n("DUX9"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}class p extends s.Component{constructor(...e){super(...e),this.onLabelChange=(e,t)=>{const n=a.default.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},this.getSaveWarnings=()=>this.props.left.length!==this.props.right.length?["The two halves of the matcher have different numbers of cards."]:[],this.serialize=()=>a.default.pick(this.props,"left","right","labels","orderMatters","padding")}render(){return s.createElement("div",{className:"perseus-matcher-editor"},s.createElement("div",null," ","Correct answer:"," ",s.createElement(i.default,null,s.createElement("p",null,"Enter the correct answers here. The preview on the right will show the cards in a randomized order, which is how the student will see them."))),s.createElement("div",{className:"perseus-clearfix"},s.createElement(u.default,{options:this.props.left,onChange:(e,t)=>{this.props.onChange({left:e},t)},layout:"vertical"}),s.createElement(u.default,{options:this.props.right,onChange:(e,t)=>{this.props.onChange({right:e},t)},layout:"vertical"})),s.createElement("span",null," ","Labels:"," ",s.createElement(i.default,null,s.createElement("p",null,"These are entirely optional."))),s.createElement("div",null,s.createElement("input",{type:"text",defaultValue:this.props.labels[0],onChange:this.onLabelChange.bind(this,0)}),s.createElement("input",{type:"text",defaultValue:this.props.labels[1],onChange:this.onLabelChange.bind(this,1)})),s.createElement("div",null,s.createElement(l.default,{label:"Order of the matched pairs matters:",orderMatters:this.props.orderMatters,onChange:this.props.onChange}),s.createElement(i.default,null,s.createElement("p",null,"With this option enabled, only the order provided above will be treated as correct. This is useful when ordering is significant, such as in the context of a proof."),s.createElement("p",null,"If disabled, pairwise matching is sufficient. To make this clear, the left column becomes fixed in the provided order and only the cards in the right column can be moved."))),s.createElement("div",null,s.createElement(l.default,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),s.createElement(i.default,null,s.createElement("p",null,"Padding is good for text, but not needed for images."))))}}p.propTypes={left:o.default.array,right:o.default.array,labels:o.default.array,orderMatters:o.default.bool,padding:o.default.bool},p.widgetName="matcher",p.defaultProps={left:["$x$","$y$","$z$"],right:["$1$","$2$","$3$"],labels:["test","label"],orderMatters:!1,padding:!0};var d=p;t.default=d},lQTD:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=C(n("q1tI")),a=C(n("i8i4")),i=r(n("96rG")),l=r(n("5pch")),u=C(n("4PhQ")),c=n("QESs"),p=r(n("qcZx")),d=n("/4Qb"),h=r(n("++J6")),f=r(n("APgo")),g=r(n("qwrK")),m=r(n("2OMh")),v=r(n("ONox")),y=r(n("uBl0")),b=C(n("4Zwh")),w=r(n("p4D3")),x=r(n("Wy19"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const k="(\\[\\[☃ {id}\\]\\])",O=new RegExp(k.replace("{id}","[a-z-]+ [0-9]+"),"g"),M=/^\[\[([a-z-]+)$/,P=/(?:\n{2,}|^\n*)$/,_=/(\n*)$/,S=/^(\n*)/,T=e=>{let t=e.toString();return t.length>=5&&(t=t.replace(/(\d)(?=(\d{3})+$)/g,"$1{,}")),t};class I extends o.Component{constructor(...e){super(...e),this.handleChange=e=>{const t=e.currentTarget.value;""!==t&&this.props.onChange&&this.props.onChange(t)}}shouldComponentUpdate(){return!1}render(){const e=b.getPublicWidgets(),t=l.default.sortBy(l.default.keys(e),(t=>e[t].displayName));return o.createElement("select",{value:"",onChange:this.handleChange},o.createElement("option",{value:""},"Add a widget…"),o.createElement("option",{disabled:!0},"--"),l.default.map(t,(t=>o.createElement("option",{key:t,value:t},e[t].displayName))))}}const N=e=>{const t=l.default.omit(e,x.default);return b.upgradeWidgetInfoToLatestVersion(t)};class R extends o.Component{constructor(e){super(e),this._toggleWidget=e=>{e.preventDefault(),this.setState({showWidget:!this.state.showWidget})},this._handleWidgetChange=(e,t,n)=>{const r=Object.assign({},this.state.widgetInfo);r.options=Object.assign(this.refs.widget.serialize(),e),this.props.onChange(r,t,n)},this._toggleStatic=e=>{e.preventDefault();const t=Object.assign({},this.state.widgetInfo,{static:!this.state.widgetInfo.static});this.props.onChange(t)},this._handleAlignmentChange=e=>{const t=e.currentTarget.value,n=Object.assign({},this.state.widgetInfo);n.alignment=t,this.props.onChange(n)},this.getSaveWarnings=()=>{const e=this.refs.widget.getSaveWarnings;return e?e():[]},this.serialize=()=>{const e=this.state.widgetInfo;return{type:e.type,alignment:e.alignment,static:e.static,graded:e.graded,options:this.refs.widget.serialize(),version:e.version}},this.state={showWidget:!1,widgetInfo:N(e)}}UNSAFE_componentWillReceiveProps(e){this.setState({widgetInfo:N(e)})}render(){const e=this.state.widgetInfo,t=b.getEditor(e.type);let n;n=this.props.apiOptions.showAlignmentOptions?b.getSupportedAlignments(e.type):["default"];const r=b.supportsStaticMode(e.type),a="transformer"===e.type,i=o.createElement(v.default,{label:"Graded:",graded:e.graded,onChange:this.props.onChange});return o.createElement("div",{className:"perseus-widget-editor"},o.createElement("div",{className:"perseus-widget-editor-title "+(this.state.showWidget?"open":"closed")},o.createElement("a",{className:"perseus-widget-editor-title-id",href:"#",onClick:this._toggleWidget},this.props.id,this.state.showWidget?o.createElement(f.default,d.iconChevronDown):o.createElement(f.default,d.iconChevronRight)),r&&o.createElement("input",{type:"button",onClick:this._toggleStatic,className:"simple-button--small",value:e.static?"Unset as static":"Set as static"}),n.length>1&&o.createElement("select",{className:"alignment",value:e.alignment,onChange:this._handleAlignmentChange},n.map((e=>o.createElement("option",{key:e},e)))),o.createElement(h.default,{icon:d.iconTrash,onClick:()=>{this.props.onRemove()},title:"Remove image widget"})),o.createElement("div",{className:"perseus-widget-editor-content "+(this.state.showWidget?"enter":"leave")},a&&i,t&&o.createElement(t,(0,s.default)({ref:"widget",onChange:this._handleWidgetChange,static:e.static,apiOptions:this.props.apiOptions},e.options))))}}const A=/!\[[^\]]*\]\(([^\s)]+)[^)]*\)/g;class j extends o.Component{constructor(...e){super(...e),this.state={katex:void 0,showKatexErrors:!1,textAreaValue:this.props.content},this.getWidgetEditor=(e,t)=>{if(b.getEditor(t))return o.createElement(R,(0,s.default)({key:e,ref:e,id:e,type:t,onChange:this._handleWidgetEditorChange.bind(this,e),onRemove:this._handleWidgetEditorRemove.bind(this,e),apiOptions:this.props.apiOptions},this.props.widgets[e]))},this._handleWidgetEditorChange=(e,t,n,r)=>{const s=Object.assign({},this.props.widgets);s[e]=Object.assign({},s[e],t),this.props.onChange({widgets:s},n,r)},this._handleWidgetEditorRemove=e=>{const t=this.refs.textarea,n=new RegExp(k.replace("{id}",e),"gm");this.props.onChange({content:t.value.replace(n,"")})},this._sizeImages=e=>{const t=(n=e.content,l.default.map(function(e,t){const n=[];for(;;){const r=e.exec(t);if(!r)break;n.push(r)}return n}(A,n),(e=>e[1])));var n;const r=l.default.pick(e.images,t),s=l.default.filter(t,(e=>!r[e]));l.default.each(s,(t=>{y.default.getImageSize(t,((n,s)=>{r[t]={width:n,height:s},e.onChange({images:l.default.clone(r)},null,!0)}))}))},this.handleDrop=e=>{const{imageUploader:t}=this.props;let n=this.state.textAreaValue||"";const r=e.dataTransfer;if(!r||!t)return;const s=r.files;if(0===s.length){const e=r.getData("URL");if(e){const t=n+"\n\n![]("+e+")";this.lastUserValue=this.props.content,this.props.onChange({content:t})}return}const o=this.state.textAreaValue;(0,l.default)(s).chain().map((function(e){if(!e.type.match("image.*"))return null;const t="☃ "+l.default.uniqueId("image_");return n+="\n\n![]("+t+")",{file:e,sentinel:t}})).reject(l.default.isNull).tap((()=>{this.lastUserValue=o,this.props.onChange({content:n})})).each((e=>{t(e.file,(t=>{this.lastUserValue=o,this.props.onChange({content:this.state.textAreaValue.replace(e.sentinel,t)})}))}))},this.handleChange=e=>{clearTimeout(this.deferredChange),this.setState({textAreaValue:e.currentTarget.value}),this.deferredChange=setTimeout((()=>{this.state.textAreaValue!==this.props.content&&this.props.onChange({content:this.state.textAreaValue})}),this.props.apiOptions.editorChangeDelay)},this._handleKeyDown=e=>{if("Tab"===e.key){const t=a.findDOMNode(this.refs.textarea),n=y.default.textarea.getWordBeforeCursor(t),r=n.string.toLowerCase().match(M);if(null!=r){const t=r[1],s=b.getAllWidgetTypes(),o=l.default.filter(s,(e=>e.substring(0,t.length)===t));if(1===o.length){const e=o[0];this._addWidgetToContent(this.props.content,[n.pos.start,n.pos.end+1],e)}e.preventDefault()}}},this._maybeCopyWidgets=e=>{const t=e.currentTarget,n=t.value.substring(t.selectionStart,t.selectionEnd),r=l.default.map(n.match(O),(e=>y.default.rWidgetParts.exec(e)[1])),s=l.default.pick(this.serialize().widgets,r);localStorage.perseusLastCopiedText=n,localStorage.perseusLastCopiedWidgets=JSON.stringify(s),u.default.log(`Widgets copied: ${localStorage.perseusLastCopiedWidgets}`)},this._maybePasteWidgets=e=>{const t=localStorage.perseusLastCopiedWidgets,n=localStorage.perseusLastCopiedText,r=e.originalEvent.clipboardData.getData("text");if(t&&n===r){e.preventDefault();const r=JSON.parse(t),s=this._safeWidgetNameMapping(r),o={};for(const[e,t]of Object.entries(r))o[s[e]]=t;const a=l.default.extend(o,this.props.widgets),i=n.replace(O,(e=>{const t=y.default.rWidgetParts.exec(e),n=t[0],r=t[1];return n.replace(r,s[r])})),u=e.currentTarget,c=u.selectionStart,p=this.state.textAreaValue.substr(0,c)+i+this.state.textAreaValue.substr(u.selectionEnd);this.lastUserValue=this.state.textAreaValue,this.props.onChange({content:p,widgets:a},(()=>{const e=c+i.length;y.default.textarea.moveCursor(u,e)}))}},this._safeWidgetNameMapping=e=>{const t=l.default.keys(e).map((e=>e.split(" "))),n=l.default.uniq(t.map((e=>e[0]))),r=l.default.keys(this.props.widgets).map((e=>e.split(" "))),s={};l.default.each(n,(e=>{s[e]=l.default.chain(r).filter((t=>t[0]===e)).map((e=>+e[1]+1)).max().value(),s[e]=Math.max(s[e],1)}));const o={};return l.default.each(t,(e=>{const t=e.join(" "),n=e[0];o[t]=`${n} ${s[n]}`,s[n]++})),o},this._addWidgetToContent=(e,t,n)=>{var r;const s=a.findDOMNode(this.refs.textarea),o=l.default.map(e.match(O),(e=>{const t=y.default.rWidgetParts.exec(e);return[t[2],+t[3]]})),i=l.default.reduce(o,((e,t)=>{const[r,s]=t;return r===n?Math.max(s+1,e):e}),1),u=n+" "+i,c="[[☃ {id}]]".replace("{id}",u),p="block"===b.getDefaultAlignment(n),d=e.slice(0,t[0]),h=e.slice(t[1]),f=(p?(e=>{if(!P.test(e)){const t=_.exec(e);if(t){const n=t[1];return e+"\n\n".slice(0,2-n.length)}}return e})(d):d)+c+(p?(e=>{const t=S.exec(e);if(!t)return e;const n=t[1];return"\n\n".slice(0,2-n.length)+e})(h):h),g=l.default.clone(this.props.widgets);g[u]={options:null==(r=b.getEditor(n))?void 0:r.defaultProps,type:n,version:b.getVersion(n)},this.lastUserValue=this.props.content,this.props.onChange({content:f,widgets:g},(function(){y.default.textarea.moveCursor(s,f.length-h.length)}))},this._addWidget=e=>{const t=this.refs.textarea;this._addWidgetToContent(this.props.content,[t.selectionStart,t.selectionEnd],e),t.focus()},this.addTemplate=e=>{const t=e.currentTarget.value;if(""===t)return;e.currentTarget.value="";let n,r=this.props.content;if(r=r.replace(/\n*$/,"\n\n"),"table"===t)n="header 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9";else if("titledTable"===t)n="|| **Table title** ||\nheader 1 | header 2 | header 3\n- | - | -\ndata 1 | data 2 | data 3\ndata 4 | data 5 | data 6\ndata 7 | data 8 | data 9";else if("alignment"===t)n="$\\begin{align} x+5 &= 30 \\\\\nx+5-5 &= 30-5 \\\\\nx &= 25 \\end{align}$";else if("piecewise"===t)n="$f(x) = \\begin{cases}\n7 & \\text{if }x=1 \\\\\nf(x-1)+5 & \\text{if }x > 1\n\\end{cases}$";else{if("allWidgets"!==t)throw new u.KAError("Invalid template type: "+t,u.Errors.Internal);n=b.getAllWidgetTypes().map((e=>`[[${y.default.snowman} ${e} 1]]`)).join("\n\n")}const s=r+n;this.lastUserValue=this.props.content,this.props.onChange({content:s},this.focusAndMoveToEnd)},this.getSaveWarnings=()=>{const e=l.default.intersection(this.widgetIds,l.default.keys(this.refs));return(0,l.default)(e).chain().map((e=>{const t=this.refs[e].getSaveWarnings,n=t?t():[];return l.default.map(n,(t=>e+": "+t))})).flatten(!0).value()},this.focus=()=>{const e=a.findDOMNode(this.refs.textarea);e&&e.focus()},this.focusAndMoveToEnd=()=>{this.focus();const e=a.findDOMNode(this.refs.textarea);e&&(e.selectionStart=e.value.length,e.selectionEnd=e.value.length)},this.serialize=e=>{const t={},n=l.default.intersection(this.widgetIds,l.default.keys(this.refs));return l.default.each(n,(e=>{t[e]=this.refs[e].serialize()})),e&&e.keepDeletedWidgets&&l.default.chain(this.props.widgets).keys().reject((e=>l.default.contains(n,e))).each((e=>{t[e]=this.props.widgets[e]})),{replace:this.props.replace,content:this.props.content,images:this.props.images,widgets:t}}}componentDidMount(){this.lastUserValue=null,this._sizeImages(this.props),(0,i.default)(a.findDOMNode(this.refs.textarea)).on("copy cut",this._maybeCopyWidgets).on("paste",this._maybePasteWidgets),(0,c.getDependencies)().getKaTeX().then((e=>{this.setState({katex:e})}))}UNSAFE_componentWillReceiveProps(e){this.props.content!==e.content&&this.setState({textAreaValue:e.content})}componentDidUpdate(e){const t=a.findDOMNode(this.refs.textarea);null!==this.lastUserValue&&t&&(t.focus(),t.value=this.lastUserValue,t.selectionStart=0,t.select(0,e.content.length),!1===document.execCommand("insertText",!1,this.props.content)&&(t.value=this.props.content),this.lastUserValue=null),this.props.content!==e.content&&this._sizeImages(this.props)}componentWillUnmount(){clearTimeout(this.deferredChange)}render(){let e,t,n,r,s,a,i;const u=[];if(this.props.showWordCount){const e=m.default.characterCount(this.props.content),t=Math.floor(e/6);i=o.createElement("span",{className:"perseus-editor-word-count",title:"~"+T(t)+" words ("+T(e)+" characters)"},T(t))}const{katex:c}=this.state;if(this.props.widgetEnabled&&c){e=y.default.split(this.props.content,O),t={},n=[];for(let r=0;r<e.length;r++)if(r%2==0){n.push(e[r]);const t=m.default.parse(e[r]);m.default.traverseContent(t,(e=>{if("math"===e.type||"blockMath"===e.type){const t=(0,w.default)(e.content);try{c.renderToString(t,{colorIsTextColor:!0})}catch(e){u.push({math:t,message:e.message})}}}))}else{const s=y.default.rWidgetParts.exec(e[r]);if(null!=s){const a=s[1],i=s[2],l=!1,u=a in t;t[a]=this.getWidgetEditor(a,i);const c=(u||!t[a]?"error ":"")+(l?"selected ":""),p=u?r:a;n.push(o.createElement("b",{className:c,key:p},e[r]))}}this.widgetIds=l.default.keys(t),r=o.createElement(I,{ref:"widgetSelect",onChange:this._addWidget});const p="Insert template…";if(s=o.createElement("select",{onChange:this.addTemplate},o.createElement("option",{value:""},p),o.createElement("option",{disabled:!0},"--"),o.createElement("option",{value:"table"},"Table"),o.createElement("option",{value:"titledTable"},"Titled table"),o.createElement("option",{value:"alignment"},"Aligned equations"),o.createElement("option",{value:"piecewise"},"Piecewise function"),o.createElement("option",{disabled:!0},"--"),o.createElement("option",{value:"allWidgets"},"All widgets (for testing)")),!this.props.immutableWidgets){const e=Object.values(t);a=o.createElement("div",{className:"perseus-editor-widgets"},o.createElement("div",{className:"perseus-editor-widgets-selectors"},r,s,i),e),i=null}}else n=[this.props.content];n.push(o.createElement("br",{key:"end"}));const d=[o.createElement("div",{className:"perseus-textarea-underlay",ref:"underlay",key:"underlay"},n),o.createElement("textarea",{ref:"textarea",key:"textarea",onChange:this.handleChange,onKeyDown:this._handleKeyDown,placeholder:this.props.placeholder,disabled:this.props.disabled,value:this.state.textAreaValue})];let h;h=this.props.imageUploader?o.createElement(p.default,{onDrop:this.handleDrop,className:"perseus-textarea-pair"},d):o.createElement("div",{className:"perseus-textarea-pair"},d);const f=0===this.props.content.replace(/\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/g,"").trim().length,v=!/\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/g.test(this.props.content),b={borderTop:"none",padding:4,backgroundColor:"pink"};return o.createElement("div",{className:"perseus-single-editor "+(this.props.className||"")},h,u.length>0&&o.createElement(g.default,{errorList:u}),this.props.warnNoPrompt&&f&&o.createElement("div",{style:b},"Graded Groups should contain a prompt"),this.props.warnNoWidgets&&v&&o.createElement("div",{style:b},"Graded Groups should contain at least one widget"),i,a)}}j.defaultProps={content:"",placeholder:"",widgets:{},images:{},disabled:!1,widgetEnabled:!0,immutableWidgets:!1,showWordCount:!1,warnNoPrompt:!1,warnNoWidgets:!1};var D=j;t.default=D},lQji:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"blockquoted-widget",severity:s.default.Severity.WARNING,selector:"blockQuote widget",message:"Blockquoted widget:\nwidgets should not be indented."});t.default=o},ly0L:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=n("mR6N"),i=n("JimW"),l=n("6OHE"),u=r(n("qRKg")),c=g(n("HEOz")),p=r(n("6wxr")),d=n("ytpR"),h=n("WxXo");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class m extends o.PureComponent{constructor(...e){super(...e),this._handleClickClose=()=>this.props.dismiss()}_renderCloseButton(e){const{inverted:t,dismissOnClickClose:n}=this.props.tooltipProps;if(!n)return null;const r=e.get("button-description"),s=this.getA11yHeaderId(e);return o.createElement("button",{className:(0,a.css)(v.closeIcon),onClick:this._handleClickClose,"aria-describedby":`${r} ${s}`},o.createElement(p.default,{title:c._("Close"),icon:"M6.26353762,4.99851587 L9.73097464,1.53107884 C10.0836373,1.17841618 10.0842213,0.612127047 9.73530496,0.263210718 C9.38395604,-0.0881381913 8.81874474,-0.0837668714 8.46743686,0.267541014 L4.99999981,3.73497806 L1.5325628,0.267541051 C1.1812549,-0.0837668481 0.616043606, -0.0881381955 0.264694717,0.263210694 C-0.0842215912,0.612127004 -0.0836375768,1.17841613 0.269025093,1.5310788 L3.73646206,4.9985158 L0.269025109,8.46595276 C-0.083637537,8.81861541 -0.0842215923, 9.38490462 0.264694642,9.73382106 C0.616043456,10.0851701 1.18125469, 10.0807988 1.53256259,9.72949093 L4.99999988,6.26205363 L8.46743739, 9.72949117 C8.8187453,10.0807991 9.38395655,10.0851704 9.73530537, 9.73382138 C10.0842216,9.38490498 10.0836375,8.81861579 9.73097488, 8.46595313 L6.26353762,4.99851587 Z",size:10,color:t?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.15)"}),o.createElement("div",{id:r,className:(0,a.css)(u.default.srOnly)},c._("Closes the tooltip: ")))}getA11yHeaderId(e){const{tooltipProps:{a11y:t}}=this.props;return t&&t.title?"string"==typeof t.title?e.get("header"):t.title.id:this.getA11yContentId(e)}getA11yContentId(e){return e.get("content")}renderTooltip(e){const{content:t,dismissOnClickClose:n,noPadding:r,onClick:s,onMouseEnter:i,onMouseLeave:l,a11y:c,testId:p}=this.props.tooltipProps,d=c&&c.title,f=c&&c.assertiveness,{backgroundColor:g,textColor:m}=(0,h.getTooltipColors)(this.props.tooltipProps),y=this.getA11yHeaderId(e),b=this.getA11yContentId(e);return o.createElement("div",{className:(0,a.css)(v.tooltipBubble,!r&&v.tooltipBubbleWithPadding,n&&v.tooltipBubbleWithCloseIcon,s&&v.tooltipBubbleWithOnClick),onClick:s,onMouseEnter:i,onMouseLeave:l,style:{backgroundColor:g,color:m},role:"region","aria-labelledby":y,"aria-describedby":b===y?null:b,"data-test-id":p},this._renderCloseButton(e),o.createElement("div",{"aria-live":f},"string"==typeof d?o.createElement("div",{className:(0,a.css)(u.default.srOnly),id:y},d):null,o.createElement("div",{id:b,className:(0,a.css)(v.tooltipContent)},t)))}render(){return o.createElement(i.UniqueIDProvider,{mockOnFirstRender:!1,scope:"tooltip-bubble"},(e=>this.renderTooltip(e)))}}t.default=m;const v=a.StyleSheet.create({tooltipBubble:(0,s.default)({boxSizing:"border-box",position:"relative"},l.typography.labelMedium,{borderRadius:d.bubbleBorderRadius,border:"1px solid rgba(0, 0, 0, 0.1)",boxShadow:`${d.dropShadowXOffset}px ${d.dropShadowYOffset}px ${d.dropShadowRadius}px 0px rgba(0, 0, 0, ${d.dropShadowOpacity})`,userSelect:"none"}),tooltipBubbleWithPadding:{padding:"10px 23px"},tooltipBubbleWithCloseIcon:{paddingRight:34},tooltipBubbleWithOnClick:{cursor:"pointer"},tooltipContent:{userSelect:"auto"},closeIcon:{display:"block",position:"absolute",right:10,top:10,padding:0,background:"inherit",border:"none"}})},mU3w:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr"));const o={and:!0,nor:!0,but:!0,the:!0,for:!0};var a=s.default.makeRule({name:"heading-title-case",severity:s.default.Severity.GUIDELINE,selector:"heading",pattern:/[^\s:]\s+[A-Z]+[a-z]/,locale:"en",lint:function(e,t,n,r){let s=t.trim().split(/\s+/);if(s.shift(),s=s.filter((e=>e.length>2&&!o.hasOwnProperty(e))),s.length>=3&&s.every((e=>function(e){const t=e[0];return t===t.toUpperCase()}(e))))return"Title-case heading:\nThis heading appears to be in title-case, but should be sentence-case.\nOnly capitalize the first letter and proper nouns."}});t.default=a},ma4Y:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHostname=s,t.isInternalURL=function(e){const t=s(e);return""===t||o.hasOwnProperty(t)};const r=/\/\/([^\/]+)/;function s(e){if(!e)return"";const t=e.match(r);return t?t[1]:""}const o={"khanacademy.org":!0,"www.khanacademy.org":!0,"kasandbox.org":!0,"fastly.kastatic.org":!0,"cdn.kastatic.org":!0,"ka-youtube-converted.storage.googleapis.com":!0,"KA-share.s3.amazonaws.com":!0,"ka-article-iframes.s3.amazonaws.com":!0,"ka-cs-algorithms.s3.amazonaws.com":!0,"ka-cs-challenge-images.s3.amazonaws.com":!0,"ka-cs-scratchpad-audio.s3.amazonaws.com":!0,"ka-exercise-screenshots.s3.amazonaws.com":!0,"ka-exercise-screenshots-2.s3.amazonaws.com":!0,"ka-exercise-screenshots-3.s3.amazonaws.com":!0,"ka-learnstorm.s3.amazonaws.com":!0,"ka-mobile.s3.amazonaws.com":!0,"ka-perseus-graphie.s3.amazonaws.com":!0,"ka-perseus-images.s3.amazonaws.com":!0}},o0j1:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=n("mR6N"),i=r(n("473Y")),l=r(n("h/OD")),u=n("VMUI");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}class p extends o.PureComponent{constructor(...e){super(...e),this.state={wordRanges:[]},this._handleAddHighlight=e=>{const t=(0,u.addHighlight)(this._getDOMHighlights(),e),n={};for(const e of Object.keys(t))n[e]=(0,u.serializeHighlight)(t[e]);this.props.onSerializedHighlightsUpdate(n)},this._handleRemoveHighlight=e=>{const{serializedHighlights:t}=this.props,n=(0,s.default)({},t);delete n[e],this.props.onSerializedHighlightsUpdate(n)},this._handleWordsUpdate=e=>{this.setState({wordRanges:e})}}_buildHighlight(e){return(0,u.buildHighlight)(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){const{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,n={};for(const r of Object.keys(e))n[r]=(0,u.deserializeHighlight)(e[r],t);return n}render(){const e=this._getDOMHighlights();return o.createElement("div",{className:(0,a.css)(d.container),ref:e=>this._container=e},o.createElement("div",null,this.props.enabled&&this._container&&this._content&&o.createElement(i.default,{buildHighlight:e=>this._buildHighlight(e),contentNode:this._content,editable:this.props.editable,highlights:e,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})),o.createElement("div",{className:(0,a.css)(d.content),ref:e=>this._content=e},o.createElement(l.default,{onWordsUpdate:this._handleWordsUpdate},this.props.children)))}}const d=a.StyleSheet.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});var h=p;t.default=h},o9am:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-starts-with-space",severity:s.default.Severity.GUIDELINE,selector:"math, blockMath",pattern:/^\s*(~|\\qquad|\\quad|\\,|\\;|\\:|\\ |\\!|\\enspace|\\phantom)/,message:"Math starts with space:\nmath should not be indented. Do not begin math expressions with\nLaTeX space commands like ~, \\;, \\quad, or \\phantom"});t.default=o},oBkO:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("17x9")),i=r(n("i8i4")),l=n("mR6N"),u=r(n("5pch")),c=r(n("96rG")),p=n("yhei"),d=r(n("uBl0")),h=r(n("Atlv")),f=n("j8wP"),g=r(n("Boyy")),m=n("zahm"),v=n("QESs");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}const b="horizontal",w="vertical",x="static",E="dragging",C="animating",k="disabled",O=(e,t)=>{const n=e.offsetParent();return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft()}};class M extends o.Component{render(){const{layout:e}=this.props,t=(0,l.css)(S.card,S.placeholder,e===b&&S.horizontalCard),n={width:this.props.width,height:this.props.height};return null!=this.props.margin&&(n.margin=this.props.margin),o.createElement("li",{className:t,style:n})}}M.propTypes={layout:a.default.oneOf([b,w]),width:a.default.number.isRequired,height:a.default.number.isRequired};class P extends o.Component{constructor(...e){super(...e),this.animationFrameRequest=null,this.state={startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}},this.getCurrentPosition=()=>({left:this.state.startPosition.left+this.state.mouse.left-this.state.startMouse.left,top:this.state.startPosition.top+this.state.mouse.top-this.state.startMouse.top}),this.bindMouseMoveUp=()=>{this.isMouseMoveUpBound=!0,(0,c.default)(document).on("mousemove",this.onMouseMove),(0,c.default)(document).on("mouseup",this.onMouseUp)},this.unbindMouseMoveUp=()=>{this.isMouseMoveUpBound=!1,(0,c.default)(document).off("mousemove",this.onMouseMove),(0,c.default)(document).off("mouseup",this.onMouseUp)},this.onMouseDown=e=>{if(this.props.type!==x)return;if(0!==e.button&&(null==e.touches||1!==e.touches.length))return;e.preventDefault();const t=d.default.extractPointerLocation(e);this.animationFrameRequest=requestAnimationFrame((()=>{const e=(0,c.default)(i.default.findDOMNode(this)),n=e.position(),r=O(e,n);t&&this._mounted&&this.setState({startPosition:r,startMouse:t,mouse:t,dragging:!0},(function(){this.bindMouseMoveUp(),this.props.onMouseDown()}))}))},this.onMouseMove=e=>{if(this.props.type!==E||!this.state.dragging)return;e.preventDefault();const t=d.default.extractPointerLocation(e);t&&(this.animationFrameRequest=requestAnimationFrame((()=>{this.setState({mouse:t},this.props.onMouseMove)})))},this.onMouseUp=e=>{if(this.props.type!==E||!this.state.dragging)return;e.preventDefault();d.default.extractPointerLocation(e)&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp())}}componentDidMount(){this._mounted=!0,this.isMouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,!!d.default.supportsPassiveEvents()&&{passive:!1})}componentWillUnmount(){this._mounted=!1,this.isMouseMoveUpBound&&this.unbindMouseMoveUp(),this.animationFrameRequest&&cancelAnimationFrame(this.animationFrameRequest),document.removeEventListener("touchmove",this.onMouseMove)}render(){const{includePadding:e,layout:t,type:n}=this.props;let r=(0,l.css)(S.card,S.draggable,t===b&&S.horizontalCard,t===w&&S.verticalCard,n===E&&S.dragging,n===k&&S.disabled,!e&&S.unpaddedCard)+" "+f.ClassNames.INTERACTIVE+" perseus-sortable-draggable";e||(r+=" perseus-sortable-draggable-unpadded");const s={position:"static"};return this.props.type!==E&&this.props.type!==C||u.default.extend(s,{position:"absolute"},this.getCurrentPosition()),this.props.width&&(s.width=this.props.width+1),this.props.height&&(s.height=this.props.height),null!=this.props.margin&&(s.margin=this.props.margin),o.createElement("li",{className:r,style:s,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},o.createElement(h.default,{content:this.props.content,linterContext:g.default.pushContextStack(this.props.linterContext,"draggable"),onRender:this.props.onRender}))}componentDidUpdate(e){if(this.props.type!==e.type)if(this.props.type===C){const e=this.getCurrentPosition(),t=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-e.left,2)+Math.pow(this.props.endPosition.top-e.top,2)));(0,c.default)(i.default.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(t,1),complete:this.props.onAnimationEnd})}else this.props.type===x&&(0,c.default)(i.default.findDOMNode(this)).finish()}}P.propTypes={content:a.default.string.isRequired,endPosition:a.default.object.isRequired,includePadding:a.default.bool,layout:a.default.oneOf([b,w]),onAnimationEnd:a.default.func.isRequired,onMouseDown:a.default.func.isRequired,onMouseMove:a.default.func.isRequired,onMouseUp:a.default.func.isRequired,onRender:a.default.func.isRequired,type:a.default.oneOf([x,E,C,k]),linterContext:m.linterContextProps},P.defaultProps={includePadding:!0,type:x,linterContext:m.linterContextDefault};class _ extends o.Component{constructor(e){super(e),this.remeasureItems=u.default.debounce((()=>{this.setState({items:_.clearItemMeasurements(this.state.items)})}),20),this.state={items:_.itemsFromProps(this.props),katex:null}}UNSAFE_componentWillReceiveProps(e){const t=this.props;u.default.isEqual(e.options,t.options)?e.layout===t.layout&&e.padding===t.padding&&e.disabled===t.disabled&&u.default.isEqual(e.constraints,t.constraints)||this.setState({items:_.clearItemMeasurements(this.state.items)}):this.setState({items:_.itemsFromProps(e)})}componentDidUpdate(){!this.state.items.length||this.state.items[0].width||this.state.items[0].height||setTimeout((()=>{this.measureItems()}),0)}componentDidMount(){(0,v.getDependencies)().getKaTeX().then((e=>{this.setState({katex:e})}))}static itemsFromProps(e){const t=e.disabled?k:x;return e.options.map(((e,n)=>({option:e,key:n,type:t,endPosition:{},width:0,height:0})))}static clearItemMeasurements(e){return e.map((e=>(0,s.default)({},e,{width:0,height:0})))}measureItems(){let e=u.default.clone(this.state.items);const t=u.default.map(e,(function(e){return(0,c.default)(i.default.findDOMNode(this.refs[e.key]))}),this),n=u.default.invoke(t,"outerWidth"),r=u.default.invoke(t,"outerHeight"),{constraints:s,layout:o}=this.props;let a=null;null!=s&&s.width?a=u.default.max(n.concat(s.width)):o===w&&(a=u.default.max(n));let l=null;null!=s&&s.height?l=u.default.max(r.concat(s.height)):o===b&&(l=u.default.max(r)),e=u.default.map(e,(function(e,t){return e.width=a||n[t],e.height=l||r[t],e})),this.setState({items:e},(()=>{this.props.onMeasure&&this.props.onMeasure({widths:n,heights:r})}))}render(){var e,t;if(this.props.waitForKatexLoad&&!this.state.katex)return o.createElement(p.CircularSpinner,null);const n=[],{layout:r}=this.props,s=(0,l.css)(S.sortable)+" perseus-sortable",a=(null==(e=this.props.constraints)?void 0:e.width)||r===w,i=(null==(t=this.props.constraints)?void 0:t.height)||r===b;return u.default.each(this.state.items,(function(e,t,s){const l=t===s.length-1,u=e.type===x||e.type===k;let c;this.props.layout===b?c="0 "+this.props.margin+"px 0 0":this.props.layout===w&&(c="0 0 "+this.props.margin+"px 0"),n.push(o.createElement(P,{content:e.option,key:e.key,type:e.type,ref:e.key,width:a?e.width:void 0,height:i?e.height:void 0,layout:r,includePadding:this.props.padding,margin:l&&u?0:c,endPosition:e.endPosition,linterContext:g.default.pushContextStack(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,e.key),onMouseMove:this.onMouseMove.bind(this,e.key),onMouseUp:this.onMouseUp.bind(this,e.key),onTouchMove:this.onMouseMove.bind(this,e.key),onTouchEnd:this.onMouseUp.bind(this,e.key),onTouchCancel:this.onMouseUp.bind(this,e.key),onAnimationEnd:this.onAnimationEnd.bind(this,e.key)})),e.type!==E&&e.type!==C||n.push(o.createElement(M,{key:"placeholder_"+e.key,ref:"placeholder_"+e.key,width:e.width,height:e.height,layout:r,margin:l?0:c}))}),this),o.createElement("ul",{className:s},n)}onMouseDown(e){const t=u.default.map(this.state.items,(function(t){return t.key===e&&(t.type=E),t}));this.setState({items:t})}moveOptionToIndex(e,t){const{items:n}=this.state;if(t<0||t>n.length)throw new Error(`index ${t} out of bounds`);const r=u.default.clone(n),s=n.filter((t=>t.option===e))[0];if(null==s)throw new Error(`option ${e} not found`);const o=n.findIndex((e=>e.key===s.key));r.splice(o,1),r.splice(t,0,s),this.setState({items:r}),this.props.onChange&&this.props.onChange({})}onMouseMove(e){const t=(0,c.default)(i.default.findDOMNode(this.refs[e])),n=(0,c.default)(i.default.findDOMNode(this)),r=u.default.clone(this.state.items),s=u.default.findWhere(this.state.items,{key:e}),o=this.props.margin||0,a=u.default.indexOf(r,s);let l=0;if(r.splice(a,1),this.props.layout===b){const e=t.offset().left-n.offset().left;let s,a=0;u.default.each(r,(function(t){s=t.width,e>a+s/2&&(l+=1),a+=s+o}))}else{const e=t.offset().top-n.offset().top;let s,a=0;u.default.each(r,(function(t){s=t.height,e>a+s/2&&(l+=1),a+=s+o}))}l!==a&&(r.splice(l,0,s),this.setState({items:r}))}onMouseUp(e){const t=requestAnimationFrame((()=>{const t=u.default.map(this.state.items,(function(t){if(t.key===e){t.type=C;const n=(0,c.default)(i.default.findDOMNode(this.refs["placeholder_"+e])),r=n.position(),s=O(n,r);t.endPosition=s}return t}),this);this.setState({items:t}),this.props.onChange&&this.props.onChange({})}));this.animationFrameRequest=t}onAnimationEnd(e){const t=u.default.map(this.state.items,(function(t){return t.key===e&&(t.type=x),t}));this.setState({items:t})}getOptions(){return u.default.pluck(this.state.items,"option")}}_.defaultProps={layout:b,padding:!0,disabled:!1,constraints:{},onMeasure:function(){},margin:5,onChange:function(){},linterContext:m.linterContextDefault,waitForKatexLoad:!0};const S=l.StyleSheet.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:.8},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}});var T=_;t.default=T},oaDE:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=n("6OHE"),i=r(n("6wxr")),l=n("/4Qb");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}class c extends o.Component{constructor(...e){super(...e),this.state={isFocused:!1}}handleFocus(){this.setState({isFocused:!0})}handleBlur(){this.setState({isFocused:!1})}renderIcon(){const{selected:e,showCorrectness:t,showSelected:n,showPulsate:r}=this.props,{isFocused:u}=this.state,c=n||u;let p,d;return t?(p=o.createElement(i.default,{icon:"correct"===t?l.iconCheck:l.iconMinus,size:24,color:a.colors.white}),d="correct"===t?[f.markerCorrect,c&&f.markerCorrectSelected]:[f.markerIncorrect,c&&f.markerIncorrectSelected]):d=e&&e.length>0?[f.markerFilled,c&&f.markerFilledSelected]:[c?f.markerUnfilledSelected:r&&f.markerUnfilledPulsate],o.createElement("div",{className:s.css.apply(void 0,[f.markerIcon].concat(d)),ref:e=>this._icon=e},p)}render(){const{label:e,x:t,y:n,showCorrectness:r}=this.props,a="correct"===r;return o.createElement("button",{"aria-label":e,className:(0,s.css)(f.unstyledButton,f.marker,a&&f.disabled),style:{left:`${t}%`,top:`${n}%`},tabIndex:a?-1:0,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onClick:e=>this.props.onClick(e),onKeyDown:e=>this.props.onKeyDown(e)},this.renderIcon())}}t.default=c,c.defaultProps={selected:[]};const p="#2552b0",d=p,h="rgba(33, 36, 44, 0.16)",f=s.StyleSheet.create({unstyledButton:{padding:0,overflow:"visible",color:"inherit",font:"inherit",lineHeight:"normal",background:"none",border:"none"},marker:{position:"absolute",width:30,height:30,marginLeft:-15,marginTop:-15},disabled:{pointerEvents:"none"},markerIcon:{display:"flex",position:"relative",boxSizing:"content-box",width:16,height:16,marginLeft:5,cursor:"pointer",backgroundColor:"#1865f2",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 6px 0 rgba(33, 36, 44, 0.32)"},markerUnfilledPulsate:{animationName:{"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.5)"}},animationDirection:"alternate",animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"ease-in",transformOrigin:"50% 50%"},markerUnfilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:20,height:20,marginLeft:-4,marginTop:-4,border:"solid 2px #2552b0",borderRadius:20},":active":{backgroundColor:d,boxShadow:"none","::before":{display:"none"}}},markerFilled:{width:8,height:8,marginLeft:9,borderRadius:8,boxShadow:`0 1px 1px 0 ${h}`},markerFilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:12,height:12,marginLeft:-4,marginTop:-4,border:"solid 2px #2552b0",borderRadius:12},":active":{backgroundColor:d,boxShadow:"none","::before":{display:"none"}}},markerCorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#00a60e",boxShadow:`0 1px 1px 0 ${h}`},markerCorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px #2552b0",borderRadius:28},":active":{backgroundColor:"#167b1f",boxShadow:"none","::before":{display:"none"}}},markerIncorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:"#909195",boxShadow:`0 1px 1px 0 ${h}`},markerIncorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px #2552b0",borderRadius:28},":active":{backgroundColor:"#6c6e73",boxShadow:"none","::before":{display:"none"}}}})},oh4M:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"image-widget",severity:s.default.Severity.WARNING,selector:"widget",lint:function(e,t,n,r,s){if("image"!==e.currentNode().widgetType)return;const o=s&&s.widgets&&s.widgets[e.currentNode().id];if(!o)return;const a=o.options.alt;return a?a.trim().length<8?`Images should have alt text:\nfor accessibility, all images should have descriptive alt text.\nThis image's alt text is only ${a.trim().length} characters long.`:o.options.caption&&o.options.caption.match(/[^\\]\$/)?"No math in image captions:\nDon't include math expressions in image captions.":void 0:'Images should have alt text:\nfor accessibility, all images should have a text description.\nAdd a description in the "Alt Text" box of the image widget.'}});t.default=o},p4D3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e.replace(/\{align[*]?\}/g,"{aligned}").replace(/[\u00a0]/g," ")},p6EO:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("5pch")),i=r(n("2qRe")),l=r(n("d773")),u=r(n("p8fL")),c=r(n("vNny")),p=n("eAf/"),d=r(n("yfnS")),h=r(n("KmI1")),f=n("/4Qb"),g=r(n("APgo")),m=r(n("Xb39"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}const y=u.default.assert,b=u.default.normalizeOptions,{processMath:w}=h.default,x=a.default.keys(i.default),E={coord:[0,0],pointSize:4,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,shadow:!1,tooltip:!1},C={added:!1,hasMoved:!1,visibleShape:null,outOfBounds:!1,mouseTarget:null,touchOffset:null},k=[],O=function(e,t,n){a.default.extend(this,{graphie:e,movable:t,state:{id:a.default.uniqueId("movablePoint")}}),this.modify(a.default.extend({},C,n))};a.default.extend(O,i.default),u.default.createGettersFor(O,a.default.extend({},E,C)),u.default.addMovableHelperMethodsTo(O),a.default.extend(O.prototype,{cloneState:function(){return a.default.extend(this.movable.cloneState(),this.state)},_createDefaultState:function(){return a.default.extend({id:this.state.id},b(x,c.default.pluck(i.default,"standard")),E)},modify:function(e){this.update(a.default.extend(this._createDefaultState(),e))},_showTooltip:function(e){this._tooltip||(this._tooltip=document.createElement("div"),this._tooltip.className="tooltip-content",this.state.visibleShape.wrapper.className="tooltip",this.state.visibleShape.wrapper.appendChild(this._tooltip),k.push((()=>{this.state.added&&this._hideTooltip()}))),this._tooltip.firstChild&&this._tooltip.removeChild(this._tooltip.firstChild),this.state.visibleShape.wrapper.className="tooltip visible",this._tooltip.appendChild(document.createElement("span")),"string"==typeof e?w(this._tooltip.firstChild,e,!1):"function"==typeof e?e(this._tooltip.firstChild):this._tooltip.firstChild.appendChild(e)},_hideTooltip:function(){this._tooltip&&(this.state.visibleShape.wrapper.className="tooltip")},update:function(e){const t=this,n=t.graphie,r=a.default.extend(t.state,b(x,e));y(p.point.is(r.coord));const i=r.static?d.default.DYNAMIC:d.default.INTERACTIVE;if(r.normalStyle=a.default.extend({fill:i,stroke:i,scale:1},r.normalStyle),r.highlightStyle=a.default.extend({fill:d.default.INTERACTING,stroke:d.default.INTERACTING,scale:2},r.highlightStyle),!r.static&&!r.mouseTarget){const e=t.state.coord,s=n.unscaleVector(24),o={mouselayer:!0,padding:0,interactiveKindForTesting:"movable-point"};r.mouseTarget=new l.default(n,e,s,o),r.mouseTarget.attr({fill:"#000",opacity:0})}const u=()=>{this._showTooltip((e=>{(0,m.default)(o.createElement("span",{style:{fontSize:"2em"}},o.createElement(g.default,(0,s.default)({},f.iconTrash,{style:{position:"static",color:d.default.INTERACTIVE,marginLeft:9,marginRight:9}}))),e)}))};let c=r.coord;t.movable.modify(a.default.extend({},r,{add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:e=>{if(r.hasMoved=!1,c=r.coord,null==r.touchOffset){const t=!("ontouchstart"in window);r.touchOffset=t?[0,0]:p.vector.subtract(c,e)}const n=r.visibleShape.wrapper;if(r.shadow){const e="none";n.style.webkitFilter=e,n.style.filter=e}if(r.showHairlines&&r.showHairlines(r.coord),k.forEach((e=>e())),r.tooltip&&(r.xOnlyTooltip?this._showTooltip(`${r.coord[0]}`):this._showTooltip(`(${r.coord[0]}, ${r.coord[1]})`),r.shadow)){const e=n.getElementsByClassName("tooltip-content")[0],t="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.webkitFilter=t,e.style.filter=t}t._fireEvent(r.onMoveStart,c,c),t.draw()},onMove:(e,n)=>{const s=p.vector.add(e,r.touchOffset);t.moveTo(s),r.showHairlines&&(this.state.outOfBounds?r.hideHairlines():r.showHairlines(r.coord)),r.tooltip&&(this.state.outOfBounds||(r.xOnlyTooltip?this._showTooltip(`${r.coord[0]}`):this._showTooltip(`(${r.coord[0]}, ${r.coord[1]})`))),r.onRemove&&this.state.outOfBounds&&u()},onMoveEnd:()=>{t.isHovering()&&!r.hasMoved&&t._fireEvent(r.onClick,r.coord,c);const e=r.visibleShape.wrapper;if(r.shadow){const t="drop-shadow(0px 0px 5px rgba(0, 0, 0, 0.5))";e.style.webkitFilter=t,e.style.filter=t}if(r.hideHairlines&&r.hideHairlines(),r.hasMoved)this._hideTooltip();else if(r.onRemove){u();const t=e.getElementsByClassName("tooltip-content")[0];t.style.webkitFilter="none",t.style.filter="none",this._tooltip.firstChild.addEventListener("touchstart",(e=>{e.stopPropagation()}),!0),this._tooltip.firstChild.addEventListener("touchend",(e=>{r.onRemove(),e.stopPropagation()}),!0)}else r.tooltip&&this._hideTooltip();r.outOfBounds&&r.onRemove(),t._fireEvent(r.onMoveEnd,r.coord,c),r.hasMoved=!1,r.touchOffset=null,t.draw()}})),r.added||(t.prevState={},t._fireEvent(r.add,t.cloneState(),t.prevState),r.added=!0,t.prevState=t.cloneState()),t._fireEvent(r.modify,t.cloneState(),t.prevState)},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.movable&&this.movable.remove(),this.state.mouseTarget=null},constrain:function(){const e=this._applyConstraints(this.coord(),this.coord());return p.point.is(e)&&this.setCoord(e),!1!==e},setCoord:function(e){y(p.point.is(e,2)),this.state.coord=a.default.clone(e),this.draw()},setCoordConstrained:function(e){y(p.point.is(e,2));const t=this._applyConstraints(e,this.coord());!1!==t&&(this.state.coord=a.default.clone(t),this.draw())},moveTo:function(e){const t=this.state;this.state.outOfBounds=!1;const n=this._applyConstraints(e,t.coord,t.onRemove?{onOutOfBounds:()=>{this.state.outOfBounds=!0}}:{});if(!1!==n&&(p.point.is(n)&&(e=n),!p.point.equal(e,t.coord))){const n=t.coord;t.coord=e,t.hasMoved=!0,this._fireEvent(t.onMove,t.coord,n),this.draw()}},normalStyle:function(){return a.default.clone(this.state.normalStyle)},highlightStyle:function(){return a.default.clone(this.state.highlightStyle)},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()},grab:function(e){this.state.touchOffset=[0,0],this.movable.grab(e),this.moveTo(e)}});var M=O;t.default=M},p8fL:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=n("4PhQ"),a=r(n("QVWj"));let i=null;let l=null;const u={assert:function(e,t){if(!e)throw new o.KAError("Assertion Error"+(t?": "+t:""),o.Errors.Internal)},createGettersFor:function(e,t){s.default.each(s.default.keys(t),(function(t){void 0===e.prototype[t]&&(e.prototype[t]=function(){return this.state[t]})}))},addMovableHelperMethodsTo:function(e){s.default.each(a.default,(function(t,n){void 0===e.prototype[n]&&(e.prototype[n]=t)}))},arrayify:function(e){return null==e?[]:s.default.isArray(e)?s.default.filter(s.default.flatten(e),s.default.identity):[e]},normalizeOptions:function(e,t){const n=s.default.clone(t);return s.default.each(e,(function(e){const r=t[e];if(void 0!==r){const t=u.arrayify(r);n[e]=t}})),n},getPrefixedTransform:function(){return i=i||function(){const e=document.createElement("div");let t=null;return s.default.each(["transform","msTransform","MozTransform","WebkitTransform","OTransform"],(function(n){void 0!==e.style[n]&&(t=n)})),t}(),i},getCanUse3dTransform:function(){return null==l&&(l=function(){const e=document.createElement("div"),t=u.getPrefixedTransform();return e.style[t]="translateZ(0px)",!!e.style[t]}()),l}};var c=u;t.default=c},pYKe:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=r(n("uBl0")),u=r(n("qoj5")),c=r(n("M++g")),p=r(n("lQTD"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const h=r(n("eCzM")).default.widget;class f extends s.Component{constructor(...e){super(...e),this.focus=()=>{a.default.findDOMNode(this.refs.numberOfColumns).focus()},this.onSizeInput=(e,t)=>{let n=+e||0,r=+t||0;n=Math.min(Math.max(1,n),30),r=Math.min(Math.max(1,r),6);const s=this.props.columns,o=this.props.rows,a=this.props.answers;function u(e){r<=s?e.length=r:(0,i.default)(r-s).times((function(){e.push("")}))}n<=o?a.length=n:(0,i.default)(n-o).times((function(){a.push(l.default.stringArrayOfSize(s))}));const c=this.props.headers;u(c),i.default.each(a,u),this.props.onChange({rows:n,columns:r,answers:a,headers:c})},this.serialize=()=>{const e=i.default.pick(this.props,"headers","rows","columns");return i.default.extend({},e,{answers:i.default.map(this.props.answers,i.default.clone)})}}render(){const e=i.default.pick(this.props,"headers","answers","onChange","apiOptions");return i.default.extend(e,{editableHeaders:!0,Editor:p.default,onFocus:()=>{},onBlur:()=>{},trackInteraction:()=>{}}),s.createElement("div",null,s.createElement("div",{className:"perseus-widget-row"},s.createElement("label",null,"Number of columns:"," ",s.createElement(c.default,{ref:"numberOfColumns",value:this.props.columns,onChange:e=>{e&&this.onSizeInput(this.props.rows,e)},useArrowKeys:!0}))),s.createElement("div",{className:"perseus-widget-row"},s.createElement("label",null,"Number of rows:"," ",s.createElement(c.default,{ref:"numberOfRows",value:this.props.rows,onChange:e=>{e&&this.onSizeInput(e,this.props.columns)},useArrowKeys:!0}))),s.createElement("div",null," ","Table of answers:"," ",s.createElement(u.default,null,s.createElement("p",null,"The student has to fill out all cells in the table. For partially filled tables create a table using the template, and insert text input boxes as desired."))),s.createElement("div",null,s.createElement(h,e)))}}f.propTypes={rows:o.default.number,columns:o.default.number,headers:o.default.arrayOf(o.default.string),answers:o.default.arrayOf(o.default.arrayOf(o.default.string))},f.widgetName="table",f.defaultProps={headers:[""],rows:4,columns:1,answers:(0,i.default)(4).times((function(){return l.default.stringArrayOfSize(1)}))};var g=f;t.default=g},pffg:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"heading-level-skip",severity:s.default.Severity.WARNING,selector:"heading ~ heading",lint:function(e,t,n,r){const s=n[1],o=n[0];if(s.level>o.level+1)return`Skipped heading level:\nthis heading is level ${s.level} but\nthe previous heading was level ${o.level}`}});t.default=o},psyy:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-align-extra-break",severity:s.default.Severity.WARNING,selector:"blockMath",pattern:/(\\{2,})\s*\\end{align}/,message:"Extra space at end of block:\nDon't end an align block with backslashes"});t.default=o},qJK0:function(e,t,n){"use strict";
/*!
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */!function(){var t;function n(){if(n.is(arguments[0],T)){for(var e=arguments[0],t=ze[h](n,e.splice(0,3+n.is(e[0],_))),r=t.set(),s=0,a=e[w];s<a;s++){var i=e[s]||{};o[l](i.type)&&r[R](t[i.type]().attr(i))}return r}return ze[h](n,arguments)}t="".trim?function(e,t,n){e.setAttribute(t,String(n).trim())}:function(e,t,n){e.setAttribute(t,String(n))},n.version="1.5.2";var r,s=/[, ]+/,o={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},a=/\{(\d+)\}/g,i="prototype",l="hasOwnProperty",u=document,c=window,p={was:Object[i][l].call(c,"Raphael"),is:c.Raphael},d=function(){this.customAttributes={}},h="apply",f="createTouch"in u,g="",m=" ",v=String,y="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend".split(m),b={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},w="length",x=v[i].toLowerCase,E=Math,C=E.max,k=E.min,O=E.abs,M=E.pow,P=E.PI,_="number",S="string",T="array",I="fill",N=Object[i].toString,R="push",A=/^url\(['"]?([^\)]+?)['"]?\)$/i,j=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,D={NaN:1,Infinity:1,"-Infinity":1},W=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,L=E.round,F=parseFloat,q=parseInt,z=" progid:DXImageTransform.Microsoft",B=v[i].toUpperCase,U={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},H={along:"along",blur:_,"clip-rect":"csv",cx:_,cy:_,fill:"colour","fill-opacity":_,"font-size":_,height:_,opacity:_,path:"path",r:_,rotation:"csv",rx:_,ry:_,scale:"csv",stroke:"colour","stroke-opacity":_,"stroke-width":_,translation:"csv",width:_,x:_,y:_},V="replace",G=/^(from|to|\d+%?)$/,Y=/\s*,\s*/,$={hs:1,rg:1},X=/,?([achlmqrstvxz]),?/gi,K=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/gi,Q=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/gi,Z=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,J=function(e,t){return e.key-t.key};if(n.type=c.SVGAngle||u.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==n.type){var ee,te=u.createElement("div");if(te.innerHTML='<v:shape adj="1"/>',(ee=te.firstChild).style.behavior="url(#default#VML)",!ee||"object"!=typeof ee.adj)return n.type=null;te=null}function ne(){for(var e=[],t=0;t<32;t++)e[t]=(~~(16*E.random())).toString(16);return e[12]=4,e[16]=(3&e[16]|8).toString(16),"r-"+e.join("")}n.svg=!(n.vml="VML"==n.type),d[i]=n[i],r=d[i],n._id=0,n._oid=0,n.fn={},n.is=function(e,t){return"finite"==(t=x.call(t))?!D[l](+e):"null"==t&&null===e||t==typeof e||"object"==t&&e===Object(e)||"array"==t&&Array.isArray&&Array.isArray(e)||N.call(e).slice(8,-1).toLowerCase()==t},n.angle=function(e,t,r,s,o,a){if(null==o){var i=e-r,l=t-s;return i||l?(180*(i<0)+180*E.atan(-l/-i)/P+360)%360:0}return n.angle(e,t,o,a)-n.angle(r,s,o,a)},n.rad=function(e){return e%360*P/180},n.deg=function(e){return 180*e/P%360},n.snapTo=function(e,t,r){if(r=n.is(r,"finite")?r:10,n.is(e,T)){for(var s=e.length;s--;)if(O(e[s]-t)<=r)return e[s]}else{var o=t%(e=+e);if(o<r)return t-o;if(o>e-r)return t-o+e}return t},n.setWindow=function(e){u=(c=e).document};var re=function(e){if(n.vml){var t,r=/^\s+|\s+$/g;try{var s=new ActiveXObject("htmlfile");s.write("<body>"),s.close(),t=s.body}catch(e){t=createPopup().document.body}var o=t.createTextRange();re=ie((function(e){try{t.style.color=v(e)[V](r,g);var n=o.queryCommandValue("ForeColor");return"#"+("000000"+(n=(255&n)<<16|65280&n|(16711680&n)>>>16).toString(16)).slice(-6)}catch(e){return"none"}}))}else{var a=u.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",u.body.appendChild(a),re=ie((function(e){return a.style.color=e,u.defaultView.getComputedStyle(a,g).getPropertyValue("color")}))}return re(e)},se=function(){return"hsb("+[this.h,this.s,this.b]+")"},oe=function(){return"hsl("+[this.h,this.s,this.l]+")"},ae=function(){return this.hex};function ie(e,t,n){return function r(){var s=Array[i].slice.call(arguments,0),o=s.join("►"),a=r.cache=r.cache||{},u=r.count=r.count||[];return a[l](o)||(u[w]>=1e3&&delete a[u.shift()],u[R](o),a[o]=e[h](t,s)),n?n(a[o]):a[o]}}n.hsb2rgb=function(e,t,r,s){return n.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,s=(e=e.h).o),n.hsl2rgb(e,t,r/2,s)},n.hsl2rgb=function(e,t,r,s){n.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100);var o,a,i,l={},u=["r","g","b"];if(t){a=2*r-(o=r<.5?r*(1+t):r+t-r*t);for(var c=0;c<3;c++)(i=e+1/3*-(c-1))<0&&i++,i>1&&i--,l[u[c]]=6*i<1?a+6*(o-a)*i:2*i<1?o:3*i<2?a+(o-a)*(2/3-i)*6:a}else l={r,g:r,b:r};return l.r*=255,l.g*=255,l.b*=255,l.hex="#"+(16777216|l.b|l.g<<8|l.r<<16).toString(16).slice(1),n.is(s,"finite")&&(l.opacity=s),l.toString=ae,l},n.rgb2hsb=function(e,t,r){if(null==t&&n.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&n.is(e,S)){var s=n.getRGB(e);e=s.r,t=s.g,r=s.b}(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255);var o,a=C(e,t,r),i=k(e,t,r);if(i==a)return{h:0,s:0,b:a,toString:se};var l=a-i;return o=e==a?(t-r)/l:t==a?2+(r-e)/l:4+(e-t)/l,(o/=6)<0&&o++,o>1&&o--,{h:o,s:l/a,b:a,toString:se}},n.rgb2hsl=function(e,t,r){if(null==t&&n.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&n.is(e,S)){var s=n.getRGB(e);e=s.r,t=s.g,r=s.b}(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255);var o,a,i=C(e,t,r),l=k(e,t,r),u=(i+l)/2;if(l==i)a={h:0,s:0,l:u};else{var c=i-l;o=e==i?(t-r)/c:t==i?2+(r-e)/c:4+(e-t)/c,(o/=6)<0&&o++,o>1&&o--,a={h:o,s:u<.5?c/(i+l):c/(2-i-l),l:u}}return a.toString=oe,a},n._path2string=function(){return this.join(",")[V](X,"$1")},n.getRGB=ie((function(e){if(!e||(e=v(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none"};!$[l](e.toLowerCase().substring(0,2))&&"#"!=e.charAt()&&(e=re(e));var t,r,s,o,a,i,u=e.match(j);return u?(u[2]&&(s=q(u[2].substring(5),16),r=q(u[2].substring(3,5),16),t=q(u[2].substring(1,3),16)),u[3]&&(s=q((a=u[3].charAt(3))+a,16),r=q((a=u[3].charAt(2))+a,16),t=q((a=u[3].charAt(1))+a,16)),u[4]&&(i=u[4].split(Y),t=F(i[0]),"%"==i[0].slice(-1)&&(t*=2.55),r=F(i[1]),"%"==i[1].slice(-1)&&(r*=2.55),s=F(i[2]),"%"==i[2].slice(-1)&&(s*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(o=F(i[3])),i[3]&&"%"==i[3].slice(-1)&&(o/=100)),u[5]?(i=u[5].split(Y),t=F(i[0]),"%"==i[0].slice(-1)&&(t*=2.55),r=F(i[1]),"%"==i[1].slice(-1)&&(r*=2.55),s=F(i[2]),"%"==i[2].slice(-1)&&(s*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(t/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(o=F(i[3])),i[3]&&"%"==i[3].slice(-1)&&(o/=100),n.hsb2rgb(t,r,s,o)):u[6]?(i=u[6].split(Y),t=F(i[0]),"%"==i[0].slice(-1)&&(t*=2.55),r=F(i[1]),"%"==i[1].slice(-1)&&(r*=2.55),s=F(i[2]),"%"==i[2].slice(-1)&&(s*=2.55),("deg"==i[0].slice(-3)||"°"==i[0].slice(-1))&&(t/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(o=F(i[3])),i[3]&&"%"==i[3].slice(-1)&&(o/=100),n.hsl2rgb(t,r,s,o)):((u={r:t,g:r,b:s}).hex="#"+(16777216|s|r<<8|t<<16).toString(16).slice(1),n.is(o,"finite")&&(u.opacity=o),u)):{r:-1,g:-1,b:-1,hex:"none",error:1}}),n),n.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},n.getColor.reset=function(){delete this.start},n.parsePathString=ie((function(e){if(!e)return null;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=[];return n.is(e,T)&&n.is(e[0],T)&&(r=ue(e)),r[w]||v(e)[V](K,(function(e,n,s){var o=[],a=x.call(n);for(s[V](Q,(function(e,t){t&&o[R](+t)})),"m"==a&&o[w]>2&&(r[R]([n].concat(o.splice(0,2))),a="l",n="m"==n?"l":"L");o[w]>=t[a]&&(r[R]([n].concat(o.splice(0,t[a]))),t[a]););})),r.toString=n._path2string,r})),n.findDotsAtSegment=function(e,t,n,r,s,o,a,i,l){var u=1-l,c=M(u,3)*e+3*M(u,2)*l*n+3*u*l*l*s+M(l,3)*a,p=M(u,3)*t+3*M(u,2)*l*r+3*u*l*l*o+M(l,3)*i,d=e+2*l*(n-e)+l*l*(s-2*n+e),h=t+2*l*(r-t)+l*l*(o-2*r+t),f=n+2*l*(s-n)+l*l*(a-2*s+n),g=r+2*l*(o-r)+l*l*(i-2*o+r),m=(1-l)*e+l*n,v=(1-l)*t+l*r,y=(1-l)*s+l*a,b=(1-l)*o+l*i,w=90-180*E.atan((d-f)/(h-g))/P;return(d>f||h<g)&&(w+=180),{x:c,y:p,m:{x:d,y:h},n:{x:f,y:g},start:{x:m,y:v},end:{x:y,y:b},alpha:w}};var le=ie((function(e){if(!e)return{x:0,y:0,width:0,height:0};for(var t,n=0,r=0,s=[],o=[],a=0,i=(e=ve(e))[w];a<i;a++)if("M"==(t=e[a])[0])n=t[1],r=t[2],s[R](n),o[R](r);else{var l=me(n,r,t[1],t[2],t[3],t[4],t[5],t[6]);s=s.concat(l.min.x,l.max.x),o=o.concat(l.min.y,l.max.y),n=t[5],r=t[6]}var u=k[h](0,s),c=k[h](0,o);return{x:u,y:c,width:C[h](0,s)-u,height:C[h](0,o)-c}})),ue=function(e){var t=[];n.is(e,T)&&n.is(e&&e[0],T)||(e=n.parsePathString(e));for(var r=0,s=e[w];r<s;r++){t[r]=[];for(var o=0,a=e[r][w];o<a;o++)t[r][o]=e[r][o]}return t.toString=n._path2string,t},ce=ie((function(e){n.is(e,T)&&n.is(e&&e[0],T)||(e=n.parsePathString(e));var t=[],r=0,s=0,o=0,a=0,i=0;"M"==e[0][0]&&(o=r=e[0][1],a=s=e[0][2],i++,t[R](["M",r,s]));for(var l=i,u=e[w];l<u;l++){var c=t[l]=[],p=e[l];if(p[0]!=x.call(p[0]))switch(c[0]=x.call(p[0]),c[0]){case"a":c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=+(p[6]-r).toFixed(3),c[7]=+(p[7]-s).toFixed(3);break;case"v":c[1]=+(p[1]-s).toFixed(3);break;case"m":o=p[1],a=p[2];default:for(var d=1,h=p[w];d<h;d++)c[d]=+(p[d]-(d%2?r:s)).toFixed(3)}else{c=t[l]=[],"m"==p[0]&&(o=p[1]+r,a=p[2]+s);for(var f=0,g=p[w];f<g;f++)t[l][f]=p[f]}var m=t[l][w];switch(t[l][0]){case"z":r=o,s=a;break;case"h":r+=+t[l][m-1];break;case"v":s+=+t[l][m-1];break;default:r+=+t[l][m-2],s+=+t[l][m-1]}}return t.toString=n._path2string,t}),0,ue),pe=ie((function(e){n.is(e,T)&&n.is(e&&e[0],T)||(e=n.parsePathString(e));var t=[],r=0,s=0,o=0,a=0,i=0;"M"==e[0][0]&&(o=r=+e[0][1],a=s=+e[0][2],i++,t[0]=["M",r,s]);for(var l=i,u=e[w];l<u;l++){var c=t[l]=[],p=e[l];if(p[0]!=B.call(p[0]))switch(c[0]=B.call(p[0]),c[0]){case"A":c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=+(p[6]+r),c[7]=+(p[7]+s);break;case"V":c[1]=+p[1]+s;break;case"H":c[1]=+p[1]+r;break;case"M":o=+p[1]+r,a=+p[2]+s;default:for(var d=1,h=p[w];d<h;d++)c[d]=+p[d]+(d%2?r:s)}else for(var f=0,g=p[w];f<g;f++)t[l][f]=p[f];switch(c[0]){case"Z":r=o,s=a;break;case"H":r=c[1];break;case"V":s=c[1];break;case"M":o=t[l][t[l][w]-2],a=t[l][t[l][w]-1];default:r=t[l][t[l][w]-2],s=t[l][t[l][w]-1]}}return t.toString=n._path2string,t}),null,ue),de=function(e,t,n,r){return[e,t,n,r,n,r]},he=function(e,t,n,r,s,o){var a=1/3,i=2/3;return[a*e+i*n,a*t+i*r,a*s+i*n,a*o+i*r,s,o]},fe=function e(t,n,r,s,o,a,i,l,u,c){var p,d=120*P/180,h=P/180*(+o||0),f=[],g=ie((function(e,t,n){return{x:e*E.cos(n)-t*E.sin(n),y:e*E.sin(n)+t*E.cos(n)}}));if(c)_=c[0],S=c[1],k=c[2],M=c[3];else{t=(p=g(t,n,-h)).x,n=p.y,l=(p=g(l,u,-h)).x,u=p.y;E.cos(P/180*o),E.sin(P/180*o);var m=(t-l)/2,v=(n-u)/2,y=m*m/(r*r)+v*v/(s*s);y>1&&(r*=y=E.sqrt(y),s*=y);var b=r*r,x=s*s,C=(a==i?-1:1)*E.sqrt(O((b*x-b*v*v-x*m*m)/(b*v*v+x*m*m))),k=C*r*v/s+(t+l)/2,M=C*-s*m/r+(n+u)/2,_=E.asin(((n-M)/s).toFixed(9)),S=E.asin(((u-M)/s).toFixed(9));(_=t<k?P-_:_)<0&&(_=2*P+_),(S=l<k?P-S:S)<0&&(S=2*P+S),i&&_>S&&(_-=2*P),!i&&S>_&&(S-=2*P)}var T=S-_;if(O(T)>d){var I=S,N=l,R=u;S=_+d*(i&&S>_?1:-1),f=e(l=k+r*E.cos(S),u=M+s*E.sin(S),r,s,o,0,i,N,R,[S,I,k,M])}T=S-_;var A=E.cos(_),j=E.sin(_),D=E.cos(S),W=E.sin(S),L=E.tan(T/4),F=4/3*r*L,q=4/3*s*L,z=[t,n],B=[t+F*j,n-q*A],U=[l+F*W,u-q*D],H=[l,u];if(B[0]=2*z[0]-B[0],B[1]=2*z[1]-B[1],c)return[B,U,H].concat(f);for(var V=[],G=0,Y=(f=[B,U,H].concat(f).join().split(","))[w];G<Y;G++)V[G]=G%2?g(f[G-1],f[G],h).y:g(f[G],f[G+1],h).x;return V},ge=function(e,t,n,r,s,o,a,i,l){var u=1-l;return{x:M(u,3)*e+3*M(u,2)*l*n+3*u*l*l*s+M(l,3)*a,y:M(u,3)*t+3*M(u,2)*l*r+3*u*l*l*o+M(l,3)*i}},me=ie((function(e,t,n,r,s,o,a,i){var l,u=s-2*n+e-(a-2*s+n),c=2*(n-e)-2*(s-n),p=e-n,d=(-c+E.sqrt(c*c-4*u*p))/2/u,f=(-c-E.sqrt(c*c-4*u*p))/2/u,g=[t,i],m=[e,a];return O(d)>"1e12"&&(d=.5),O(f)>"1e12"&&(f=.5),d>0&&d<1&&(l=ge(e,t,n,r,s,o,a,i,d),m[R](l.x),g[R](l.y)),f>0&&f<1&&(l=ge(e,t,n,r,s,o,a,i,f),m[R](l.x),g[R](l.y)),u=o-2*r+t-(i-2*o+r),p=t-r,d=(-(c=2*(r-t)-2*(o-r))+E.sqrt(c*c-4*u*p))/2/u,f=(-c-E.sqrt(c*c-4*u*p))/2/u,O(d)>"1e12"&&(d=.5),O(f)>"1e12"&&(f=.5),d>0&&d<1&&(l=ge(e,t,n,r,s,o,a,i,d),m[R](l.x),g[R](l.y)),f>0&&f<1&&(l=ge(e,t,n,r,s,o,a,i,f),m[R](l.x),g[R](l.y)),{min:{x:k[h](0,m),y:k[h](0,g)},max:{x:C[h](0,m),y:C[h](0,g)}}})),ve=ie((function(e,t){for(var n=pe(e),r=t&&pe(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=function(e,t){if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(fe[h](0,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(he(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(he(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(de(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(de(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(de(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(de(t.x,t.y,t.X,t.Y))}return e},i=function(e,t){if(e[t][w]>7){e[t].shift();for(var s=e[t];s[w];)e.splice(t++,0,["C"].concat(s.splice(0,6)));e.splice(t,1),c=C(n[w],r&&r[w]||0)}},l=function(e,t,s,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),s.bx=0,s.by=0,s.x=e[a][1],s.y=e[a][2],c=C(n[w],r&&r[w]||0))},u=0,c=C(n[w],r&&r[w]||0);u<c;u++){n[u]=a(n[u],s),i(n,u),r&&(r[u]=a(r[u],o)),r&&i(r,u),l(n,r,s,o,u),l(r,n,o,s,u);var p=n[u],d=r&&r[u],f=p[w],g=r&&d[w];s.x=p[f-2],s.y=p[f-1],s.bx=F(p[f-4])||s.x,s.by=F(p[f-3])||s.y,o.bx=r&&(F(d[g-4])||o.x),o.by=r&&(F(d[g-3])||o.y),o.x=r&&d[g-2],o.y=r&&d[g-1]}return r?[n,r]:n}),null,ue),ye=ie((function(e){for(var t=[],r=0,s=e[w];r<s;r++){var o={},a=e[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=n.getRGB(a[1]),o.color.error)return null;o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),t[R](o)}for(r=1,s=t[w]-1;r<s;r++)if(!t[r].offset){for(var i=F(t[r-1].offset||0),l=0,u=r+1;u<s;u++)if(t[u].offset){l=t[u].offset;break}l||(l=100,u=s);for(var c=((l=F(l))-i)/(u-r+1);r<u;r++)i+=c,t[r].offset=i+"%"}return t})),be=function(e,t,r,s){var o;return n.is(e,S)||n.is(e,"object")?(o=n.is(e,S)?u.getElementById(e):e).tagName?null==t?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:t,height:r}:void 0:{container:1,x:e,y:t,width:r,height:s}},we=function e(t,n){var r=this;for(var s in n)if(n[l](s)&&!(s in t))switch(typeof n[s]){case"function":!function(e){t[s]=t===r?e:function(){return e[h](r,arguments)}}(n[s]);break;case"object":t[s]=t[s]||{},e.call(this,t[s],n[s]);break;default:t[s]=n[s]}},xe=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},Ee=function(e,t){t.top!==e&&(xe(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},Ce=function(e,t){t.bottom!==e&&(xe(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},ke=function(e,t,n){xe(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Oe=function(e,t,n){xe(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Me=function(e){return function(){throw new Error("Raphaël: you are calling to method “"+e+"” of removed object")}};if(n.pathToRelative=ce,n.svg){r.svgns="http://www.w3.org/2000/svg",r.xlink="http://www.w3.org/1999/xlink",L=function(e){return+e+.5*(~~e===e)};var Pe=function(e,n){if(!n)return(e=u.createElementNS(r.svgns,e)).style.webkitTapHighlightColor="rgba(0,0,0,0)",e;for(var s in n)n[l](s)&&t(e,s,v(n[s]))};n.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var _e=function(e,t){var n=Pe("path");t.canvas&&t.canvas.appendChild(n);var r=new Re(n,t);return r.type="path",Ie(r,{fill:"none",stroke:"#000",path:e}),r},Se=function(e,t,n){var r="linear",s=.5,o=.5,a=e.style;if(t=(t=v(t)[V](Z,(function(e,t,n){if(r="radial",t&&n){s=F(t);var a=2*((o=F(n))>.5)-1;M(s-.5,2)+M(o-.5,2)>.25&&(o=E.sqrt(.25-M(s-.5,2))*a+.5)&&.5!=o&&(o=o.toFixed(5)-1e-5*a)}return g}))).split(/\s*\-\s*/),"linear"==r){var i=t.shift();if(i=-F(i),isNaN(i))return null;var l=[0,0,E.cos(i*P/180),E.sin(i*P/180)],c=1/(C(O(l[2]),O(l[3]))||1);l[2]*=c,l[3]*=c,l[2]<0&&(l[0]=-l[2],l[2]=0),l[3]<0&&(l[1]=-l[3],l[3]=0)}var p=ye(t);if(!p)return null;var d=e.getAttribute(I);(d=d.match(/^url\(#(.*)\)$/))&&n.defs.removeChild(u.getElementById(d[1]));var h=Pe(r+"Gradient");h.id=ne(),Pe(h,"radial"==r?{fx:s,fy:o}:{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),n.defs.appendChild(h);for(var f=0,m=p[w];f<m;f++){var y=Pe("stop");Pe(y,{offset:p[f].offset?p[f].offset:f?"100%":"0%","stop-color":p[f].color||"#fff"}),h.appendChild(y)}return Pe(e,{fill:"url(#"+h.id+")",opacity:1,"fill-opacity":1}),a.fill=g,a.opacity=1,a.fillOpacity=1,1},Te=function(e){var t=e.getBBox();Pe(e.pattern,{patternTransform:n.format("translate({0},{1})",t.x,t.y)})},Ie=function(e,r){var o={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},a=e.node,i=e.attrs,c=e.rotate(),p=function(e,t){if(t=o[x.call(t)]){for(var n=e.attrs["stroke-width"]||"1",s={round:n,square:n,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,i=[],l=t[w];l--;)i[l]=t[l]*n+(l%2?1:-1)*s;Pe(a,{"stroke-dasharray":i.join(",")})}};r[l]("rotation")&&(c=r.rotation);var d=v(c).split(s);for(var h in d.length-1?(d[1]=+d[1],d[2]=+d[2]):d=null,F(c)&&e.rotate(0,!0),r)if(r[l](h)){if(!U[l](h))continue;var f=r[h];switch(i[h]=f,h){case"blur":e.blur(f);break;case"rotation":e.rotate(f,!0);break;case"href":case"title":case"target":var y=a.parentNode;if("a"!=x.call(y.tagName)){var b=Pe("a");y.insertBefore(b,a),b.appendChild(a),y=b}"target"==h&&"blank"==f?y.setAttributeNS(e.paper.xlink,"show","new"):y.setAttributeNS(e.paper.xlink,h,f);break;case"cursor":a.style.cursor=f;break;case"clip-rect":var E=v(f).split(s);if(4==E[w]){e.clip&&e.clip.parentNode.parentNode.removeChild(e.clip.parentNode);var C=Pe("clipPath"),k=Pe("rect");C.id=ne(),Pe(k,{x:E[0],y:E[1],width:E[2],height:E[3]}),C.appendChild(k),e.paper.defs.appendChild(C),Pe(a,{"clip-path":"url(#"+C.id+")"}),e.clip=k}if(!f){var O=u.getElementById(a.getAttribute("clip-path")[V](/(^url\(#|\)$)/g,g));O&&O.parentNode.removeChild(O),Pe(a,{"clip-path":g}),delete e.clip}break;case"path":"path"==e.type&&Pe(a,{d:f?i.path=pe(f):"M0,0"});break;case"width":if(t(a,h,f),!i.fx)break;h="x",f=i.x;case"x":i.fx&&(f=-i.x-(i.width||0));case"rx":if("rx"==h&&"rect"==e.type)break;case"cx":d&&("x"==h||"cx"==h)&&(d[1]+=f-i[h]),t(a,h,f),e.pattern&&Te(e);break;case"height":if(t(a,h,f),!i.fy)break;h="y",f=i.y;case"y":i.fy&&(f=-i.y-(i.height||0));case"ry":if("ry"==h&&"rect"==e.type)break;case"cy":d&&("y"==h||"cy"==h)&&(d[2]+=f-i[h]),t(a,h,f),e.pattern&&Te(e);break;case"r":"rect"==e.type?Pe(a,{rx:f,ry:f}):t(a,h,f);break;case"src":"image"==e.type&&a.setAttributeNS(e.paper.xlink,"href",f);break;case"stroke-width":a.style.strokeWidth=f,t(a,h,f),i["stroke-dasharray"]&&p(e,i["stroke-dasharray"]);break;case"stroke-dasharray":p(e,f);break;case"translation":var M=v(f).split(s);M[0]=+M[0]||0,M[1]=+M[1]||0,d&&(d[1]+=M[0],d[2]+=M[1]),yt.call(e,M[0],M[1]);break;case"scale":M=v(f).split(s),e.scale(+M[0]||1,+M[1]||+M[0]||1,isNaN(F(M[2]))?null:+M[2],isNaN(F(M[3]))?null:+M[3]);break;case I:var P=v(f).match(A);if(P){C=Pe("pattern");var _=Pe("image");C.id=ne(),Pe(C,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Pe(_,{x:0,y:0}),_.setAttributeNS(e.paper.xlink,"href",P[1]),C.appendChild(_);var S=u.createElement("img");S.style.cssText="position:absolute;left:-9999em;top-9999em",S.onload=function(){Pe(C,{width:this.offsetWidth,height:this.offsetHeight}),Pe(_,{width:this.offsetWidth,height:this.offsetHeight}),u.body.removeChild(this),e.paper.safari()},u.body.appendChild(S),S.src=P[1],e.paper.defs.appendChild(C),a.style.fill="url(#"+C.id+")",Pe(a,{fill:"url(#"+C.id+")"}),e.pattern=C,e.pattern&&Te(e);break}var T=n.getRGB(f);if(T.error){if(({circle:1,ellipse:1}[l](e.type)||"r"!=v(f).charAt())&&Se(a,f,e.paper)){i.gradient=f,i.fill="none";break}}else delete r.gradient,delete i.gradient,!n.is(i.opacity,"undefined")&&n.is(r.opacity,"undefined")&&Pe(a,{opacity:i.opacity}),!n.is(i["fill-opacity"],"undefined")&&n.is(r["fill-opacity"],"undefined")&&Pe(a,{"fill-opacity":i["fill-opacity"]});T[l]("opacity")&&Pe(a,{"fill-opacity":T.opacity>1?T.opacity/100:T.opacity});case"stroke":T=n.getRGB(f),t(a,h,T.hex),"stroke"==h&&T[l]("opacity")&&Pe(a,{"stroke-opacity":T.opacity>1?T.opacity/100:T.opacity});break;case"gradient":({circle:1,ellipse:1}[l](e.type)||"r"!=v(f).charAt())&&Se(a,f,e.paper);break;case"opacity":i.gradient&&!i[l]("stroke-opacity")&&Pe(a,{"stroke-opacity":f>1?f/100:f});case"fill-opacity":if(i.gradient){var N=u.getElementById(a.getAttribute(I)[V](/^url\(#|\)$/g,g));if(N){var R=N.getElementsByTagName("stop");t(R[R[w]-1],"stop-opacity",f)}break}default:"font-size"==h&&(f=q(f,10)+"px");var j=h[V](/(\-.)/g,(function(e){return B.call(e.substring(1))}));a.style[j]=f,t(a,h,f)}}Ne(e,r),d?e.rotate(d.join(m)):F(c)&&e.rotate(c,!0)},Ne=function(e,t){if("text"==e.type&&(t[l]("text")||t[l]("font")||t[l]("font-size")||t[l]("x")||t[l]("y"))){var r=e.attrs,s=e.node,o=s.firstChild?q(u.defaultView.getComputedStyle(s.firstChild,g).getPropertyValue("font-size"),10):10;if(t[l]("text")){for(r.text=t.text;s.firstChild;)s.removeChild(s.firstChild);for(var a=v(t.text).split("\n"),i=0,c=a[w];i<c;i++)if(a[i]){var p=Pe("tspan");i&&Pe(p,{dy:1.2*o,x:r.x}),p.appendChild(u.createTextNode(a[i])),s.appendChild(p)}}else for(i=0,c=(a=s.getElementsByTagName("tspan"))[w];i<c;i++)i&&Pe(a[i],{dy:1.2*o,x:r.x});Pe(s,{y:r.y});var d=e.getBBox(),h=r.y-(d.y+d.height/2);h&&n.is(h,"finite")&&Pe(s,{y:r.y+h})}},Re=function(e,t){this[0]=e,this.id=n._oid++,this.node=e,e.raphael=this,this.paper=t,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!t.bottom&&(t.bottom=this),this.prev=t.top,t.top&&(t.top.next=this),t.top=this,this.next=null},Ae=Re[i];Re[i].rotate=function(e,t,r){if(this.removed)return this;if(null==e)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(m):this._.rt.deg;var o=this.getBBox();return(e=v(e).split(s))[w]-1&&(t=F(e[1]),r=F(e[2])),e=F(e[0]),null!=t&&!1!==t?this._.rt.deg=e:this._.rt.deg+=e,null==r&&(t=null),this._.rt.cx=t,this._.rt.cy=r,t=null==t?o.x+o.width/2:t,r=null==r?o.y+o.height/2:r,this._.rt.deg?(this.transformations[0]=n.format("rotate({0} {1} {2})",this._.rt.deg,t,r),this.clip&&Pe(this.clip,{transform:n.format("rotate({0} {1} {2})",-this._.rt.deg,t,r)})):(this.transformations[0]=g,this.clip&&Pe(this.clip,{transform:g})),Pe(this.node,{transform:this.transformations.join(m)}),this},Re[i].hide=function(){return!this.removed&&(this.node.style.display="none"),this},Re[i].show=function(){return!this.removed&&(this.node.style.display=""),this},Re[i].remove=function(){if(!this.removed){for(var e in xe(this,this.paper),this.node.parentNode.removeChild(this.node),this)delete this[e];this.removed=!0}},Re[i].getBBox=function(){if(this.removed)return this;if("path"==this.type)return le(this.attrs.path);if("none"==this.node.style.display){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(e){}finally{t=t||{}}if("text"==this.type){t={x:t.x,y:1/0,width:0,height:0};for(var n=0,r=this.node.getNumberOfChars();n<r;n++){var s=this.node.getExtentOfChar(n);s.y<t.y&&(t.y=s.y),s.y+s.height-t.y>t.height&&(t.height=s.y+s.height-t.y),s.x+s.width-t.x>t.width&&(t.width=s.x+s.width-t.x)}}return e&&this.hide(),t},Re[i].attr=function(e,t){if(this.removed)return this;if(null==e){var r={};for(var s in this.attrs)this.attrs[l](s)&&(r[s]=this.attrs[s]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==t&&n.is(e,S))return"translation"==e?yt.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==I&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(null==t&&n.is(e,T)){for(var o={},a=0,i=e.length;a<i;a++)o[e[a]]=this.attr(e[a]);return o}if(null!=t){var u={};u[e]=t}else null!=e&&n.is(e,"object")&&(u=e);for(var c in this.paper.customAttributes)if(this.paper.customAttributes[l](c)&&u[l](c)&&n.is(this.paper.customAttributes[c],"function")){var p=this.paper.customAttributes[c].apply(this,[].concat(u[c]));for(var d in this.attrs[c]=u[c],p)p[l](d)&&(u[d]=p[d])}return Ie(this,u),this},Re[i].toFront=function(){if(this.removed)return this;this.node.parentNode.appendChild(this.node);var e=this.paper;return e.top!=this&&Ee(this,e),this},Re[i].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Ce(this,this.paper);this.paper}return this},Re[i].insertAfter=function(e){if(this.removed)return this;var t=e.node||e[e.length-1].node;return t.nextSibling?t.parentNode.insertBefore(this.node,t.nextSibling):t.parentNode.appendChild(this.node),ke(this,e,this.paper),this},Re[i].insertBefore=function(e){if(this.removed)return this;var t=e.node||e[0].node;return t.parentNode.insertBefore(this.node,t),Oe(this,e,this.paper),this},Re[i].blur=function(e){var t=this;if(0!=+e){var n=Pe("filter"),r=Pe("feGaussianBlur");t.attrs.blur=e,n.id=ne(),Pe(r,{stdDeviation:+e||1.5}),n.appendChild(r),t.paper.defs.appendChild(n),t._blur=n,Pe(t.node,{filter:"url(#"+n.id+")"})}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter")};var je=function(e,t,n,r){var s=Pe("circle");e.canvas&&e.canvas.appendChild(s);var o=new Re(s,e);return o.attrs={cx:t,cy:n,r,fill:"none",stroke:"#000"},o.type="circle",Pe(s,o.attrs),o},De=function(e,t,n,r,s,o){var a=Pe("rect");e.canvas&&e.canvas.appendChild(a);var i=new Re(a,e);return i.attrs={x:t,y:n,width:r,height:s,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},i.type="rect",Pe(a,i.attrs),i},We=function(e,t,n,r,s){var o=Pe("ellipse");e.canvas&&e.canvas.appendChild(o);var a=new Re(o,e);return a.attrs={cx:t,cy:n,rx:r,ry:s,fill:"none",stroke:"#000"},a.type="ellipse",Pe(o,a.attrs),a},Le=function(e,t,n,r,s,o){var a=Pe("image");Pe(a,{x:n,y:r,width:s,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(e.xlink,"href",t),e.canvas&&e.canvas.appendChild(a);var i=new Re(a,e);return i.attrs={x:n,y:r,width:s,height:o,src:t},i.type="image",i},Fe=function(e,t,n,r){var s=Pe("text");Pe(s,{x:t,y:n,"text-anchor":"middle"}),e.canvas&&e.canvas.appendChild(s);var o=new Re(s,e);return o.attrs={x:t,y:n,"text-anchor":"middle",text:r,font:U.font,stroke:"none",fill:"#000"},o.type="text",Ie(o,o.attrs),o},qe=function(e,n){return this.width=e||this.width,this.height=n||this.height,t(this.canvas,"width",this.width),t(this.canvas,"height",this.height),this},ze=function(){var e=be[h](0,arguments),t=e&&e.container,r=e.x,s=e.y,o=e.width,a=e.height;if(!t)throw new Error("SVG container not found.");var i=Pe("svg");return r=r||0,s=s||0,Pe(i,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:o=o||512,height:a=a||342}),1==t?(i.style.cssText="position:absolute;left:"+r+"px;top:"+s+"px",u.body.appendChild(i)):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i),(t=new d).width=o,t.height=a,t.canvas=i,we.call(t,t,n.fn),t.clear(),t};r.clear=function(){for(var e=this.canvas;e.firstChild;)e.removeChild(e.firstChild);this.bottom=this.top=null,(this.desc=Pe("desc")).appendChild(u.createTextNode("Created with Raphaël")),e.appendChild(this.desc),e.appendChild(this.defs=Pe("defs"))},r.remove=function(){for(var e in this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this)this[e]=Me(e)}}if(n.vml){var Be,Ue={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},He=/([clmz]),?([^clmz]*)/gi,Ve=/ progid:\S+Blur\([^\)]+\)/g,Ge=/-?[^,\s-]+/g,Ye="1000 1000",$e=10,Xe={path:1,rect:1};function Ke(e,t,r,s,o){return o?n.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",e+o,t,r-2*o,o,-o,s-2*o,2*o-r,2*o-s):n.format("M{0},{1}l{2},0,0,{3},{4},0z",e,t,r,s,-r)}n.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},_e=function(e,t){var n=Be("group");n.style.cssText="position:absolute;left:0;top:0;width:"+t.width+"px;height:"+t.height+"px",n.coordsize=t.coordsize,n.coordorigin=t.coordorigin;var r=Be("shape"),s=r.style;s.width=t.width+"px",s.height=t.height+"px",r.coordsize=Ye,r.coordorigin=t.coordorigin,n.appendChild(r);var o=new Re(r,n,t),a={fill:"none",stroke:"#000"};return e&&(a.path=e),o.type="path",o.path=[],o.Path=g,Ie(o,a),t.canvas.appendChild(n),o},Ie=function(e,t){e.attrs=e.attrs||{};var r,o=e.node,a=e.attrs,i=o.style,c=(t.x!=a.x||t.y!=a.y||t.width!=a.width||t.height!=a.height||t.r!=a.r)&&"rect"==e.type,p=e;for(var d in t)t[l](d)&&(a[d]=t[d]);if(c&&(a.path=Ke(a.x,a.y,a.width,a.height,a.r),e.X=a.x,e.Y=a.y,e.W=a.width,e.H=a.height),t.href&&(o.href=t.href),t.title&&(o.title=t.title),t.target&&(o.target=t.target),t.cursor&&(i.cursor=t.cursor),"blur"in t&&e.blur(t.blur),(t.path&&"path"==e.type||c)&&(o.path=function(e){var t=/[ahqstv]/gi,n=pe;if(v(e).match(t)&&(n=ve),t=/[clmz]/g,n==pe&&!v(e).match(t)){var r=v(e)[V](He,(function(e,t,n){var r=[],s="m"==x.call(t),o=Ue[t];return n[V](Ge,(function(e){s&&2==r[w]&&(o+=r+Ue["m"==t?"l":"L"],r=[]),r[R](L(e*$e))})),o+r}));return r}var s,o,a=n(e);r=[];for(var i=0,l=a[w];i<l;i++){s=a[i],"z"==(o=x.call(a[i][0]))&&(o="x");for(var u=1,c=s[w];u<c;u++)o+=L(s[u]*$e)+(u!=c-1?",":g);r[R](o)}return r.join(m)}(a.path)),null!=t.rotation&&e.rotate(t.rotation,!0),t.translation&&(r=v(t.translation).split(s),yt.call(e,r[0],r[1]),null!=e._.rt.cx&&(e._.rt.cx+=+r[0],e._.rt.cy+=+r[1],e.setBox(e.attrs,r[0],r[1]))),t.scale&&(r=v(t.scale).split(s),e.scale(+r[0]||1,+r[1]||+r[0]||1,+r[2]||null,+r[3]||null)),"clip-rect"in t){var h=v(t["clip-rect"]).split(s);if(4==h[w]){h[2]=+h[2]+ +h[0],h[3]=+h[3]+ +h[1];var f=o.clipRect||u.createElement("div"),y=f.style,b=o.parentNode;y.clip=n.format("rect({1}px {2}px {3}px {0}px)",h),o.clipRect||(y.position="absolute",y.top=0,y.left=0,y.width=e.paper.width+"px",y.height=e.paper.height+"px",b.parentNode.insertBefore(f,b),f.appendChild(b),o.clipRect=f)}t["clip-rect"]||o.clipRect&&(o.clipRect.style.clip=g)}if("image"==e.type&&t.src&&(o.src=t.src),"image"==e.type&&t.opacity&&(o.filterOpacity=z+".Alpha(opacity="+100*t.opacity+")",i.filter=(o.filterMatrix||g)+(o.filterOpacity||g)),t.font&&(i.font=t.font),t["font-family"]&&(i.fontFamily='"'+t["font-family"].split(",")[0][V](/^['"]+|['"]+$/g,g)+'"'),t["font-size"]&&(i.fontSize=t["font-size"]),t["font-weight"]&&(i.fontWeight=t["font-weight"]),t["font-style"]&&(i.fontStyle=t["font-style"]),null!=t.opacity||null!=t["stroke-width"]||null!=t.fill||null!=t.stroke||null!=t["stroke-width"]||null!=t["stroke-opacity"]||null!=t["fill-opacity"]||null!=t["stroke-dasharray"]||null!=t["stroke-miterlimit"]||null!=t["stroke-linejoin"]||null!=t["stroke-linecap"]){var E=(o=e.shape||o).getElementsByTagName(I)&&o.getElementsByTagName(I)[0],O=!1;if(!E&&(O=E=Be(I)),"fill-opacity"in t||"opacity"in t){var M=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+n.getRGB(t.fill).o+1||2)-1);M=k(C(M,0),1),E.opacity=M}if(t.fill&&(E.on=!0),null!=E.on&&"none"!=t.fill||(E.on=!1),E.on&&t.fill){var P=t.fill.match(A);P?(E.src=P[1],E.type="tile"):(E.color=n.getRGB(t.fill).hex,E.src=g,E.type="solid",n.getRGB(t.fill).error&&(p.type in{circle:1,ellipse:1}||"r"!=v(t.fill).charAt())&&Se(p,t.fill)&&(a.fill="none",a.gradient=t.fill))}O&&o.appendChild(E);var _=o.getElementsByTagName("stroke")&&o.getElementsByTagName("stroke")[0],S=!1;!_&&(S=_=Be("stroke")),(t.stroke&&"none"!=t.stroke||t["stroke-width"]||null!=t["stroke-opacity"]||t["stroke-dasharray"]||t["stroke-miterlimit"]||t["stroke-linejoin"]||t["stroke-linecap"])&&(_.on=!0),("none"==t.stroke||null==_.on||0==t.stroke||0==t["stroke-width"])&&(_.on=!1);var T=n.getRGB(t.stroke);_.on&&t.stroke&&(_.color=T.hex),M=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+T.o+1||2)-1);var N=.75*(F(t["stroke-width"])||1);if(M=k(C(M,0),1),null==t["stroke-width"]&&(N=a["stroke-width"]),t["stroke-width"]&&(_.weight=N),N&&N<1&&(M*=N)&&(_.weight=1),_.opacity=M,t["stroke-linejoin"]&&(_.joinstyle=t["stroke-linejoin"]||"miter"),_.miterlimit=t["stroke-miterlimit"]||8,t["stroke-linecap"]&&(_.endcap="butt"==t["stroke-linecap"]?"flat":"square"==t["stroke-linecap"]?"square":"round"),t["stroke-dasharray"]){var j={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};_.dashstyle=j[l](t["stroke-dasharray"])?j[t["stroke-dasharray"]]:g}S&&o.appendChild(_)}if("text"==p.type)switch(i=p.paper.span.style,a.font&&(i.font=a.font),a["font-family"]&&(i.fontFamily=a["font-family"]),a["font-size"]&&(i.fontSize=a["font-size"]),a["font-weight"]&&(i.fontWeight=a["font-weight"]),a["font-style"]&&(i.fontStyle=a["font-style"]),p.node.string&&(p.paper.span.innerHTML=v(p.node.string)[V](/</g,"&#60;")[V](/&/g,"&#38;")[V](/\n/g,"<br>")),p.W=a.w=p.paper.span.offsetWidth,p.H=a.h=p.paper.span.offsetHeight,p.X=a.x,p.Y=a.y+L(p.H/2),a["text-anchor"]){case"start":p.node.style["v-text-align"]="left",p.bbx=L(p.W/2);break;case"end":p.node.style["v-text-align"]="right",p.bbx=-L(p.W/2);break;default:p.node.style["v-text-align"]="center"}},Se=function(e,t){e.attrs=e.attrs||{};e.attrs;var n,r="linear",s=".5 .5";if(e.attrs.gradient=t,t=(t=v(t)[V](Z,(function(e,t,n){return r="radial",t&&n&&(t=F(t),n=F(n),M(t-.5,2)+M(n-.5,2)>.25&&(n=E.sqrt(.25-M(t-.5,2))*(2*(n>.5)-1)+.5),s=t+m+n),g}))).split(/\s*\-\s*/),"linear"==r){var o=t.shift();if(o=-F(o),isNaN(o))return null}var a=ye(t);if(!a)return null;if(!(n=(e=e.shape||e.node).getElementsByTagName(I)[0]||Be(I)).parentNode&&e.appendChild(n),a[w]){n.on=!0,n.method="none",n.color=a[0].color,n.color2=a[a[w]-1].color;for(var i=[],l=0,u=a[w];l<u;l++)a[l].offset&&i[R](a[l].offset+m+a[l].color);n.colors&&(n.colors.value=i[w]?i.join():"0% "+n.color),"radial"==r?(n.type="gradientradial",n.focus="100%",n.focussize=s,n.focusposition=s):(n.type="gradient",n.angle=(270-o)%360)}return 1},(Ae=(Re=function(e,t,r){this[0]=e,this.id=n._oid++,this.node=e,e.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=t,this.paper=r,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!r.bottom&&(r.bottom=this),this.prev=r.top,r.top&&(r.top.next=this),r.top=this,this.next=null})[i]).rotate=function(e,t,n){return this.removed?this:null==e?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy].join(m):this._.rt.deg:((e=v(e).split(s))[w]-1&&(t=F(e[1]),n=F(e[2])),e=F(e[0]),null!=t?this._.rt.deg=e:this._.rt.deg+=e,null==n&&(t=null),this._.rt.cx=t,this._.rt.cy=n,this.setBox(this.attrs,t,n),this.Group.style.rotation=this._.rt.deg,this)},Ae.setBox=function(e,t,n){if(this.removed)return this;var r=this.Group.style,s=this.shape&&this.shape.style||this.node.style;for(var o in e=e||{})e[l](o)&&(this.attrs[o]=e[o]);t=t||this._.rt.cx,n=n||this._.rt.cy;var a,i,u,c,p=this.attrs;switch(this.type){case"circle":a=p.cx-p.r,i=p.cy-p.r,u=c=2*p.r;break;case"ellipse":a=p.cx-p.rx,i=p.cy-p.ry,u=2*p.rx,c=2*p.ry;break;case"image":a=+p.x,i=+p.y,u=p.width||0,c=p.height||0;break;case"text":this.textpath.v=["m",L(p.x),", ",L(p.y-2),"l",L(p.x)+1,", ",L(p.y-2)].join(g),a=p.x-L(this.W/2),i=p.y-this.H/2,u=this.W,c=this.H;break;case"rect":case"path":if(this.attrs.path){var d=le(this.attrs.path);a=d.x,i=d.y,u=d.width,c=d.height}else a=0,i=0,u=this.paper.width,c=this.paper.height;break;default:a=0,i=0,u=this.paper.width,c=this.paper.height}n=null==n?i+c/2:n;var h,f=(t=null==t?a+u/2:t)-this.paper.width/2,m=n-this.paper.height/2;r.left!=(h=f+"px")&&(r.left=h),r.top!=(h=m+"px")&&(r.top=h),this.X=Xe[l](this.type)?-f:a,this.Y=Xe[l](this.type)?-m:i,this.W=u,this.H=c,Xe[l](this.type)?(s.left!=(h=-f*$e+"px")&&(s.left=h),s.top!=(h=-m*$e+"px")&&(s.top=h)):"text"==this.type?(s.left!=(h=-f+"px")&&(s.left=h),s.top!=(h=-m+"px")&&(s.top=h)):(r.width!=(h=this.paper.width+"px")&&(r.width=h),r.height!=(h=this.paper.height+"px")&&(r.height=h),s.left!=(h=a-f+"px")&&(s.left=h),s.top!=(h=i-m+"px")&&(s.top=h),s.width!=(h=u+"px")&&(s.width=h),s.height!=(h=c+"px")&&(s.height=h))},Ae.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},Ae.show=function(){return!this.removed&&(this.Group.style.display="block"),this},Ae.getBBox=function(){return this.removed?this:Xe[l](this.type)?le(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},Ae.remove=function(){if(!this.removed){for(var e in xe(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape),this)delete this[e];this.removed=!0}},Ae.attr=function(e,t){if(this.removed)return this;if(null==e){var r={};for(var s in this.attrs)this.attrs[l](s)&&(r[s]=this.attrs[s]);return this._.rt.deg&&(r.rotation=this.rotate()),(1!=this._.sx||1!=this._.sy)&&(r.scale=this.scale()),r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r}if(null==t&&n.is(e,"string"))return"translation"==e?yt.call(this):"rotation"==e?this.rotate():"scale"==e?this.scale():e==I&&"none"==this.attrs.fill&&this.attrs.gradient?this.attrs.gradient:this.attrs[e];if(this.attrs&&null==t&&n.is(e,T)){var o,a={};for(s=0,o=e[w];s<o;s++)a[e[s]]=this.attr(e[s]);return a}var i;if(null!=t&&((i={})[e]=t),null==t&&n.is(e,"object")&&(i=e),i){for(var u in this.paper.customAttributes)if(this.paper.customAttributes[l](u)&&i[l](u)&&n.is(this.paper.customAttributes[u],"function")){var c=this.paper.customAttributes[u].apply(this,[].concat(i[u]));for(var p in this.attrs[u]=i[u],c)c[l](p)&&(i[p]=c[p])}i.text&&"text"==this.type&&(this.node.string=i.text),Ie(this,i),i.gradient&&({circle:1,ellipse:1}[l](this.type)||"r"!=v(i.gradient).charAt())&&Se(this,i.gradient),(!Xe[l](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},Ae.toFront=function(){return!this.removed&&this.Group.parentNode.appendChild(this.Group),this.paper.top!=this&&Ee(this,this.paper),this},Ae.toBack=function(){return this.removed||this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Ce(this,this.paper)),this},Ae.insertAfter=function(e){return this.removed||(e.constructor==xt&&(e=e[e.length-1]),e.Group.nextSibling?e.Group.parentNode.insertBefore(this.Group,e.Group.nextSibling):e.Group.parentNode.appendChild(this.Group),ke(this,e,this.paper)),this},Ae.insertBefore=function(e){return this.removed||(e.constructor==xt&&(e=e[0]),e.Group.parentNode.insertBefore(this.Group,e.Group),Oe(this,e,this.paper)),this},Ae.blur=function(e){var t=this.node.runtimeStyle,r=t.filter;r=r.replace(Ve,g),0!=+e?(this.attrs.blur=e,t.filter=r+m+z+".Blur(pixelradius="+(+e||1.5)+")",t.margin=n.format("-{0}px 0 0 -{0}px",L(+e||1.5))):(t.filter=r,t.margin=0,delete this.attrs.blur)},je=function(e,t,n,r){var s=Be("group"),o=Be("oval");o.style;s.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",s.coordsize=Ye,s.coordorigin=e.coordorigin,s.appendChild(o);var a=new Re(o,s,e);return a.type="circle",Ie(a,{stroke:"#000",fill:"none"}),a.attrs.cx=t,a.attrs.cy=n,a.attrs.r=r,a.setBox({x:t-r,y:n-r,width:2*r,height:2*r}),e.canvas.appendChild(s),a},De=function(e,t,n,r,s,o){var a=Ke(t,n,r,s,o),i=e.path(a),l=i.attrs;return i.X=l.x=t,i.Y=l.y=n,i.W=l.width=r,i.H=l.height=s,l.r=o,l.path=a,i.type="rect",i},We=function(e,t,n,r,s){var o=Be("group"),a=Be("oval");a.style;o.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",o.coordsize=Ye,o.coordorigin=e.coordorigin,o.appendChild(a);var i=new Re(a,o,e);return i.type="ellipse",Ie(i,{stroke:"#000"}),i.attrs.cx=t,i.attrs.cy=n,i.attrs.rx=r,i.attrs.ry=s,i.setBox({x:t-r,y:n-s,width:2*r,height:2*s}),e.canvas.appendChild(o),i},Le=function(e,t,n,r,s,o){var a=Be("group"),i=Be("image");a.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",a.coordsize=Ye,a.coordorigin=e.coordorigin,i.src=t,a.appendChild(i);var l=new Re(i,a,e);return l.type="image",l.attrs.src=t,l.attrs.x=n,l.attrs.y=r,l.attrs.w=s,l.attrs.h=o,l.setBox({x:n,y:r,width:s,height:o}),e.canvas.appendChild(a),l},Fe=function(e,t,r,s){var o=Be("group"),a=Be("shape"),i=a.style,l=Be("path"),u=(l.style,Be("textpath"));o.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px",o.coordsize=Ye,o.coordorigin=e.coordorigin,l.v=n.format("m{0},{1}l{2},{1}",L(10*t),L(10*r),L(10*t)+1),l.textpathok=!0,i.width=e.width,i.height=e.height,u.string=v(s),u.on=!0,a.appendChild(u),a.appendChild(l),o.appendChild(a);var c=new Re(u,o,e);return c.shape=a,c.textpath=l,c.type="text",c.attrs.text=s,c.attrs.x=t,c.attrs.y=r,c.attrs.w=1,c.attrs.h=1,Ie(c,{font:U.font,stroke:"none",fill:"#000"}),c.setBox(),e.canvas.appendChild(o),c},qe=function(e,t){var n=this.canvas.style;return e==+e&&(e+="px"),t==+t&&(t+="px"),n.width=e,n.height=t,n.clip="rect(0 "+e+" "+t+" 0)",this},u.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!u.namespaces.rvml&&u.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),Be=function(e){return u.createElement("<rvml:"+e+' class="rvml">')}}catch(e){Be=function(e){return u.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}ze=function(){var e=be[h](0,arguments),t=e.container,r=e.height,s=e.width,o=e.x,a=e.y;if(!t)throw new Error("VML container not found.");var i=new d,l=i.canvas=u.createElement("div"),c=l.style;return o=o||0,a=a||0,(s=s||512)==+s&&(s+="px"),(r=r||342)==+r&&(r+="px"),i.width=1e3,i.height=1e3,i.coordsize="10000 10000",i.coordorigin="0 0",i.span=u.createElement("span"),i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",l.appendChild(i.span),c.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,r),1==t?(u.body.appendChild(l),c.left=o+"px",c.top=a+"px",c.position="absolute"):t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),we.call(i,i,n.fn),i},r.clear=function(){this.canvas.innerHTML=g,this.span=u.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},r.remove=function(){for(var e in this.canvas.parentNode.removeChild(this.canvas),this)this[e]=Me(e);return!0}}var Qe=navigator.userAgent.match(/Version\/(.*?)\s/);"Apple Computer, Inc."==navigator.vendor&&(Qe&&Qe[1]<4||"iP"==navigator.platform.slice(0,2))?r.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});c.setTimeout((function(){e.remove()}))}:r.safari=function(){};for(var Ze=function(){this.returnValue=!1},Je=function(){return this.originalEvent.preventDefault()},et=function(){this.cancelBubble=!0},tt=function(){return this.originalEvent.stopPropagation()},nt=u.addEventListener?function(e,t,n,r){var s=f&&b[t]?b[t]:t,o=function(s){if(f&&b[l](t))for(var o=0,a=s.targetTouches&&s.targetTouches.length;o<a;o++)if(s.targetTouches[o].target==e){var i=s;(s=s.targetTouches[o]).originalEvent=i,s.preventDefault=Je,s.stopPropagation=tt;break}return n.call(r,s)};return e.addEventListener(s,o,!1),function(){return e.removeEventListener(s,o,!1),!0}}:u.attachEvent?function(e,t,n,r){var s=function(e){return(e=e||c.event).preventDefault=e.preventDefault||Ze,e.stopPropagation=e.stopPropagation||et,n.call(r,e)};return e.attachEvent("on"+t,s),function(){return e.detachEvent("on"+t,s),!0}}:void 0,rt=[],st=function(e){for(var t,n=e.clientX,r=e.clientY,s=u.documentElement.scrollTop||u.body.scrollTop,o=u.documentElement.scrollLeft||u.body.scrollLeft,a=rt.length;a--;){if(t=rt[a],f){for(var i,l=e.touches.length;l--;)if((i=e.touches[l]).identifier==t.el._drag.id){n=i.clientX,r=i.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();n+=o,r+=s,t.move&&t.move.call(t.move_scope||t.el,n-t.el._drag.x,r-t.el._drag.y,n,r,e)}},ot=function e(t){n.unmousemove(st).unmouseup(e);for(var r,s=rt.length;s--;)(r=rt[s]).el._drag={},r.end&&r.end.call(r.end_scope||r.start_scope||r.move_scope||r.el,t);rt=[]},at=y[w];at--;)!function(e){n[e]=Re[i][e]=function(t,r){return n.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:nt(this.shape||this.node||u,e,t,r||this)})),this},n["un"+e]=Re[i]["un"+e]=function(t){for(var n=this.events,r=n[w];r--;)if(n[r].name==e&&n[r].f==t)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}}(y[at]);function it(){return this.x+m+this.y}Ae.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},Ae.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)},Ae.drag=function(e,t,r,s,o,a){return this._drag={},this.mousedown((function(i){(i.originalEvent||i).preventDefault();var l=u.documentElement.scrollTop||u.body.scrollTop,c=u.documentElement.scrollLeft||u.body.scrollLeft;this._drag.x=i.clientX+c,this._drag.y=i.clientY+l,this._drag.id=i.identifier,t&&t.call(o||s||this,i.clientX+c,i.clientY+l,i),!rt.length&&n.mousemove(st).mouseup(ot),rt.push({el:this,move:e,end:r,move_scope:s,start_scope:o,end_scope:a})})),this},Ae.undrag=function(e,t,r){for(var s=rt.length;s--;)rt[s].el==this&&rt[s].move==e&&rt[s].end==r&&rt.splice(s++,1);!rt.length&&n.unmousemove(st).unmouseup(ot)},r.circle=function(e,t,n){return je(this,e||0,t||0,n||0)},r.rect=function(e,t,n,r,s){return De(this,e||0,t||0,n||0,r||0,s||0)},r.ellipse=function(e,t,n,r){return We(this,e||0,t||0,n||0,r||0)},r.path=function(e){return e&&!n.is(e,S)&&!n.is(e[0],T)&&(e+=g),_e(n.format[h](n,arguments),this)},r.image=function(e,t,n,r,s){return Le(this,e||"about:blank",t||0,n||0,r||0,s||0)},r.text=function(e,t,n){return Fe(this,e||0,t||0,v(n))},r.set=function(e){return arguments[w]>1&&(e=Array[i].splice.call(arguments,0,arguments[w])),new xt(e)},r.setSize=qe,r.top=r.bottom=null,r.raphael=n,Ae.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},Ae.scale=function(e,n,r,s){if(this.removed)return this;if(null==e&&null==n)return{x:this._.sx,y:this._.sy,toString:it};!+(n=n||e)&&(n=e);var o,a,i=this.attrs;if(0!=e){var l=this.getBBox(),u=l.x+l.width/2,c=l.y+l.height/2,p=O(e/this._.sx),d=O(n/this._.sy);r=+r||0==r?r:u,s=+s||0==s?s:c;var h=this._.sx>0,f=this._.sy>0,v=~~(e/O(e)),y=~~(n/O(n)),b=p*v,x=d*y,E=this.node.style,C=r+O(u-r)*b*(u>r==h?1:-1),k=s+O(c-s)*x*(c>s==f?1:-1),M=e*v>n*y?d:p;switch(this.type){case"rect":case"image":var P=i.width*p,_=i.height*d;this.attr({height:_,r:i.r*M,width:P,x:C-P/2,y:k-_/2});break;case"circle":case"ellipse":this.attr({rx:i.rx*p,ry:i.ry*d,r:i.r*M,cx:C,cy:k});break;case"text":this.attr({x:C,y:k});break;case"path":for(var S=ce(i.path),T=!0,I=h?b:p,N=f?x:d,R=0,A=S[w];R<A;R++){var j=S[R],D=B.call(j[0]);if("M"!=D||!T)if(T=!1,"A"==D)j[S[R][w]-2]*=I,j[S[R][w]-1]*=N,j[1]*=p,j[2]*=d,j[5]=+(v+y?!!+j[5]:!+j[5]);else if("H"==D)for(var W=1,L=j[w];W<L;W++)j[W]*=I;else if("V"==D)for(W=1,L=j[w];W<L;W++)j[W]*=N;else for(W=1,L=j[w];W<L;W++)j[W]*=W%2?I:N}var F=le(S);o=C-F.x-F.width/2,a=k-F.y-F.height/2,S[0][1]+=o,S[0][2]+=a,this.attr({path:S})}!(this.type in{text:1,image:1})||1==v&&1==y?this.transformations?(this.transformations[2]=g,t(this.node,"transform",this.transformations.join(m)),i.fx=0,i.fy=0):(this.node.filterMatrix=g,E.filter=(this.node.filterMatrix||g)+(this.node.filterOpacity||g)):this.transformations?(this.transformations[2]="scale(".concat(v,",",y,")"),t(this.node,"transform",this.transformations.join(m)),o=-1==v?-i.x-(P||0):i.x,a=-1==y?-i.y-(_||0):i.y,this.attr({x:o,y:a}),i.fx=v-1,i.fy=y-1):(this.node.filterMatrix=z+".Matrix(M11=".concat(v,", M12=0, M21=0, M22=",y,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),E.filter=(this.node.filterMatrix||g)+(this.node.filterOpacity||g)),i.scale=[e,n,r,s].join(m),this._.sx=e,this._.sy=n}return this},Ae.clone=function(){if(this.removed)return null;var e=this.attr();return delete e.scale,delete e.translation,this.paper[this.type]().attr(e)};var lt={},ut=function e(t,r,s,o,a,i,l,u,c){if(t===s&&r===o&&a===l&&i==u){var p=l-t,d=u-r,h=Math.sqrt(p*p+d*d);if(null==c)return h;var f=c/h;return{start:{x:t,y:r},m:{x:t,y:r},n:{x:l,y:u},end:{x:l,y:u},x:t+f*p,y:r+f*d,alpha:90-180*E.atan(p/d)/P}}var g,m,v=0,y=100,b=[t,r,s,o,a,i,l,u].join(),w=lt[b];(!w&&(lt[b]=w={data:[]}),w.timer&&clearTimeout(w.timer),w.timer=setTimeout((function(){delete lt[b]}),2e3),null!=c)&&(y=10*~~e(t,r,s,o,a,i,l,u));for(var x=0;x<y+1;x++){if(w.data[c]>x?m=w.data[x*y]:(m=n.findDotsAtSegment(t,r,s,o,a,i,l,u,x/y),w.data[x]=m),x&&(v+=M(M(g.x-m.x,2)+M(g.y-m.y,2),.5)),null!=c&&v>=c)return m;g=m}if(null==c)return v},ct=function(e,t){return function(r,s,o){for(var a,i,l,u,c,p="",d={},h=0,f=0,g=(r=ve(r)).length;f<g;f++){if("M"==(l=r[f])[0])a=+l[1],i=+l[2];else{if(h+(u=ut(a,i,l[1],l[2],l[3],l[4],l[5],l[6]))>s){if(t&&!d.start){if(p+=["C",(c=ut(a,i,l[1],l[2],l[3],l[4],l[5],l[6],s-h)).start.x,c.start.y,c.m.x,c.m.y,c.x,c.y],o)return p;d.start=p,p=["M",c.x,c.y+"C",c.n.x,c.n.y,c.end.x,c.end.y,l[5],l[6]].join(),h+=u,a=+l[5],i=+l[6];continue}if(!e&&!t)return{x:(c=ut(a,i,l[1],l[2],l[3],l[4],l[5],l[6],s-h)).x,y:c.y,alpha:c.alpha}}h+=u,a=+l[5],i=+l[6]}p+=l}return d.end=p,(c=e?h:t?d:n.findDotsAtSegment(a,i,l[1],l[2],l[3],l[4],l[5],l[6],1)).alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},pt=ct(1),dt=ct(),ht=ct(0,1);Ae.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():pt(this.attrs.path)},Ae.getPointAtLength=function(e){if("path"==this.type)return dt(this.attrs.path,e)},Ae.getSubpath=function(e,t){if("path"==this.type){if(O(this.getTotalLength()-t)<"1e-6")return ht(this.attrs.path,e).end;var n=ht(this.attrs.path,t,1);return e?ht(n,e).end:n}},n.easing_formulas={linear:function(e){return e},"<":function(e){return M(e,3)},">":function(e){return M(e-1,3)+1},"<>":function(e){return(e*=2)<1?M(e,3)/2:(M(e-=2,3)+2)/2},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},elastic:function(e){if(0==e||1==e)return e;return M(2,-10*e)*E.sin(2*P*(e-.075)/.3)+1},bounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}};var ft=[],gt=function e(){for(var t=+new Date,r=0;r<ft[w];r++){var s=ft[r];if(!s.stop&&!s.el.removed){var o,a=t-s.start,i=s.ms,u=s.easing,c=s.from,p=s.diff,d=s.to,h=s.t,f=s.el,v={};if(a<i){var y=u(a/i);for(var b in c)if(c[l](b)){switch(H[b]){case"along":o=y*i*p[b],d.back&&(o=d.len-o);var x=dt(d[b],o);f.translate(p.sx-p.x||0,p.sy-p.y||0),p.x=x.x,p.y=x.y,f.translate(x.x-p.sx,x.y-p.sy),d.rot&&f.rotate(p.r+x.alpha,x.x,x.y);break;case _:o=+c[b]+y*i*p[b];break;case"colour":o="rgb("+[vt(L(c[b].r+y*i*p[b].r)),vt(L(c[b].g+y*i*p[b].g)),vt(L(c[b].b+y*i*p[b].b))].join(",")+")";break;case"path":o=[];for(var E=0,C=c[b][w];E<C;E++){o[E]=[c[b][E][0]];for(var k=1,O=c[b][E][w];k<O;k++)o[E][k]=+c[b][E][k]+y*i*p[b][E][k];o[E]=o[E].join(m)}o=o.join(m);break;case"csv":switch(b){case"translation":var M=y*i*p[b][0]-h.x,P=y*i*p[b][1]-h.y;h.x+=M,h.y+=P,o=M+m+P;break;case"rotation":o=+c[b][0]+y*i*p[b][0],c[b][1]&&(o+=","+c[b][1]+","+c[b][2]);break;case"scale":o=[+c[b][0]+y*i*p[b][0],+c[b][1]+y*i*p[b][1],2 in d[b]?d[b][2]:g,3 in d[b]?d[b][3]:g].join(m);break;case"clip-rect":for(o=[],E=4;E--;)o[E]=+c[b][E]+y*i*p[b][E]}break;default:var S=[].concat(c[b]);for(o=[],E=f.paper.customAttributes[b].length;E--;)o[E]=+S[E]+y*i*p[b][E]}v[b]=o}f.attr(v),f._run&&f._run.call(f)}else d.along&&(x=dt(d.along,d.len*!d.back),f.translate(p.sx-(p.x||0)+x.x-p.sx,p.sy-(p.y||0)+x.y-p.sy),d.rot&&f.rotate(p.r+x.alpha,x.x,x.y)),(h.x||h.y)&&f.translate(-h.x,-h.y),d.scale&&(d.scale+=g),f.attr(d),ft.splice(r--,1)}}n.svg&&f&&f.paper&&f.paper.safari(),ft[w]&&setTimeout(e)},mt=function(e,t,r,s,o){var a=r-s;t.timeouts.push(setTimeout((function(){n.is(o,"function")&&o.call(t),t.animate(e,a,e.easing)}),s))},vt=function(e){return C(k(e,255),0)},yt=function(e,t){if(null==e)return{x:this._.tx,y:this._.ty,toString:it};switch(this._.tx+=+e,this._.ty+=+t,this.type){case"circle":case"ellipse":this.attr({cx:+e+this.attrs.cx,cy:+t+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+e+this.attrs.x,y:+t+this.attrs.y});break;case"path":var n=ce(this.attrs.path);n[0][1]+=+e,n[0][2]+=+t,this.attr({path:n})}return this};function bt(e){return function(t,r,s,o){var a={back:e};return n.is(s,"function")?o=s:a.rot=s,t&&t.constructor==Re&&(t=t.attrs.path),t&&(a.along=t),this.animate(a,r,o)}}function wt(e,t,n,r,s,o){var a=3*t,i=3*(r-t)-a,l=1-a-i,u=3*n,c=3*(s-n)-u,p=1-u-c;function d(e){return((l*e+i)*e+a)*e}return function(e,t){var n=function(e,t){var n,r,s,o,u,c;for(s=e,c=0;c<8;c++){if(o=d(s)-e,O(o)<t)return s;if(O(u=(3*l*s+2*i)*s+a)<1e-6)break;s-=o/u}if(r=1,(s=e)<(n=0))return n;if(s>r)return r;for(;n<r;){if(o=d(s),O(o-e)<t)return s;e>o?n=s:r=s,s=(r-n)/2+n}return s}(e,t);return((p*n+c)*n+u)*n}(e,1/(200*o))}Ae.animateWith=function(e,t,n,r,s){for(var o=0,a=ft.length;o<a;o++)ft[o].el.id==e.id&&(t.start=ft[o].start);return this.animate(t,n,r,s)},Ae.animateAlong=bt(),Ae.animateAlongBack=bt(1),Ae.onAnimation=function(e){return this._run=e||0,this},Ae.animate=function(e,t,r,o){var a=this;if(a.timeouts=a.timeouts||[],!n.is(r,"function")&&r||(o=r||null),a.removed)return o&&o.call(a),a;var i={},u={},c=!1,p={};for(var d in e)if(e[l](d)&&(H[l](d)||a.paper.customAttributes[l](d)))switch(c=!0,i[d]=a.attr(d),null==i[d]&&(i[d]=U[d]),u[d]=e[d],H[d]){case"along":var h=pt(e[d]),f=dt(e[d],h*!!e.back),g=a.getBBox();p[d]=h/t,p.tx=g.x,p.ty=g.y,p.sx=f.x,p.sy=f.y,u.rot=e.rot,u.back=e.back,u.len=h,e.rot&&(p.r=F(a.rotate())||0);break;case _:p[d]=(u[d]-i[d])/t;break;case"colour":i[d]=n.getRGB(i[d]);var m=n.getRGB(u[d]);p[d]={r:(m.r-i[d].r)/t,g:(m.g-i[d].g)/t,b:(m.b-i[d].b)/t};break;case"path":var y=ve(i[d],u[d]);i[d]=y[0];var b=y[1];p[d]=[];for(var x=0,E=i[d][w];x<E;x++){p[d][x]=[0];for(var C=1,k=i[d][x][w];C<k;C++)p[d][x][C]=(b[x][C]-i[d][x][C])/t}break;case"csv":var O=v(e[d]).split(s),M=v(i[d]).split(s);switch(d){case"translation":i[d]=[0,0],p[d]=[O[0]/t,O[1]/t];break;case"rotation":i[d]=M[1]==O[1]&&M[2]==O[2]?M:[0,O[1],O[2]],p[d]=[(O[0]-i[d][0])/t,0,0];break;case"scale":e[d]=O,i[d]=v(i[d]).split(s),p[d]=[(O[0]-i[d][0])/t,(O[1]-i[d][1])/t,0,0];break;case"clip-rect":for(i[d]=v(i[d]).split(s),p[d]=[],x=4;x--;)p[d][x]=(O[x]-i[d][x])/t}u[d]=O;break;default:for(O=[].concat(e[d]),M=[].concat(i[d]),p[d]=[],x=a.paper.customAttributes[d][w];x--;)p[d][x]=((O[x]||0)-(M[x]||0))/t}if(c){var P=n.easing_formulas[r];if(!P)if((P=v(r).match(W))&&5==P[w]){var S=P;P=function(e){return wt(e,+S[1],+S[2],+S[3],+S[4],t)}}else P=function(e){return e};ft.push({start:e.start||+new Date,ms:t,easing:P,from:i,diff:p,to:u,el:a,t:{x:0,y:0}}),n.is(o,"function")&&(a._ac=setTimeout((function(){o.call(a)}),t)),1==ft[w]&&setTimeout(gt)}else{var T,I=[];for(var N in e)e[l](N)&&G.test(N)&&(d={value:e[N]},"from"==N&&(N=0),"to"==N&&(N=100),d.key=q(N,10),I.push(d));for(I.sort(J),I[0].key&&I.unshift({key:0,value:a.attrs}),x=0,E=I[w];x<E;x++)mt(I[x].value,a,t/100*I[x].key,t/100*(I[x-1]&&I[x-1].key||0),I[x-1]&&I[x-1].value.callback);(T=I[I[w]-1].value.callback)&&a.timeouts.push(setTimeout((function(){T.call(a)}),t))}return this},Ae.stop=function(){for(var e=0;e<ft.length;e++)ft[e].el.id==this.id&&ft.splice(e--,1);for(e=0,ii=this.timeouts&&this.timeouts.length;e<ii;e++)clearTimeout(this.timeouts[e]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},Ae.translate=function(e,t){return this.attr({translation:e+" "+t})},Ae.toString=function(){return"Raphaël’s object"},n.ae=ft;var xt=function e(t){if(this.items=[],this[w]=0,this.type="set",t)for(var n=0,r=t[w];n<r;n++)!t[n]||t[n].constructor!=Re&&t[n].constructor!=e||(this[this.items[w]]=this.items[this.items[w]]=t[n],this[w]++)};for(var Et in xt[i][R]=function(){for(var e,t,n=0,r=arguments[w];n<r;n++)!(e=arguments[n])||e.constructor!=Re&&e.constructor!=xt||(this[t=this.items[w]]=this.items[t]=e,this[w]++);return this},xt[i].pop=function(){return delete this[this[w]--],this.items.pop()},Ae)Ae[l](Et)&&(xt[i][Et]=function(e){return function(){for(var t=0,n=this.items[w];t<n;t++)this.items[t][e][h](this.items[t],arguments);return this}}(Et));xt[i].attr=function(e,t){if(e&&n.is(e,T)&&n.is(e[0],"object"))for(var r=0,s=e[w];r<s;r++)this.items[r].attr(e[r]);else for(var o=0,a=this.items[w];o<a;o++)this.items[o].attr(e,t);return this},xt[i].animate=function(e,t,r,s){(n.is(r,"function")||!r)&&(s=r||null);var o,a,i=this.items[w],l=i,u=this;for(s&&(a=function(){!--i&&s.call(u)}),r=n.is(r,S)?r:a,o=this.items[--l].animate(e,t,r,a);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,e,t,r,a);return this},xt[i].insertAfter=function(e){for(var t=this.items[w];t--;)this.items[t].insertAfter(e);return this},xt[i].getBBox=function(){for(var e=[],t=[],n=[],r=[],s=this.items[w];s--;){var o=this.items[s].getBBox();e[R](o.x),t[R](o.y),n[R](o.x+o.width),r[R](o.y+o.height)}return{x:e=k[h](0,e),y:t=k[h](0,t),width:C[h](0,n)-e,height:C[h](0,r)-t}},xt[i].clone=function(e){e=new xt;for(var t=0,n=this.items[w];t<n;t++)e[R](this.items[t].clone());return e},n.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[l](r)&&(t.face[r]=e.face[r]);if(this.fonts[n]?this.fonts[n][R](t):this.fonts[n]=[t],!e.svg)for(var s in t.face["units-per-em"]=q(e.face["units-per-em"],10),e.glyphs)if(e.glyphs[l](s)){var o=e.glyphs[s];if(t.glyphs[s]={w:o.w,k:{},d:o.d&&"M"+o.d[V](/[mlcxtrv]/g,(function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"}))+"z"},o.k)for(var a in o.k)o[l](a)&&(t.glyphs[s].k[a]=o.k[a])}return e},r.getFont=function(e,t,r,s){if(s=s||"normal",r=r||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400,n.fonts){var o,a=n.fonts[e];if(!a){var i=new RegExp("(^|\\s)"+e[V](/[^\w\d\s+!~.:_-]/g,g)+"(\\s|$)","i");for(var u in n.fonts)if(n.fonts[l](u)&&i.test(u)){a=n.fonts[u];break}}if(a)for(var c=0,p=a[w];c<p&&((o=a[c]).face["font-weight"]!=t||o.face["font-style"]!=r&&o.face["font-style"]||o.face["font-stretch"]!=s);c++);return o}},r.print=function(e,t,r,o,a,i,l){i=i||"middle",l=C(k(l||0,1),-1);var u,c=this.set(),p=v(r).split(g),d=0;if(n.is(o,r)&&(o=this.getFont(o)),o){u=(a||16)/o.face["units-per-em"];for(var h=o.face.bbox.split(s),f=+h[0],m=+h[1]+("baseline"==i?h[3]-h[1]+ +o.face.descent:(h[3]-h[1])/2),y=0,b=p[w];y<b;y++){var x=y&&o.glyphs[p[y-1]]||{},E=o.glyphs[p[y]];d+=y?(x.w||o.w)+(x.k&&x.k[p[y]]||0)+o.w*l:0,E&&E.d&&c[R](this.path(E.d).attr({fill:"#000",stroke:"none",translation:[d,0]}))}c.scale(u,u,f,m).translate(e-f,t-m)}return c},n.format=function(e,t){var r=n.is(t,T)?[0].concat(t):arguments;return e&&n.is(e,S)&&r[w]-1&&(e=e[V](a,(function(e,t){return null==r[++t]?g:r[t]}))),e||g},n.ninja=function(){return p.was?c.Raphael=p.is:Raphael=void 0,n},n.el=Ae,n.st=xt[i],e.exports=n}()},qRYE:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=w(n("q1tI")),a=r(n("i8i4")),i=r(n("5pch")),l=n("eAf/"),u=w(n("+jAD")),c=r(n("M++g")),p=r(n("7xiW")),d=r(n("eMwK")),h=n("j8wP"),f=r(n("Giaf")),g=r(n("XwLL")),m=r(n("yfnS")),v=w(n("HEOz")),y=r(n("p8fL"));function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const x=f.default.MovablePoint,E=f.default.Line,{assert:C}=y.default,k={ge:"le",gt:"lt",le:"ge",lt:"gt"},O={ge:"gt",gt:"ge",le:"lt",lt:"le"};function M(e,t){return 1===t?""+e:`\\dfrac{${e}}{${t}}`}function P(e,t){if(e<0)return"-"+P(-e,t);const n=Math.floor(e/t);return 0===n?M(e,t):e-n*t==0?""+n:n+M(e-n*t,t)}const _=(e,t,n,r,s)=>{if(r=r||n,"decimal"===t||"decimal ticks"===t)return e.label([n,-.53],Math.round(100*r)/100,"center");if("improper"===t){const t=g.default.toFraction(r);return e.label([n,-.17],M(t[0],t[1]),"below")}if("mixed"===t){const t=g.default.toFraction(r);return e.label([n,-.17],P(t[0],t[1]),"below")}if("non-reduced"===t){const t=g.default.toFraction(r);return e.label([n,-.17],function(e,t,n){return M(e*Math.floor(n/t),n)}(t[0],t[1],s),"below")}},S=f.default.createSimpleClass(((e,t)=>{if(!i.default.isFinite(t.tickStep)||t.tickStep<=0)return[];const n=[],r=t.range,s=t.labelRange,o=null==s[0]?r[0]:s[0],a=null==s[1]?r[1]:s[1];let u;if("non-reduced"===t.labelStyle){const e=[o,a];for(let n=0;n<=t.numDivisions;n++){const s=r[0]+n*t.tickStep;e.push(s)}const n=e=>l.number.toFraction(e)[1],s=i.default.map(e,n);u=i.default.reduce(s,((e,t)=>g.default.getLCM(e,t)))}else u=void 0;for(let s=0;s<=t.numDivisions;s++){const o=r[0]+s*t.tickStep;n.push(e.line([o,-.2],[o,.2]));(t.labelTicks||"decimal ticks"===t.labelStyle)&&n.push(_(e,t.labelStyle,o,o,u))}return n.push(e.style(t.isMobile?{color:m.default.BLUE_D}:{},(()=>_(e,t.labelStyle,o,o,u)))),n.push(e.style(t.isMobile?{color:m.default.BLUE_D}:{},(()=>_(e,t.labelStyle,a,a,u)))),e.style({stroke:t.isMobile?m.default.BLUE_D:m.default.DYNAMIC,strokeWidth:3.5},(()=>{n.push(e.line([o,-.2],[o,.2])),n.push(e.line([a,-.2],[a,.2]))})),n}));class T extends o.Component{constructor(...e){super(...e),this.state={numDivisionsEmpty:!1},this.change=(...e)=>u.change.apply(this,e),this.isValid=()=>{const e=this.props.range;let t=this.props.numLinePosition;const n=this.props.divisionRange;return t=null==t?e[0]:t,e[0]<e[1]&&l.number.sign(t-e[0])>=0&&l.number.sign(t-e[1])<=0&&n[0]<n[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions},this.onNumDivisionsChange=(e,t)=>{const n=this.props.divisionRange.slice(),r=this.props.range[1]-this.props.range[0];if(e=(e=Math.round(e))<0?-1*e:e){const s=i.default.extend({},this.props,{tickStep:r/e}),o=this.snapNumLinePosition(s,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},(()=>{this.props.onChange({divisionRange:n,numDivisions:e,numLinePosition:o},t)}))}else this.setState({numDivisionsEmpty:!0},t)},this._handleTickCtrlFocus=()=>{this.props.onFocus(["tick-ctrl"])},this._handleTickCtrlBlur=()=>{this.props.onBlur(["tick-ctrl"])},this.focus=()=>{if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0},this.focusInputPath=e=>{1===e.length&&this.refs[e[0]].focus()},this.blurInputPath=e=>{1===e.length&&this.refs[e[0]].blur()},this.getInputPaths=()=>this.props.isTickCtrl?[["tick-ctrl"]]:[],this.getDOMNodeForPath=e=>{if(1===e.length)return a.default.findDOMNode(this.refs[e[0]])},this.getGrammarTypeForPath=e=>{if(1===e.length&&"tick-ctrl"===e[0])return"number"},this.setInputValue=(e,t,n)=>{1===e.length&&"tick-ctrl"===e[0]&&this.onNumDivisionsChange(t,n)},this._renderGraphie=()=>{const e=this.props.range,t=e[1]-e[0],n=i.default.pick(this.props,["range","isTickCtrl"]),r=i.default.extend({},this.props,{tickStep:t/this.props.numDivisions});return o.createElement(f.default,{ref:"graphie",key:this.props.labelStyle,box:[this.props.apiOptions.isMobile?288:460,80],options:n,onMouseDown:e=>{this.refs.graphie.movables.numberLinePoint.grab(e)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile},o.createElement(S,(0,s.default)({},i.default.pick(r,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:this.props.apiOptions.isMobile})),this._renderInequality(r),this._renderNumberLinePoint(r))},this.snapNumLinePosition=(e,t)=>{const n=e.range[0],r=e.range[1],s=e.tickStep/e.snapDivisions;let o=((e,t,n)=>Math.min(Math.max(e,t),n))(t,n,r);return o=n+l.number.roundTo(o-n,s),C(i.default.isFinite(o)),o},this.movePosition=e=>{this.change({numLinePosition:e}),this.props.trackInteraction()},this._renderNumberLinePoint=e=>{const t=(0,i.default)(["lt","gt"]).contains(e.rel);let n;n=t?m.default._BACKGROUND:e.static?m.default.DYNAMIC:m.default.INTERACTIVE;const r={fill:n,stroke:e.static?m.default.DYNAMIC:m.default.INTERACTIVE,"stroke-width":t?3:1},s={fill:t?m.default._BACKGROUND:m.default.INTERACTING,"stroke-width":t?3:1},a=e.isInequality?{stroke:m.default.INTERACTIVE,"fill-opacity":t?0:1}:{};return o.createElement(x,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[(e,t)=>[e[0],t[1]],(t,n)=>[this.snapNumLinePosition(e,t[0]),t[1]]],normalStyle:r,highlightStyle:s,onMove:e=>{this.movePosition(e[0])},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:a,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})},this.handleReverse=()=>{const e=k[this.props.rel];this.props.onChange({rel:e})},this.handleToggleStrict=()=>{const e=O[this.props.rel];this.props.onChange({rel:e})},this._getInequalityEndpoint=e=>{const t=(0,i.default)(["ge","gt"]).contains(e.rel),n=e.range,r=30*((n[1]-n[0])/400),s=n[0]-r,o=n[1]+r;return t?[o,0]:[s,0]},this._renderInequality=e=>{if(e.isInequality){const t=this._getInequalityEndpoint(e),n={arrows:"->",stroke:this.props.apiOptions.isMobile?m.default.INTERACTIVE:m.default.DYNAMIC,strokeWidth:3.5},r=["ge","gt"].includes(e.rel);return o.createElement(E,{start:[(r?.4:-.4)+e.numLinePosition,0],end:t,style:n})}return null},this._setupGraphie=(e,t)=>{if(!this.isValid())return;const n=this.props.apiOptions.isMobile?228:400,r=t.range,s=(r[1]-r[0])/n,o=30*s,a=r[0]-o,i=r[1]+o,l="improper"===this.props.labelStyle||"mixed"===this.props.labelStyle||"non-reduced"===this.props.labelStyle?-1.5:-1;e.init({range:[[a,i],[l,1]],scale:[1/s,40],isMobile:this.props.apiOptions.isMobile});const u=(r[0]+r[1])/2;e.line([u,0],[i,0],{arrows:"->"}),e.line([u,0],[a,0],{arrows:"->"})},this.getUserInput=()=>({numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}),this.simpleValidate=e=>T.validate(this.getUserInput(),e)}render(){const e=this.props.divisionRange,t=e[0]+"–"+e[1],n=this.props.numDivisions<e[0]||this.props.numDivisions>e[1],r=o.createElement("div",null,o.createElement("input",{type:"button",className:"simple-button",value:v._("Switch direction"),onClick:this.handleReverse}),o.createElement("input",{type:"button",className:"simple-button",value:(0,i.default)(["le","ge"]).contains(this.props.rel)?v._("Make circle open"):v._("Make circle filled"),onClick:this.handleToggleStrict}));let s;if(this.props.isTickCtrl){let t;t=this.props.apiOptions.customKeypad?d.default:this.props.apiOptions.staticRender?p.default:c.default,s=o.createElement("label",null,v._("Number of divisions:")," ",o.createElement(t,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||e[0],checkValidity:t=>t>=e[0]&&t<=e[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement}))}return o.createElement("div",{className:"perseus-widget perseus-widget-interactive-number-line"},s,this.isValid()?this.props.isTickCtrl&&n?o.createElement("div",{className:"perseus-error"},v.$_("Please make sure the number of divisions is in the range %(divRangeString)s.",{divRangeString:t})):this._renderGraphie():o.createElement("div",{className:"perseus-error"},v.doNotTranslate("Invalid number line configuration.")),!this.props.static&&this.props.isInequality&&r)}}T.defaultProps={range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:h.ApiOptions.defaults},i.default.extend(T,{validate:function(e,t){const n=t.range,r=e.divisionRange,s=null!=t.initialX?t.initialX:n[0],o=t.isInequality?"ge":"eq",a=t.correctRel||"eq",i=l.number.equal(e.numLinePosition,t.correctX||0),u=e.numDivisions>r[1]||e.numDivisions<r[0];return e.isTickCrtl&&u?{type:"invalid",message:"Number of divisions is outside the allowed range."}:i&&a===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===s&&e.rel===o?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});var I={name:"number-line",displayName:"Number line",widget:T,transform:e=>{const t=i.default.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),n=null!=e.initialX?e.initialX:e.range[0],r=e.range[1]-e.range[0];let s;return s=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?r/e.tickStep:void 0,i.default.extend(t,{numLinePosition:n,numDivisions:s,snapDivisions:t.snapDivisions||void 0}),t},staticTransform:e=>{const t=i.default.pick(e,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),n=null!=e.correctX?e.correctX:e.range[0],r=e.range[1]-e.range[0];let s;return s=null!=e.numDivisions?e.numDivisions:null!=e.tickStep?r/e.tickStep:void 0,i.default.extend(t,{numLinePosition:n,numDivisions:s,rel:e.isInequality?e.correctRel:null,snapDivisions:t.snapDivisions||void 0}),t}};t.default=I},qcZx:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),a=r(n("fhzG")),i=r(n("17x9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var u=(0,a.default)({displayName:"DragTarget",propTypes:{onDrop:i.default.func.isRequired,component:i.default.any,shouldDragHighlight:i.default.func,style:i.default.any},getDefaultProps:function(){return{component:"div",shouldDragHighlight:()=>!0}},getInitialState:function(){return{dragHover:!1}},handleDrop:function(e){e.stopPropagation(),e.preventDefault(),this.setState({dragHover:!1}),this.props.onDrop(e)},handleDragEnd:function(){this.setState({dragHover:!1})},handleDragOver:function(e){e.preventDefault()},handleDragLeave:function(){this.setState({dragHover:!1})},handleDragEnter:function(e){this.setState({dragHover:this.props.shouldDragHighlight(e)})},render:function(){const e=this.state.dragHover?{opacity:.3}:{},t=this.props.component,n=Object.assign({},this.props);return delete n.component,delete n.shouldDragHighlight,o.createElement(t,(0,s.default)({},n,{style:Object.assign({},this.props.style,e),onDrop:this.handleDrop,onDragEnd:this.handleDragEnd,onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave}))}});t.default=u},qoj5:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=s?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("aeDP"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}class i extends s.Component{constructor(...e){super(...e),this.state={didMount:!1}}componentDidMount(){this.setState({didMount:!0})}render(){return this.state.didMount?s.createElement(o.default,this.props):s.createElement("div",null)}}var l=i;t.default=l},qsUq:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=d(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=n("j8wP"),u=d(n("+jAD")),c=r(n("lQTD"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class h extends o.Component{constructor(...e){super(...e),this._renderMetadataEditor=()=>{const e=this.props.apiOptions.GroupMetadataEditor;return o.createElement(e,{value:this.props.metadata,onChange:this.change("metadata")})},this.change=(...e)=>u.change.apply(this,e),this.getSaveWarnings=()=>this.refs.editor.getSaveWarnings(),this.serialize=()=>i.default.extend({},this.refs.editor.serialize(),{metadata:this.props.metadata})}render(){return o.createElement("div",{className:"perseus-group-editor"},o.createElement("div",null,this._renderMetadataEditor()),o.createElement(c.default,{ref:"editor",content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange}))}}h.propTypes=(0,s.default)({},u.propTypes,{content:a.default.string,widgets:a.default.object,images:a.default.object,metadata:a.default.any,apiOptions:l.ApiOptions.propTypes}),h.widgetName="group",h.defaultProps={content:"",widgets:{},images:{},metadata:void 0};var f=h;t.default=f},qwrK:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=n("mR6N");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class l extends s.Component{constructor(...e){super(...e),this.state={showErrors:!1},this.handleToggleKatexErrors=e=>{this.setState({showErrors:!this.state.showErrors})}}render(){const{errorList:e}=this.props,{showErrors:t}=this.state,n=t?"icon-chevron-down":"icon-chevron-right";return s.createElement("div",{className:(0,a.css)(u.errorContainer)},s.createElement("div",{className:(0,a.css)(u.title),onClick:this.handleToggleKatexErrors},s.createElement("i",{className:n,style:{fontSize:14}}),"  KaTeX Errors (",e.length,")"),t&&s.createElement("div",{className:(0,a.css)(u.errorExplanation)},"These errors will cause your LaTeX to load really slowly for the student. Please fix them if you can. If you can’t because KaTeX doesn’t support the feature you need, please message Cam."),t&&e.map(((e,t)=>s.createElement("div",{className:(0,a.css)(u.error),key:t},s.createElement("div",{style:{color:"red"}},e.math),s.createElement("div",null,e.message)))))}}l.propTypes={errorList:o.default.arrayOf(o.default.shape({math:o.default.string.isRequired,message:o.default.string.isRequired})).isRequired};const u=a.StyleSheet.create({title:{backgroundColor:"#eee",fontSize:"1.25em",padding:"4px 10px"},errorContainer:{border:"1px solid #ddd",borderTop:"none"},errorExplanation:{padding:"4px 10px",backgroundColor:"pink"},error:{padding:"4px 10px"}});var c=l;t.default=c},r6B3:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=y(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=r(n("96rG")),u=r(n("Q8Wn")),c=y(n("4PhQ")),p=r(n("8Kom")),d=y(n("+jAD")),h=r(n("cxY9")),f=r(n("dRoQ")),g=r(n("qoj5")),m=r(n("ONox"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class b extends o.Component{constructor(...e){super(...e),this.change=(...e)=>d.change.apply(this,e),this.serialize=()=>h.default.serialize.call(this)}render(){return o.createElement("fieldset",{className:"pair-editor"},o.createElement("label",null,"Name:"," ",o.createElement(f.default,{value:this.props.name,onChange:this.change("name")})),o.createElement("label",null," ","Value:"," ",o.createElement(f.default,{value:this.props.value,onChange:this.change("value")})))}}b.propTypes=(0,s.default)({},d.propTypes,{name:a.default.string,value:a.default.string}),b.defaultProps={name:"",value:""};class w extends o.Component{constructor(...e){super(...e),this.change=(...e)=>d.change.apply(this,e),this.handlePairChange=(e,t)=>{const n=this.props.pairs.slice();n[e]=t;const r=n[n.length-1];r.name&&r.value&&n.push({name:"",value:""}),this.change("pairs",n)},this.serialize=()=>h.default.serialize.call(this)}render(){const e=i.default.map(this.props.pairs,((e,t)=>o.createElement(b,{key:t,name:e.name,value:e.value,onChange:this.handlePairChange.bind(this,t)})));return o.createElement("div",null,e)}}w.propTypes=(0,s.default)({},d.propTypes,{pairs:a.default.arrayOf(a.default.shape({name:a.default.string,value:a.default.string})).isRequired});const x=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/;class E extends o.Component{constructor(...e){super(...e),this.change=(...e)=>d.change.apply(this,e),this._handleSettingsChange=e=>{this.change({settings:e.pairs})},this._handleProgramIDChange=e=>{e=function(e){const t=x.exec(e);return t&&(e=t[1]),e}(e);const t=`${u.default.IS_DEV_SERVER?p.default.origin:"https://www.khanacademy.org"}/api/internal/scratchpads/${e}`;l.default.getJSON(t).done((t=>{const n=t.userAuthoredContentType;this.change({width:t.width,height:t.height,programID:e,programType:n})})).fail(((t,n,r)=>{c.default.error("Error retrieving scratchpad info for program ID ",c.Errors.Internal,{cause:r,metadata:{textStatus:n,programID:e}}),this.change({width:400,height:400,programID:e,programType:null})}))},this.serialize=()=>h.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("label",null,"Url or Program ID:"," ",o.createElement(f.default,{name:"programID",value:this.props.programID,onChange:this._handleProgramIDChange})),o.createElement("br",null),o.createElement(m.default,{label:"Show Editor",showEditor:this.props.showEditor,onChange:this.props.onChange}),o.createElement(g.default,null,'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'),o.createElement("br",null),o.createElement(m.default,{label:"Show Buttons",showButtons:this.props.showButtons,onChange:this.props.onChange}),o.createElement("br",null),o.createElement("label",null,"Settings:",o.createElement(w,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),o.createElement(g.default,null,"Settings that you add here are available to the program as an object returned by ",o.createElement("code",null,"Program.settings()"))))}}E.propTypes=(0,s.default)({},d.propTypes),E.widgetName="cs-program",E.defaultProps={programID:"",programType:null,settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,width:400,height:400};var C=E;t.default=C},rVh6:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.buildPropTypeForShape=function(e){return s.default.oneOfType([s.default.shape({_multi:a(e)}),s.default.oneOf([null,void 0])])},t.shapePropType=function e(...t){return s.default.oneOfType([s.default.shape({type:s.default.oneOf(["content"]).isRequired}).isRequired,s.default.shape({type:s.default.oneOf(["hint"]).isRequired}).isRequired,s.default.shape({type:s.default.oneOf(["tags"]).isRequired}).isRequired,s.default.shape({type:s.default.oneOf(["object"]).isRequired,shape:s.default.objectOf(e)}).isRequired,s.default.shape({type:s.default.oneOf(["array"]).isRequired,elementShape:e}).isRequired]).apply(void 0,t)};var s=r(n("17x9")),o=n("4PhQ");function a(e){if("content"===e.type)return s.default.shape({__type:s.default.oneOf(["content","item"]).isRequired,content:s.default.string,images:s.default.objectOf(s.default.any),widgets:s.default.objectOf(s.default.any)});if("hint"===e.type)return s.default.shape({__type:s.default.oneOf(["hint"]).isRequired,content:s.default.string,images:s.default.objectOf(s.default.any),widgets:s.default.objectOf(s.default.any),replace:s.default.bool});if("tags"===e.type)return s.default.arrayOf(s.default.string.isRequired);if("array"===e.type){const t=a(e.elementShape);return s.default.arrayOf(t.isRequired)}if("object"===e.type){const t=e.shape,n={};return Object.keys(t).forEach((e=>{n[e]=a(t[e]).isRequired})),s.default.shape(n)}throw new o.KAError(`unexpected shape type ${e.type}`,o.Errors.Internal)}},rYEP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=r(n("17x9")),i=f(n("+jAD")),l=r(n("5pch")),u=n("j8wP"),c=r(n("cxY9")),p=r(n("ONox")),d=r(n("DUX9"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const g=r(n("h1Z3")).default.widget;class m extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.serialize=()=>c.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{label:"Randomize item order",labelAlignment:"right",randomizeItems:this.props.randomizeItems,onChange:this.props.onChange})),"Categories:",o.createElement(d.default,{options:this.props.categories,onChange:e=>{this.change("categories",e)},layout:"horizontal"}),"Items:",o.createElement(d.default,{options:this.props.items,onChange:e=>{this.change({items:e,values:l.default.first(this.props.values,e.length)})},layout:"vertical"}),o.createElement(g,{apiOptions:this.props.apiOptions,items:this.props.items,categories:this.props.categories,values:this.props.values,onChange:e=>{this.props.onChange(e)},trackInteraction:function(){}}))}}m.propTypes=(0,s.default)({},i.propTypes,{apiOptions:u.ApiOptions.propTypes,items:a.default.arrayOf(a.default.string),categories:a.default.arrayOf(a.default.string),values:a.default.arrayOf(a.default.number),randomizeItems:a.default.bool}),m.widgetName="categorizer",m.defaultProps={items:[],categories:[],values:[],randomizeItems:!1};var v=m;t.default=v},s5yK:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-empty",severity:s.default.Severity.WARNING,selector:"math, blockMath",pattern:/^$/,message:"Empty math: don't use $$ in your markdown."});t.default=o},"s6+k":function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("05Nk")),o=r(n("vxRp")),a=r(n("lQji")),i=r(n("SIs7")),l=r(n("cCIU")),u=r(n("+Mvj")),c=r(n("pffg")),p=r(n("vV2V")),d=r(n("mU3w")),h=r(n("8N6p")),f=r(n("k+ms")),g=r(n("7QsT")),m=r(n("Rwhr")),v=r(n("Ue85")),y=r(n("psyy")),b=r(n("Ae9s")),w=r(n("s5yK")),x=r(n("RZS3")),E=r(n("t8BN")),C=r(n("iNas")),k=r(n("o9am")),O=r(n("jJak")),M=r(n("jPXw")),P=r(n("PYx6")),_=r(n("bxIm")),S=r(n("t823")),T=r(n("4CVt")),I=r(n("UCPD")),N=r(n("L7Hz")),R=r(n("EcLb")),A=r(n("oh4M")),j=[s.default,o.default,a.default,i.default,l.default,u.default,c.default,p.default,d.default,h.default,f.default,g.default,m.default,v.default,y.default,b.default,w.default,x.default,E.default,C.default,k.default,O.default,M.default,P.default,_.default,S.default,T.default,I.default,N.default,R.default,A.default];t.default=j},s9bZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=/\\+([ !#$%*,.:;\[\]\^_{|}]|[a-zA-Z]*)/g,s=[].concat(["blue","blueA","blueB","blueC","blueD","blueE","goldA","goldB","goldC","goldD","goldE","gray","grayA","grayB","grayC","grayD","grayE","grayF","grayG","grayH","grayI","green","greenA","greenB","greenC","greenD","greenE","kaBlue","kaGreen","maroonA","maroonB","maroonC","maroonD","maroonE","mintA","mintB","mintC","orange","pink","purple","purpleA","purpleB","purpleC","purpleD","purpleE","red","redA","redB","redC","redD","redE","tealA","tealB","tealC","tealD","tealE"],[" ","!","#","%","*",",",".",":",";","[","]","^","_","{","|","}","Alpha","alpha","angle","approx","arccos","arcctg","arcsin","arctan","arctg","arg","argmax","argmin","arrow","bar","barwedge","begin","Beta","beta","bf","big","Big","bigg","Bigg","bigl","Bigl","bigr","Bigr","bigstar","bigtriangledown","bigtriangleup","binom","blacklozenge","boldsymbol","Box","boxdot","boxed","bullet","cancel","cap","cdot","cdots","ce","ch","checkmark","Chi","chi","circ","circledcirc","clubsuit","colon","color","cong","cos","cosec","cosh","cot","cotg","coth","csc","ctg","cth","cup","curvearrowright","dagger","dbinom","ddots","deg","degree","delta","Delta","det","dfrac","diamond","diamondsuit","digamma","dim","displaystyle","div","dot","dots","downarrow","Downarrow","ell","end","enspace","Epsilon","epsilon","equiv","Eta","eta","exp","fbox","flat","footnotesize","frac","frown","gamma","Gamma","gcd","gcf","ge","geq","gg","gt","hat","hbox","heartsuit","hline","hom","hphantom","huge","Huge","iff","iiint","iint","implies","in","inf","infty","int","intercal","Iota","iota","it","Kappa","kappa","ker","kern","Lambda","lambda","langle","large","Large","LARGE","lcm","ldots","le","left","leftarrow","leftrightarrow","Leftrightarrow","leftrightharpoons","leftroot","leq","lfloor","lg","lim","liminf","limits","limsup","llap","ln","log","longrightarrow","Longrightarrow","lozenge","lt","lvert","mathbb","mathbf","mathbin","mathcal","mathllap","mathop","mathrm","mathsf","max","mbox","mid","min","mp","Mu","mu","nabla","ne","nearrow","neq","ngeq","ngtr","nleq","nless","normalsize","not","Nu","nu","nx","odot","oint","omega","Omega","Omicron","omicron","operatorname","oplus","oslash","otimes","overbrace","overleftarrow","overleftrightarrow","overline","overrightarrow","overset","parallel","partial","perp","phantom","phi","Phi","Pi","pi","plim","pm","Pr","prime","propto","psi","Psi","qquad","quad","raise","rangle","rfloor","Rho","rho","right","rightarrow","Rightarrow","rightleftharpoons","rvert","scriptsize","scriptstyle","searrow","sec","setminus","sh","sharp","sigma","Sigma","sim","simeq","sin","sinh","small","space","sqrt","square","stackrel","star","substack","sum","sup","swarrow","tan","tan","tanh","Tau","tau","text","textbf","textit","textrm","tfrac","tg","th","therefore","theta","Theta","thetasym","tilde","times","tiny","to","triangle","triangleleft","triangleright","underbrace","underline","underset","uparrow","uproot","Upsilon","upsilon","varDelta","varepsilon","varGamma","varkappa","varLambda","varOmega","varPhi","varphi","varpi","varPi","varPsi","varrho","varSigma","varsigma","varTheta","vartheta","varUpsilon","varXi","vdots","vec","veebar","vert","vphantom","widehat","xi","Xi","xrightarrow","Zeta","zeta","Begin","End","inte","lamba","textb"]).reduce((function(e,t){return e[t]=null,e}),{}),o={n:"\n",r:"\r",t:"\t","\\":"\\"},a=function(e){let t=0;for(;t<e.length&&"\\"===e[t];)t++;if(0===t)return 2;if(t%2==0)return 3;const n=e.substring(t);return"$"===n?1===t?4:1:s.hasOwnProperty(n)?6:0},i=function(e){let t=0,n="";for(;t<e.length;){const r=e[t];if("\\"===r){if(t+=1,t===e.length)return null;const r=e[t];if(!o.hasOwnProperty(r))return null;n+=o[r]}else n+=r;t+=1}return n},l=function(e){if(!e||e.indexOf("\\")<0)return!1;let t,n=0,s=0,o=!1,l=!1;for(r.lastIndex=0;null!==(t=r.exec(e));){const e=t[0],r=i(e);if(null==r)return!1;const u=a(e);0===u&&(o=!0);const c=a(r);0===c&&(l=!0),n+=u,s+=c}return o!==l?o:s>=n};var u={maybeUnescape:function(e){return l(e)?i(e):e},maybeUnescapeAccordingToSource:function(e,t){return l(e)?[i(e),i(t)]:[e,t]},shouldUnescape:l};t.default=u},sGBi:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("8OQS")),a=n("mR6N"),i=r(n("gmVs")),l=y(n("q1tI")),u=n("SoFn"),c=y(n("4PhQ")),p=r(n("YH1v")),d=r(n("Atlv")),h=n("OJf/"),f=r(n("uBl0")),g=y(n("HEOz"));const m=["item","children","shape","serializedState","onSerializedStateUpdated"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class b extends l.Component{constructor(e){super(e),this._handleSerializedStateUpdated=(e,t)=>{const{onSerializedStateUpdated:n}=this.props;if(n){const r=this._getSerializedState(this.props.serializedState);n((0,i.default)(r).set(e,t).freeze())}},this.rendererDataTreeMapper=(0,h.buildMapper)().setContentMapper(((e,t,n)=>this._makeContentRendererData(e,n))).setHintMapper((e=>this._makeHintRendererData(e))).setTagsMapper((e=>null)),this.getRenderersMapper=(0,h.buildMapper)().setContentMapper((e=>e.makeRenderer())).setHintMapper((e=>e.makeRenderer())).setArrayMapper(((e,t,n)=>this._annotateRendererArray(e,t,n))),this.state=this._tryMakeRendererState(this.props)}UNSAFE_componentWillReceiveProps(e){e.item!==this.props.item&&this.setState(this._tryMakeRendererState(e))}_tryMakeRendererState(e){try{return{rendererDataTree:this._makeRendererDataTree(e.item,e.shape),renderError:null}}catch(e){return c.default.error("Error building tree state",c.Errors.Internal,e),{rendererDataTree:null,renderError:e}}}_getRendererProps(){const e=this.props;return(0,o.default)(e,m)}_makeContentRendererData(e,t){const n={ref:null,makeRenderer:null},r=e=>n.ref=e,o=e=>this._findWidgets(n,e),a=e=>this._handleSerializedStateUpdated(t,e);return n.makeRenderer=()=>l.createElement(d.default,(0,s.default)({},this._getRendererProps(),e,{ref:r,findExternalWidgets:o,serializedState:this.props.serializedState?(0,i.default)(this.props.serializedState).get(t):null,onSerializedStateUpdated:a})),n}_makeHintRendererData(e){const t=e=>this._findWidgets({},e);return{hint:e,findExternalWidgets:t,ref:null,makeRenderer:()=>l.createElement(p.default,(0,s.default)({},this._getRendererProps(),{findExternalWidgets:t,hints:[e]}))}}_makeRendererDataTree(e,t){const n=(0,u.itemToTree)(e);return this.rendererDataTreeMapper.mapTree(n,t)}_findWidgets(e,t){const n=[];return this._mapRenderers((r=>{e!==r&&r.ref&&n.push.apply(n,r.ref.findInternalWidgets(t))})),n}_mapRenderers(e){const{rendererDataTree:t}=this.state;if(!t)return null;return(0,h.buildMapper)().setContentMapper(e).setHintMapper(e).mapTree(t,this.props.shape)}_scoreFromRef(e){if(!e)return null;const[t,n]=e.guessAndScore();let r;return e.getSerializedState&&(r=e.getSerializedState()),f.default.keScoreFromPerseusScore(n,t,r)}getScores(){return this._mapRenderers((e=>this._scoreFromRef(e.ref)))}score(){const e=[],t=[],n=this._mapRenderers((n=>{var r;return n.ref?(n.ref.getSerializedState&&t.push(n.ref.getSerializedState()),e.push(n.ref.score()),null==(r=n.ref)?void 0:r.getUserInput()):null})),r=e.reduce(f.default.combineScores);return f.default.keScoreFromPerseusScore(r,n,t)}_getSerializedState(e){return this._mapRenderers(((t,n,r)=>t.ref?t.ref.getSerializedState():e?(0,i.default)(e).get(r):null))}restoreSerializedState(e,t){let n=0;const r=()=>{n--,t&&0===n&&t()};this._mapRenderers(((t,s,o)=>{var a;if(!t.ref)return;const l=(0,i.default)(e).get(o);l&&(n++,null==(a=t.ref)||a.restoreSerializedState(l,r))}))}_annotateRendererArray(e,t,n){if("hint"===n.elementShape.type){const n=t;(e=[].concat(e)).firstN=e=>l.createElement(p.default,(0,s.default)({},this._getRendererProps(),{findExternalWidgets:n[0]?n[0].findExternalWidgets:void 0,hints:n.map((e=>e.hint)),hintsVisible:e}))}return e}_getRenderers(){return this.getRenderersMapper.mapTree(this.state.rendererDataTree,this.props.shape)}render(){return this.state.renderError?l.createElement("div",{className:(0,a.css)(w.error)},g.$_("Error rendering: %(error)s",{error:String(this.state.renderError)})):this.props.children({renderers:this._getRenderers()})}}const w=a.StyleSheet.create({error:{color:"red"}});var x=b;t.default=x},t823:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"widget-in-table",severity:s.default.Severity.BULK_WARNING,selector:"table widget",message:"Widget in table:\ndo not put widgets inside of tables."});t.default=o},t8BN:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"math-frac",severity:s.default.Severity.GUIDELINE,selector:"math, blockMath",pattern:/\\frac[ {]/,message:"Use \\dfrac instead of \\frac in your math expressions."});t.default=o},tDnH:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=g(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=n("j8wP"),u=r(n("uBl0")),c=g(n("+jAD")),p=r(n("fUCW")),d=r(n("Giaf")),h=n("eAf/");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const m=d.default.MovablePoint;class v extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>p.default.getUserInput.call(this),this.change=(...e)=>c.change.apply(this,e),this.movePoint=e=>{this.change({coord:e})},this._getGridConfig=e=>i.default.map(e.step,(function(t,n){return u.default.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])})),this.setupGraphie=(e,t)=>{const n=this._getGridConfig(t);e.graphInit({range:t.range,scale:i.default.pluck(n,"scale"),axisArrows:"<->",labelFormat:function(e){return"\\small{"+e+"}"},gridStep:t.gridStep,tickStep:i.default.pluck(n,"tickStep"),labelStep:1,unityLabels:i.default.pluck(n,"unityLabel")}),e.label([0,t.range[1][1]],t.labels[1],"above")},this.simpleValidate=e=>v.validate(this.getUserInput(),e)}static validate(e,t){return null==e.coord?{type:"invalid",message:null}:h.point.equal(e.coord,t.correct)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}render(){return o.createElement(d.default,{ref:"graphie",box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},o.createElement(m,{pointSize:5,coord:this.props.coord||[0,0],constraints:[m.constraints.snap(),m.constraints.bound()],onMove:this.movePoint}))}}v.propTypes=(0,s.default)({},c.propTypes,{apiOptions:l.ApiOptions.propTypes,graph:a.default.object.isRequired,coord:a.default.arrayOf(a.default.number)}),v.defaultProps={coord:null,graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}};var y={name:"example-graphie-widget",displayName:"Example Graphie Widget",hidden:!0,widget:v};t.default=y},tT4s:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("i8i4")),i=r(n("5pch")),l=n("/4Qb"),u=r(n("qoj5")),c=r(n("APgo")),p=r(n("cxY9"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}class h extends s.Component{constructor(...e){super(...e),this.onPlaceholderChange=e=>{const t=e.target.value;this.props.onChange({placeholder:t})},this.onCorrectChange=e=>{const t=i.default.map(this.props.choices,(function(t,n){return i.default.extend({},t,{correct:n===e})}));this.props.onChange({choices:t})},this.onContentChange=(e,t)=>{const n=this.props.choices.slice(),r=i.default.clone(n[e]);r.content=t.target.value,n[e]=r,this.props.onChange({choices:n})},this.addChoice=e=>{e.preventDefault();const t=this.props.choices;this.props.onChange({choices:t.concat([{content:"",correct:!1}])},this.focus.bind(this,t.length))},this.removeChoice=(e,t)=>{t.preventDefault();const n=(0,i.default)(this.props.choices).clone();n.splice(e,1),this.props.onChange({choices:n})},this.focus=e=>(a.default.findDOMNode(this.refs["editor"+e]).focus(),!0),this.serialize=()=>p.default.serialize.call(this)}render(){const e=i.default.uniqueId("perseus_dropdown_");return s.createElement("div",{className:"perseus-widget-dropdown"},s.createElement("div",{className:"dropdown-info"},"Dropdown",s.createElement(u.default,null,s.createElement("p",null,"The drop down is useful for making inequalities in a custom format. We normally use the symbols ","<",","," ",">",', ≤, ≥ (in that order) which you can copy into the choices. When possible, use the "multiple choice" answer type instead.'))),s.createElement("div",{className:"dropdown-placeholder"},s.createElement("input",{type:"text",placeholder:"Placeholder value",value:this.props.placeholder,onChange:this.onPlaceholderChange}),s.createElement(u.default,null,s.createElement("p",null,"This value will appear as the drop down default. It should give the user some indication of the values available in the drop down itself, e.g., Yes/No/Maybe."))),s.createElement("div",{className:"clearfix"}),s.createElement("ul",{className:"dropdown-choices"},this.props.choices.map((function(t,n){const r=t.correct?"correct":"incorrect";return s.createElement("li",{key:""+n},s.createElement("div",null,s.createElement("input",{ref:"radio"+n,type:"radio",name:e,checked:t.correct?"checked":"",onChange:this.onCorrectChange.bind(this,n),value:n}),s.createElement("input",{type:"text",ref:"editor"+n,onChange:this.onContentChange.bind(this,n),className:r,value:t.content}),s.createElement("a",{href:"#",className:"simple-button orange",onClick:this.removeChoice.bind(this,n)},s.createElement("span",{className:"remove-choice"},s.createElement(c.default,l.iconTrash)))))}),this)),s.createElement("div",{className:"add-choice-container"},s.createElement("a",{href:"#",className:"simple-button orange",onClick:this.addChoice},s.createElement(c.default,l.iconPlus)," Add a choice"," ")))}}h.propTypes={choices:o.default.arrayOf(o.default.shape({content:o.default.string,correct:o.default.bool})),placeholder:o.default.string},h.widgetName="dropdown",h.defaultProps={placeholder:"",choices:[{content:"",correct:!1}]};var f=h;t.default=f},uBl0:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("7BBF")),a=n("4PhQ");let i=!1;const l=/^web\+graphie:/,u=/^file\+graphie:/;const c=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,p=new RegExp(c.source+"$"),d=function(e){let t=e;return function(){let e=t;return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),(t=268435455&e)/268435456}};const h="x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){const n=[];let r,s=t.lastIndex=0;for(;r=t.exec(e);){const t=r;n.push(e.slice(s,t.index)),n.push.apply(n,t.slice(1)),s=t.index+t[0].length}return n.push(e.slice(s)),n};function f(e,t){const n=e*t,r=e,s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=Math.floor(r/s);return n<25?e:n<50?5===o?e:e/2:1===o?e/2:2===o?e/4:5===o?e/5:void 0}function g(e,t){return t/(e[1]-e[0])}function m(e,t){let n=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10));const r=t/e*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),n}const v=(e,t)=>{const n=t[1]-t[0],r=n/e;return r<=10?e:r<=20?2*e:m(n,10)};const y={UNSAFE_componentWillMount:function(){const e={};s.default.each(this.deprecatedProps,(function(t,n){s.default.has(this.props,n)&&s.default.extend(e,t(this.props))}),this),s.default.isEmpty(e)||(s.default.extend(this.props,e),setTimeout(this.props.onChange,0,e))}};function b(e,t){return"number"==typeof e&&"number"==typeof t?Math.abs(e-t)<1e-9:e===t}const w={pointerDown:!1,currentTouchIdentifier:null};function x(e){return E(e)?k(e):e}function E(e){return l.test(e)||u.test(e)}function C(e){return e.replace(l,"https:").replace(u,"file:")}function k(e){return C(e)+".svg"}const O={getWordBeforeCursor:function(e){const t=e.value,n=e.selectionStart-1,r=Math.max(t.lastIndexOf("\n",n),t.lastIndexOf(" ",n))+1;return{string:t.substring(r,n+1),pos:{start:r,end:n}}},moveCursor:function(e,t){e.selectionStart=t,e.selectionEnd=t}},M=d(4294967295&(new Date).getTime());var P={inputPathsEqual:function(e,t){return null==e||null==t?null==e==(null==t):e.length===t.length&&e.every(((e,n)=>t[n]===e))},nestedMap:function e(t,n,r){return Array.isArray(t)?s.default.map(t,(function(t){return e(t,n)})):n.call(r,t)},rWidgetRule:c,rTypeFromWidgetId:/^([a-z-]+) ([0-9]+)$/,rWidgetParts:p,snowman:"☃",noScore:{type:"points",earned:0,total:0,message:null},seededRNG:d,shuffle:function(e,t,n=!1){const r=s.default.clone(e);if(!r.length||s.default.all(r,(function(e){return s.default.isEqual(e,r[0])})))return r;let o;o="function"==typeof t?t:d(t);do{for(let e=r.length;e>0;e--){const t=Math.floor(o()*e),n=r[t];r[t]=r[e-1],r[e-1]=n}}while(n&&s.default.isEqual(e,r));return r},split:h,combineScores:function(e,t){let n;if("points"===e.type&&"points"===t.type)return n=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"points",earned:e.earned+t.earned,total:e.total+t.total,message:n};if("points"===e.type&&"invalid"===t.type)return t;if("invalid"===e.type&&"points"===t.type)return e;if("invalid"===e.type&&"invalid"===t.type)return n=e.message&&t.message&&e.message!==t.message?null:e.message||t.message,{type:"invalid",message:n};throw new a.KAError("PerseusScore with unknown type encountered",a.Errors.Internal)},keScoreFromPerseusScore:function(e,t,n){if("points"===e.type)return{empty:!1,correct:e.earned>=e.total,message:e.message,guess:t,state:n};if("invalid"===e.type)return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:t,state:n};throw new a.KAError("Invalid score type: "+e.type,a.Errors.Internal)},firstNumericalParse:function(e){let t;return o.default.predicate.createValidatorFunctional((function(e){return t=e,!0}),{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"})(e),t},stringArrayOfSize:function(e){return(0,s.default)(e).times((function(){return""}))},gridDimensionConfig:function(e,t,n,r){const s=g(t,n);return{scale:s,tickStep:e/r,unityLabel:e*s>30}},getGridStep:function(e,t,n){return(0,s.default)(2).times((function(r){const s=g(e[r],n);return f(t[r],s)}))},snapStepFromGridStep:function(e){return[e[0]/2,e[1]/2]},scaleFromExtent:g,tickStepFromExtent:function(e,t){const n=e[1]-e[0];let r;return r=15<n&&n<=20?23:n>100||n<5?10:16,m(n,r*(t/500))},gridStepFromTickStep:f,tickStepFromNumTicks:m,constrainedTickStepsFromTickSteps:function(e,t){return[v(e[0],t[0]),v(e[1],t[1])]},DeprecationMixin:y,eq:b,deepEq:function e(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}return!Array.isArray(t)&&!Array.isArray(n)&&("function"==typeof t&&"function"==typeof n?b(t,n):"function"!=typeof t&&"function"!=typeof n&&("object"==typeof t&&"object"==typeof n&&t&&n?t===n||s.default.all(t,(function(t,r){return e(n[r],t)}))&&s.default.all(n,(function(n,r){return e(t[r],n)})):!("object"==typeof t&&t||"object"==typeof n&&n)&&b(t,n)))},parseQueryString:function(e){e=e||window.location.search.substring(1);const t={},n=/\+/g,r=/([^&=]+)=?([^&]*)/g,s=function(e){return decodeURIComponent(e.replace(n," "))};let o;for(;o=r.exec(e);){const e=o;t[s(e[1])]=s(e[2])}return t},updateQueryString:function(e,t,n){n=encodeURIComponent(n);const r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),s=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+s+t+"="+n},strongEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")},widgetShouldHighlight:function(e){if(!e)return!1;switch(e.type){case"measurer":case"protractor":return!0;default:return!1}},scoreIsEmpty:function(e){return"invalid"===e.type&&(!e.message||0===e.message.length)},touchHandlers:w,resetTouchHandlers:function(){Object.assign(w,{pointerDown:!1,currentTouchIdentifier:null})},extractPointerLocation:function(e){let t;if(w.pointerDown){if(null!=w.currentTouchIdentifier){const n=e.changedTouches?e.changedTouches.length:0;for(let r=0;r<n;r++)e.changedTouches[r].identifier===w.currentTouchIdentifier&&(t=e.changedTouches[r])}else t=e;const n="touchend"===e.type||"touchcancel"===e.type;t&&n&&(w.pointerDown=!1,w.currentTouchIdentifier=null)}else w.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],w.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}},supportsPassiveEvents:()=>{try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(e){}return i},captureScratchpadTouchStart:function(e){e.stopPropagation()},getImageSize:function(e,t){const n=new Image;n.onload=function(){var e;0===n.width&&0===n.height?(null==(e=document.body)||e.appendChild(n),s.default.defer((function(){var e;t(n.clientWidth,n.clientHeight),null==(e=document.body)||e.removeChild(n)}))):t(n.width,n.height)},n.src=x(e)},getRealImageUrl:x,isLabeledSVG:E,getBaseUrl:C,getSvgUrl:k,getDataUrl:function(e){return C(e)+"-data.json"},textarea:O,unescapeMathMode:e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e,random:M};t.default=P},uN08:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("yRmI")),a=r(n("T2HF")),i=r(n("p8fL")),l=r(n("vNny")),u=n("eAf/"),c=r(n("yfnS"));const p=i.default.assert,d=i.default.normalizeOptions,h=["add","draw","remove","onMoveStart","constraints","onMove","onMoveEnd"],f={points:null,static:!1,cursor:"move",normalStyle:null,highlightStyle:null,extendLine:!1,extendRay:!1},g={visibleShape:null,mouseTarget:null},m=function(e,t,n){p(null!=e),p(null!=n),s.default.extend(this,{graphie:e,movable:t,state:{id:s.default.uniqueId("movableLine")}}),this.modify(s.default.extend({},g,n))};s.default.extend(m,o.default),i.default.createGettersFor(m,s.default.extend({},f,g)),i.default.addMovableHelperMethodsTo(m),s.default.extend(m.prototype,{cloneState:function(){return s.default.extend(this.movable.cloneState(),{coords:this.coords()},this.state)},_createDefaultState:function(){return s.default.extend({id:this.state.id},d(h,l.default.pluck(o.default,"standard")),f)},modify:function(e){this.update(s.default.extend(this._createDefaultState(),e))},update:function(e){const t=this,n=this.graphie,r=t.state=s.default.extend(t.state,d(h,e)),o=r.static?c.default.DYNAMIC:c.default.INTERACTIVE;if(r.normalStyle=s.default.extend({stroke:o,"stroke-width":2},r.normalStyle),r.highlightStyle=s.default.extend({stroke:c.default.INTERACTING,"stroke-width":3},r.highlightStyle),!r.static&&!r.mouseTarget){const e={thickness:30,mouselayer:!0,interactiveKindForTesting:"movable-line"};r.mouseTarget=new a.default(n,this.coord(0),this.coord(1),e),r.mouseTarget.attr({fill:"#000",opacity:0})}r.static&&r.mouseTarget&&(r.mouseTarget.remove(),r.mouseTarget=null),t.movable.modify(s.default.extend({},r,{mouseTarget:r.mouseTarget,add:null,modify:null,draw:t.draw.bind(t),remove:null,onMoveStart:function(){t._initialRefCoord=t.coord(0),t._prevRefCoord=t._initialRefCoord,t._totalDelta=[0,0],t._fireEvent(t.state.onMoveStart,t.coord(0),t.coord(0))},onMove:function(e,n){const r=u.vector.subtract(e,n);t._totalDelta=u.vector.add(t._totalDelta,r);let s=u.vector.add(t._initialRefCoord,t._totalDelta);s=t._applyConstraints(s,t._prevRefCoord),!1!==s&&(t._fireEvent(t.state.onMove,s,t._prevRefCoord),t._prevRefCoord=s)},onMoveEnd:function(){t._fireEvent(t.state.onMoveEnd,t._prevRefCoord,t._initialRefCoord)}})),r.added||(t.prevState={},t._fireEvent(r.add,t.cloneState(),t.prevState),r.added=!0,s.default.invoke(r.points,"listen","onMove",r.id,t.draw.bind(t)),t.prevState=t.cloneState()),t._fireEvent(r.modify,t.cloneState(),t.prevState)},coords:function(){return s.default.invoke(this.state.points,"coord")},point:function(e){return this.state.points[e]},coord:function(e){return this.point(e).coord()},remove:function(){this.state.added=!1,this._fireEvent(this.state.remove),this.points&&s.default.invoke(this.points,"unlisten","onMove",this.state.id),this.movable&&this.movable.remove()},toBack:function(){this.movable.toBack(),this.state.visibleShape&&this.state.visibleShape.toBack()},toFront:function(){this.state.visibleShape&&this.state.visibleShape.toFront(),this.movable.toFront()},isHovering:function(){return this.movable.isHovering()},isDragging:function(){return this.movable.isDragging()},mouseTarget:function(){return this.movable.mouseTarget()}});var v=m;t.default=v},uYZq:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ENABLE_FUTURE_KATEX=void 0,t.default=function({children:e}){return(0,l.isFileProtocol)(a.default.protocol),(0,u.shouldUseFutureKaTeX)(!1),e;return s.createElement(o.default,null,s.createElement(p,null,e))};var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("fXTs")),a=r(n("8Kom")),i=r(n("wF1t")),l=n("PDH5"),u=n("yBUS");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}t.ENABLE_FUTURE_KATEX=false;const p=(0,i.default)({name:"katex_future"})((({children:e,flagLoading:t,flag:n})=>(t||(0,u.shouldUseFutureKaTeX)(n),e)))},vL0m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=s?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),s=n("QESs");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}class a extends r.Component{constructor(e){super(e),this.handleRender=()=>{this.props.onRender(),this.setState({rendered:!0}),this.props.onRender(),this._hasRendered||(this._hasRendered=!0,this.props.setAssetStatus(this.props.children,!0))},this.props.setAssetStatus(this.props.children,!1),this.state={rendered:!1},this._hasRendered=!1}render(){const{TeX:e}=(0,s.getDependencies)();return r.createElement(e,{onRender:this.handleRender},this.props.children)}}t.default=a,a.defaultProps={onRender:()=>{},setAssetStatus:(e,t)=>{}}},vNny:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch"));var o={pluck:function(e,t){return s.default.object(s.default.map(e,(function(e,n){return[n,e[t]]})))},mapObject:function(e,t){const n={};return s.default.each(s.default.keys(e),(function(r){n[r]=t(e[r],r)})),n},mapObjectFromArray:function(e,t){const n={};return s.default.each(e,(function(e){n[e]=t(e)})),n}};t.default=o},vUnj:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n("mR6N"),o=h(n("q1tI")),a=r(n("5pch")),i=h(n("+jAD")),l=r(n("Atlv")),u=r(n("TBZ3")),c=h(n("UcaO")),p=n("zahm");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.state={expanded:!1},this.change=(...e)=>i.change.apply(this,e),this._onClick=()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()},this.getUserInput=()=>({}),this.simpleValidate=e=>f.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const{Link:e}=this.props.apiOptions.baseElements,{isArticle:t,isMobile:n}=this.props.apiOptions,r=this.state.expanded?this.props.hidePrompt:this.props.showPrompt;let a;const i="javascript:void(0)",u=this._onClick;a=n?o.createElement("div",{className:(0,s.css)(y.linkContainer)},o.createElement("a",{className:(0,s.css)(y.mobileExplanationLink),href:i,onClick:u,role:"button","aria-expanded":this.state.expanded},r),this.state.expanded&&o.createElement("svg",{className:(0,s.css)(y.disclosureArrow)},o.createElement("polygon",{style:{fill:v},points:`0,${m} ${g},${m} `+g/2+",0"}))):t?o.createElement("div",{className:(0,s.css)(y.linkContainer,y.articleLink)},o.createElement(e,{className:(0,s.css)(y.explanationLink),style:y.explanationLink,href:i,onClick:u,role:"button","aria-expanded":this.state.expanded},`[${r}]`)):o.createElement("div",{className:(0,s.css)(y.linkContainer,y.exerciseLink)},o.createElement(e,{className:(0,s.css)(y.explanationLink),href:i,onClick:u,role:"button","aria-expanded":this.state.expanded},`[${r}]`));const c=n?y.contentExpandedMobile:y.contentExpanded;return o.createElement("div",{className:(0,s.css)(y.container)},a,this.state.expanded&&o.createElement("div",{className:(0,s.css)(y.content,n&&y.contentMobile,this.state.expanded&&c),ref:"content"},o.createElement(l.default,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext})))}}f.defaultProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:p.linterContextDefault};const g=30,m=14,v=c.gray95,y=s.StyleSheet.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:{fontStyle:"italic",color:"#007d96"},articleLink:{fontSize:20,lineHeight:"30px"},exerciseLink:{fontSize:14,lineHeight:"19.6px"},mobileExplanationLink:{color:c.kaGreen,borderBottom:`dashed 1px ${c.kaGreen}`,textDecoration:"none",[u.default.xl]:{fontSize:22,lineHeight:1.4},[u.default.lgOrSmaller]:{fontSize:20,lineHeight:1.5},[u.default.smOrSmaller]:{fontSize:18,lineHeight:1.2}},content:{position:"relative",transition:"margin-top 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-23,paddingLeft:23,paddingBottom:10,marginBottom:m,marginTop:m},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:m},contentMobile:{background:v,marginLeft:c.negativePhoneMargin,marginRight:c.negativePhoneMargin,paddingLeft:c.phoneMargin,paddingRight:c.phoneMargin},disclosureArrow:{bottom:-(m+5),height:m,left:"50%",marginLeft:-g/2,position:"absolute",width:g}});var b={name:"explanation",displayName:"Explanation",accessible:!0,defaultAlignment:"inline",widget:f,transform:a.default.identity,isLintable:!0};t.default=b},vV2V:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"heading-sentence-case",severity:s.default.Severity.GUIDELINE,selector:"heading",pattern:/^\W*[a-z]/,message:"First letter is lowercase:\nthe first letter of a heading should be capitalized."});t.default=o},vjHw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=u(n("q1tI")),a=u(n("+jAD")),i=r(n("cxY9"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class c extends o.Component{constructor(...e){super(...e),this.focus=()=>(this.refs.input.focus(),!0),this.changeValue=e=>{this.props.onChange(e.target.value)}}render(){return o.createElement("textarea",{ref:"input",value:this.props.value||"",onChange:this.changeValue})}}class p extends o.Component{constructor(...e){super(...e),this.change=(...e)=>a.change.apply(this,e),this.focus=()=>(this.refs.input.focus(),!0),this.serialize=()=>i.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("label",null,o.createElement("div",null,"Simple markdown contents:"),o.createElement("div",null,o.createElement(c,{value:this.props.value,onChange:this.change("value"),ref:"input"}))))}}p.propTypes=(0,s.default)({},a.propTypes),p.widgetName="simple-markdown-tester",p.defaultProps={value:""};var d=p;t.default=d},vp7M:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=(r(n("5pch")),h(n("+jAD"))),l=r(n("cxY9")),u=r(n("lQTD")),c=r(n("qoj5")),p=r(n("ONox"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.change=(...e)=>i.change.apply(this,e),this.serialize=()=>l.default.serialize.call(this)}render(){const e=o.createElement(u.default,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:e=>{this.change({passageText:e.content})},showWordCount:!0}),t=o.createElement(u.default,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:e=>{this.change({footnotes:e.content})}});return o.createElement("div",{className:"perseus-widget-passage-editor"},o.createElement("div",{className:"perseus-widget-row"},o.createElement(p.default,{label:"Show line numbers",labelAlignment:"right",showLineNumbers:this.props.showLineNumbers,onChange:this.props.onChange})),o.createElement("div",null,"Passage title:",o.createElement(c.default,null,o.createElement("p",null,"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)")),o.createElement("div",null,o.createElement("input",{type:"text",defaultValue:this.props.passageTitle,onChange:e=>{this.change({passageTitle:e.target.value})}}))),o.createElement("div",null,"Passage Text:",e),o.createElement("div",null,"Footnotes:",o.createElement(c.default,null,o.createElement("p",null,"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage.")),t))}}f.propTypes=(0,s.default)({},i.propTypes,{passageTitle:a.default.string,passageText:a.default.string,footnotes:a.default.string,showLineNumbers:a.default.bool}),f.widgetName="passage",f.defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0};var g=f;t.default=g},vxRp:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=s.default.makeRule({name:"blockquoted-math",severity:s.default.Severity.WARNING,selector:"blockQuote math, blockQuote blockMath",message:"Blockquoted math:\nmath should not be indented."});t.default=o},w2H5:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=y(n("q1tI")),a=r(n("fhzG")),i=r(n("5pch")),l=n("/4Qb"),u=r(n("uBl0")),c=y(n("+jAD")),p=r(n("cxY9")),d=r(n("dRoQ")),h=r(n("lQTD")),f=r(n("qoj5")),g=r(n("APgo")),m=r(n("1SF4"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const b=[0,10],w={url:null,width:0,height:0},x=new RegExp("^(https?|web\\+graphie)://[^/]*(ka-.*.s3.amazonaws.com|(fastly|cdn).kastatic.org|khanacademy.org|kasandbox.org)"),E=["center","above","above right","right","below right","below","below left","left","above left"];var C=(0,a.default)({displayName:"ImageEditor",propTypes:(0,s.default)({},c.propTypes),statics:{widgetName:"image"},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},getDefaultProps:function(){return{title:"",range:[b,b],box:[400,400],backgroundImage:w,labels:[],alt:"",caption:""}},getInitialState:function(){return{backgroundImageError:""}},render:function(){const e=this.props.backgroundImage,t=o.createElement("div",{className:"image-settings"},o.createElement("div",null,o.createElement("label",null,o.createElement("div",null,"Alt text:",o.createElement(f.default,null,"This is important for screenreaders. The content of this alt text will be formatted as markdown (tables, emphasis, etc. are supported).")),o.createElement(h.default,{apiOptions:this.props.apiOptions,content:this.props.alt,onChange:e=>{null!=e.content&&this.change("alt",e.content)},widgetEnabled:!1}))),o.createElement("div",null,o.createElement("label",null,o.createElement("div",null,"Caption:"),o.createElement(h.default,{apiOptions:this.props.apiOptions,content:this.props.caption,onChange:e=>{null!=e.content&&this.change("caption",e.content)},widgetEnabled:!1})))),n=o.createElement("div",{className:"renderer-widget-error"},this.state.backgroundImageError);return o.createElement("div",{className:"perseus-image-editor"},o.createElement("label",null,"Image url:",o.createElement(f.default,null,"Paste an image or graphie image URL."),this.state.backgroundImageError&&n,o.createElement(d.default,{value:e.url||"",style:{width:332},onChange:e=>this.onUrlChange(e,!1)})),e.url&&t)},_renderRowForLabel:function(e,t){return o.createElement("tr",{key:t},o.createElement("td",null,o.createElement(m.default,{value:e.coordinates,onChange:this.onCoordinateChange.bind(this,t)})),o.createElement("td",{style:{verticalAlign:"bottom",width:"5px"}},o.createElement("input",{type:"text",className:"graph-settings-axis-label",value:e.content,onChange:this.onContentChange.bind(this,t)})),o.createElement("td",null,o.createElement("select",{className:"perseus-widget-dropdown",value:e.alignment,onChange:this.onAlignmentChange.bind(this,t)},E.map((function(e,t){return o.createElement("option",{key:""+t,value:e},e)}),this))),o.createElement("td",null,o.createElement("a",{href:"#",className:"simple-button orange delete-label",title:"Remove this label",onClick:this.removeLabel.bind(this,t)},o.createElement(g.default,l.iconTrash))))},change(...e){return c.change.apply(this,e)},removeLabel:function(e,t){t.preventDefault();const n=(0,i.default)(this.props.labels).clone();n.splice(e,1),this.props.onChange({labels:n})},onCoordinateChange:function(e,t){const n=this.props.labels.slice();n[e]=i.default.extend({},n[e],{coordinates:t}),this.props.onChange({labels:n})},onContentChange:function(e,t){const n=t.target.value,r=this.props.labels.slice();r[e]=i.default.extend({},r[e],{content:n}),this.props.onChange({labels:r})},onAlignmentChange:function(e,t){const n=t.target.value,r=this.props.labels.slice();r[e]=i.default.extend({},r[e],{alignment:n}),this.props.onChange({labels:r})},setUrl:function(e,t,n,r){if(!this._isMounted)return;const s=i.default.clone(this.props.backgroundImage);s.url=e,s.width=t,s.height=n;const o=[s.width,s.height];this.props.onChange({backgroundImage:s,box:o},null,r)},onUrlChange:function(e,t){x.test(e)?(this.setState({backgroundImageError:""}),this._leadingUrl=e,e?u.default.getImageSize(e,((t,n)=>{this._leadingUrl===e&&this.setUrl(e,t,n,!0)})):this.setUrl(e,0,0,t)):this.setState({backgroundImageError:"Images must be from sites hosted by Khan Academy. Please input a Khan Academy-owned address, or use the Add Image tool to rehost an existing image"})},onRangeChange:function(e,t){const n=this.props.range.slice();n[e]=t,this.props.onChange({range:n})},serialize(){return p.default.serialize.call(this)}});t.default=C},w3aw:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=p(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=p(n("+jAD")),u=r(n("2OMh"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const d=u.default.parse,h=u.default.basicOutput;class f extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.toJSON=()=>({}),this.focus=()=>(this.refs.input.focus(),!0),this.simpleValidate=e=>f.validate(this.toJSON(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const e=d(this.props.value),t=h(e);return o.createElement("div",null,t)}}f.propTypes=(0,s.default)({},l.propTypes,{value:a.default.string}),f.defaultProps={value:""};var g={name:"simple-markdown-tester",displayName:"Simple Markdown Tester",hidden:!0,widget:f,transform:i.default.identity};t.default=g},w4kA:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("fhzG")),i=r(n("i8i4")),l=r(n("5pch")),u=r(n("96rG")),c=n("j8wP"),p=r(n("NT9k")),d=r(n("yPu2"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}const f={url:null,top:0,left:0},g=(0,a.default)({displayName:"Measurer",propTypes:{apiOptions:c.ApiOptions.propTypes,box:o.default.arrayOf(o.default.number),image:o.default.shape({url:o.default.string,top:o.default.number,left:o.default.number}),showProtractor:o.default.bool,protractorX:o.default.number,protractorY:o.default.number,showRuler:o.default.bool,rulerLabel:o.default.string,rulerTicks:o.default.number,rulerPixels:o.default.number,rulerLength:o.default.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){const e=l.default.extend({},f,this.props.image);return s.createElement("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},e.url&&s.createElement("div",{style:{position:"relative",top:e.top,left:e.left}},s.createElement(d.default,{src:e.url})),s.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(e){l.default.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],(function(t){return e[t]!==this.props[t]}),this)&&this.setupGraphie()},setupGraphie:function(){const e=i.default.findDOMNode(this.refs.graphieDiv);(0,u.default)(e).empty();const t=this.graphie=p.default.createGraphie(e),n=[40,40],r=[[0,this.props.box[0]/n[0]],[0,this.props.box[1]/n[1]]];t.init({range:r,scale:n}),t.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=t.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=t.ruler({center:[(r[0][0]+r[0][1])/2,(r[1][0]+r[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(e){return g.validate(this.getUserInput(),e)},focus:u.default.noop});l.default.extend(g,{validate:function(e,t){return{type:"points",earned:1,total:1,message:null}}});var m={name:"measurer",displayName:"Measurer",widget:g,version:{major:1,minor:0},propUpgrades:{1:e=>(0,l.default)(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value()}};t.default=m},xc4a:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=r(n("p8fL")),a=r(n("vNny")),i=n("eAf/"),l=r(n("96rG"));var u=s.default.extend({transform:function(e){const t=o.default.getPrefixedTransform();this.wrapper.style[t]=e},toFront:function(){const e=this.wrapper.parentNode;e&&e.appendChild(this.wrapper)},toBack:function(){const e=this.wrapper.parentNode;e.firstChild!==this.wrapper&&e.insertBefore(this.wrapper,e.firstChild)},remove:function(){this.visibleShape.remove(),(0,l.default)(this.wrapper).remove()},getMouseTarget:function(){return this.visibleShape[0]},moveTo:function(e){const t=i.vector.subtract(this.graphie.scalePoint(e),this.graphie.scalePoint(this.initialPoint)),n=o.default.getCanUse3dTransform(),r="translateX("+t[0]+"px) translateY("+t[1]+"px)"+(n?" translateZ(0)":"");this.transform(r)},hide:function(){this.visibleShape.hide()},show:function(){this.visibleShape.show()}},a.default.mapObjectFromArray(["attr","animate"],(function(e){return function(){var t;(t=this.visibleShape)[e].apply(t,arguments)}})));t.default=u},xrPN:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("DuZ2")),a=r(n("vL0m")),i=r(n("9cGa"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}const u=(e,t)=>{const n=e.querySelector(".katex-html")||e.querySelector(".MathJax"),r={width:n.offsetWidth,height:n.offsetHeight};return{width:Math.max(t.width,r.width),height:Math.max(t.height,r.height)}};class c extends s.Component{constructor(){super(),this.handleRender=()=>{this.setState({isRendered:!0})},this.state={isRendered:!1}}render(){return s.createElement(o.default,{readyToMeasure:this.state.isRendered,computeChildBounds:u},s.createElement(i.default.Consumer,null,(({setAssetStatus:e})=>s.createElement(a.default,{onRender:this.handleRender,setAssetStatus:e},this.props.children))))}}t.default=c},y1hP:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("TSYQ")),o=n("mR6N"),a=f(n("q1tI")),i=(r(n("5pch")),n("UcaO")),l=f(n("+jAD")),u=r(n("TBZ3")),c=r(n("Atlv")),p=r(n("yPu2")),d=n("zahm");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const g=[0,10],m="block";class v extends a.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.getUserInput=()=>null,this.simpleValidate=e=>v.validate(this.getUserInput(),e),this.focus=()=>{}}render(){let e,t;const{apiOptions:n}=this.props,r=this.props.backgroundImage;if(r.url&&(e=a.createElement(p.default,{src:r.url,alt:this.props.alt,overrideAriaHidden:!0,width:r.width,height:r.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile})),this.props.alt&&(t=a.createElement("span",{className:"perseus-sr-only"},a.createElement(c.default,{content:this.props.alt,apiOptions:n,linterContext:this.props.linterContext}))),n.isMobile){let r;if(this.props.title||this.props.caption){let e=this.props.title;e&&(this.props.caption&&!/[.?!"']\s*$/.test(e)&&(e+="."),e=`**${e}** `);const t=(0,s.default)({"perseus-image-caption":!0,"has-title":!!e}),i=this.props.alignment,l="block"===i||"full-width"===i?null:"0 !important";r=a.createElement("div",{className:t},a.createElement("div",{className:(0,o.css)(y.caption),style:{minWidth:l}},a.createElement(c.default,{content:e+this.props.caption,apiOptions:n,linterContext:this.props.linterContext})))}return a.createElement("div",{className:"perseus-image-widget"},e,t,r)}let i,l;return this.props.title&&(i=a.createElement("div",{className:"perseus-image-title"},a.createElement(c.default,{content:this.props.title,apiOptions:n,linterContext:this.props.linterContext}))),this.props.caption&&(l=a.createElement("div",{className:"perseus-image-caption"},a.createElement(c.default,{content:this.props.caption,apiOptions:n,linterContext:this.props.linterContext}))),a.createElement("div",{className:"perseus-image-widget"},i,e,t,l)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}}v.defaultProps={alignment:m,title:"",range:[g,g],box:[400,400],backgroundImage:{url:null,width:0,height:0},labels:[],alt:"",caption:"",linterContext:d.linterContextDefault};const y=o.StyleSheet.create({caption:{display:"inline-block",marginTop:i.baseUnitPx,maxWidth:640,[u.default.lgOrSmaller]:{maxWidth:540},[u.default.smOrSmaller]:{maxWidth:450}}});var b={name:"image",accessible:e=>{const t=e.backgroundImage;return!(t&&t.url&&!e.alt)},defaultAlignment:m,supportedAlignments:["block","full-width"],displayName:"Image",widget:v,isLintable:!0};t.default=b},y1iu:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=r(n("17x9")),a=r(n("5pch")),i=n("j8wP"),l=r(n("lQTD")),u=n("/4Qb"),c=r(n("APgo"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}class d extends s.Component{render(){return s.createElement("a",{href:"#",className:"step-control-button simple-button simple-button--small orange",onClick:e=>{e.preventDefault(),this.props.onClick()}},s.createElement(c.default,this.props.icon))}}class h extends s.Component{constructor(...e){super(...e),this._handleEditorChange=(e,t)=>{const n=a.default.clone(this.props.json);n[e]=a.default.extend({},n[e],t),this.props.onChange({json:n})},this.serialize=()=>({json:a.default.times(this.props.json.length,(e=>this.refs["editor"+e].serialize()))}),this._handleMoveStepEarlier=e=>{if(0===e)return;const t=a.default.clone(this.props.json),n=t[e];t.splice(e,1),t.splice(e-1,0,n),this.props.onChange({json:t})},this._handleMoveStepLater=e=>{const t=a.default.clone(this.props.json);if(e+1===t.length)return;const n=t[e];t.splice(e,1),t.splice(e+1,0,n),this.props.onChange({json:t})},this._handleAddStepAfter=e=>{const t=a.default.clone(this.props.json),n=e>=0?{widgets:t[e].widgets}:{};t.splice(e+1,0,n),this.props.onChange({json:t})},this._handleRemoveStep=e=>{const t=a.default.clone(this.props.json);t.splice(e,1),this.props.onChange({json:t})}}render(){return s.createElement("div",{className:"perseus-sequence-editor"},a.default.map(this.props.json,((e,t)=>s.createElement("div",{key:t},"Step ",t+1,s.createElement("div",{style:{display:"inline-block",float:"right"}},t+1<this.props.json.length&&s.createElement(d,{icon:u.iconCircleArrowDown,onClick:()=>{this._handleMoveStepLater(t)}}),t>0&&s.createElement(d,{icon:u.iconCircleArrowUp,onClick:()=>{this._handleMoveStepEarlier(t)}}),s.createElement(d,{icon:u.iconTrash,onClick:()=>{confirm("Are you sure you want to remove step "+(t+1)+"?")&&this._handleRemoveStep(t)}}),s.createElement(d,{icon:u.iconPlus,onClick:()=>{this._handleAddStepAfter(t)}})),s.createElement(l.default,{ref:"editor"+t,apiOptions:this.props.apiOptions,content:e.content,widgets:e.widgets,images:e.images,widgetEnabled:!0,immutableWidgets:!1,onChange:a.default.partial(this._handleEditorChange,t)})))))}}h.propTypes={json:o.default.arrayOf(o.default.shape({content:o.default.string,widgets:o.default.objectOf(o.default.any),images:o.default.objectOf(o.default.any)})),apiOptions:i.ApiOptions.propTypes,onChange:o.default.func.isRequired},h.widgetName="sequence",h.defaultProps={json:[{content:"",widgets:{},images:{}}]};var f=h;t.default=f},yBUS:function(e,t,n){"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.getKaTeX=function(){return s.then((e=>e?Promise.all([n.e("katex-future").then(n.t.bind(null,"7jHV",7)),n.e("katex-future").then(n.t.bind(null,"yEDf",7))]).then((async([e])=>(await n.e("katex-future").then(n.t.bind(null,"udOi",7)),document.fonts&&document.fonts.ready&&await document.fonts.ready,e.default))):Promise.all([n.e("katex").then(n.t.bind(null,"Oy/b",7)),n.e("katex").then(n.t.bind(null,"fNIL",7))]).then((async([e])=>(await n.e("katex").then(n.t.bind(null,"L6Rs",7)),document.fonts&&document.fonts.ready&&await document.fonts.ready,e.default)))))},t.getRenderA11yString=function(){return s.then((e=>e?n.e("katex-future").then(n.t.bind(null,"ZSax",7)).then((e=>e.default)):n.e("katex").then(n.t.bind(null,"iMb8",7)).then((e=>e.default))))},t.shouldUseFutureKaTeX=function(e){false;r(e)};const s=new Promise((e=>{r=e}))},yFMX:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=h(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=h(n("+jAD")),u=r(n("cxY9")),c=r(n("dRoQ")),p=r(n("ONox"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class f extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.serialize=()=>u.default.serialize.call(this)}render(){return o.createElement("fieldset",null,o.createElement("label",null,"Name:",o.createElement(c.default,{value:this.props.name,onChange:this.change("name")})),o.createElement("label",null,"Value:",o.createElement(c.default,{value:this.props.value,onChange:this.change("value")})))}}f.propTypes=(0,s.default)({},l.propTypes,{name:a.default.string,value:a.default.string}),f.defaultProps={name:"",value:""};class g extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.handlePairChange=(e,t)=>{const n=this.props.pairs.slice();n[e]=t;const r=n[n.length-1];r.name&&r.value&&n.push({name:"",value:""}),this.change("pairs",n)},this.serialize=()=>u.default.serialize.call(this)}render(){const e=i.default.map(this.props.pairs,((e,t)=>o.createElement(f,{key:t,name:e.name,value:e.value,onChange:this.handlePairChange.bind(this,t)})));return o.createElement("div",null,e)}}g.propTypes=(0,s.default)({},l.propTypes,{pairs:a.default.arrayOf(a.default.shape({name:a.default.string,value:a.default.string})).isRequired});class m extends o.Component{constructor(...e){super(...e),this.change=(...e)=>l.change.apply(this,e),this.handleSettingsChange=e=>{this.change({settings:e.pairs})},this.serialize=()=>u.default.serialize.call(this)}render(){return o.createElement("div",null,o.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},"This widget is deprecated! ",o.createElement("br",null),"Try using the Video or CS Program widgets instead."),o.createElement("label",null,"Url or Program ID:",o.createElement(c.default,{name:"url",value:this.props.url,onChange:this.change("url")})),o.createElement("br",null),o.createElement("label",null,"Settings:",o.createElement(g,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})),o.createElement("br",null),o.createElement("label",null,"Width:",o.createElement(c.default,{name:"width",value:this.props.width,onChange:this.change("width")})),o.createElement("label",null,"Height:",o.createElement(c.default,{name:"height",value:this.props.height,onChange:this.change("height")})),o.createElement(p.default,{label:"Allow full screen",allowFullScreen:this.props.allowFullScreen,onChange:this.props.onChange}),o.createElement("br",null),o.createElement(p.default,{label:"Allow iframe content to redirect the page",allowTopNavigation:this.props.allowTopNavigation,onChange:this.props.onChange}))}}m.propTypes=(0,s.default)({},l.propTypes),m.widgetName="iframe",m.defaultProps={url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1,allowTopNavigation:!1};var v=m;t.default=v},yO7p:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("bRUr")),o=n("5pch");t.default=class{constructor(){this.previousContent=null,this.runLinter=(0,o.debounce)(((e,t)=>{"undefined"!=typeof KA&&e!==this.previousContent&&(this.previousContent=e,""!==e?fetch("/api/internal/translations/lint_poentry?preview=1&lang=en",{headers:{"Content-Type":"application/json"},body:JSON.stringify({msgid:e,msgstr:e,format:"perseus_text",filename:""}),method:"POST"}).then((e=>e.status>=400?{status:"error",message:"Could not run i18n linter."}:e.json()),(e=>({status:"error",message:"Could not run i18n linter."}))).then((e=>{"error"===e.status?t(["Some part of this text makes it untranslatable. The specific message from the i18n linter was: "+e.message.replace(/\n/g," ")]):t([])})):t([]))}),1e3)}applyLintErrors(e,t){if(t.length){const n=t.join("\n\n");e.unshift({content:{type:"text",content:""},insideTable:!1,message:n,ruleName:"legacy-error",severity:s.default.Severity.ERROR,type:"lint"})}}}},yPu2:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=r(n("TSYQ")),a=b(n("q1tI")),i=r(n("96rG")),l=r(n("5pch")),u=b(n("4PhQ")),c=r(n("Q8Wn")),p=r(n("XDp7")),d=r(n("WCF/")),h=r(n("Giaf")),f=r(n("BGgb")),g=r(n("s9bZ")),m=r(n("uBl0")),v=b(n("6mNK"));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{maybeUnescape:w}=g.default,x={},E=/^file\+graphie\:/,C=/\/([^/]+)$/;function k(e){return/\.(jpg|jpeg)$/i.test(e)}function O(){return p.default.useJIPT?"en-pt":c.default.kaLocale}function M(){return"en"!==O()}const P=[];p.default.useJIPT&&p.default.domInsertChecks.push((function(e,t,n){const r=(0,i.default)(t).data("jipt-label-index");if(t&&void 0!==r){const{label:t,useMath:n}=P[r];if(t.text(""),e=w(e),n){const n=/^\$(.*)\$$/,r=e.match(n),s=r?r[1]:"\\color{red}{\\text{Invalid Math}}";t.processMath(s,!0)}else t.processText(e);return!1}return e}));const _=/\/(?=[^/]+$)/;function S(e){return a.createElement("span",{style:{background:"url(/images/spinner.gif) no-repeat",backgroundPosition:"center",width:"100%",height:"100%",position:"absolute",minWidth:"20px"}})}class T extends a.Component{constructor(e){super(e),this.onDataLoaded=(e,t)=>{if(this._isMounted&&e.labels&&e.range){const n=e.labels.reduce(((e,t)=>(0,s.default)({},e,{[t.content]:!1})),{});this.setState({dataLoaded:!0,labelDataIsLocalized:t,labelsRendered:n,labels:e.labels,range:e.range})}},this.onImageLoad=()=>{this.sizeProvided()?this.setState({imageLoaded:!0}):m.default.getImageSize(this.props.src,((e,t)=>{this._isMounted&&this.setState({imageLoaded:!0,imageDimensions:[e,t]})}))},this.setupGraphie=(e,t)=>{l.default.map(t.labels,(t=>{if(p.default.useJIPT&&this.state.labelDataIsLocalized){const n=e.label(t.coordinates,t.content,t.alignment,!1);(0,i.default)(n).data("jipt-label-index",P.length),P.push({label:n,useMath:t.typesetAsMath})}else if(t.coordinates){const n=e.label(t.coordinates,t.content,t.alignment,t.typesetAsMath,{"font-size":100*this.props.scale+"%"}),r=n[0].style;let s=this._tryGetPixels(r.top),o=this._tryGetPixels(r.left);if(null===s||null===o){const e=n.position();s=e.top,o=e.left}const a=(this.props.height||0)*this.props.scale,i=(this.props.width||0)*this.props.scale;n.css({top:s/a*100+"%",left:o/i*100+"%"}),l.default.each(t.style,((e,t)=>{n.css(t,e)}))}this.setState({labelsRendered:(0,s.default)({},this.state.labelsRendered,{[t.content]:!0})})}))},this._handleZoomClick=e=>{((0,i.default)(e.target).width()<this.props.width||this.props.zoomToFullSizeOnMobile)&&v.ZoomService.handleZoomClick(e,this.props.zoomToFullSizeOnMobile),this.props.trackInteraction&&this.props.trackInteraction()},this.handleUpdate=e=>{this.props.onUpdate(),m.default.isLabeledSVG(this.props.src)||"loaded"!==e||this.setState({imageLoaded:!0})},e.setAssetStatus(e.src,!1),this._isMounted=!1,this.state={imageLoaded:!1,imageDimensions:null,dataLoaded:!1,labelDataIsLocalized:!1,labels:[],labelsRendered:{},range:[[0,0],[0,0]]}}componentDidMount(){this._isMounted=!0,m.default.isLabeledSVG(this.props.src)&&this.loadResources()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({imageLoaded:!1,dataLoaded:!1})}shouldComponentUpdate(e,t){if(!l.default.isEqual(this.props,e))return!0;return this.isLoadedInState(this.state)!==this.isLoadedInState(t)}componentDidUpdate(e,t){const n=this.isLoadedInState(t),r=this.isLoadedInState(this.state);m.default.isLabeledSVG(this.props.src)&&!r&&this.loadResources(),!n&&r&&this.props.setAssetStatus(this.props.src,!0)}componentWillUnmount(){this._isMounted=!1}isLoadedInState(e){return m.default.isLabeledSVG(this.props.src)?e.imageLoaded&&e.dataLoaded:e.imageLoaded}loadResources(){const e=function(e){const t=e.match(C);if(null==t)throw new u.KAError("not a valid URL",u.Errors.Internal);return t&&t[1]}(this.props.src);if(x[e])if(x[e].loaded){const{data:t,localized:n}=x[e];this.onDataLoaded(t,n)}else x[e].dataCallbacks.push(this.onDataLoaded);else{const t={loaded:!1,dataCallbacks:[this.onDataLoaded],data:null,localized:M()};x[e]=t;const n=(n,r)=>{!function(e,t){t=(0,s.default)({callbackName:"callback",success:i.default.noop,error:i.default.noop},t);const n=document.createElement("script");function r(){document.head&&document.head.removeChild(n),delete window[t.callbackName]}n.setAttribute("async",""),n.setAttribute("src",e),window[t.callbackName]=function(){r(),t.success.apply(null,arguments)},n.addEventListener("error",(function(){r(),t.error.apply(null,arguments)})),document.head&&document.head.appendChild(n)}(n,{callbackName:"svgData"+e,success:e=>{t.data=e,t.loaded=!0,l.default.each(t.dataCallbacks,(e=>{e(t.data,t.localized)}))},error:r})};M()?n(function(e){if(E.test(e))return m.default.getDataUrl(e);const[t,n]=m.default.getBaseUrl(e).split(_);return`${t}/${O()}/${n}-data.json`}(this.props.src),((e,r,s)=>{t.localized=!1,n(m.default.getDataUrl(this.props.src),((e,t,n)=>{u.default.error("Data load failed:",u.Errors.Internal,{cause:n,metadata:{dataUrl:m.default.getDataUrl(this.props.src)}})}))})):n(m.default.getDataUrl(this.props.src),((e,t,n)=>{u.default.error("Data load failed:",u.Errors.Internal,{cause:n,metadata:{dataUrl:m.default.getDataUrl(this.props.src)}})}))}}sizeProvided(){return null!=this.props.width&&null!=this.props.height}_tryGetPixels(e){return(e=e||"").endsWith("px")&&parseFloat(e)||null}render(){const e=this.props.src,t={alt:this.props.alt,title:this.props.title,tabIndex:"0"};this.props.alt&&this.props.overrideAriaHidden&&(t["aria-hidden"]=!0);const n=this.props.width&&this.props.width*this.props.scale,r=this.props.height&&this.props.height*this.props.scale,s={width:n,height:r},i=this.props.responsive&&!(!n||!r);let c;this.props.extraGraphie&&this.props.extraGraphie.labels.length&&(c=a.createElement(h.default,{box:this.props.extraGraphie.box,range:this.props.extraGraphie.range,options:{labels:this.props.extraGraphie.labels},responsive:!0,addMouseLayer:!1,setup:this.setupGraphie}));const p=void 0===this.props.preloader?S:this.props.preloader,g=p?()=>p(s):null;if(!m.default.isLabeledSVG(e)){if(i){const s=(0,o.default)({zoomable:(n||0)>700,"svg-image":!0});return t.onClick=this._handleZoomClick,a.createElement(d.default,{className:s,width:n,height:r,constrainHeight:this.props.constrainHeight,allowFullBleed:this.props.allowFullBleed&&k(e)},a.createElement(f.default,{src:e,imgProps:t,preloader:g,onUpdate:this.handleUpdate}),c)}return t.style=s,a.createElement(f.default,{src:e,preloader:g,imgProps:t,onUpdate:this.handleUpdate})}const v=m.default.getSvgUrl(e);let y;if(this.isLoadedInState(this.state)){let e;if(this.sizeProvided())e=[n,r];else{if(!this.state.imageDimensions)throw new u.KAError("image has no dimensions",u.Errors.Internal);e=[this.state.imageDimensions[0]*this.props.scale,this.state.imageDimensions[1]*this.props.scale]}const t=[40*this.props.scale,40*this.props.scale];y=a.createElement(h.default,{ref:"graphie",box:e,scale:t,range:this.state.range,options:l.default.pick(this.state,"labels"),responsive:i,addMouseLayer:!1,setup:this.setupGraphie})}return i?a.createElement(d.default,{className:"svg-image",width:n,height:r,constrainHeight:this.props.constrainHeight},a.createElement(f.default,{src:v,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:g,imgProps:t}),y,c):(t.style=s,a.createElement("div",{className:"unresponsive-svg-image",style:s},a.createElement(f.default,{src:v,onLoad:this.onImageLoad,onUpdate:this.handleUpdate,preloader:g,imgProps:t}),y))}}T.defaultProps={constrainHeight:!1,onUpdate:()=>{},responsive:!0,src:"",scale:1,zoomToFullSizeOnMobile:!1,setAssetStatus:(e,t)=>{}};var I=T;t.default=I},yRmI:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("5pch")),o=n("eAf/"),a=r(n("T2HF")),i=r(n("f3EM")),l=r(n("XwLL"));const u=function(e){const t=e.graphie.scalePoint(e.coord(0)),n=e.graphie.scalePoint(e.coord(1));return o.vector.polarDegFromCart(o.vector.subtract(n,t))[1]},c=function(e,t,n){const r=e.range[0][1]-e.range[0][0]+(e.range[1][1]-e.range[1][0]),s=e.unscaleVector(o.vector.cartFromPolarDeg([1,n])),a=o.vector.scale(o.vector.normalize(s),r),i=o.vector.add(t,a),l=o.vector.polarDegFromCart(s)[1];return e.constrainToBoundsOnAngle(i,4,l*Math.PI/180)},p=function(e,t){const n=[.75,0];let r=[[-3,4],[-2.75,2.5],[0,.25],n,[0,-.25],[-2.75,-2.5],[-3,-4]];r=s.default.map(r,(function(e){const t=o.vector.subtract(e,n),r=o.vector.scale(t,1.4);return o.vector.add(n,r)}));const a=s.default.map(r,e.unscalePoint),u={center:e.unscalePoint(n),createPath:function(e){let t="M"+e[0][0]+" "+e[0][1];for(let n=1;n<e.length;n+=3)t+="C"+e[n][0]+" "+e[n][1]+" "+e[n+1][0]+" "+e[n+1][1]+" "+e[n+2][0]+" "+e[n+2][1];return t}},p=new i.default(e,a,u);return p.attr(s.default.extend({"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":""},t)),p.toCoordAtAngle=function(t,r){const s=e.scalePoint(c(e,t,r));p.transform("translateX("+(s[0]+1.4*n[0])+"px) translateY("+(s[1]+1.4*n[1])+"px) translateZ(0) rotate("+(360-l.default.bound(r))+"deg)")},p},d={draw:function(){this.draw()},pointsToFront:function(e){s.default.invoke(e.points,"toFront")}};d.standard=[d.draw,d.pointsToFront];const h={draw:function(){this.draw()}};h.standard=[h.draw];const f={basic:function(e){const t=this.graphie;let n=this.coord(0),r=this.coord(1);if(!this.state.visibleShape){const e={thickness:10};this.state.visibleShape=new a.default(t,n,r,e),this.state.visibleShape.attr(this.normalStyle()),this.state.visibleShape.toFront(),this.mouseTarget()&&this.mouseTarget().toFront()}const o=u(this);e.extendLine?(n=c(t,n,360-o),r=c(t,r,(540-o)%360)):e.extendRay&&(r=c(t,r,360-o));const i=[this.state.visibleShape];this.mouseTarget()&&i.push(this.mouseTarget()),s.default.each(i,(function(e){e.moveTo(n,r)}))},arrows:function(e){null==this._arrows&&(this._arrows=[],e.extendLine?(this._arrows.push(p(this.graphie,this.normalStyle())),this._arrows.push(p(this.graphie,this.normalStyle()))):e.extendRay&&this._arrows.push(p(this.graphie,this.normalStyle())));const t=u(this),n=[360-t,(540-t)%360];s.default.each(this._arrows,(function(e,t){e.toCoordAtAngle(this.coord(t),n[t])}),this)},highlight:function(e,t){e.isHovering&&!t.isHovering?e.visibleShape.animate(e.highlightStyle,50):!e.isHovering&&t.isHovering&&e.visibleShape.animate(e.normalStyle,50)}};f.standard=[f.basic,f.arrows,f.highlight];const g={basic:function(){this.state.visibleShape&&this.state.visibleShape.remove()},arrows:function(){null!=this._arrows&&s.default.invoke(this._arrows,"remove"),this._arrows=null}};g.standard=[g.basic,g.arrows];const m={fixed:function(){return function(){return!1}},snap:function(e){return function(t,n){if(null===e)return!0;let r=o.vector.subtract(t,n);return e=e||this.graphie.snap,r=o.point.roundTo(r,e),o.vector.add(n,r)}},bound:function(e,t,n){return void 0===n&&(n=void 0===e?10:0),function(r,a){const i=this.graphie,l=o.vector.subtract(r,a);e=e||i.range,void 0===t&&(t=i.snap);let u=i.unscalePoint([n,i.ypixels-n]),c=i.unscalePoint([i.xpixels-n,n]);t&&(u=o.point.ceilTo(u,t),c=o.point.floorTo(c,t));const p=s.default.map(this.coords(),(function(e,t){const n=o.vector.subtract(c,e);return[o.vector.subtract(u,e),n]})),d=s.default.reduce(p,(function(e,t){const n=t[0],r=t[1];return[Math.max(n[0],Math.min(r[0],e[0])),Math.max(n[1],Math.min(r[1],e[1]))]}),l);return o.vector.add(a,d)}},standard:null},v={updatePoints:function(e,t){const n=o.vector.subtract(e,t);s.default.each(this.state.points,(function(e){e.setCoord(o.vector.add(e.coord(),n))}))},standard:null};var y={add:d,modify:h,draw:f,remove:g,onMoveStart:{standard:null},constraints:m,onMove:v,onMoveEnd:{standard:null}};t.default=y},ydm1:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),o=n("mR6N"),a=r(n("ZWnV"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}class l extends s.Component{componentWillUnmount(){this.container=null}focus(){if(this.container)return this.container.focus(),!0}toggleSelect(e){const t=this.props.value;this.props.allowEmpty?this.props.onChange(t!==e?e:null):this.props.onChange(e)}render(){const e=this.props.value,t=this.props.buttons.map(((t,n)=>s.createElement("button",{title:t.title,type:"button",id:""+n,ref:"button"+n,key:""+n,className:(0,o.css)(a.default.button.buttonStyle,t.value===e&&a.default.button.selectedStyle),onClick:()=>this.toggleSelect(t.value)},t.content||""+t.value)));return s.createElement("div",{style:{display:"inline-block"},ref:e=>this.container=e},t)}}l.defaultProps={value:null,allowEmpty:!0};var u=l;t.default=u},yfnS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={BLUE:"#6495ED",ORANGE:"#FFA500",PINK:"#FF00AF",GREEN:"#28AE7B",PURPLE:"#9D38BD",RED:"#DF0030",GRAY:"gray",BLACK:"black",LIGHT_BLUE:"#9AB8ED",LIGHT_ORANGE:"#EDD19B",LIGHT_PINK:"#ED9BD3",LIGHT_GREEN:"#9BEDCE",LIGHT_PURPLE:"#DA9BED",LIGHT_RED:"#ED9AAC",LIGHT_GRAY:"#ED9B9B",LIGHT_BLACK:"#ED9B9B",GRAY10:"#D6D6D6",GRAY20:"#CDCDCD",GRAY30:"#B3B3B3",GRAY40:"#9A9A9A",GRAY50:"#808080",GRAY60:"#666666",GRAY70:"#4D4D4D",GRAY80:"#333333",GRAY90:"#1A1A1A",BLUE_A:"#CCFAFF",BLUE_B:"#80F6FF",BLUE_C:"#63D9EA",BLUE_D:"#11ACCD",BLUE_E:"#0C7F99",TEAL_A:"#94FFF5",TEAL_B:"#26EDD5",TEAL_C:"#01D1C1",TEAL_D:"#01A995",TEAL_E:"#208170",GREEN_A:"#B6FFB0",GREEN_B:"#8AF281",GREEN_C:"#74CF70",GREEN_D:"#1FAB54",GREEN_E:"#0D923F",GOLD_A:"#FFD0A9",GOLD_B:"#FFBB71",GOLD_C:"#FF9C39",GOLD_D:"#E07D10",GOLD_E:"#A75A05",RED_A:"#FCA9A9",RED_B:"#FF8482",RED_C:"#F9685D",RED_D:"#E84D39",RED_E:"#BC2612",MAROON_A:"#FFBDE0",MAROON_B:"#FF92C6",MAROON_C:"#ED5FA6",MAROON_D:"#CA337C",MAROON_E:"#9E034E",PURPLE_A:"#DDD7FF",PURPLE_B:"#C6B9FC",PURPLE_C:"#AA87FF",PURPLE_D:"#7854AB",PURPLE_E:"#543B78",MINT_A:"#F5F9E8",MINT_B:"#EDF2DF",MINT_C:"#E0E5CC",GRAY_A:"#F6F7F7",GRAY_B:"#F0F1F2",GRAY_C:"#E3E5E6",GRAY_D:"#D6D8DA",GRAY_E:"#BABEC2",GRAY_F:"#888D93",GRAY_G:"#626569",GRAY_H:"#3B3E40",GRAY_I:"#21242C",KA_BLUE:"#314453",KA_GREEN:"#71B307",_BACKGROUND:"#FDFDFD",INTERACTING:"#71B307",INTERACTIVE:"#71B307",DYNAMIC:"#6495ED"};t.default=r},ytpR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropShadowYOffset=t.dropShadowXOffset=t.dropShadowRadius=t.dropShadowOpacity=t.bubbleBorderRadius=t.arrowWidth=t.arrowHeight=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n("hDgO"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}t.arrowWidth=18;t.arrowHeight=9;const o=parseInt(r.borderRadiusLarge);t.bubbleBorderRadius=o;t.dropShadowXOffset=0;t.dropShadowYOffset=1;t.dropShadowOpacity=.1;t.dropShadowRadius=4},z875:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=p(n("q1tI")),o=r(n("5pch")),a=p(n("+jAD")),i=r(n("2OMh")),l=r(n("fUCW")),u=p(n("HEOz"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}class d extends s.Component{constructor(...e){super(...e),this.displayName="PassageRef",this.state={lineRange:null,content:null},this.getUserInput=()=>l.default.getUserInput.call(this),this.change=(...e)=>a.change.apply(this,e),this._deferredUpdateRange=()=>{o.default.defer(this._updateRange)},this._updateRange=()=>{const e=this.props.findWidgets("passage "+this.props.passageNumber)[0];let t=null;e&&(t=e.getReference(this.props.referenceNumber)),this._isMounted&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))},this.simpleValidate=e=>d.validate(this.getUserInput(),e)}shouldComponentUpdate(e,t){return!o.default.isEqual(this.props,e)||!o.default.isEqual(this.state,t)}render(){const e=this.state.lineRange;let t,n;if(t=e?e[0]===e[1]?u.$_("line %(lineNumber)s",{lineNumber:e[0]}):u.$_("lines %(lineRange)s",{lineRange:e[0]+"–"+e[1]}):u.$_("lines %(lineRange)s",{lineRange:"?–?"}),this.props.summaryText){const e=i.default.parseInline(this.props.summaryText);n=s.createElement("span",{"aria-hidden":!0}," ","(“",i.default.basicOutput(e),"”)")}else n=null;return s.createElement("span",null,t,n,e&&s.createElement("div",{className:"perseus-sr-only"},this.state.content))}componentDidMount(){this._isMounted=!0,this._deferredUpdateRange(),this._throttledUpdateRange=o.default.throttle(this._deferredUpdateRange,500),window.addEventListener("resize",this._throttledUpdateRange)}componentDidUpdate(){this._deferredUpdateRange()}componentWillUnmount(){window.removeEventListener("resize",this._throttledUpdateRange),this._isMounted=!1}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}}d.defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};var h={name:"passage-ref",displayName:"PassageRef (SAT only)",defaultAlignment:"inline",widget:d,transform:e=>({passageNumber:e.passageNumber,referenceNumber:e.referenceNumber,summaryText:e.summaryText}),version:{major:0,minor:1}};t.default=h},zX2T:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=n("mR6N"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n("q1tI")),i=n("6OHE"),l=r(n("ncIj"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const c=o.StyleSheet.create({title:(0,s.default)({},i.typography.bodyXsmallBold,{marginBottom:6,color:i.colors.gray17}),option:{display:"flex",padding:"6px 0"},label:(0,s.default)({},i.typography.smallSubheadingMobile,{marginLeft:16,color:i.colors.gray17})});var p=({multipleAnswers:e,hideChoicesFromInstructions:t,onChange:n})=>a.createElement("div",null,a.createElement("div",{className:(0,o.css)(c.title)},"Behavior"),a.createElement("ul",null,a.createElement("li",{className:(0,o.css)(c.option)},a.createElement(l.default,{checked:e,onChange:()=>n({multipleAnswers:!e})}),a.createElement("span",{className:(0,o.css)(c.label)},"Allow multiple answers per marker")),a.createElement("li",{className:(0,o.css)(c.option)},a.createElement(l.default,{checked:t,onChange:()=>n({hideChoicesFromInstructions:!t})}),a.createElement("span",{className:(0,o.css)(c.label)},"Do not display answer choices in instructions"))));t.default=p},zahm:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.linterContextProps=t.linterContextDefault=void 0;var s=r(n("17x9"));const o=s.default.shape({contentType:s.default.string,highlightLint:s.default.bool,paths:s.default.arrayOf(s.default.string),stack:s.default.arrayOf(s.default.string)});t.linterContextProps=o;t.linterContextDefault={contentType:"",highlightLint:!1,paths:[],stack:[]}},zyiX:function(e,t,n){"use strict";var r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(n("pVnL")),o=f(n("q1tI")),a=r(n("17x9")),i=r(n("5pch")),l=r(n("96rG")),u=r(n("8Kom")),c=f(n("+jAD")),p=r(n("fUCW")),d=r(n("uBl0"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}const{updateQueryString:g}=d.default;class m extends o.Component{constructor(...e){super(...e),this.getUserInput=()=>p.default.getUserInput.call(this),this.handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(i.default.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})},this.change=(...e)=>c.change.apply(this,e),this.simpleValidate=e=>m.validate(this.getUserInput(),e)}componentDidMount(){(0,l.default)(window).on("message",this.handleMessageEvent)}componentWillUnmount(){(0,l.default)(window).off("message",this.handleMessageEvent)}render(){const e={width:String(this.props.width),height:String(this.props.height)};Object.entries(e).forEach((([t,n])=>{n.endsWith("%")||n.endsWith("px")||(e[t]=n+"px")}));let t=this.props.url;if(t&&t.length&&0!==t.indexOf("http")&&(t="https://www.khanacademy.org/computer-programming/program/"+t+"/embedded?buttons=no&embed=yes&editor=no&author=no",t=g(t,"width",this.props.width),t=g(t,"height",this.props.height),t=g(t,"origin",u.default.origin)),this.props.settings){const e={};i.default.each(this.props.settings,(function(t){t.name&&t.value&&(e[t.name]=t.value)})),t=g(t,"settings",JSON.stringify(e))}let n="allow-same-origin allow-scripts";return n+=" allow-top-navigation",o.createElement("iframe",{sandbox:"allow-same-origin allow-scripts allow-top-navigation",style:e,src:t,allowFullScreen:this.props.allowFullScreen})}}m.propTypes=(0,s.default)({},c.propTypes,{width:a.default.oneOfType([a.default.string,a.default.number]),height:a.default.oneOfType([a.default.string,a.default.number]),url:a.default.string,settings:a.default.array,status:a.default.oneOf(["incomplete","incorrect","correct"]),message:a.default.string,allowFullScreen:a.default.bool,allowTopNavigation:a.default.bool}),m.defaultProps={status:"incomplete",message:null,allowFullScreen:!1,allowTopNavigation:!1},i.default.extend(m,{validate:function(e,t){return"correct"===e.status?{type:"points",earned:1,total:1,message:e.message||null}:"incorrect"===e.status?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}});var v={name:"iframe",displayName:"Iframe",widget:m,hidden:!0};t.default=v}}]);
//# sourceMappingURL=../../sourcemaps/en/4mx8.f2ab5be8669ba5f5d103.js.map