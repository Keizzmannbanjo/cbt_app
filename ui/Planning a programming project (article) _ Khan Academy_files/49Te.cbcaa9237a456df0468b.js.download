(window.webpackJsonp=window.webpackJsonp||[]).push([["49Te"],{MGzV:function(e,t,o){"use strict";var r=o("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o("pVnL")),s=b(o("q1tI")),a=r(o("CnBM")),l=o("/MKj"),i=o("Pk2J"),d=o("4PhQ"),u=r(o("gXb0")),c=b(o("ERvh")),p=o("CL1w"),h=r(o("Jayu")),m=o("B4xi"),f=o("uMpt"),I=o("nA/X"),g=o("bHum"),v=o("cojK"),y=r(o("4Du/")),k=r(o("SfjP"));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(P=function(e){return e?o:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=P(t);if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,o&&o.set(e,r),r}const w=(0,a.default)({loader:()=>Promise.all([o.e("corelibs"),o.e("shared"),o.e("678F"),o.e("4AQu"),o.e("5CJo"),o.e("u1O4"),o.e("6zt4"),o.e("5jrH"),o.e("5O00")]).then(o.t.bind(null,"YUJH",7)),modules:["YUJH"],loading:()=>null}),x=(0,a.default)({loader:()=>Promise.all([o.e("corelibs"),o.e("shared"),o.e("678F"),o.e("4AQu"),o.e("5CJo"),o.e("1r3U"),o.e("u1O4"),o.e("7BCH")]).then(o.t.bind(null,"Zij6",7)),modules:["Zij6"],loading:()=>null}),C=(0,a.default)({loader:()=>Promise.all([o.e("corelibs"),o.e("shared"),o.e("uyB7"),o.e("678F"),o.e("4AQu"),o.e("5CJo"),o.e("u1O4"),o.e("3vwj"),o.e("5L3M"),o.e("2SNV"),o.e("1Ssk"),o.e("7lf4"),o.e("XlHi"),o.e("2a1V")]).then(o.t.bind(null,"XKch",7)),modules:["XKch"],loading:()=>null}),E=(0,a.default)({loader:()=>Promise.all([o.e("corelibs"),o.e("shared"),o.e("3Fde"),o.e("678F"),o.e("4AQu"),o.e("5CJo"),o.e("u1O4"),o.e("7qxq"),o.e("3vwj"),o.e("2SNV"),o.e("13Vt"),o.e("1Ssk"),o.e("XlHi"),o.e("4EGl")]).then(o.t.bind(null,"mVI/",7)),modules:["mVI/"],loading:()=>null});class S extends s.Component{constructor(...e){super(...e),this.state={newLevel:"unfamiliar",pointsEarned:0,correctCount:0,oldLevel:void 0,taskInfo:null},this.handleNext=()=>{const{markConversion:e,dispatch:t,location:o}=this.props;e({id:"content_modal_next"}),t({type:"NextItem",location:o})},this.handlePrev=()=>{const{markConversion:e,dispatch:t,location:o}=this.props;e({id:"content_modal_prev"}),t({type:"PrevItem",location:o})},this.closeItem=()=>{const{history:e,location:{pathname:t,queryParams:o}}=this.props;if(!e)return c.default.dispatch({type:"CloseItem"}),void this.returnFocus();const r=!!t.match(/\/(quiz|test)\//);if(o.modal||r){const r=this.getRootPathWithoutModal(),n=null!=r?r:(0,f.stripModalFromRoute)(t,o);e.push(n)}else c.default.dispatch({type:"CloseItem"});this.returnFocus()},this.handleShowQuizRelatedVideo=(e,{slug:t,contentId:o})=>{const r=e.userExercises;let n=null,s=[];for(const e of r)for(const o of e.exerciseModel.relatedVideos)if(o.nodeSlug===`v/${t}`){n=o,s=e.exerciseModel.relatedVideos;break}n&&c.default.dispatch({type:"OpenItem",modalData:{items:s,referrer:"related_videos",currentItem:n}})},this.handleUpdateProgress=e=>t=>{"InterspersedQuiz"!==e.kind&&h.default.dispatch({type:m.UPDATE_STATUS,progressKey:e.progressKey,status:t})},this.handleStartExercise=()=>{}}componentDidUpdate(e){const{onChange:t}=this.props;t&&(!e.modalData&&this.props.modalData?t(!0):e.modalData&&!this.props.modalData&&t(!1))}getRootPathWithoutModal(){const{rootUrl:e,location:t}=this.props;if(!e)return;const[o]=e.split("?"),r=t.queryParams;delete r.modal;return`${o}${(0,u.default)(r,!0)}`}returnFocus(){const{focusId:e}=this.props,t=document.getElementById(e||"");t&&t.focus()}renderModals(){if(!this.props.modalData)return null;const{hasNextItem:e,hasPrevItem:t,hostInBody:o,isOnTask:r,modalData:a,nextItem:l}=this.props,{currentItem:i,referrer:u}=a,c={key:i.slug,onClose:this.closeItem,title:i.title,hostInBody:o,isOnTask:r,navigator:{onNext:this.handleNext,onPrev:this.handlePrev,hasNext:e,hasPrev:t},nextItem:l,visible:!0,shouldAnimate:!1,shouldBackdropDismiss:()=>!0,referrer:u,linkToContent:"sat-related-content-widget"!==u},p=this.handleUpdateProgress(i);if("InterspersedQuiz"===i.kind)return s.createElement(E,(0,n.default)({},c,{extra:c,quiz:i,onNextTask:"student-assignments-table"===u?this.handleNext:()=>{}}));if("Exercise"===i.kind){const{masteryMap:e}=h.default.getState();let t=e[`e${i.contentId}`];t||(t="unfamiliar");const o=(e,o,{progressKey:r},n,s)=>{const a="Exercise"===i.kind&&i.masteryEnabled,l=(0,I.getNumCorrect)(e),d=e.length,u=l/d,c=s||(0,I.getNewLevel)(l,d,u);a&&this.setState({newLevel:c,oldLevel:t,pointsEarned:n,correctCount:l,taskInfo:o}),r&&(h.default.dispatch({type:m.UPDATE_BEST_SCORE,progressKey:r,bestScore:{numCorrect:l,numAttempted:d,completedDate:(new Date).toISOString()}}),h.default.dispatch({type:m.UPDATE_LATEST_SCORE,progressKey:r,latestScore:{numCorrect:l,numAttempted:d,completedDate:(new Date).toISOString()}}))};return s.createElement(C,(0,n.default)({},c,{key:i.slug,exercise:i,onTaskComplete:o,onCheckAnswer:e=>p(e),onNextTask:this.handleNext,showEditorShortcuts:this.props.showEditorShortcuts}))}if("Video"===i.kind){const{shouldAutoplay:e}=a,t={id:i.contentId,kind:i.kind,kaUrl:i.nodeUrl,slug:i.slug,translatedTitle:i.title,translatedYoutubeId:i.translatedYoutubeId,youtubeId:i.youtubeId,recommended:i.recommended};return s.createElement(x,(0,n.default)({},c,{attribution:i.attribution,footer:"sat-related-content-widget"===u?null:void 0,shouldAutoplay:e,topicId:i.topicId,useBackIcon:!1,video:t}))}if("Article"===i.kind)return s.createElement(w,(0,n.default)({},c,{article:i,onArticleComplete:()=>p("complete"),topicId:i.topicId,hideFooter:"sat-related-content-widget"===u}));throw new d.KAError(`unrecognized content kind ${i.kind}`,d.Errors.Internal)}render(){return s.createElement("span",null,this.renderModals())}}S.defaultProps={inPractice:!1,showEditorShortcuts:!1};var O=(0,i.compose)(k.default,y.default,(0,l.connect)(((e,t)=>{const o=(0,p.getNextItem)(e),r=(0,p.getPrevItem)(e);return(0,n.default)({},e,{hasNextItem:()=>!!o,hasPrevItem:()=>!!r,nextItem:o})})),(0,g.withConversionContext)((e=>{const{modalData:t}=e,o=(e=>e&&e.currentItem||null)(t);return o?(0,c.modalItemLearningTimeInfo)(o):Object.freeze({})})),v.withMarkConversion)(S);t.default=O}}]);
//# sourceMappingURL=../../sourcemaps/en/49Te.cbcaa9237a456df0468b.js.map