(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[409],{VNII:function(t,e,n){!function(e,o){var c;t.exports=(c=n("0ZjP"),c.enc.Utf8)}()},rWsH:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return L}));var o=n("HeVR"),c=n("MAGH"),i=n("RQNJ"),r=n("cZSR"),a=n("wHGx"),s=n("q2j6"),p=n("nO0O"),l=n("arbf"),d=n("guIr"),u=n("yZHS"),f=n.n(u),h=n("MmzY"),m=n("dkcI"),j=n("YOm9"),b=n("rB1k"),O=n.n(b),g=n("VNII"),v=n.n(g),y=n("4MtV"),x=n.n(y),w=n("CbN9"),C=n("jxKE"),I=n("l3Ny"),S=n("h2yo"),D=n("JEKa"),N=n("09TK"),k=n("zGpi"),P=N.c.div.withConfig({displayName:"styles__ColumnsStyled",componentId:"bwroa6-0"})(["display:flex;margin-top:10px;@media (max-width:","){flex-direction:column;"," justify-content:center;}"],k.f.pixels,(function(t){return t.mobileView&&Object(N.b)(["flex-direction:column-reverse;"])})),T=N.c.div.withConfig({displayName:"styles__Column",componentId:"bwroa6-1"})(["width:50%;margin-right:10px;"," "," @media (max-width:","){margin-right:0px;width:100%;}&:last-child{margin-right:0px;margin-left:10px;@media (max-width:","){margin-left:0px;}}"],(function(t){return t.width&&Object(N.b)(["width:",";"],"".concat(t.width,"%"))}),(function(t){return"0"===t.width&&Object(N.b)(["display:none;"])}),k.f.pixels,k.f.pixels),W=N.c.div.withConfig({displayName:"styles__Form",componentId:"bwroa6-2"})(["display:flex;flex-direction:row;flex:1;margin-left:5px;"]),E=N.c.div.withConfig({displayName:"styles__FormHeading",componentId:"bwroa6-3"})(["display:flex;align-items:center;"]),M=P,_={comps:[{type:"MarkdownEditor",content:{version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}},hash:"1",width:"50"},{type:"MarkdownEditor",content:{version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}},hash:"2",width:"50"}]},H=n("A3U0"),R=n("TtMJ"),F=n("rI1S"),A=n("B5dE"),U=n("c2ax");function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){Object(d.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(l.a)(t);if(e){var c=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return Object(p.a)(this,n)}}var J=[{title:"Markdown",type:"MarkdownEditor",component:S.default},{title:"Drawing",type:"MxGraphWidget",component:D.default}],L=function(t){Object(s.a)(n,t);var e=G(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,s=new Array(r),p=0;p<r;p++)s[p]=arguments[p];return t=e.call.apply(e,[this].concat(s)),Object(d.a)(Object(a.a)(t),"state",{topicInput:t.props.content.topic}),Object(d.a)(Object(a.a)(t),"compRefs",[]),Object(d.a)(Object(a.a)(t),"leftCompKey",Object(w.d)()),Object(d.a)(Object(a.a)(t),"rightCompKey",Object(w.d)()),Object(d.a)(Object(a.a)(t),"createTooltipObject",(function(t){return Object(o.jsx)(h.a,{id:t,children:t})})),Object(d.a)(Object(a.a)(t),"addWidget",(function(e,n){if(window.confirm(C.C)){var o=J.find((function(t){return t.type===e}));t.props.updateContentState((function(t){t.comps[n].type=o.type,t.comps[n].content=o.component.getComponentDefault(),t.comps[n].hash=n+1}))}})),Object(d.a)(Object(a.a)(t),"saveComponent",(function(){t.compRefs.forEach((function(t){var e;null===t||void 0===t||null===(e=t.saveComponent)||void 0===e||e.call(t)})),t.props.updateContentState((function(e){e.comps=t.props.content.comps}))})),Object(d.a)(Object(a.a)(t),"onUpdateWidth",(function(e,n){var o=parseInt(e,10)||0;t.props.updateContentState((function(t){t.comps[n].width=o.toString(),t.comps[1-n].width=(100-o).toString()}))})),Object(d.a)(Object(a.a)(t),"onUpdateTopic",(function(e){t.setState({topicInput:e})})),Object(d.a)(Object(a.a)(t),"onBlurTopic",(function(){var e=t.state.topicInput,n=/^(#{1,5}) (.*)$/g.exec(e),o=!!n&&1!==n[1].length;t.props.updateContentState((function(e){e.topic=t.state.topicInput,e.isValidTopic=o}))})),Object(d.a)(Object(a.a)(t),"setPrevDefaultWidth",Object(H.b)((function(t){t[0]&&!t[0].width&&(t[0].width="50"),t[1]&&!t[1].width&&(t[1].width="50")}))),Object(d.a)(Object(a.a)(t),"flipComps",(function(){t.leftCompKey=Object(w.d)(),t.rightCompKey=Object(w.d)(),t.compRefs.forEach((function(t){var e;null===t||void 0===t||null===(e=t.saveComponent)||void 0===e||e.call(t)})),t.props.updateContentState((function(t){t.comps.reverse()}))})),Object(d.a)(Object(a.a)(t),"copy",(function(e){var n,o;null===(n=t.compRefs[e])||void 0===n||null===(o=n.saveComponent)||void 0===o||o.call(n);var i=t.props.content.comps[e],r=(i.hash,Object(c.a)(i,["hash"])),a=O.a.encrypt(JSON.stringify({data:K(K({},r),{},{mode:"view"}),index:e,parentHash:"0"}),C.t).toString();x()(a),t.props.dispatch(I.f.copy(a))})),Object(d.a)(Object(a.a)(t),"paste",(function(e){var n=t.props.widgetsData.copiedWidget;if(n){var o=JSON.parse(O.a.decrypt(n,C.t).toString(v.a)).data;J.map((function(t){return t.type})).includes(o.type)?t.props.updateContentState((function(t){t.comps[e].type=o.type,t.comps[e].content=o.content,t.comps[e].hash=e+1}),(function(){t.compRefs[e].setState(t.props.content.comps[e].content)})):console.warn("No valid widget copied!")}})),Object(d.a)(Object(a.a)(t),"addColumnToContentSnapshot",(function(e){var n,o;return t.props.contentSnapshot?K(K({},t.props.contentSnapshot),0===e?null===(n=t.props.contentSnapshot)||void 0===n?void 0:n.leftSelections:null===(o=t.props.contentSnapshot)||void 0===o?void 0:o.rightSelections):t.props.contentSnapshot})),Object(d.a)(Object(a.a)(t),"saveWidgetUserData",(function(e){return function(n,o){t.props.saveWidgetUserData(n,K(K({},o),{},{compId:"".concat(o.compId,"_").concat(e)}))}})),Object(d.a)(Object(a.a)(t),"makeAnchorLink",(function(t){var e=(new DOMParser).parseFromString(t,"text/html").body.childNodes[0],n=document.createElement("a");n.setAttribute("href","#"+e.innerText.replace(/ /g,"-"));var o=e.innerText,c=document.createElement("span");return c.className="anchor-link",c.innerText="#",n.appendChild(c),e.appendChild(n),e.setAttribute("id",o.replace(/ /g,"-")),e})),t}return Object(r.a)(n,[{key:"shouldComponentUpdate",value:function(t){return!!t.content.comps}},{key:"updateContentState",value:function(t,e){var n=J.find((function(t){return"MxGraphWidget"===t.type})).component.getComponentDefault();this.props.content.waInstantlyOpened&&this.props.content.comps[e].content.svg===n.svg||this.props.updateContentState((function(n){n.comps[e].content=K(K({},n.comps[e].content),t)}))}},{key:"render",value:function(){var t,e,n=this,c=this.props,i=c.mode,r=c.shotId,a=c.pageId,s=c.editorPageId,p=c.authorId,l=c.collectionId,d=c.userId,u=c.widgetsData,f=c.fullScreen,h=c.toggleFullScreen,b=c.fullscreenIconToggle,O=c.showContentDiff,g=c.useDiffContentAsPrimary,v=c.showViewerOnly,y=c.hash,x=this.setPrevDefaultWidth(this.props.content.comps),w=this.props.content.topic,C=this.props.content.isValidTopic?this.makeAnchorLink(Object(U.g)(w)).outerHTML:w,I=null===(t=this.props.compForDiff)||void 0===t||null===(e=t.content)||void 0===e?void 0:e.comps;if("view"===i)return Object(o.jsxs)(o.Fragment,{children:[w&&Object(o.jsx)("span",{dangerouslySetInnerHTML:{__html:C}}),Object(o.jsx)(M,{mobileView:x.length&&"MxGraphWidget"===x[0].type&&"MarkdownEditor"===x[1].type,children:x.map((function(t,e){var c=J.find((function(e){return e.type===t.type})),u=n.addColumnToContentSnapshot(e);return t=K(K({},t),{},{content:K(K({},t.content),{},{comp_id:n.props.compId})}),Object(o.jsx)(T,{width:t.width,children:Object(o.jsx)(c.component,{isShot:!!r,mode:i,content:t.content,updateContentState:function(t){return n.updateContentState(t,e)},pageId:a,collectionId:l,authorId:p,userId:d,shotId:parseInt(r,10),fullScreen:f,toggleFullScreen:h,fullscreenIconToggle:b,editorPageId:parseInt(s,10),saveWidgetUserData:n.saveWidgetUserData(e+1),contentSnapshot:u,highlights:!0,positionedLeft:0===e,widthOfComp:x[e].width,widthOfOtherComp:x[1-e].width,compForDiff:null===I||void 0===I?void 0:I[e],showContentDiff:O,useDiffContentAsPrimary:g,isDraft:n.props.isDraft,showViewerOnly:v,className:"MxGraphWidget"===t.type?"my-0":""})},e)}))})]});if("edit"===i){var S=u.copiedWidget,D=this.createTooltipObject("Width updates will be visible in view mode.");return Object(o.jsxs)("div",{children:[!O&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"edcomp-toolbar",children:[Object(o.jsxs)(W,{className:"flex p-2",children:[Object(o.jsx)(E,{className:"flex-shrink-0 mr-2.5",children:"Heading"}),Object(o.jsx)(m.a,{placeholder:"Enter the title, use # to format H2, H3, ...",value:this.state.topicInput,onChange:function(t){n.onUpdateTopic(t.target.value)},onBlur:this.onBlurTopic})]}),x.map((function(t,e){return Object(o.jsxs)("div",{className:"flex p-2",children:[Object(o.jsxs)(W,{children:[Object(o.jsxs)(E,{className:"flex-shrink-0 mr-1",children:["Widget ",e+1]}),Object(o.jsx)(m.a,{componentClass:"select",value:x[e].type,onChange:function(t){return n.addWidget(t.target.value,e)},children:J.map((function(t){return Object(o.jsx)("option",{value:t.type,children:t.title},t.type)}))})]}),Object(o.jsxs)(W,{children:[Object(o.jsx)(E,{className:"flex-shrink-0 mr-1",children:"Width (%)"}),Object(o.jsx)(j.a,{trigger:["hover","focus"],placement:"top",overlay:D,children:Object(o.jsx)(m.a,{maxLength:2,value:x[e].width,onChange:function(t){return n.onUpdateWidth(t.target.value,e)}})})]})]},e)}))]}),Object(o.jsxs)("div",{className:"flex justify-between items-center",children:[Object(o.jsxs)("div",{className:"inline-flex",children:[Object(o.jsx)("button",{className:"icon-default rounded-full",name:"copy",onClick:function(){return n.copy(0)},children:Object(o.jsx)(R.a,{})}),Object(o.jsx)("button",{className:"icon-default rounded-full",name:"paste",disabled:!S,onClick:function(){return n.paste(0)},children:Object(o.jsx)(F.a,{})})]}),Object(o.jsxs)("button",{className:"outlined-default m-2",onClick:this.flipComps,children:["Flip Columns",Object(o.jsx)(A.a,{className:"icon-right w-5 h-5"})]}),Object(o.jsxs)("div",{className:"inline-flex",children:[Object(o.jsx)("button",{className:"icon-default rounded-full",name:"copy",onClick:function(){return n.copy(1)},children:Object(o.jsx)(R.a,{})}),Object(o.jsx)("button",{className:"icon-default rounded-full",name:"paste",disabled:!S,onClick:function(){return n.paste(1)},children:Object(o.jsx)(F.a,{})})]})]})]}),Object(o.jsx)(M,{children:x.map((function(t,e){var c=J.find((function(e){return e.type===t.type}));return Object(o.jsx)(T,{width:50,children:Object(o.jsx)(c.component,{ref:function(t){n.compRefs[e]=t},content:t.content,mode:i,updateContentState:function(t){return n.updateContentState(t,e)},shotId:parseInt(r,10),editorPageId:parseInt(s,10),dispatch:n.props.dispatch,isColumn:!0,isDraft:n.props.isDraft,pageId:a,collectionId:l,authorId:p,userId:d,config:n.props.config,fullScreen:f,toggleFullScreen:h,fullscreenIconToggle:b,showContentDiff:O,showViewerOnly:v,useDiffContentAsPrimary:g,compForDiff:null===I||void 0===I?void 0:I[e],hash:y})},e?n.rightCompKey:n.leftCompKey)}))})]})}return null}}],[{key:"getComponentDefault",value:function(){return _}}]),n}(f.a.Component);Object(d.a)(L,"defaultProps",{shotId:null,editorPageId:null,useDiffContentAsPrimary:!1})}}]);
//# sourceMappingURL=409.a63ac1d85fdeef016239.js.map