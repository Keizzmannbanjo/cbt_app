(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"+Dp1":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("guIr");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){if("Mermaid"===e.type&&null===e.content.image_id&&e.content.svgString){var t=new Blob([e.content.svgString],{type:"image/svg+xml"});return i(i({},e),{},{content:i(i({},e.content),{},{file:URL.createObjectURL(t)})})}return null}},SoYv:function(e,t,n){"use strict";n.r(t),n.d(t,"prepareToRunPageEditorAction",(function(){return J})),n.d(t,"loadWidget",(function(){return G})),n.d(t,"deleteSingleArticle",(function(){return V})),n.d(t,"savePage",(function(){return X})),n.d(t,"publishPage",(function(){return Z})),n.d(t,"saveCollectionArticle",(function(){return $})),n.d(t,"previewArticleVersionHistory",(function(){return ee})),n.d(t,"getNewsletterSubscriptions",(function(){return te})),n.d(t,"addNewsletterSubscription",(function(){return ne}));var r=n("qdK9"),a=n.n(r),i=n("guIr"),c=n("Yvim"),o=n("8SmY"),u=n("8REe"),s=n("4nXV"),l=n("5R4e"),d=n("XZhq"),p=n("OYQK"),v=n("Vgjn"),f=n("jxKE"),b=n("c2ax"),g=n("b1Wv"),h=n("BrvX"),O=n("f/QP"),m=n("71IA"),_=n("/Csh"),x=n("Q1Wz"),y=n("CbN9"),j=n("9f9G"),w=n("BMKr"),k=n("+Dp1"),S=n("XaDY"),E=n("Wi4d"),C=n("Akzs");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(i){var c,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=JSON.parse(t),e=T(T({},e),{},{content:T(T({},e.content),{},{image_id:t.image_id})}),c=t.upload_url,r.next=5,fetch(e.content.file).then((function(e){return e.blob()}));case 5:return u=r.sent,URL.revokeObjectURL(e.content.file),r.next=9,Object(o.sb)({upload_url:c,file:u});case 9:delete e.content.file,n?Object(S.D)(n,e.hash,{image_id:e.content.image_id,file:null,svgString:null}):i(s.c.updateContentState(e.hash,{image_id:e.content.image_id,file:null,svgString:null}));case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},R=function(e,t,n,r,i){return function(){var u=Object(c.a)(a.a.mark((function u(s){return a.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(){var u=Object(c.a)(a.a.mark((function c(u,l){var d;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(o.G)({author_id:e,collection_id:t,page_id:n});case 3:return d=a.sent,a.next=6,s(A(r,d,i));case 6:u(),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),l(a.t0);case 12:case"end":return a.stop()}}),c,null,[[0,9]])})));return function(e,t){return u.apply(this,arguments)}}()));case 1:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}()},I=function(e,t,n,r,i){return function(){var u=Object(c.a)(a.a.mark((function u(l){return a.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",new Promise(function(){var u=Object(c.a)(a.a.mark((function c(u,d){var p,v,f,b,g,h,O,m;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:a.prev=0,p=r,v=0;case 3:if(!(v<(null===(f=r.content)||void 0===f?void 0:f.options.length))){a.next=22;break}if((O=null===(b=r.content)||void 0===b?void 0:b.options[v]).blockType!==C.BLOCK_TYPES.IMAGE||null!==(g=O.content)&&void 0!==g&&null!==(h=g.data)&&void 0!==h&&h.image_id){a.next=19;break}if(!t||!e){a.next=12;break}return a.next=9,Object(o.G)({author_id:e,collection_id:t,page_id:n});case 9:a.t0=a.sent,a.next=15;break;case 12:return a.next=14,Object(o.y)(n);case 14:a.t0=a.sent;case 15:return m=a.t0,a.next=18,Object(E.b)(p,m,i,v,o.sb,S.D,s.c.updateContentState,l);case 18:p=a.sent;case 19:v++,a.next=3;break;case 22:u(),a.next=28;break;case 25:a.prev=25,a.t1=a.catch(0),d(a.t1);case 28:case"end":return a.stop()}}),c,null,[[0,25]])})));return function(e,t){return u.apply(this,arguments)}}()));case 1:case"end":return u.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}()},D=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(i){return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(){var r=Object(c.a)(a.a.mark((function r(c,u){var s;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(o.y)(t);case 3:return s=r.sent,r.next=6,i(A(e,s,n));case 6:c(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),u(r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e,t){return r.apply(this,arguments)}}()));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},U=function(e){return e.map((function(e){return e.content.image_id}))},L=function e(t,n){var r=0,a=t.type;switch(a){case"Image":case"Chart":case"Graph":case"Matrix":case"LinkedList":case"EducativeArray":case"BinaryTree":case"NaryTree":case"Stack":case"HashTable":case"Graphviz":case"SVGEdit":case"SVG":case"Canvas":case"MxGraphWidget":case"SequenceDiagrams":case"UML":case"Mermaid":case"MarkMap":r++}"MarkdownEditor"===a&&(r+=(t.content.mdHtml.match(/img/g)||[]).length),"Columns"===a&&t.content.comps&&t.content.comps.forEach((function(t){e(t,n)})),"CanvasAnimation"===a&&(r+=t.content.canvasObjects.length),"illustrations"in n?n.illustrations+=r:n.illustrations=r},N=function(e){var t={};return e.forEach((function(e){var n=e.type;n in t?t[n]++:t[n]=1,function(e,t){var n=0,r=0,a=0,i=e.type;if("RunJS"===i){var c,o,u,s,l=null===e||void 0===e||null===(c=e.content)||void 0===c||null===(o=c.jotted)||void 0===o?void 0:o.exercise,d=null===e||void 0===e||null===(u=e.content)||void 0===u||null===(s=u.jotted)||void 0===s?void 0:s.showSolution;l||d?r++:n++}else if("WebpackBin"===i){var p,v,f;(null===e||void 0===e||null===(p=e.content)||void 0===p||null===(v=p.codeContents)||void 0===v||null===(f=v.judge)||void 0===f?void 0:f.judgeActive)?r++:n++}else if("Code"===i)e.content.runnable?n++:e.content.judge?r++:a++;else if("TabbedCode"===i)e.content.codeContents.forEach((function(e){e.runnable?n++:e.judge?r++:a++}));else if("LiveApp"===i)n++;else if("TerminalWidget"===i)n++;else if("MarkdownEditor"===i){var b=document.createElement("div");b.innerHTML=e.content.mdHtml,a+=Array.from(b.querySelectorAll("pre")).filter((function(e){return e.querySelectorAll("code").length>0})).length}"codeExerciseCount"in t?t.codeExerciseCount+=r:t.codeExerciseCount=r,"codeRunnableCount"in t?t.codeRunnableCount+=n:t.codeRunnableCount=n,"codeSnippetCount"in t?t.codeSnippetCount+=a:t.codeSnippetCount=a}(e,t),L(e,t)})),JSON.stringify(t)},M=function(e,t,n,r,a,i){return function(c){return new Promise((function(o,l){for(var d=[],p=[],v=[],f=0;f<a.length;f++){"Image"===a[f].type||"File"===a[f].type?(v.push(a[f]),null===a[f].content.image_id&&a[f].content.file&&d.push(a[f])):Object(E.a)(a[f])&&p.push(a[f]);var b=Object(k.a)(a[f]);b&&d.push(b),a[f].content&&!a[f].content.comp_id&&(i?Object(S.D)(i,a[f].hash,(function(e){e.comp_id=Object(y.d)()})):c(s.c.updateContentState(a[f].hash,(function(e){e.comp_id=Object(y.d)()}))))}var g=[];if(d.length>0||p.length>0){c(u.b.update({status:"WAIT",text:"Uploading Files and Images"}));for(var h=0;h<d.length;h++)n?g.push(c(R(e,n,t,d[h],i))):g.push(c(D(d[h],t,i)));for(var O=0;O<p.length;O++)g.push(c(I(e,n,t,p[O],i)));Promise.all(g).then((function(){var e=U(v);o({cover_image:r,validImageIds:e})}),(function(e){console.error(e),l(e),c(u.b.update({status:"ERROR",text:"Uploading File or Image failed. Please retry"}))}))}else{var m=U(v);o({cover_image:r,validImageIds:m})}}))}},W=function(e,t,n,r){return JSON.stringify({components:t,summary:n,cover_image_id:r.image_id,cover_image_metadata:r.metadata})},J=function(e,t,n,r,i,s,l,p){var v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",f=arguments.length>9?arguments[9]:void 0;return function(){var b=Object(c.a)(a.a.mark((function c(b){var g,h;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(b(u.b.show(d.Q,{status:"WAIT",text:"Starting to Save"})),!e.file||!e.updated){a.next=20;break}return b(u.b.update({status:"WAIT",text:"Uploading Files and Images"})),a.prev=3,a.next=6,Object(o.sb)(e);case 6:return g=a.sent,(h=JSON.parse(g))&&(e.updated=!1,e.file_name=h.file_name,e.image="".concat(t,"/").concat(h.image_id),e.image_id=h.image_id),a.next=11,r(e);case 11:s(n,e,i,l,p,v,f),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(3),b(u.b.update({status:"ERROR",text:"Upload Image failed"})),console.error(a.t0);case 18:a.next=21;break;case 20:s(n,e,i,l,p,v,f);case 21:case"end":return a.stop()}}),c,null,[[3,14]])})));return function(e){return b.apply(this,arguments)}}()},B=function(e,t,n,r,a,i){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",o=arguments.length>7?arguments[7]:void 0;return function(u,l){var d=l().widgets.selectedHash;-1!==(o?o.children.filter((function(e){return e.hash===d})).length&&null!==d&&void 0!==d?d:-1:l().widgets.ids.indexOf(d))?(e((function(){return u(t(n,r,a,i,!0,c,o))})),o?Object(S.w)(o,d):u(s.c.bumpVersion())):u(t(n,r,a,i,!0,c,o))}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var a,i,c,o=r().author,u=null===o||void 0===o||null===(a=o.collectionArticle)||void 0===a?void 0:a.data,l=null===o||void 0===o||null===(i=o.proofread)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.page,d=t?null===l||void 0===l?void 0:l.components:null===u||void 0===u?void 0:u.components,p=r().widgets.ids.indexOf(e),v=null===d||void 0===d?void 0:d[p];return n(s.c.addOnExistingHash({data:v,hash:e}))}},Y=function(e,t,n,r,i){return function(){var t=Object(c.a)(a.a.mark((function t(c,s){var l,p,v,f,b,h,O,y,j,w,k,E,C,P,A,R,I,D,U,L,M,J,B,G;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(u.b.showOrUpdate(d.Q,{status:"WAIT",text:"Optimizing Article to save"})),h=s(),O=h.author,O.page.data,y=O.collection,j=h.pageSummary,w=h.widgets,k=(null===y||void 0===y||null===(l=y.instance)||void 0===l?void 0:l.details.is_plan)||(null===y||void 0===y||null===(p=y.instance)||void 0===p?void 0:p.details.is_parent_plan),E=i?Object(S.i)(i):w.ids.map((function(e){return w.entities[e]})),C=n.author_id,P=n.collection_id,A=n.page_id,t.next=7,Object(g.a)(E);case 7:if(R=t.sent,I=R.TOC,D=P&&(null===y||void 0===y||null===(v=y.instance)||void 0===v||null===(f=v.details)||void 0===f||null===(b=f.page_titles)||void 0===b?void 0:b[A]),delete(U=T({},j)).dirty,L=W(0,E,U,e),M=N(E),J=JSON.stringify(Object(m.b)(E)),c(u.b.showOrUpdate(d.Q,{status:"WAIT",text:"Saving ".concat(k?"Task":"Article")})),c(_.b.change({titleUpdated:!0})),B=e.metadata?JSON.stringify(e.metadata):"",G=U.tags?U.tags.toString():"",P){t.next=23;break}if(A){t.next=22;break}return t.abrupt("return",new Promise((function(e){return e()})));case 22:return t.abrupt("return",Object(o.db)({pageId:A,page_title:U.title,page_summary:U.description,page_table_of_content:I,page_table_of_content_is_enabled:U.pageTocEnabled,price:U.price,is_priced:U.is_priced||"false",version:U.version,tags:G,page_content_encoding:"deflate",page_content:L,cover_image_id:e.image_id,cover_image_metadata:B,widget_stats:M,feedback_email:U.feedback_email,feedback_email_2:U.feedback_email_2,concept_list:J,eTag:r}));case 23:return t.abrupt("return",new Promise((function(t,n){Object(o.bb)({authorId:C,collectionId:P,pageId:A,page_title:D,page_summary:U.description,page_table_of_content:I,price:U.price,is_priced:U.is_priced,version:U.version,tags:G,page_content_encoding:"deflate",page_content:L,cover_image_id:e.image_id,cover_image_metadata:B,widget_stats:M,concept_list:J,eTag:r}).then((function(e){"success"===(null===e||void 0===e?void 0:e.status)&&c(x.a.updateArticleTags({pageId:A,tags:G})),t()})).catch((function(e){n(e)}))})));case 24:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},K=function(e,t,n,r,i,v,g){var O=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",m=arguments.length>8?arguments[8]:void 0;return function(){var _=Object(c.a)(a.a.mark((function _(x,y){return a.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",new Promise(function(){var _=Object(c.a)(a.a.mark((function _(j,k){var E,C,P,T,A,R,I,D,U,L,N,W,J,B,G,K,H,q,Q;return a.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(C=y(),P=C.widgets,T=C.author,A=!(null===(E=T.collection.instance.details)||void 0===E||!E.allow_custom_styling_editor_side),R=n.author_id,I=n.collection_id,D=n.page_id,U=m?Object(S.i)(m):P.ids.map((function(e){return P.entities[e]})),A||!Object(b.a)(U)){_.next=6;break}return _.abrupt("return",x(u.b.update({status:"ERROR",text:"Unable to save changes due to custom styles"})));case 6:if(_.prev=6,!P.markdownDirty){_.next=30;break}return _.prev=8,_.prev=9,_.next=12,Object(b.m)(U,!1,f.wb.COLLECTION);case 12:x(s.c.resetMarkdownDirtyBit()),_.next=25;break;case 15:if(_.prev=15,_.t0=_.catch(9),!("errors"in _.t0)||!("headingTree"in _.t0)){_.next=24;break}if(L=_.t0.errors,N=_.t0.headingTree,!(null!==L&&void 0!==L?L:[]).length){_.next=22;break}return x(u.b.show(d.J,{workType:f.wb.COLLECTION,errors:L,comps:U,dispatch:x,fixHeadings:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.c)(U,L,N);case 2:t=e.sent,m?Object(S.C)(m,t):Object(b.b)(x,t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),_.abrupt("return");case 22:_.next=25;break;case 24:throw _.t0;case 25:_.next=30;break;case 27:_.prev=27,_.t1=_.catch(8),Object(w.a)(_.t1);case 30:return _.next=32,x(M(R,D,t?I:null,e,U,m));case 32:return W=_.sent,J=W.cover_image,W.validImageIds,_.next=37,x(Y(J,0,n,i||"",m));case 37:if(j({selAfterSave:U.length?U[0].hash:-1}),x(h.a.updateLastModified()),!O){_.next=42;break}return _.next=42,Object(o.S)(O,{author_id:R,collection_id:I,page_id:D,page_type:f.wb.COLLECTION},x);case 42:_.next=48;break;case 44:_.prev=44,_.t2=_.catch(6),Object(l.a)(_.t2,x),_.t2.status===p.c.AlreadyExistsException?(x(u.b.close()),x(u.b.show(d.l,{onConfirm:function(){return x(v(e,n,r,g,!1,O,m))},cancelText:"Cancel",confirmText:"Save",title:"Conflicts",description:"The content you are editing has changed. The previous changes will be overwritten. Are you sure you want to save?"}))):(Q=(null===_.t2||void 0===_.t2||null===(B=_.t2.responseJSON)||void 0===B||null===(G=B.errors)||void 0===G?void 0:G.page_title)||(null===_.t2||void 0===_.t2||null===(K=_.t2.responseJSON)||void 0===K||null===(H=K.errors)||void 0===H?void 0:H.page_summary)||(null===_.t2||void 0===_.t2||null===(q=_.t2.responseJSON)||void 0===q?void 0:q.errorText)||"Unable to Save Changes",x(u.b.update({status:"ERROR",text:Q})));case 48:r&&r();case 49:case"end":return _.stop()}}),_,null,[[6,44],[8,27],[9,15]])})));return function(e,t){return _.apply(this,arguments)}}()));case 1:case"end":return _.stop()}}),_)})));return function(e,t){return _.apply(this,arguments)}}()},H=function e(t,n,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6?arguments[6]:void 0;return function(){var b=Object(c.a)(a.a.mark((function c(b,g){var h,O,m,x,y,j,w,k,S;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return j=g(),w=j.author,k=o?null===(h=w.page.data)||void 0===h?void 0:h[v.a]:f.tb,S=(null===(O=w.collection)||void 0===O||null===(m=O.instance)||void 0===m?void 0:m.details.is_plan)||(null===(x=w.collection)||void 0===x||null===(y=x.instance)||void 0===y?void 0:y.details.is_parent_plan),a.prev=3,a.next=6,b(K(t,!1,n,r,k,e,i,d,p));case 6:b(u.b.update({status:"SUCCESS",text:"".concat(S?"Task":"Article"," Saved successfully")})),b(_.b.change({dirty:!1})),b(s.c.resetDirtyBit()),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(3),console.log(a.t0),Object(l.a)(a.t0,b),b(u.b.update({status:"ERROR",text:"Unable to Save"}));case 16:case"end":return a.stop()}}),c,null,[[3,11]])})));return function(e,t){return b.apply(this,arguments)}}()},q=function e(t,n,r,i){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6?arguments[6]:void 0;return function(){var b=Object(c.a)(a.a.mark((function c(b,g){var h,O,m,_,x,y,j,w;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return x=g(),y=x.user.info.data,j=n.page_id,w=s?null===(h=g())||void 0===h||null===(O=h.author)||void 0===O||null===(m=O.page)||void 0===m||null===(_=m.data)||void 0===_?void 0:_[v.a]:f.tb,a.next=5,b(K(t,!1,n,r,w,e,i,d,p));case 5:return b(u.b.update({status:"WAIT",text:"Publishing Article"})),a.abrupt("return",Object(o.h)(j).then((function(){b(u.b.update({status:"SUCCESS",text:"Article is now Published"})),i.push("/page/".concat(y.user_id,"/").concat(j))})).catch((function(e){console.log(e),Object(l.a)(e,b),b(u.b.update({status:"ERROR",text:"Unable to Publish"}))})));case 7:case"end":return a.stop()}}),c)})));return function(e,t){return b.apply(this,arguments)}}()},Q=function e(t,n,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",p=arguments.length>6?arguments[6]:void 0;return function(){var b=Object(c.a)(a.a.mark((function c(b,g){var h,O,m,x,y,j,w,k,S;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return j=g(),w=j.author,k=o?null===(h=w.collectionArticle.data)||void 0===h?void 0:h[v.a]:f.tb,S=(null===(O=w.collection)||void 0===O||null===(m=O.instance)||void 0===m?void 0:m.details.is_plan)||(null===(x=w.collection)||void 0===x||null===(y=x.instance)||void 0===y?void 0:y.details.is_parent_plan),a.prev=3,a.next=6,b(K(t,!0,n,r,k,e,i,d,p));case 6:b(u.b.update({status:"SUCCESS",text:"".concat(S?"Task":"Article"," Saved successfully")})),b(_.b.change({dirty:!1})),b(s.c.resetDirtyBit()),a.next=16;break;case 11:a.prev=11,a.t0=a.catch(3),console.log(a.t0),Object(l.a)(a.t0,b),b(u.b.update({status:"ERROR",text:"Unable to Save"}));case 16:case"end":return a.stop()}}),c,null,[[3,11]])})));return function(e,t){return b.apply(this,arguments)}}()},V=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,a){return r(u.b.show(d.Q,{status:"WAIT",text:"Deleting Article"})),Object(o.r)(e).then((function(){r(u.b.update({status:"SUCCESS",text:"Article deleted"})),r(O.a.delete(e)),n&&t.push({pathname:"/teach",query:{isDeleted:!0}},"/teach")})).catch((function(e){console.log(e),Object(l.a)(e,r),r(u.b.update({status:"ERROR",text:"Unable to Delete"}))}))}},z=function e(t,n,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6?arguments[6]:void 0;return function(){var b=Object(c.a)(a.a.mark((function c(b,g){var h,O,m,x,y,j,w,k,S,E,C,P,T;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return j=n.author_id,w=n.collection_id,k=n.page_id,S=g(),E=S.author,C=o?null===(h=E.collectionArticle.data)||void 0===h?void 0:h[v.a]:f.tb,P=(null===(O=E.collection)||void 0===O||null===(m=O.instance)||void 0===m?void 0:m.details.is_plan)||(null===(x=E.collection)||void 0===x||null===(y=x.instance)||void 0===y?void 0:y.details.is_parent_plan),T=P?"Task":"Article",a.prev=5,a.next=8,b(K(t,!0,n,r,C,e,i,d,p));case 8:b(u.b.update({status:"SUCCESS",text:"".concat(T," saved successfully!")})),b(_.b.change({dirty:!1})),b(s.c.resetDirtyBit()),F(j,w,k,i),a.next=19;break;case 14:a.prev=14,a.t0=a.catch(5),console.log(a.t0),Object(l.a)(a.t0,b),b(u.b.update({status:"ERROR",text:"Unable to save the ".concat(T)}));case 19:case"end":return a.stop()}}),c,null,[[5,14]])})));return function(e,t){return b.apply(this,arguments)}}()},F=function(e,t,n,r){r.push("/collection/page/".concat(e,"/").concat(t,"/").concat(n,"/versions"))},X=function(e,t,n,r,a,i,c){return B(e,H,t,n,r,a,i,c)},Z=function(e,t,n,r,a,i,c){return B(e,q,t,n,r,a,i,c)},$=function(e,t,n,r,a,i,c){return B(e,Q,t,n,r,a,i,c)},ee=function(e,t,n,r,a,i,c){return B(e,z,t,n,r,a,i,c)},te=function(e){return Object(j.a)({url:"/api/user/newsletter/".concat(e),type:"GET"})},ne=function(e,t,n){var r=void 0;return t&&n&&(r={full_name:t,email:n}),Object(j.a)({url:"/api/user/newsletter/".concat(e),type:"POST",data:r})}},Wi4d:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("qdK9"),a=n.n(r),i=n("guIr"),c=n("Yvim"),o=n("Akzs");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){return"Permutation"===e.type&&e.content.options.some((function(e){var t,n;return e.blockType===o.BLOCK_TYPES.IMAGE&&!(null!==(t=e.content)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.image_id)}))},d=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,i,c,u,l,d){var p,v,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=JSON.parse(n),t=s(s({},t),{},{content:s(s({},t.content),{},{options:t.content.options.map((function(e,t){return e.blockType===o.BLOCK_TYPES.IMAGE&&t===i?s(s({},e),{},{content:s(s({},e.content),{},{data:s(s({},e.content.data),{},{image_id:p.image_id})})}):e}))})}),v=p.upload_url,e.next=5,fetch(t.content.options[i].content.data.file).then((function(e){return e.blob()}));case 5:return f=e.sent,URL.revokeObjectURL(t.content.options[i].content.data.file),e.next=9,c({upload_url:v,file:f});case 9:return delete t.content.options[i].content.data.file,b=t.content.options.map((function(e,t){return e.blockType===o.BLOCK_TYPES.IMAGE&&t===i?s(s({},e),{},{content:s(s({},e.content),{},{data:s(s({},e.content.data),{},{image_id:p.image_id,file:null})})}):e})),r?u(r,t.hash,{options:b}):d(l(t.hash,{options:b})),e.abrupt("return",s(s({},t),{},{content:s(s({},t.content),{},{options:b})}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,a,i,c,o,u){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=02b33b0141bde853d1b87e9f5f7d951b7882ce74.241c179c2d1337036c65.js.map